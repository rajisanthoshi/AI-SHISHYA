import{r as t,c as i,h as o,g as s}from"./p-123acab3.js";import{I as e}from"./p-f1c4e2a0.js";const l="data-search-value",n=class{constructor(s){t(this,s),this.optionSelected=i(this,"optionSelected",7),this.valueChange=i(this,"valueChange",7),this.classBySize=new Map([["medium","medium"],["large","large"]]),this.displayNoResults=()=>{var t,i,o;return this.showNoResultsFoundMessage&&this.hasFocus&&!(null===(t=this.visibleOptions)||void 0===t?void 0:t.length)&&!(null===(i=this.visibleCustomOptions)||void 0===i?void 0:i.length)&&(null===(o=this.value)||void 0===o?void 0:o.length)>0},this.displayOptions=()=>{var t;return this.hasFocus&&(null===(t=this.value)||void 0===t?void 0:t.length)>0&&!this.disabled},this.handleCustomOptionClick=t=>{const i=t.getAttribute(l),o=t.getAttribute("data-id");this.handleSearchChange(i),this.hasFocus=!1,this.optionSelected.emit(o)},this.handleOptionClick=t=>{this.handleSearchChange(t.value),this.hasFocus=!1,this.optionSelected.emit(t.id)},this.handleSearchChange=t=>{this.updateVisibleOptions(t),this.updateVisibleCustomOptions(t),this.value=t,this.valueChange.emit(t)},this.handleTextInputValueChange=t=>{t.stopPropagation(),this.handleSearchChange(t.detail)},this.updateVisibleCustomOptions=t=>{var i,o;const s=null===(i=this.el.shadowRoot)||void 0===i?void 0:i.querySelector("slot");s&&"function"==typeof s.assignedNodes&&(this.customOptions=s.assignedNodes().filter((t=>"#text"!==t.nodeName)),t&&0!==t.length?(this.visibleCustomOptions=null===(o=this.customOptions)||void 0===o?void 0:o.filter((i=>i.getAttribute(l).toLowerCase().includes(t.toLowerCase()))),this.containsSlottedElements=this.customOptions.length>0):this.visibleCustomOptions=this.customOptions)},this.updateVisibleOptions=t=>{var i;this.visibleOptions=t&&0!==t.length?null===(i=this.options)||void 0===i?void 0:i.filter((i=>i.value.toLowerCase().includes(t.toLowerCase()))):this.options},this.CustomOptionsSlot=()=>o("div",{style:{display:"none"}},o("slot",{onSlotchange:()=>this.updateVisibleCustomOptions(this.value)})),this.TextInput=()=>o("modus-text-input",{clearable:this.clearable,errorText:this.hasFocus?"":this.errorText,includeSearchIcon:this.includeSearchIcon,label:this.label,onValueChange:t=>this.handleTextInputValueChange(t),placeholder:this.placeholder,required:this.required,size:this.size,value:this.value}),this.ariaLabel=void 0,this.clearable=!1,this.disabled=void 0,this.dropdownMaxHeight="300px",this.dropdownZIndex="1",this.errorText=void 0,this.includeSearchIcon=!0,this.label=void 0,this.noResultsFoundText="No results found",this.noResultsFoundSubtext="Check spelling or try a different keyword",this.options=void 0,this.placeholder=void 0,this.readOnly=void 0,this.required=void 0,this.showNoResultsFoundMessage=!0,this.size="medium",this.value=void 0,this.containsSlottedElements=!1,this.hasFocus=!1,this.visibleOptions=[],this.customOptions=[],this.visibleCustomOptions=[]}watchOptions(){this.convertOptions(),this.updateVisibleOptions(this.value)}componentWillLoad(){this.convertOptions(),this.value?this.updateVisibleOptions(this.value):this.visibleOptions=this.options}componentDidLoad(){this.updateVisibleCustomOptions(this.value)}outsideElementClickHandler(t){this.el===t.target&&this.el.contains(t.target)||(this.hasFocus=!1)}convertOptions(){var t;this.options&&this.options.length>0&&"string"==typeof this.options[0]&&(this.options=null===(t=this.options)||void 0===t?void 0:t.map((t=>({id:t,value:t}))))}render(){var t,i;const s=`autocomplete ${this.classBySize.get(this.size)}`;return o("div",{"aria-disabled":this.disabled?"true":void 0,"aria-invalid":!!this.errorText,"aria-label":this.ariaLabel,"aria-readonly":this.readOnly,"aria-required":this.required,class:s,onFocusin:()=>this.hasFocus=!0},this.TextInput(),o("div",{class:"options-container",style:{maxHeight:this.dropdownMaxHeight,zIndex:this.dropdownZIndex,overflowY:"auto"}},o("ul",null,this.displayOptions()&&(null===(t=this.visibleOptions)||void 0===t?void 0:t.map((t=>o("li",{class:"text-option",onClick:()=>this.handleOptionClick(t)},t.value)))),this.displayOptions()&&(null===(i=this.visibleCustomOptions)||void 0===i?void 0:i.map((t=>o("li",{class:"custom-option",onClick:()=>this.handleCustomOptionClick(t),innerHTML:t.outerHTML}))))),this.displayNoResults()&&o(r,{text:this.noResultsFoundText,subtext:this.noResultsFoundSubtext})),this.CustomOptionsSlot())}get el(){return s(this)}static get watchers(){return{options:["watchOptions"]}}},r=t=>o("div",{class:"no-results"},o("div",{style:{display:"flex"}},o(e,{size:"28px"}),o("div",{class:"message"},t.text)),o("div",{class:"subtext"},t.subtext));n.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.autocomplete{position:relative}.autocomplete ul{list-style-type:none;margin:0;padding:0}.autocomplete .options-container{background-color:var(--modus-list-item-bg, #fff);box-shadow:0 0 4px rgba(36, 35, 45, 0.3);font-family:"Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";margin:0;padding:0;position:absolute;width:100%}.autocomplete .options-container .text-option{align-items:center;border:1px solid var(--modus-list-item-border-color, #e0e1e9);color:var(--modus-list-item-color, #252a2e);cursor:pointer;display:flex;flex-direction:row;font-size:0.75rem;min-height:2rem;padding:0 8px}.autocomplete .options-container .text-option:hover{background-color:var(--modus-list-item-hover-bg, #e0e1e9)}.autocomplete .options-container .custom-option{border:1px solid var(--modus-list-item-border-color, #e0e1e9);cursor:pointer}.autocomplete .options-container .custom-option:hover{background-color:var(--modus-list-item-hover-bg, #e0e1e9)}.autocomplete .options-container .no-results{align-items:center;border:1px solid var(--modus-list-item-border-color, #e0e1e9);display:flex;flex-direction:column;height:100px;justify-content:center}.autocomplete .options-container .no-results path{fill:var(--modus-autocomplete-no-results-message-color, #252a2e)}.autocomplete .options-container .no-results .message{color:var(--modus-autocomplete-no-results-message-color, #252a2e);font-size:1.25rem;font-weight:600;margin:0 0 0.375rem 0.25rem}.autocomplete .options-container .no-results .subtext{color:var(--modus-autocomplete-no-results-subtext-color, #252a2e);font-size:0.875rem}.autocomplete.large .options-container>.text-option{font-size:0.875rem;min-height:3rem}';export{n as modus_autocomplete}