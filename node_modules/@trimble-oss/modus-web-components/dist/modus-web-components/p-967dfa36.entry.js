import{h as o,r as t,c as e,g as i}from"./p-123acab3.js";import{I as s}from"./p-300164d5.js";const n=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(","),r=function(o,t){for(let e=0;e<o.length;e++)if(o[e].checked&&o[e].form===t)return o[e]},d=function(o){const t=[],e=[];return o.getAttributeNode?(Array.from(o.querySelectorAll(n)).forEach(((o,i)=>{const s=function(o){const t=parseInt(o.getAttribute("tabindex"),10);return Number.isNaN(t)?/^(AUDIO|VIDEO|DETAILS)$/.test(o.tagName)?0:o.tabIndex:t}(o);-1!==s&&function(o){return!(o.disabled||"true"===o.ariaHidden||"INPUT"===o.tagName&&"hidden"===o.type||function(o){if("INPUT"!==o.tagName||"radio"!==o.type)return!1;if(!o.name)return!1;const t=o.ownerDocument.querySelectorAll('input[type="radio"][name="'+o.name+'"]'),e=r(t,o.form);return!(!e||e===o)}(o))}(o)&&(0===s?t.push(o):e.push({documentOrder:i,tabIndex:s,node:o}))})),e.sort(((o,t)=>o.tabIndex===t.tabIndex?o.documentOrder-t.documentOrder:o.tabIndex-t.tabIndex)).map((o=>o.node)).concat(t)):[]},a=({id:t,ref:e,onFocus:i})=>o("div",{id:t,ref:e,tabindex:"0","aria-hidden":"true",onFocus:o=>i&&i(o)});class l{constructor(o,t){this.tababbleNodes=[],o&&(this.tababbleNodes=d(o)),this.startWrap=t}onStartWrapFocus(){var o;(null===(o=this.tababbleNodes)||void 0===o?void 0:o.length)&&this.tababbleNodes[0].focus()}onEndWrapFocus(){this.startWrap.focus()}}const h=class{constructor(o){t(this,o),this.closed=e(this,"closed",7),this.opened=e(this,"opened",7),this.primaryButtonClick=e(this,"primaryButtonClick",7),this.secondaryButtonClick=e(this,"secondaryButtonClick",7),this.ignoreOverlayClick=!1,this.ariaLabel=void 0,this.headerText=void 0,this.primaryButtonAriaLabel=void 0,this.primaryButtonDisabled=void 0,this.primaryButtonText=void 0,this.secondaryButtonAriaLabel=void 0,this.secondaryButtonDisabled=void 0,this.secondaryButtonText=void 0,this.zIndex="1",this.backdrop="default",this.visible=void 0}async close(){return this.visible=!1,this.closed.emit(),Promise.resolve()}async open(){return this.visible=!0,this.opened.emit(),Promise.resolve()}handleModalContentMouseDown(){this.ignoreOverlayClick=!0}documentKeyHandler(o){"ESCAPE"===o.code.toUpperCase()&&this.close()}handleOverlayClick(o){switch(this.backdrop){case"static":return;case"default":if(this.ignoreOverlayClick||!o.target.classList.contains("overlay"))return void(this.ignoreOverlayClick=!1);this.close()}}handleEnterKeydown(o,t){"Enter"===o.code&&t()}handleCloseKeydown(o){this.handleEnterKeydown(o,(()=>this.close()))}handlePrimaryKeydown(o){this.handleEnterKeydown(o,(()=>this.primaryButtonClick.emit()))}handleSecondaryKeydown(o){this.handleEnterKeydown(o,(()=>this.secondaryButtonClick.emit()))}componentDidRender(){this.modalContentRef&&this.startTrapRef&&(this.focusWrapping=new l(this.modalContentRef,this.startTrapRef))}renderModal(){return o("div",{class:"content",ref:o=>this.modalContentRef=o,onMouseDown:()=>this.handleModalContentMouseDown()},o(a,{id:"startTrap",ref:o=>this.startTrapRef=o,onFocus:()=>{var o;return null===(o=this.focusWrapping)||void 0===o?void 0:o.onStartWrapFocus()}}),this.renderModalHeader(),o("div",{class:"body"},o("slot",null)),this.renderModalFooter(),o(a,{id:"endTrap",onFocus:()=>{var o;return null===(o=this.focusWrapping)||void 0===o?void 0:o.onEndWrapFocus()}}))}renderModalHeader(){return o("div",{class:"header"},this.headerText,o("div",{role:"button",tabindex:0,"aria-label":"Close",onClick:()=>this.close(),onKeyDown:o=>this.handleCloseKeydown(o)},o(s,{size:"20"})))}renderModalFooter(){return o("div",{class:"footer"},this.secondaryButtonText&&o("modus-button",{disabled:this.secondaryButtonDisabled,"button-style":"outline",color:"secondary",ariaLabel:this.secondaryButtonAriaLabel,onButtonClick:()=>this.secondaryButtonClick.emit(),onKeyDown:o=>this.handlePrimaryKeydown(o)},this.secondaryButtonText),this.primaryButtonText&&o("modus-button",{disabled:this.primaryButtonDisabled,color:"primary",ariaLabel:this.primaryButtonAriaLabel,onButtonClick:()=>this.primaryButtonClick.emit(),onKeyDown:o=>this.handleSecondaryKeydown(o)},this.primaryButtonText))}render(){return o("div",{"aria-hidden":this.closed,"aria-label":this.ariaLabel,class:"modus-modal overlay "+(this.visible?"visible":"hidden"),onClick:o=>this.handleOverlayClick(o),role:"dialog",style:{zIndex:this.zIndex}},this.renderModal())}get el(){return i(this)}};h.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.modus-modal{align-items:center;background-color:var(--modus-modal-backdrop-bg, #252a2ebf);font-size:0.875rem;height:100%;justify-content:center;left:0;overflow:auto;position:fixed;top:0;width:100%}.modus-modal.visible{display:inline-flex}.modus-modal.hidden{display:none}.modus-modal .content{background-color:var(--modus-modal-bg, #fff);border:1px solid var(--modus-modal-border-color, rgba(0, 0, 0, 0.2));border-radius:0.125rem;color:var(--modus-modal-color, #252a2e);display:flex;fill:var(--modus-modal-color, #252a2e);flex-direction:column;justify-content:center;max-width:650px;min-width:300px;outline:0}.modus-modal .content .header{align-items:center;border-bottom:1px solid var(--modus-modal-divider-color, #e0e1e9);display:flex;font-size:1rem;font-weight:600;height:64px;justify-content:space-between;padding:0 1rem}.modus-modal .content .header .icon-close{cursor:pointer}.modus-modal .content .header .icon-close path{fill:var(--modus-modal-close-color, #252a2e)}.modus-modal .content .header .icon-close:hover path{opacity:var(--modus-modal-close-hover-opacity, 0.75)}.modus-modal .content .body{height:auto;padding:1rem}.modus-modal .content .footer{align-items:center;border-top:1px solid var(--modus-modal-divider-color, #e0e1e9);display:flex;height:64px;justify-content:flex-end;padding:0 1rem}.modus-modal .content .footer modus-button:first-of-type{margin:0 0.5rem}';export{h as modus_modal}