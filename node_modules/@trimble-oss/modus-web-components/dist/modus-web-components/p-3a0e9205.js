const t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=t.map((t=>t.substring(0,3)));function n(t){return t<10?`0${t}`:t.toString()}const r={mmmm:{regex:`(${t.join("|")})`,type:"month"},mmm:{regex:`(${e.join("|")})`,type:"month"},mm:{regex:"(1[0-2]|0?[1-9])",type:"month"},m:{regex:"(1[0-2]|0?[1-9])",type:"month"},dd:{regex:"(3[01]|0?[1-9]|[12][0-9])",type:"date"},d:{regex:"(3[01]|0?[1-9]|[12][0-9])",type:"date"},yy:{regex:"(\\d{2})",type:"year"},yyyy:{regex:"(\\d{4})",type:"year"}},o={m:function(t){return`${t}`},mm:function(t){return n(t)},mmm:function(t){return e[t-1]},mmmm:function(e){return t[e-1]},d:function(t){return`${t}`},dd:function(t){return n(t)},yy:function(t){return n(t).substring(2)},yyyy:function(t,e){if(t<100){const r=e||(new Date).getFullYear();return`${String(r).substring(0,2)}${n(t)}`}return`${t}`}},i=function(t){return parseFloat(t)},s={m:i,mm:i,mmm:function(t){return e.findIndex((e=>e.toUpperCase()===(null==t?void 0:t.toUpperCase())))+1},mmmm:function(e){return t.findIndex((t=>t.toUpperCase()===(null==e?void 0:e.toUpperCase())))+1},d:i,dd:i,yy:i,yyyy:i},u=/^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|0?[1-9]|[12][0-9])$/;class a{constructor(t,e){const[n,r,o]=this.buildRegexAndTokens(e);n&&r&&(this._dateRegExp=n,this._dateTokens=r,this._displayFormat=e,this._tokenSeparators=o),this._fillerDate=this.getFillerDate(t)}autoFormatInput(t,e){if(!t||!e)return t;const n=this._tokenSeparators.get(t.length);return n?t+n:t}buildRegexAndTokens(t){const e=new Map,n=[],o=new Map;for(let i=0;i<t.length;i++){let s=t[i];const u=[s];for(;t[i+1]===s;)u.push(s),++i;const a=u.join(""),m=r[a];m&&m.regex?(e.set(m.type,{index:e.size,tokenString:a}),s=m.regex):o.set(i,s),n.push(s)}return[`^${n.join("")}$`,e,o]}formatDisplayString(t){const e=new RegExp(u).exec(t);if(e){e.shift();const t={year:parseFloat(e[0]),month:parseFloat(e[1]),date:parseFloat(e[2])};let n=this._displayFormat;return this._dateTokens.forEach((({tokenString:e},r)=>{n=n.replace(e,(0,o[e])(t[r],"year"===r?this._fillerDate.getFullYear():null))})),n}return null}parseDisplayString(t){if(this._dateRegExp&&t){const e=new RegExp(this._dateRegExp,"i").exec(t);if(e){e.shift();const t=this._dateTokens.get("month"),n=this._dateTokens.get("date"),r=this._dateTokens.get("year"),i=t?s[t.tokenString](e[t.index]):this._fillerDate.getMonth()+1,u=n?s[n.tokenString](e[n.index]):this._fillerDate.getDate(),a=r?s[r.tokenString](e[r.index]):this._fillerDate.getFullYear(),m=`${o.yyyy(a,this._fillerDate.getFullYear())}-${o.mm(i)}-${o.dd(u)}`;return Date.parse(m)?m:null}}return null}getFillerDate(t){const e=new RegExp(u).exec(t);return e?(e.shift(),new Date(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0)}}export{a as D,u as I}