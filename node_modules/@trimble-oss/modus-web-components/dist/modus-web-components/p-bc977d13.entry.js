import{h as t,r as o,c as e}from"./p-123acab3.js";import{I as i,a as l}from"./p-22f35afa.js";import{I as n}from"./p-e1057672.js";import"./p-df707f65.js";import"./p-10ce4025.js";import"./p-79bf39ea.js";import"./p-f0ead01e.js";import"./p-9eb540ee.js";import"./p-300164d5.js";import"./p-882f2a46.js";import"./p-4adf7d15.js";import"./p-58920ac2.js";import"./p-f1c4e2a0.js";import"./p-4d2dda54.js";import"./p-30a18d49.js";class r{static convertToTColumns(t){return null==t?void 0:t.map((t=>{var o,e,i,l,n,r,s;return{align:null!==(o=t.align)&&void 0!==o?o:"left",display:null!==(e=t.display)&&void 0!==e?e:t,id:null!==(n=null!==(i=t.id)&&void 0!==i?i:null===(l=t.display)||void 0===l?void 0:l.toLocaleLowerCase())&&void 0!==n?n:t.toLocaleLowerCase(),readonly:null!==(r=t.readonly)&&void 0!==r&&r,width:null!==(s=t.width)&&void 0!==s?s:""}}))}static convertToTRows(t,o){return(null==t?void 0:t.length)&&!Array.isArray(t[0])?t:null==t?void 0:t.map((t=>{var e,i;const l={_id:null!==(e=t._id)&&void 0!==e?e:"",_selected:null!==(i=t._selected)&&void 0!==i&&i};return t.forEach(((t,e)=>{l[o[e].id]=t})),l}))}static sortData(t,o,e){return[...t].sort("asc"===e?(t,e)=>"badge"===t[o]._type?t[o].text>e[o].text?1:-1:"link"===t[o]._type?t[o].display>e[o].display?1:-1:t[o]>e[o]?1:-1:(t,e)=>"badge"===t[o]._type?t[o].text>e[o].text?-1:1:"link"===t[o]._type?t[o].display>e[o].display?-1:1:t[o]>e[o]?-1:1)}}const s=o=>{const e="none"!==o.sortState.direction?t("modus-tooltip",{position:"bottom",text:"asc"===o.sortState.direction?"Sort descending":"Remove sort"},t("div",{class:"icon-container"},t("div",{class:"sort-icon"},t("asc"===o.sortState.direction?i:l,{size:"16"})))):null,n=t("div",{style:{width:"16px"}});return t("th",{class:o.sortOptions.canSort?"can-sort":"",onClick:()=>o.onColumnHeaderClick(o.column.id)},t("div",{class:`column-header align-${o.column.align}`},"right"===o.column.align&&o.sortState.columnId!==o.column.id&&n,"right"===o.column.align&&o.sortState.columnId===o.column.id&&"none"===o.sortState.direction&&n,"right"===o.column.align&&o.sortState.columnId===o.column.id&&e,t("div",null,null==(r=o.column.display)?void 0:r.replace(/\w\S*/g,(t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())).replace(/\s+/g," ")),"left"===o.column.align&&o.sortState.columnId===o.column.id&&e,"center"===o.column.align&&o.sortState.columnId===o.column.id&&t("div",{style:{position:"relative"}},t("div",{style:{display:"flex",justifyContent:"flex-end",position:"absolute"}},e))));var r},a=o=>t("div",{class:"cell-link",onClick:()=>o.onLinkClick(o.link)},o.link.display),d=o=>t("div",{class:"cell-badge"},t("modus-badge",{color:o.badge.color,type:o.badge.type},o.badge.text)),c=o=>t("modus-dropdown",{"toggle-element-id":`dropdownToggle-${o.rowId}`,"animate-list":o.animateDropdown,customPlacement:{left:-194}},t("div",{class:"row-action",id:`dropdownToggle-${o.rowId}`,slot:"dropdownToggle"},t(n,{icon:"vertical-ellipsis",size:"24"})),t("div",{slot:"dropdownList"},t("div",{class:"list-container"},t("div",{class:"items-container"},o.actions.map((e=>t("div",{class:"action-item",onClick:()=>o.onRowActionClick(e._id,o.rowId)},t("div",{class:"action-item-content"},e.display.icon&&t(n,{icon:e.display.icon,size:"16"}),t("div",{class:"display-text"},e.display.text))))))))),h=class{constructor(t){o(this,t),this.cellLinkClick=e(this,"cellLinkClick",7),this.rowDoubleClick=e(this,"rowDoubleClick",7),this.selection=e(this,"selection",7),this.sort=e(this,"sort",7),this.rowActionClick=e(this,"rowActionClick",7),this.classBySize=new Map([["small","size-small"],["large","size-large"]]),this.columns=void 0,this.data=void 0,this.displayOptions={animateRowActionsDropdown:!1,borderless:!0,cellBorderless:!0,rowStripe:!1,size:"large"},this.rowActions=[],this.selectionOptions={canSelect:!1,checkboxSelection:!1},this.sortOptions={canSort:!1,serverSide:!1},this.allSelected=!1,this.sortState={columnId:"",direction:"none"}}dataChanged(t,o){var e;this.originalData=null!==(e=this.originalData)&&void 0!==e?e:r.convertToTRows(o,this.columns)}componentWillLoad(){this.convertColumnsAndRows(),this.updateAllSelected()}componentDidLoad(){this.originalData=r.convertToTRows(this.data,this.columns)}componentWillUpdate(){this.convertColumnsAndRows()}convertColumnsAndRows(){this.columns=r.convertToTColumns(this.columns),this.data=r.convertToTRows(this.data,this.columns)}emitSelection(){this.selection.emit(this.data.filter((t=>t._selected)).map((t=>t._id)))}handleCheckboxClick(t){this.data=this.data.map((o=>Object.assign(Object.assign({},o),{_selected:o._id===t?!o._selected:o._selected}))),this.updateAllSelected(),this.emitSelection()}handleColumnHeaderClick(t){this.sortOptions.canSort&&(this.sortState=Object.assign(Object.assign({},this.sortState),t===this.sortState.columnId?{direction:"asc"===this.sortState.direction?"desc":"desc"===this.sortState.direction?"none":"asc"}:{direction:"asc",columnId:t}),this.sort.emit({columnId:this.sortState.columnId,direction:this.sortState.direction}),this.sortOptions.serverSide||(this.data="none"===this.sortState.direction?this.originalData.map((t=>Object.assign(Object.assign({},t),{_selected:this.data.find((o=>o._id===t._id))._selected}))):r.sortData(this.data,this.sortState.columnId,this.sortState.direction),this.updateAllSelected()))}handleHeaderCheckboxClick(t){this.data=this.data.map((o=>Object.assign(Object.assign({},o),{_selected:t}))),this.emitSelection()}handleRowClick(t){this.selectionOptions.canSelect&&!this.selectionOptions.checkboxSelection&&(this.data=this.data.map((o=>Object.assign(Object.assign({},o),{_selected:o._id===t?!o._selected:o._selected}))),this.emitSelection())}handleRowDoubleClick(t){this.rowDoubleClick.emit(t)}updateAllSelected(){var t;this.allSelected=null===(t=this.data)||void 0===t?void 0:t.every((t=>t._selected))}render(){var o,e,i;const l=`\n      ${this.displayOptions.borderless?"borderless":""}\n      ${this.displayOptions.cellBorderless?"cell-borderless":""}\n      ${this.displayOptions.rowStripe?"row-stripe":""}\n      ${this.classBySize.get(this.displayOptions.size)}\n    `;return t("table",{class:l},t("colgroup",null,this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("col",{style:{width:"34px"}}),null===(o=this.columns)||void 0===o?void 0:o.map((o=>t("col",{style:{width:o.width}}))),!!this.rowActions.length&&t("col",{style:{width:"34px"}})),t("thead",null,t("tr",null,this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("th",null,t("div",{class:"column-header align-center"},t("modus-checkbox",{checked:this.allSelected,onCheckboxClick:t=>this.handleHeaderCheckboxClick(t.detail)}))),null===(e=this.columns)||void 0===e?void 0:e.map((o=>t(s,{column:o,onColumnHeaderClick:t=>this.handleColumnHeaderClick(t),sortOptions:this.sortOptions,sortState:this.sortState}))),!!this.rowActions.length&&t("th",null))),t("tbody",null,null===(i=this.data)||void 0===i?void 0:i.map((o=>{var e;return t("tr",{onClick:()=>this.handleRowClick(o._id),onDblClick:()=>this.handleRowDoubleClick(o._id)},this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("td",{class:"align-center "+(o._selected?"selected":""),onClick:t=>t.stopPropagation(),onDblClick:t=>t.stopPropagation()},t("div",null,t("modus-checkbox",{checked:o._selected,onCheckboxClick:()=>this.handleCheckboxClick(o._id)}))),null===(e=this.columns)||void 0===e?void 0:e.map((e=>{var i,l,n,r;return t("td",{class:`align-${e.align} ${e.readonly?"readonly":""} ${o._selected?"selected":""}`},"link"===(null===(i=o[e.id])||void 0===i?void 0:i._type)&&t(a,{link:o[e.id],onLinkClick:()=>this.cellLinkClick.emit(o[e.id])}),"badge"===(null===(l=o[e.id])||void 0===l?void 0:l._type)&&t(d,{badge:o[e.id]}),!(null===(n=o[e.id])||void 0===n?void 0:n._type)&&(null===(r=o[e.id])||void 0===r?void 0:r.toString()))})),!!this.rowActions.length&&t("td",{class:"align-center "+(o._selected?"selected":""),onClick:t=>t.stopPropagation(),onDblClick:t=>t.stopPropagation()},t(c,{actions:this.rowActions,animateDropdown:this.displayOptions.animateRowActionsDropdown,onRowActionClick:(t,o)=>this.rowActionClick.emit({actionId:t,rowId:o}),rowId:o._id})))}))))}static get watchers(){return{data:["dataChanged"]}}};h.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");table{border:0.0625rem var(--modus-table-border-color, #b7b9c3) solid;border-collapse:collapse;width:100%}table th{background-color:var(--modus-table-header-bg, #f1f1f6);border:0.0625rem var(--modus-table-header-border-color, #b7b9c3) solid;color:var(--modus-table-header-color, #464b52);font-size:0.875rem;font-weight:600;min-height:3rem}table th.can-sort{cursor:pointer}table th .column-header{display:flex;flex-direction:row;justify-content:center;min-height:1.25rem;padding:0 0.5rem}table th .column-header.align-left,table th .column-header.align-right{justify-content:space-between}table th .column-header.align-center{justify-content:center}table th .column-header .icon-container{align-items:center;display:flex;height:1rem;justify-content:center}table th .column-header .icon-container .sort-icon{border-radius:0.25rem;display:flex;padding:0.25rem}table th .column-header .icon-container .sort-icon:hover{background-color:var(--modus-btn-icon-only-dark-hover-bg, #e0e1e9)}table th .column-header .icon-container .sort-icon:hover svg path{fill:var(--modus-btn-icon-only-dark-hover-color, #353a40)}table th .column-header .icon-container .sort-icon:active{background-color:var(--modus-btn-icon-only-dark-active-bg, #cbcdd6)}table th .column-header .icon-container .sort-icon:active svg path{fill:var(--modus-btn-icon-only-dark-active-color, #2b2a37)}table th .column-header .icon-container .sort-icon svg path{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}table tr{color:var(--modus-table-color, #464b52);font-size:0.875rem;height:3rem}table tr td{background-color:var(--modus-table-bg, #fff);border:0.0625rem var(--modus-table-border-color, #b7b9c3) solid;padding:0 0.5rem}table tr td.align-center{text-align:center}table tr td.align-center div{display:flex;height:100%;justify-content:center;width:100%}table tr td.align-left{text-align:left}table tr td.align-right{text-align:right}table tr td.readonly{background-color:var(--modus-table-readonly-bg, #e0e1e9);color:var(--modus-table-readonly-color, #464b52)}table tr td.selected{background-color:var(--modus-table-selected-bg, #dcedf9)}table tr td .cell-link{color:var(--modus-link-color, #217cbb);cursor:pointer;display:inline-block;font-weight:600}table tr td .cell-link:hover{text-decoration:underline}table tr td .cell-badge{align-items:center;display:flex;justify-content:center}table.borderless{border:none !important}table.cell-borderless th,table.cell-borderless td{border:none !important}table.row-stripe tr{border-bottom:0.0625rem var(--modus-table-border-color, #b7b9c3) solid}table.size-small th,table.size-small tr{height:2rem}modus-dropdown .row-action{border-radius:50%;cursor:pointer;padding:0.125rem;transition:background-color 0.15s ease-in-out}modus-dropdown .row-action svg{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}modus-dropdown .row-action:hover{background-color:var(--modus-btn-icon-only-dark-hover-bg, #e0e1e9)}modus-dropdown .row-action:hover svg path{fill:var(--modus-btn-icon-only-dark-hover-color, #353a40)}modus-dropdown .row-action:active{background-color:var(--modus-btn-icon-only-dark-active-bg, #cbcdd6)}modus-dropdown .row-action:active svg path{fill:var(--modus-btn-icon-only-dark-active-color, #2b2a37)}modus-dropdown .list-container{position:relative;top:-6px}modus-dropdown .list-container .items-container{display:inline-block;position:sticky;width:200px}modus-dropdown .list-container .items-container .action-item{height:1.5rem;padding:0.5rem;text-align:left;user-select:none;width:200px}modus-dropdown .list-container .items-container .action-item .action-item-content{align-items:center;background-color:var(--modus-list-item-bg, #fff);border:0.0625rem solid var(--modus-list-item-border-color, #e0e1e9);color:var(--modus-list-item-color, #252a2e);display:flex;height:1.5rem;justify-content:flex-start;overflow:hidden;padding:0.5rem 1rem}modus-dropdown .list-container .items-container .action-item .action-item-content svg{margin-right:0.5rem}modus-dropdown .list-container .items-container .action-item .action-item-content svg path{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}modus-dropdown .list-container .items-container .action-item .action-item-content .display-text{display:block;font-size:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}modus-dropdown .list-container .items-container .action-item:hover .action-item-content{background-color:var(--modus-list-item-hover-bg, #e0e1e9)}';export{h as modus_data_table}