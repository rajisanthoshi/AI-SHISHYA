import{r as e,c as t,h as i,g as s}from"./p-123acab3.js";import{I as o}from"./p-e1057672.js";import{T as n}from"./p-2ae534e4.js";import"./p-df707f65.js";import"./p-10ce4025.js";import"./p-79bf39ea.js";import"./p-f0ead01e.js";import"./p-9eb540ee.js";import"./p-300164d5.js";import"./p-882f2a46.js";import"./p-4adf7d15.js";import"./p-58920ac2.js";import"./p-f1c4e2a0.js";import"./p-22f35afa.js";import"./p-4d2dda54.js";import"./p-30a18d49.js";const a=class{constructor(s){e(this,s),this.checkboxClick=t(this,"checkboxClick",7),this.itemClick=t(this,"itemClick",7),this.itemExpandToggle=t(this,"itemExpandToggle",7),this.itemAdded=t(this,"itemAdded",7),this.SLOT_COLLAPSE_ICON="collapseIcon",this.SLOT_DRAG_ICON="dragIcon",this.SLOT_EXPAND_ICON="expandIcon",this.SLOT_ITEM_ICON="itemIcon",this.SLOT_LABEL="label",this.CustomSlot=e=>{var{name:t,className:s,defaultContent:o,display:n=!0}=e,a=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(e,["name","className","defaultContent","display"]);const r=!this.slots.has(t)&&o;return i("div",Object.assign({},a,{class:`${s||""} ${n?"":"d-none"}`}),i("slot",{name:t,onSlotchange:()=>this.handleDefaultSlotChange()}),r&&o)},this.disabled=void 0,this.draggableItem=void 0,this.droppableItem=void 0,this.editable=void 0,this.label=void 0,this.nodeId=void 0,this.tabIndexValue=0,this.childrenIds=void 0,this.forceUpdate={},this.slots=new Map}connectedCallback(){this.options&&this.options.onItemAdd(this.element)}componentDidRender(){this.refLabelInput&&this.editable&&this.refLabelInput.focusInput()}componentWillLoad(){this.itemAdded.emit(this.element),this.handleDefaultSlotChange()}disconnectedCallback(){var e;null===(e=this.options)||void 0===e||e.onItemDelete(this.nodeId)}async focusItem(){this.refItemContent.focus()}async focusCheckbox(){this.refCheckbox&&this.refCheckbox.focusCheckbox()}getChildrenIds(){return Array.from(this.element.children).map((e=>e.nodeId)).filter((e=>e))}handleCheckboxClick(e){if(this.shouldHandleEvent(e)){const{onCheckboxSelection:e,hasItemChecked:t}=this.options;e(this.nodeId),this.checkboxClick.emit(t(this.nodeId))}}handleDefaultKeyDown(e,t){switch(e.code){case"Space":case"Enter":t(),e.preventDefault()}}handleDefaultSlotChange(){const e=this.element.querySelectorAll("[slot]"),t=new Map;let i=e.length!==this.slots.size;e.forEach((e=>{t.set(e.slot,!0),i=!this.slots.get(e.slot)||i})),i&&(this.slots=new Map(t))}handleDrag(e){if(this.shouldHandleEvent(e)){e.preventDefault();const t=this.refItemContent.cloneNode(!0);this.options.onItemDrag(this.nodeId,t,e)}}handleExpandToggle(e){if(this.shouldHandleEvent(e)){const{onItemExpandToggle:e,hasItemExpanded:t}=this.options;e(this.nodeId),this.itemExpandToggle.emit(t(this.nodeId))}}handleFocus(){const{onItemFocus:e,hasItemFocus:t}=this.options||{};t(this.nodeId)||e(this.nodeId)}handleItemClick(e){if(this.shouldHandleEvent(e)){const{onItemSelection:t,hasItemSelected:i}=this.options;t(this.nodeId,e),this.itemClick.emit(i(this.nodeId))}}handleKeyDownTreeItem(e){if(!e.defaultPrevented)switch(e.code){case"Space":this.handleExpandToggle(e),e.preventDefault(),e.stopPropagation();break;case"Enter":this.handleItemClick(e),e.stopPropagation()}}handleLabelInputClick(e){e.stopPropagation()}handleLabelInputBlur(){this.updateLabelInput()}handleLabelInputKeyDown(e){"Enter"===e.code&&(e.preventDefault(),this.updateLabelInput())}handlePropDisabledChange(e){var t;null===(t=this.options)||void 0===t||t.onItemUpdate({nodeId:this.nodeId,disabled:e})}handlePropNodeIdChange(e,t){var i;null===(i=this.options)||void 0===i||i.onItemUpdate({nodeId:e},{nodeId:t})}handleRefItemContent(e){var t;this.refItemContent=e,null===(t=this.options)||void 0===t||t.onItemUpdate({nodeId:this.nodeId,content:e})}handleTreeSlotChange(){var e,t;const i=this.getChildrenIds(),s=this.childrenIds&&i?this.childrenIds.length!==i.filter((e=>this.childrenIds.includes(e))).length:(null===(e=this.childrenIds)||void 0===e?void 0:e.length)!==(null==i?void 0:i.length);if(this.options){const{onItemUpdate:e,multiCheckboxSelection:s,onCheckboxSelection:o}=this.options;e({nodeId:this.nodeId,children:[...i]}),(null===(t=this.childrenIds)||void 0===t?void 0:t.length)&&this.childrenIds.length!==(null==i?void 0:i.length)&&s&&o(this.nodeId,!0)}this.childrenIds=s?[...i]:this.childrenIds}async initTreeViewItem(e){this.options=Object.assign({},e),this.handleTreeSlotChange(),this.updateComponent(),this.tabIndexValue=this.options.disableTabbing?-1:this.tabIndexValue}rootOptions(){var e;if(this.options){const{checkboxSelection:t,multiCheckboxSelection:i,showSelectionIndicator:s,size:o,getLevel:n,hasItemSelected:a,hasItemDisabled:r,hasItemIndeterminate:l,hasItemExpanded:d,hasItemChecked:h}=this.options,c=a(this.nodeId),m=h(this.nodeId),p=l(this.nodeId),u=d(this.nodeId),b=n(this.nodeId),v=r(this.nodeId),f=s(this.nodeId);return{selected:c,checked:m,indeterminate:p,expanded:u,expandable:Boolean(null===(e=this.childrenIds)||void 0===e?void 0:e.length),level:b,checkboxSelection:t,multiCheckboxSelection:i,size:o,isDisabled:v,selectionIndicator:f}}return{level:1}}shouldHandleEvent(e){return e&&e.stopPropagation(),this.options&&!this.options.hasItemDisabled(this.nodeId)}async updateComponent(){this.forceUpdate=Object.assign({},this.forceUpdate)}updateLabelInput(){this.refLabelInput&&(this.label=this.refLabelInput.value),this.refLabelInput=null,this.editable=!1}render(){const{selected:e,checked:t,indeterminate:s,expanded:a,expandable:r,level:l,checkboxSelection:d,multiCheckboxSelection:h,size:c,isDisabled:m,selectionIndicator:p}=this.rootOptions(),u=Object.assign(Object.assign({"aria-level":l,"aria-selected":e?"true":"false","aria-disabled":m?"true":"false"},r?{"aria-expanded":a?"true":"false"}:{}),{role:"treeitem"}),b=`${n.get(c||"standard")}`,v=m?-1:this.tabIndexValue,f=`tree-item ${e?"selected":""} ${b} ${m?"disabled":""} `,g=`tree-item-group ${b} ${a?"expanded":""}`;return i("li",Object.assign({},u,{class:"tree-item-container"+(p?" selected-indicator":"")}),i("div",{class:f,onFocus:()=>this.handleFocus(),onClick:e=>this.handleItemClick(e),onKeyDown:e=>this.handleKeyDownTreeItem(e),ref:e=>this.handleRefItemContent(e),tabindex:v},i(this.CustomSlot,{className:"icon-slot drag-icon"+(this.draggableItem?"":" hidden"),defaultContent:i(o,{icon:"drag"}),name:this.SLOT_DRAG_ICON,onMouseDown:e=>this.handleDrag(e)}),i("div",{"aria-disabled":"true",style:{paddingLeft:.5*(l-1)+"rem"}}),i("div",{class:"icon-slot"+(r?"":" hidden"),onClick:e=>this.handleExpandToggle(e),onKeyDown:e=>this.handleDefaultKeyDown(e,(()=>this.handleExpandToggle(e))),tabindex:r?v:-1},i(this.CustomSlot,{className:"inline-flex rotate-right",defaultContent:i(o,{icon:"chevron-down-thick",size:"24"}),display:!a,name:this.SLOT_EXPAND_ICON}),i(this.CustomSlot,{className:"inline-flex",defaultContent:i(o,{icon:"chevron-down-thick",size:"24"}),display:a,name:this.SLOT_COLLAPSE_ICON})),(d||h)&&i("div",{class:"icon-slot"},i("modus-checkbox",{checked:t,disabled:m,indeterminate:s,onClick:e=>this.handleCheckboxClick(e),onKeyDown:e=>this.handleDefaultKeyDown(e,(()=>this.handleCheckboxClick(e))),ref:e=>this.refCheckbox=e,tabIndexValue:v})),i(this.CustomSlot,{className:"icon-slot",name:this.SLOT_ITEM_ICON,display:this.slots.has(this.SLOT_ITEM_ICON)}),i("div",{role:"heading","aria-level":l,class:"label-slot"},i(this.CustomSlot,{role:"button",name:this.SLOT_LABEL,defaultContent:this.editable?i("modus-text-input",{size:"large"==c?"large":"medium",autoFocusInput:!0,tabindex:0,ref:e=>this.refLabelInput=e,value:this.label,onClick:e=>this.handleLabelInputClick(e),onBlur:()=>this.handleLabelInputBlur(),onKeyDown:e=>this.handleLabelInputKeyDown(e)}):this.label}))),i("ul",{class:g,role:"tree"},i("slot",{onSlotchange:()=>this.handleTreeSlotChange()})))}get element(){return s(this)}static get watchers(){return{disabled:["handlePropDisabledChange"],nodeId:["handlePropNodeIdChange"]}}};a.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.tree-item{align-items:center;background-color:var(--modus-tree-view-item-bg, #fff);border:0.0625rem solid var(--modus-tree-view-item-border-color, #e0e1e9);color:var(--modus-tree-view-item-color, #252a2e);cursor:pointer;display:flex;fill:var(--modus-tree-view-item-color, #252a2e);font-family:"Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:1rem;min-height:2.375rem;width:100%}.tree-item svg path{fill:var(--modus-tree-view-item-color, #252a2e)}.tree-item .icon-chevron-right-thick path,.tree-item .icon-chevron-down-thick path{fill:var(--modus-chevron-color, #90939f)}.tree-item.disabled{color:var(--modus-tree-view-item-disabled-color, #252a2e4d);cursor:default !important}.tree-item.disabled svg path{fill:var(--modus-tree-view-item-disabled-color, #252a2e4d)}.tree-item.drop-allow{box-shadow:0 -2px 0 var(--modus-tree-view-item-drag-border-color, #217cbb) !important}.tree-item.drop-block{box-shadow:0 -2px 0 var(--modus-tree-view-item-drag-error-border-color, #da212c) !important}.tree-item .d-none{display:none !important}.tree-item .hidden{visibility:hidden}.tree-item:hover:not(.disabled){background-color:var(--modus-tree-view-item-hover-bg, #e0e1e9)}.tree-item .icon-slot{align-items:center;display:flex;justify-content:center;width:1.5rem}.tree-item .icon-slot.drag-icon{cursor:grab !important;width:1rem}.tree-item .icon-slot.drag-icon svg{height:1rem;width:1rem}.tree-item .icon-slot .inline-flex{display:inline-flex}.tree-item .icon-slot .rotate-right{transform:rotate(-90deg)}.tree-item .label-slot{overflow:hidden;padding-left:0.5rem;padding-right:0.5rem;text-overflow:ellipsis;white-space:nowrap;width:100%}.tree-item.large{min-height:2.875rem}.tree-item.selected{background-color:var(--modus-tree-view-item-selected-bg, #dcedf9);border-color:var(--modus-tree-view-item-selected-border-color, #dcedf9)}.tree-item.small{font-size:0.75rem;min-height:1.875rem}.tree-item-container{display:flex;flex-direction:column;position:relative}.tree-item-container.selected-indicator::before{box-shadow:inset 0.3rem 0 0 0 var(--modus-tree-view-item-selected-indicator-color, #217cbb);content:"";height:100%;left:0;position:absolute;right:0;width:0.3rem;z-index:5}.tree-item-group{display:none;margin:0;padding:0;width:100%}.tree-item-group.expanded{display:block}';export{a as modus_tree_view_item}