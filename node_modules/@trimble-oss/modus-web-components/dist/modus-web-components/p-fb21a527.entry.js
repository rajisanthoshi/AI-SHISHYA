import{r as i,c as t,h as e,g as r}from"./p-123acab3.js";const o=/^(1[0-2]|0?[1-9]):([0-5][0-9]) ([AaPp][Mm])$/,s=/^(2[0-3]|[01]?[0-9]):([0-5][0-9])$/,n=/[\d:apm\s]/gi,a=/[\d:]/gi;class l{constructor(i){this.hasAmPm=!1,this.hasAmPm=i}autoFormatTimeInput(i,t){if(!i||!t)return i;const e=this.getAutoFormatString();let r=i;if(e.length>i.length&&"x"!==e[i.length]){r=i+e[i.length];const t=r.toUpperCase();t&&r!==t&&(r=t)}return r}formatTimeDisplay(i){if(!i)return null;const t=this.processTimeRegex(i,s);if(t){if(this.hasAmPm){const i=parseInt(t[0]),e=parseInt(t[1]);return this.create12HourTimeString(i,e)}return i}return null}setTimeOnDate(i=new Date,t){const e=new Date(i),r=this.processTimeRegex(t,s);if(r){const i=parseInt(r[0]),t=parseInt(r[1]);i>=0&&i<=23&&(0===t||t>0)&&e.setHours(i,t)}return e}keyIsValidTimeCharacter(i,t=null){return!!(null!=t?new RegExp(t):new RegExp(this.hasAmPm?n:a)).test(i)}parseTimeDisplay(i){var t;if(!i)return null;const e=this.processTimeRegex(i,this.hasAmPm?o:s);if(e){if(this.hasAmPm){const i=parseInt(e[0]),r=parseInt(e[1]),o=null===(t=e[2])||void 0===t?void 0:t.toUpperCase();return this.create24HourTimeString(i,r,o)}return i}return null}create24HourTimeString(i,t,e){let r=i;return"AM"===e?r=i-i==12?12:0:"PM"===e&&(r=i+i!==12?12:0),r>=0&&r<=23&&(0===t||t>0)?`${this.pad(r)}:${this.pad(t)}`:null}create12HourTimeString(i,t){let e="AM",r=i;return 0===i?r=i+12:12===i?e="PM":i>12&&(r=i-12,e="PM"),r&&r<=12&&(0===t||t>0)?`${this.pad(r)}:${this.pad(t)} ${e}`:null}getAutoFormatString(){return this.hasAmPm?"xx:xx xM":"xx:xx"}processTimeRegex(i,t){const e=new RegExp(t).exec(i);return(null==e?void 0:e.length)>1?(e.shift(),e):null}pad(i){return i<10?`0${i}`:i.toString()}}const u=class{constructor(e){i(this,e),this.timeInputBlur=t(this,"timeInputBlur",7),this.valueChange=t(this,"valueChange",7),this.classBySize=new Map([["medium","medium"],["large","large"]]),this._maxLength=5,this.ampm=void 0,this.allowedCharsRegex=void 0,this.ariaLabel=void 0,this.autoFormat=void 0,this.autoFocusInput=void 0,this.disabled=void 0,this.disableValidation=void 0,this.errorText=void 0,this.helperText=void 0,this.label=void 0,this.min=void 0,this.max=void 0,this.placeholder=void 0,this.readOnly=void 0,this.required=void 0,this.size="medium",this.validText=void 0,this.value=void 0,this._timeDisplay=void 0}handleAmPmChange(i){this.handleAmPmDependencies(i)}handleValueChange(i){this._isEditing||(this._timeDisplay=this._formatter.formatTimeDisplay(i)),this.valueChange.emit({value:i,inputString:this._timeDisplay})}componentWillLoad(){this.handleAmPmDependencies(this.ampm),this._timeDisplay=this._formatter.formatTimeDisplay(this.value)}async focusInput(){this._timeInput.focus()}handleBlur(){var i;this._isEditing=!1;const t=null===(i=this._timeInput)||void 0===i?void 0:i.value;this.validateTimeInput(t),this.timeInputBlur.emit({value:this.value,inputString:t})}handleDefaultKeyDown(i,t){const e=i.code.toUpperCase();"ENTER"!==e&&"SPACE"!==e||t()}handleInputChange(i){var t;i.stopPropagation(),i.preventDefault(),this._isEditing=!0;const e=null===(t=i.currentTarget)||void 0===t?void 0:t.value;this._timeDisplay=this._formatter.autoFormatTimeInput(e,this.autoFormat),this.value=this._formatter.parseTimeDisplay(this._timeDisplay)}handleInputKeyPress(i){const t=this._formatter.keyIsValidTimeCharacter(i.key,this.allowedCharsRegex);return t||i.preventDefault(),t}clearValidation(){this.errorText=null}getAriaControls(){return{"aria-invalid":!!this.errorText,"aria-label":this.ariaLabel,"aria-required":this.required}}handleAmPmDependencies(i){this._formatter=new l(i),this._maxLength=i?8:5}validateTimeInput(i){if(!this.disableValidation)if(i)if(this.value)if(this.min||this.max){const i=new Date,t=this._formatter.setTimeOnDate(i,this.min),e=this._formatter.setTimeOnDate(i,this.max),r=this._formatter.setTimeOnDate(i,this.value);this.min&&r<t?this.errorText="Time input is lesser than minimum time allowed":this.max&&r>e?this.errorText="Time input is greater than maximum time allowed":this.clearValidation()}else this.clearValidation();else this.errorText="Invalid time";else this.required?this.errorText="Required":this.clearValidation()}renderTimeInput(){const i=this.getAriaControls();return e("input",Object.assign({},i,{id:"time-input","aria-label":this.label?null:this.ariaLabel,"aria-placeholder":this.placeholder,disabled:this.disabled,inputmode:"text",onInput:i=>this.handleInputChange(i),placeholder:this.placeholder,readonly:this.readOnly,ref:i=>this._timeInput=i,tabIndex:0,type:"text",value:this._timeDisplay,autofocus:this.autoFocusInput,onBlur:()=>this.handleBlur(),maxLength:this._maxLength,onKeyPress:i=>this.handleInputKeyPress(i)}))}renderSubText(){return this.errorText?e("label",{class:"sub-text error"},this.errorText):this.validText?e("label",{class:"sub-text valid"},this.validText):this.helperText?e("label",{class:"sub-text helper"},this.helperText):null}render(){return e("div",{class:{"modus-time-picker":!0,disabled:this.disabled}},e("div",{class:"time-input-wrapper"},this.label||this.required?e("div",{class:"label-container"},this.label?e("label",{htmlFor:"time-input"},this.label):null,this.required?e("span",{class:"required"},"*"):null):null,e("div",{class:`input-container ${this.errorText?"error":this.validText?"valid":""} ${this.classBySize.get(this.size)}`},this.renderTimeInput()),this.renderSubText()),e("div",{class:"time-zone-wrapper"},e("slot",{name:"timeZone"})))}get element(){return r(this)}static get watchers(){return{ampm:["handleAmPmChange"],value:["handleValueChange"]}}};u.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.modus-time-picker{box-sizing:border-box;display:inline-flex;flex-direction:row;font-family:"Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";position:relative;width:100%}.modus-time-picker .time-input-wrapper{display:flex;flex-direction:column;width:100%}.modus-time-picker button{background:0;border:0;cursor:pointer;margin:0;padding:0}.modus-time-picker label{color:var(--modus-input-label-color, #464b52);margin-bottom:0.25rem}.modus-time-picker .label-container{display:flex}.modus-time-picker .label-container label{font-size:0.75rem}.modus-time-picker .label-container span.required{bottom:0.0625rem;color:var(--modus-input-validation-error-color, #da212c);margin-left:0.25rem;position:relative}.modus-time-picker .input-container{align-items:center;background-color:var(--modus-input-bg, #fff);border:0.0625rem solid var(--modus-input-border-color, #e0e1e9);border-bottom-color:var(--modus-input-bottom-line-color, #6a6e79);box-sizing:border-box;display:flex;flex-direction:row;height:2rem;position:relative;width:100%}.modus-time-picker .input-container input{background-color:transparent;background-position:right calc(0.375em + 0.1875rem) center;background-repeat:no-repeat;background-size:calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);border:none;color:var(--modus-input-color, #252a2e);font-size:0.75rem;outline:none;padding:0 0.5rem;padding-right:calc(1.5em + 0.75rem);width:100%}.modus-time-picker .input-container input::placeholder{color:var(--modus-input-hint-text-color, #a3a6b1)}.modus-time-picker .input-container:hover{cursor:text}.modus-time-picker .input-container:focus-within,.modus-time-picker .input-container.error,.modus-time-picker .input-container.valid{border-bottom-width:0.125rem;height:1.9375rem}.modus-time-picker .input-container:focus-within{border-bottom-color:var(--modus-input-bottom-line-active-color, #217cbb)}.modus-time-picker .input-container.error{border-bottom-color:var(--modus-input-validation-error-color, #da212c)}.modus-time-picker .input-container.valid{border-bottom-color:var(--modus-input-validation-success-color, #006638)}.modus-time-picker .input-container.large{height:3rem}.modus-time-picker .input-container.large input{font-size:0.875rem}.modus-time-picker .input-container.large:focus-within,.modus-time-picker .input-container.large.error,.modus-time-picker .input-container.large.valid{height:2.9375rem}.modus-time-picker .sub-text{font-size:0.6875rem;margin-top:0.25rem}.modus-time-picker .sub-text.helper{color:var(--modus-input-label-color, #464b52);font-weight:600}.modus-time-picker .sub-text.error{color:var(--modus-input-validation-error-color, #da212c)}.modus-time-picker .sub-text.valid{color:var(--modus-input-validation-success-color, #006638)}.modus-time-picker.large{font-size:0.875rem;height:48px}.modus-time-picker.disabled{pointer-events:none}.modus-time-picker.disabled .input-container{background-color:var(--modus-input-disabled-bg, #e0e1e9);border:0.0625rem solid var(--modus-input-disabled-border-color, #e0e1e9);border-bottom-color:var(--modus-input-disabled-bottom-line-color, #a3a6b1)}.modus-time-picker.disabled .input-container input{background-color:transparent;border-radius:0;color:var(--modus-input-disabled-color, #a3a6b1);height:100%}';export{u as modus_time_picker}