!function(){"use strict";const t=t=>{if(0===t.length)return t;t.sort((t,e)=>t.start-e.start);const e=[t[0]];for(let i=1;i<t.length;i++){const s=t[i],r=e[e.length-1];r.start+r.count<s.start?e.push(s):r.start+r.count<s.start+s.count&&(r.count=s.start+s.count-r.start)}return e},e=(e,i)=>{if(0===e.length||0===i.length)return e;i=t(i);for(let t=0;t<i.length;t++){const s=i[t];if(0!==s.count)for(let t=0;t<e.length;t++){const i=e[t],r=s.start>i.start&&s.start<i.start+i.count,n=s.start+s.count>i.start&&s.start+s.count<i.start+i.count;r&&n?(e.push({start:s.start+s.count,count:i.count+i.start-s.start-s.count}),i.count=s.start-i.start):r?i.count=s.start-i.start:n?(i.count=i.start+i.count-s.start-s.count,i.start=s.start+s.count):s.start<=i.start&&s.start+s.count>=i.start+i.count&&(e.splice(t,1),t--)}}return e};class i{constructor(t,e,i,s,r,n,o,a){this.modelId=t,this.materialManager=e,this.clusterManager=i,this.instanceManager=s,this.lodManager=r,this.layerManager=n,this.state=o,this.geometryManager=a}resetMaterials(t){const e=t?this.entityIdsToInstanceIds(t):this.clusterManager.getInstanceIds();this.clusterManager.resetMaterials(e)}getMaterials(t){return t.map(t=>{const e=this.entityIdsToInstanceIds([t])[0];if(void 0===e)return;const i=this.clusterManager.getMaterialId(e);return void 0!==i?this.materialManager.getMaterial(i):void 0})}setMaterial(t,e){const i=t?this.entityIdsToInstanceIds(t):this.clusterManager.getInstanceIds(),s=[];for(const t of i){const i=this.clusterManager.getMaterialId(t),r=this.materialManager.getMaterial(i),n=Object.assign({},e);void 0===n.color&&(n.color=r.color),void 0===n.opacity&&(n.opacity=r.opacity),void 0===n.transparent&&(n.transparent=r.transparent),void 0===n.side&&(n.side=r.side),void 0===n.textureId&&(n.textureId=r.textureId),s.push(n)}const r=this.materialManager.addMaterials(s);i.reduce((t,e,i)=>{const s=r[i];return t.has(s)||t.set(s,[]),t.get(s).push(e),t},new Map).forEach((t,e)=>this.clusterManager.setMaterial(t,e))}clearSelection(){this.state.clearSelection();for(const t of this.clusterManager.clusterLUT.values())for(let e=0;e<this.lodManager.getLevelsCount();e++)for(const i of t.getBatches(e))i.state.selected.length>0&&(i.state.selected=[],this.postSetStateMessage(i))}postSetStateMessage(t){const e={type:1,modelId:this.modelId,actions:[{actionType:2,modelId:this.modelId,batchId:t.id,state:t.state}]};postMessage(e)}resetVisibility(){this.state.resetVisibility();for(const t of this.clusterManager.clusterLUT.values())for(let e=0;e<this.lodManager.getLevelsCount();e++)for(const i of t.getBatches(e))1===i.state.visible.length&&0===i.state.visible[0].start&&i.state.visible[0].count===1/0||(i.state.visible=[{start:0,count:1/0}],this.postSetStateMessage(i))}setSelection(e){this.clearSelection(),this.state.setSelection(!0,e);const i=this.entityIdsToInstanceIds(e),s=this.clusterManager.getBatchGeometryByInstanceIds(i);for(const[e,i]of s){const e=i[0].batch;e.state.selected=t(this.clusterManager.calculateRanges(i)),this.postSetStateMessage(e)}}setHovered(e){if(!e)return void this.clearHovered();const i=this.entityIdsToInstanceIds(e);this.hoveredInstanceIds=i;const s=this.clusterManager.getBatchGeometryByInstanceIds(i);for(const[e,i]of s){const e=i[0].batch;e.state.hovered=t(this.clusterManager.calculateRanges(i)),this.postSetStateMessage(e)}}clearHovered(){if(!this.hoveredInstanceIds)return;const t=this.clusterManager.getBatchGeometryByInstanceIds(this.hoveredInstanceIds);for(const[e,i]of t){const t=i[0].batch;t.state.hovered=void 0,this.postSetStateMessage(t)}this.hoveredInstanceIds=void 0}setVisibility(t,e){this.state.setVisibility(e,t);let i=t?this.entityIdsToInstanceIds(t):this.clusterManager.getInstanceIds();e&&(i=i.filter(t=>this.layerManager.isVisibleByLayer(t))),this.applyVisibility(i,e)}setLayerVisibility(t,e){this.layerManager.setLayerVisibility(t,e);const i=e?this.layerManager.getLayerInstances(t).filter(t=>this.state.isVisible(this.geometryManager.getEntityId(t))):this.layerManager.getLayerInstances(t);this.applyVisibility(i,e)}applyVisibility(i,s){const r=this.clusterManager.getBatchGeometryByInstanceIds(i);for(const[i,n]of r){const i=n[0].batch,r=this.clusterManager.calculateRanges(n);i.state.visible=s?t(i.state.visible.concat(r)):e(i.state.visible,r),this.postSetStateMessage(i)}}setPickPriority(t,e){this.state.setPickPriority(e,t)}resetPickPriority(){this.state.resetPickPriority()}entityIdsToInstanceIds(t){const e=[];for(let i=0,s=t.length;i<s;i++)this.instanceManager.entityToInstance.has(t[i])&&e.push(...this.instanceManager.entityToInstance.get(t[i]));return e}}class s{constructor(t){this.geometry=t,this.buffers=[]}}var r,n={};n.SIZEOF_SHORT=2,n.SIZEOF_INT=4,n.FILE_IDENTIFIER_LENGTH=4,n.SIZE_PREFIX_LENGTH=4,n.Encoding={UTF8_BYTES:1,UTF16_STRING:2},n.int32=new Int32Array(2),n.float32=new Float32Array(n.int32.buffer),n.float64=new Float64Array(n.int32.buffer),n.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],n.Long=function(t,e){this.low=0|t,this.high=0|e},n.Long.create=function(t,e){return 0==t&&0==e?n.Long.ZERO:new n.Long(t,e)},n.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},n.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},n.Long.ZERO=new n.Long(0,0),n.Builder=function(t){if(t)e=t;else var e=1024;this.bb=n.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},n.Builder.prototype.dataBuffer=function(){return this.bb},n.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},n.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var i=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<i+t+e;){var s=this.bb.capacity();this.bb=n.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(i)},n.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},n.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},n.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},n.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},n.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},n.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},n.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},n.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},n.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},n.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},n.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},n.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},n.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},n.Builder.prototype.addFieldInt8=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt8(e),this.slot(t))},n.Builder.prototype.addFieldInt16=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt16(e),this.slot(t))},n.Builder.prototype.addFieldInt32=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt32(e),this.slot(t))},n.Builder.prototype.addFieldInt64=function(t,e,i){!this.force_defaults&&e.equals(i)||(this.addInt64(e),this.slot(t))},n.Builder.prototype.addFieldFloat32=function(t,e,i){(this.force_defaults||e!=i)&&(this.addFloat32(e),this.slot(t))},n.Builder.prototype.addFieldFloat64=function(t,e,i){(this.force_defaults||e!=i)&&(this.addFloat64(e),this.slot(t))},n.Builder.prototype.addFieldOffset=function(t,e,i){(this.force_defaults||e!=i)&&(this.addOffset(e),this.slot(t))},n.Builder.prototype.addFieldStruct=function(t,e,i){e!=i&&(this.nested(e),this.slot(t))},n.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},n.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},n.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},n.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},n.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var i=e<<1,s=n.ByteBuffer.allocate(i);return s.setPosition(i-e),s.bytes().set(t.bytes(),i-e),s},n.Builder.prototype.addOffset=function(t){this.prep(n.SIZEOF_INT,0),this.writeInt32(this.offset()-t+n.SIZEOF_INT)},n.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},n.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var i=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var s=(i+2)*n.SIZEOF_SHORT;this.addInt16(s);var r=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var a=this.bb.capacity()-this.vtables[e];if(s==this.bb.readInt16(a)){for(var h=n.SIZEOF_SHORT;h<s;h+=n.SIZEOF_SHORT)if(this.bb.readInt16(o+h)!=this.bb.readInt16(a+h))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},n.Builder.prototype.finish=function(t,e,i){var s=i?n.SIZE_PREFIX_LENGTH:0;if(e){var r=e;if(this.prep(this.minalign,n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH+s),r.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var o=n.FILE_IDENTIFIER_LENGTH-1;o>=0;o--)this.writeInt8(r.charCodeAt(o))}this.prep(this.minalign,n.SIZEOF_INT+s),this.addOffset(t),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},n.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},n.Builder.prototype.requiredField=function(t,e){var i=this.bb.capacity()-t,s=i-this.bb.readInt32(i);if(!(0!=this.bb.readInt16(s+e)))throw new Error("FlatBuffers: field "+e+" must be set")},n.Builder.prototype.startVector=function(t,e,i){this.notNested(),this.vector_num_elems=e,this.prep(n.SIZEOF_INT,t*e),this.prep(i,t*e)},n.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},n.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var i=0;i<t.length;){var s,r=t.charCodeAt(i++);if(r<55296||r>=56320)s=r;else s=(r<<10)+t.charCodeAt(i++)+-56613888;s<128?e.push(s):(s<2048?e.push(s>>6&31|192):(s<65536?e.push(s>>12&15|224):e.push(s>>18&7|240,s>>12&63|128),e.push(s>>6&63|128)),e.push(63&s|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);i=0;for(var n=this.space,o=this.bb.bytes();i<e.length;i++)o[n++]=e[i];return this.endVector()},n.Builder.prototype.createLong=function(t,e){return n.Long.create(t,e)},n.ByteBuffer=function(t){this.bytes_=t,this.position_=0},n.ByteBuffer.allocate=function(t){return new n.ByteBuffer(new Uint8Array(t))},n.ByteBuffer.prototype.clear=function(){this.position_=0},n.ByteBuffer.prototype.bytes=function(){return this.bytes_},n.ByteBuffer.prototype.position=function(){return this.position_},n.ByteBuffer.prototype.setPosition=function(t){this.position_=t},n.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},n.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},n.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},n.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},n.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},n.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},n.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},n.ByteBuffer.prototype.readInt64=function(t){return new n.Long(this.readInt32(t),this.readInt32(t+4))},n.ByteBuffer.prototype.readUint64=function(t){return new n.Long(this.readUint32(t),this.readUint32(t+4))},n.ByteBuffer.prototype.readFloat32=function(t){return n.int32[0]=this.readInt32(t),n.float32[0]},n.ByteBuffer.prototype.readFloat64=function(t){return n.int32[n.isLittleEndian?0:1]=this.readInt32(t),n.int32[n.isLittleEndian?1:0]=this.readInt32(t+4),n.float64[0]},n.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},n.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},n.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},n.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},n.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},n.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},n.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},n.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},n.ByteBuffer.prototype.writeFloat32=function(t,e){n.float32[0]=e,this.writeInt32(t,n.int32[0])},n.ByteBuffer.prototype.writeFloat64=function(t,e){n.float64[0]=e,this.writeInt32(t,n.int32[n.isLittleEndian?0:1]),this.writeInt32(t+4,n.int32[n.isLittleEndian?1:0])},n.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<n.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+n.SIZEOF_INT+e));return t},n.ByteBuffer.prototype.__offset=function(t,e){var i=t-this.readInt32(t);return e<this.readInt16(i)?this.readInt16(i+e):0},n.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},n.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var i=this.readInt32(t),s="",r=0;if(t+=n.SIZEOF_INT,e===n.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+i);for(;r<i;){var o,a=this.readUint8(t+r++);if(a<192)o=a;else{var h=this.readUint8(t+r++);if(a<224)o=(31&a)<<6|63&h;else{var c=this.readUint8(t+r++);if(a<240)o=(15&a)<<12|(63&h)<<6|63&c;else o=(7&a)<<18|(63&h)<<12|(63&c)<<6|63&this.readUint8(t+r++)}}o<65536?s+=String.fromCharCode(o):(o-=65536,s+=String.fromCharCode(55296+(o>>10),56320+(1023&o)))}return s},n.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},n.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+n.SIZEOF_INT},n.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},n.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var e=0;e<n.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+n.SIZEOF_INT+e))return!1;return!0},n.ByteBuffer.prototype.createLong=function(t,e){return n.Long.create(t,e)},function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.LineSegment=0]="LineSegment",t[t.PolyLine=1]="PolyLine",t[t.Arc=2]="Arc"}(e=t.SegmentType||(t.SegmentType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Invalid=0]="Invalid",t[t.LineSegment=1]="LineSegment",t[t.CircularArcSegment=2]="CircularArcSegment",t[t.ClothoidalArcSegment=3]="ClothoidalArcSegment",t[t.TransientCurveSegment=4]="TransientCurveSegment"}(e=t.HorizontalSegmentType||(t.HorizontalSegmentType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Invalid=0]="Invalid",t[t.LineSegment=1]="LineSegment",t[t.CircularArcSegment=2]="CircularArcSegment",t[t.ParabolicArcSegment=3]="ParabolicArcSegment"}(e=t.VerticalSegmentType||(t.VerticalSegmentType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Invalid=0]="Invalid",t[t.BiquadraticParabola=1]="BiquadraticParabola",t[t.BlossCurve=2]="BlossCurve",t[t.ClothoidCurve=3]="ClothoidCurve",t[t.CosineCurve=4]="CosineCurve",t[t.CubicParabola=5]="CubicParabola",t[t.SineCurve=6]="SineCurve"}(e=t.HorizontalTransitionCurveType||(t.HorizontalTransitionCurveType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Undefined=0]="Undefined",t[t.ReadWrite=1]="ReadWrite",t[t.ReadOnly=2]="ReadOnly",t[t.Locked=3]="Locked",t[t.ReadWriteLocked=4]="ReadWriteLocked",t[t.ReadOnlyLocked=5]="ReadOnlyLocked"}(e=t.OwnerHistoryState||(t.OwnerHistoryState={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.NoChange=0]="NoChange",t[t.Modified=1]="Modified",t[t.Added=2]="Added",t[t.Deleted=3]="Deleted"}(e=t.OwnerHistoryChangeAction||(t.OwnerHistoryChangeAction={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.LengthMeasure=0]="LengthMeasure",t[t.AreaMeasure=1]="AreaMeasure",t[t.VolumeMeasure=2]="VolumeMeasure",t[t.MassMeasure=3]="MassMeasure",t[t.AngleMeasure=4]="AngleMeasure",t[t.StringValue=5]="StringValue",t[t.IntValue=6]="IntValue",t[t.DoubleValue=7]="DoubleValue",t[t.DateTime=8]="DateTime",t[t.Logical=9]="Logical",t[t.Boolean=10]="Boolean"}(e=t.PropertyType||(t.PropertyType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.False=0]="False",t[t.True=1]="True",t[t.Unknown=2]="Unknown"}(e=t.Logical||(t.Logical={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Single=0]="Single",t[t.Double=1]="Double",t[t.FrontFace=2]="FrontFace",t[t.BackFace=3]="BackFace"}(e=t.Sidedness||(t.Sidedness={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Normal=0]="Normal",t[t.Border=1]="Border",t[t.Center=2]="Center",t[t.DashDot=3]="DashDot",t[t.Dashed=4]="Dashed",t[t.Divide=5]="Divide",t[t.Dot=6]="Dot",t[t.Hidden=7]="Hidden",t[t.ISO02W100=8]="ISO02W100",t[t.ISO03W100=9]="ISO03W100",t[t.ISO04W100=10]="ISO04W100",t[t.ISO05W100=11]="ISO05W100",t[t.ISO06W100=12]="ISO06W100",t[t.ISO07W100=13]="ISO07W100",t[t.ISO08W100=14]="ISO08W100",t[t.ISO09W100=15]="ISO09W100",t[t.ISO10W100=16]="ISO10W100",t[t.ISO11W100=17]="ISO11W100",t[t.ISO12W100=18]="ISO12W100",t[t.ISO13W100=19]="ISO13W100",t[t.ISO14W100=20]="ISO14W100",t[t.ISO15W100=21]="ISO15W100"}(e=t.LineStyle||(t.LineStyle={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Guid=0]="Guid",t[t.String=1]="String",t[t.SpatialHash=2]="SpatialHash",t[t.DwgHandle=3]="DwgHandle",t[t.None=4]="None"}(e=t.IdentifierType||(t.IdentifierType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.None=0]="None",t[t.BRep=1]="BRep",t[t.TriangleMesh=2]="TriangleMesh",t[t.TriangleMesh8=3]="TriangleMesh8",t[t.SweptDiskSolid=4]="SweptDiskSolid",t[t.GraphicsContainer=5]="GraphicsContainer",t[t.BRepWithUV=6]="BRepWithUV",t[t.BRepWithNormals=7]="BRepWithNormals",t[t.AlignmentCurve=8]="AlignmentCurve",t[t.GridLineContainer=9]="GridLineContainer",t[t.TexturedTriangleMesh=10]="TexturedTriangleMesh",t[t.TexturedTriangleMesh8=11]="TexturedTriangleMesh8",t[t.CoordinateGeometryPoint=12]="CoordinateGeometryPoint",t[t.BillboardText=13]="BillboardText",t[t.Billboard=14]="Billboard",t[t.TexturedBillboard=15]="TexturedBillboard",t[t.Bolt=16]="Bolt"}(e=t.GeometryType||(t.GeometryType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.None=0]="None",t[t.Png=1]="Png",t[t.JPeg=2]="JPeg"}(e=t.TextureType||(t.TextureType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Invalid=0]="Invalid",t[t.LeftToRight=1]="LeftToRight",t[t.RightToLeft=2]="RightToLeft",t[t.Vertical=3]="Vertical"}(e=t.LayoutType||(t.LayoutType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Invalid=0]="Invalid",t[t.LeftTop=1]="LeftTop",t[t.LeftCenter=2]="LeftCenter",t[t.LeftBottom=3]="LeftBottom",t[t.CenterTop=4]="CenterTop",t[t.CenterCenter=5]="CenterCenter",t[t.CenterBottom=6]="CenterBottom",t[t.RightTop=7]="RightTop",t[t.RightCenter=8]="RightCenter",t[t.RightBottom=9]="RightBottom",t[t.LeftBaseLine=10]="LeftBaseLine",t[t.CenterBaseLine=11]="CenterBaseLine",t[t.RightBaseLine=12]="RightBaseLine",t[t.LeftBottomBaseLine=13]="LeftBottomBaseLine",t[t.CenterBottomBaseLine=14]="CenterBottomBaseLine",t[t.RightBottomBaseLine=15]="RightBottomBaseLine"}(e=t.AlignmentType||(t.AlignmentType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.Round=2]="Round",t[t.Countersunk=3]="Countersunk",t[t.Stud=4]="Stud"}(e=t.BoltType||(t.BoltType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Unknown=0]="Unknown",t[t.SpatialHierarchy=1]="SpatialHierarchy",t[t.SpatialContainment=2]="SpatialContainment",t[t.Containment=3]="Containment",t[t.ElementAssembly=4]="ElementAssembly",t[t.Group=5]="Group",t[t.System=6]="System",t[t.Zone=7]="Zone"}(e=t.HierarchyType||(t.HierarchyType={}))}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.Vec3f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}x(){return this.bb.readFloat32(this.bb_pos)}mutate_x(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}y(){return this.bb.readFloat32(this.bb_pos+4)}mutate_y(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}z(){return this.bb.readFloat32(this.bb_pos+8)}mutate_z(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createVec3f(t,e,i,s){return t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.Vec2d=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}x(){return this.bb.readFloat64(this.bb_pos)}mutate_x(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}y(){return this.bb.readFloat64(this.bb_pos+8)}mutate_y(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static createVec2d(t,e,i){return t.prep(8,16),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.Vec3d=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}x(){return this.bb.readFloat64(this.bb_pos)}mutate_x(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}y(){return this.bb.readFloat64(this.bb_pos+8)}mutate_y(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}z(){return this.bb.readFloat64(this.bb_pos+16)}mutate_z(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static createVec3d(t,e,i,s){return t.prep(8,24),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.AABB3f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}min(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}max(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+12,this.bb)}static createAABB3f(t,e,i,s,r,n,o){return t.prep(4,24),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.Placement3=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}origin(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos,this.bb)}xAxis(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+24,this.bb)}yAxis(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+36,this.bb)}static createPlacement3(t,e,i,s,r,n,o,a,h,c){return t.prep(8,48),t.prep(4,12),t.writeFloat32(c),t.writeFloat32(h),t.writeFloat32(a),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(8,24),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.Line3f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}start(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}end(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+12,this.bb)}static createLine3f(t,e,i,s,r,n,o){return t.prep(4,24),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.Line3d=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}start(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos,this.bb)}end(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos+24,this.bb)}static createLine3d(t,e,i,s,r,n,o){return t.prep(8,48),t.prep(8,24),t.writeFloat64(o),t.writeFloat64(n),t.writeFloat64(r),t.prep(8,24),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsPolyline3f(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsPolyline3f(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}points(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}pointsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startPolyline3f(t){t.startObject(1)}static addPoints(t,e){t.addFieldOffset(0,e,0)}static startPointsVector(t,e){t.startVector(12,e,4)}static endPolyline3f(t){return t.endObject()}static createPolyline3f(t,e){return i.startPolyline3f(t),i.addPoints(t,e),i.endPolyline3f(t)}}e.Polyline3f=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.Arc3f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}center(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}axis(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+12,this.bb)}refDirection(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+24,this.bb)}radius(){return this.bb.readFloat32(this.bb_pos+36)}mutate_radius(t){var e=this.bb.__offset(this.bb_pos,36);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}angle(){return this.bb.readFloat32(this.bb_pos+40)}mutate_angle(t){var e=this.bb.__offset(this.bb_pos,40);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createArc3f(t,e,i,s,r,n,o,a,h,c,b,l){return t.prep(4,44),t.writeFloat32(l),t.writeFloat32(b),t.prep(4,12),t.writeFloat32(c),t.writeFloat32(h),t.writeFloat32(a),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.Arc3d=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}center(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos,this.bb)}axis(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos+24,this.bb)}refDirection(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos+48,this.bb)}radius(){return this.bb.readFloat64(this.bb_pos+72)}mutate_radius(t){var e=this.bb.__offset(this.bb_pos,72);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}angle(){return this.bb.readFloat64(this.bb_pos+80)}mutate_angle(t){var e=this.bb.__offset(this.bb_pos,80);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static createArc3d(t,e,i,s,r,n,o,a,h,c,b,l){return t.prep(8,88),t.writeFloat64(l),t.writeFloat64(b),t.prep(8,24),t.writeFloat64(c),t.writeFloat64(h),t.writeFloat64(a),t.prep(8,24),t.writeFloat64(o),t.writeFloat64(n),t.writeFloat64(r),t.prep(8,24),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.Guid=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}data1(){return this.bb.readUint32(this.bb_pos)}mutate_data1(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}data2(){return this.bb.readUint16(this.bb_pos+4)}mutate_data2(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}data3(){return this.bb.readUint16(this.bb_pos+6)}mutate_data3(t){var e=this.bb.__offset(this.bb_pos,6);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}data41(){return this.bb.readUint8(this.bb_pos+8)}mutate_data4_1(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data42(){return this.bb.readUint8(this.bb_pos+9)}mutate_data4_2(t){var e=this.bb.__offset(this.bb_pos,9);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data43(){return this.bb.readUint8(this.bb_pos+10)}mutate_data4_3(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data44(){return this.bb.readUint8(this.bb_pos+11)}mutate_data4_4(t){var e=this.bb.__offset(this.bb_pos,11);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data45(){return this.bb.readUint8(this.bb_pos+12)}mutate_data4_5(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data46(){return this.bb.readUint8(this.bb_pos+13)}mutate_data4_6(t){var e=this.bb.__offset(this.bb_pos,13);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data47(){return this.bb.readUint8(this.bb_pos+14)}mutate_data4_7(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data48(){return this.bb.readUint8(this.bb_pos+15)}mutate_data4_8(t){var e=this.bb.__offset(this.bb_pos,15);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}static createGuid(t,e,i,s,r,n,o,a,h,c,b,l){return t.prep(4,16),t.writeInt8(l),t.writeInt8(b),t.writeInt8(c),t.writeInt8(h),t.writeInt8(a),t.writeInt8(o),t.writeInt8(n),t.writeInt8(r),t.writeInt16(s),t.writeInt16(i),t.writeInt32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.SpatialHash=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}x(){return this.bb.readFloat64(this.bb_pos)}mutate_x(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}y(){return this.bb.readFloat64(this.bb_pos+8)}mutate_y(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}z(){return this.bb.readFloat64(this.bb_pos+16)}mutate_z(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d0(){return this.bb.readFloat64(this.bb_pos+24)}mutate_d0(t){var e=this.bb.__offset(this.bb_pos,24);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d1(){return this.bb.readFloat64(this.bb_pos+32)}mutate_d1(t){var e=this.bb.__offset(this.bb_pos,32);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d2(){return this.bb.readFloat64(this.bb_pos+40)}mutate_d2(t){var e=this.bb.__offset(this.bb_pos,40);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d3(){return this.bb.readFloat64(this.bb_pos+48)}mutate_d3(t){var e=this.bb.__offset(this.bb_pos,48);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d4(){return this.bb.readFloat64(this.bb_pos+56)}mutate_d4(t){var e=this.bb.__offset(this.bb_pos,56);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d5(){return this.bb.readFloat64(this.bb_pos+64)}mutate_d5(t){var e=this.bb.__offset(this.bb_pos,64);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d6(){return this.bb.readFloat64(this.bb_pos+72)}mutate_d6(t){var e=this.bb.__offset(this.bb_pos,72);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d7(){return this.bb.readFloat64(this.bb_pos+80)}mutate_d7(t){var e=this.bb.__offset(this.bb_pos,80);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static createSpatialHash(t,e,i,s,r,n,o,a,h,c,b,l){return t.prep(8,88),t.writeFloat64(l),t.writeFloat64(b),t.writeFloat64(c),t.writeFloat64(h),t.writeFloat64(a),t.writeFloat64(o),t.writeFloat64(n),t.writeFloat64(r),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.UV=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}u(){return this.bb.readFloat32(this.bb_pos)}mutate_u(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}v(){return this.bb.readFloat32(this.bb_pos+4)}mutate_v(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createUV(t,e,i){return t.prep(4,8),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOuterWire(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsOuterWire(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}vertexIndices(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+2*t):0}vertexIndicesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}vertexIndicesArray(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startOuterWire(t){t.startObject(1)}static addVertexIndices(t,e){t.addFieldOffset(0,e,0)}static createVertexIndicesVector(t,e){t.startVector(2,e.length,2);for(var i=e.length-1;i>=0;i--)t.addInt16(e[i]);return t.endVector()}static startVertexIndicesVector(t,e){t.startVector(2,e,2)}static endOuterWire(t){var e=t.endObject();return t.requiredField(e,4),e}static createOuterWire(t,i){return e.startOuterWire(t),e.addVertexIndices(t,i),e.endOuterWire(t)}}t.OuterWire=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInnerWire(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInnerWire(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}outerWire(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint16(this.bb_pos+t):0}mutate_outerWire(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}vertexIndices(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+2*t):0}vertexIndicesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertexIndicesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startInnerWire(t){t.startObject(2)}static addOuterWire(t,e){t.addFieldInt16(0,e,0)}static addVertexIndices(t,e){t.addFieldOffset(1,e,0)}static createVertexIndicesVector(t,e){t.startVector(2,e.length,2);for(var i=e.length-1;i>=0;i--)t.addInt16(e[i]);return t.endVector()}static startVertexIndicesVector(t,e){t.startVector(2,e,2)}static endInnerWire(t){var e=t.endObject();return t.requiredField(e,6),e}static createInnerWire(t,i,s){return e.startInnerWire(t),e.addOuterWire(t,i),e.addVertexIndices(t,s),e.endInnerWire(t)}}t.InnerWire=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBRep(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBRep(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}outerWires(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.OuterWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}outerWiresLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}innerWires(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.InnerWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}innerWiresLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startBRep(t){t.startObject(3)}static addOuterWires(t,e){t.addFieldOffset(0,e,0)}static createOuterWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startOuterWiresVector(t,e){t.startVector(4,e,4)}static addInnerWires(t,e){t.addFieldOffset(1,e,0)}static createInnerWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startInnerWiresVector(t,e){t.startVector(4,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(12,e,4)}static endBRep(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}static createBRep(t,e,s,r){return i.startBRep(t),i.addOuterWires(t,e),i.addInnerWires(t,s),i.addVertices(t,r),i.endBRep(t)}}e.BRep=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.PositionUV=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}position(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}uv(e){return(e||new t.Technology.TrimBim.Fbs.UV).__init(this.bb_pos+12,this.bb)}static createPositionUV(t,e,i,s,r,n){return t.prep(4,20),t.prep(4,8),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.PositionNormal=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}position(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}normal(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+12,this.bb)}static createPositionNormal(t,e,i,s,r,n,o){return t.prep(4,24),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBRepWithUV(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBRepWithUV(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}outerWires(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.OuterWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}outerWiresLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}innerWires(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.InnerWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}innerWiresLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.PositionUV).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startBRepWithUV(t){t.startObject(3)}static addOuterWires(t,e){t.addFieldOffset(0,e,0)}static createOuterWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startOuterWiresVector(t,e){t.startVector(4,e,4)}static addInnerWires(t,e){t.addFieldOffset(1,e,0)}static createInnerWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startInnerWiresVector(t,e){t.startVector(4,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(20,e,4)}static endBRepWithUV(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}static createBRepWithUV(t,e,s,r){return i.startBRepWithUV(t),i.addOuterWires(t,e),i.addInnerWires(t,s),i.addVertices(t,r),i.endBRepWithUV(t)}}e.BRepWithUV=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBRepWithNormal(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBRepWithNormal(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}outerWires(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.OuterWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}outerWiresLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}innerWires(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.InnerWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}innerWiresLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.PositionNormal).__init(this.bb.__vector(this.bb_pos+s)+24*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startBRepWithNormal(t){t.startObject(3)}static addOuterWires(t,e){t.addFieldOffset(0,e,0)}static createOuterWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startOuterWiresVector(t,e){t.startVector(4,e,4)}static addInnerWires(t,e){t.addFieldOffset(1,e,0)}static createInnerWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startInnerWiresVector(t,e){t.startVector(4,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(24,e,4)}static endBRepWithNormal(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}static createBRepWithNormal(t,e,s,r){return i.startBRepWithNormal(t),i.addOuterWires(t,e),i.addInnerWires(t,s),i.addVertices(t,r),i.endBRepWithNormal(t)}}e.BRepWithNormal=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.IndexedVertex=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}positionIndex(){return this.bb.readUint16(this.bb_pos)}mutate_positionIndex(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}normalIndex(){return this.bb.readUint16(this.bb_pos+2)}mutate_normalIndex(t){var e=this.bb.__offset(this.bb_pos,2);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}static createIndexedVertex(t,e,i){return t.prep(2,4),t.writeInt16(i),t.writeInt16(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTriangleMesh(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTriangleMesh(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}positions(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}positionsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}normals(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}normalsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.IndexedVertex).__init(this.bb.__vector(this.bb_pos+s)+4*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}indices(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+2*t):0}indicesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}indicesArray(){var t=this.bb.__offset(this.bb_pos,10);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTriangleMesh(t){t.startObject(4)}static addPositions(t,e){t.addFieldOffset(0,e,0)}static startPositionsVector(t,e){t.startVector(12,e,4)}static addNormals(t,e){t.addFieldOffset(1,e,0)}static startNormalsVector(t,e){t.startVector(12,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(4,e,2)}static addIndices(t,e){t.addFieldOffset(3,e,0)}static createIndicesVector(t,e){t.startVector(2,e.length,2);for(var i=e.length-1;i>=0;i--)t.addInt16(e[i]);return t.endVector()}static startIndicesVector(t,e){t.startVector(2,e,2)}static endTriangleMesh(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),e}static createTriangleMesh(t,e,s,r,n){return i.startTriangleMesh(t),i.addPositions(t,e),i.addNormals(t,s),i.addVertices(t,r),i.addIndices(t,n),i.endTriangleMesh(t)}}e.TriangleMesh=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.IndexedVertex8=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}positionIndex(){return this.bb.readUint8(this.bb_pos)}mutate_positionIndex(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}normalIndex(){return this.bb.readUint8(this.bb_pos+1)}mutate_normalIndex(t){var e=this.bb.__offset(this.bb_pos,1);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}static createIndexedVertex8(t,e,i){return t.prep(1,2),t.writeInt8(i),t.writeInt8(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTriangleMesh8(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTriangleMesh8(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}positions(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}positionsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}normals(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}normalsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.IndexedVertex8).__init(this.bb.__vector(this.bb_pos+s)+2*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}indices(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}indicesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}indicesArray(){var t=this.bb.__offset(this.bb_pos,10);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTriangleMesh8(t){t.startObject(4)}static addPositions(t,e){t.addFieldOffset(0,e,0)}static startPositionsVector(t,e){t.startVector(12,e,4)}static addNormals(t,e){t.addFieldOffset(1,e,0)}static startNormalsVector(t,e){t.startVector(12,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(2,e,1)}static addIndices(t,e){t.addFieldOffset(3,e,0)}static createIndicesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startIndicesVector(t,e){t.startVector(1,e,1)}static endTriangleMesh8(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),e}static createTriangleMesh8(t,e,s,r,n){return i.startTriangleMesh8(t),i.addPositions(t,e),i.addNormals(t,s),i.addVertices(t,r),i.addIndices(t,n),i.endTriangleMesh8(t)}}e.TriangleMesh8=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTexturedTriangleMesh(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTexturedTriangleMesh(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}positions(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}positionsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}normals(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}normalsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}uvs(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.UV).__init(this.bb.__vector(this.bb_pos+s)+8*e,this.bb):null}uvsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.IndexedVertex).__init(this.bb.__vector(this.bb_pos+s)+4*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}indices(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+2*t):0}indicesLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}indicesArray(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTexturedTriangleMesh(t){t.startObject(5)}static addPositions(t,e){t.addFieldOffset(0,e,0)}static startPositionsVector(t,e){t.startVector(12,e,4)}static addNormals(t,e){t.addFieldOffset(1,e,0)}static startNormalsVector(t,e){t.startVector(12,e,4)}static addUvs(t,e){t.addFieldOffset(2,e,0)}static startUvsVector(t,e){t.startVector(8,e,4)}static addVertices(t,e){t.addFieldOffset(3,e,0)}static startVerticesVector(t,e){t.startVector(4,e,2)}static addIndices(t,e){t.addFieldOffset(4,e,0)}static createIndicesVector(t,e){t.startVector(2,e.length,2);for(var i=e.length-1;i>=0;i--)t.addInt16(e[i]);return t.endVector()}static startIndicesVector(t,e){t.startVector(2,e,2)}static endTexturedTriangleMesh(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),e}static createTexturedTriangleMesh(t,e,s,r,n,o){return i.startTexturedTriangleMesh(t),i.addPositions(t,e),i.addNormals(t,s),i.addUvs(t,r),i.addVertices(t,n),i.addIndices(t,o),i.endTexturedTriangleMesh(t)}}e.TexturedTriangleMesh=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTexturedTriangleMesh8(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTexturedTriangleMesh8(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}positions(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}positionsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}normals(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}normalsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}uvs(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.UV).__init(this.bb.__vector(this.bb_pos+s)+8*e,this.bb):null}uvsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.IndexedVertex8).__init(this.bb.__vector(this.bb_pos+s)+2*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}indices(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}indicesLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}indicesArray(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTexturedTriangleMesh8(t){t.startObject(5)}static addPositions(t,e){t.addFieldOffset(0,e,0)}static startPositionsVector(t,e){t.startVector(12,e,4)}static addNormals(t,e){t.addFieldOffset(1,e,0)}static startNormalsVector(t,e){t.startVector(12,e,4)}static addUvs(t,e){t.addFieldOffset(2,e,0)}static startUvsVector(t,e){t.startVector(8,e,4)}static addVertices(t,e){t.addFieldOffset(3,e,0)}static startVerticesVector(t,e){t.startVector(2,e,1)}static addIndices(t,e){t.addFieldOffset(4,e,0)}static createIndicesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startIndicesVector(t,e){t.startVector(1,e,1)}static endTexturedTriangleMesh8(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),e}static createTexturedTriangleMesh8(t,e,s,r,n,o){return i.startTexturedTriangleMesh8(t),i.addPositions(t,e),i.addNormals(t,s),i.addUvs(t,r),i.addVertices(t,n),i.addIndices(t,o),i.endTexturedTriangleMesh8(t)}}e.TexturedTriangleMesh8=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDirectrix(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDirectrix(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}types(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0}typesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}typesArray(){var t=this.bb.__offset(this.bb_pos,4);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}indexes(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}indexesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}indexesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}lineSegments(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Line3f).__init(this.bb.__vector(this.bb_pos+s)+24*e,this.bb):null}lineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}polyLines(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.Polyline3f).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}polyLinesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}arcs(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.Arc3f).__init(this.bb.__vector(this.bb_pos+s)+44*e,this.bb):null}arcsLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startDirectrix(t){t.startObject(5)}static addTypes(t,e){t.addFieldOffset(0,e,0)}static createTypesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startTypesVector(t,e){t.startVector(1,e,1)}static addIndexes(t,e){t.addFieldOffset(1,e,0)}static createIndexesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addInt32(e[i]);return t.endVector()}static startIndexesVector(t,e){t.startVector(4,e,4)}static addLineSegments(t,e){t.addFieldOffset(2,e,0)}static startLineSegmentsVector(t,e){t.startVector(24,e,4)}static addPolyLines(t,e){t.addFieldOffset(3,e,0)}static createPolyLinesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startPolyLinesVector(t,e){t.startVector(4,e,4)}static addArcs(t,e){t.addFieldOffset(4,e,0)}static startArcsVector(t,e){t.startVector(44,e,4)}static endDirectrix(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),e}static createDirectrix(t,e,s,r,n,o){return i.startDirectrix(t),i.addTypes(t,e),i.addIndexes(t,s),i.addLineSegments(t,r),i.addPolyLines(t,n),i.addArcs(t,o),i.endDirectrix(t)}}e.Directrix=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSweptDiskSolidContainer(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSweptDiskSolidContainer(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}directrices(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Directrix).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}directricesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}radius(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}radiusLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}radiusArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startSweptDiskSolidContainer(t){t.startObject(2)}static addDirectrices(t,e){t.addFieldOffset(0,e,0)}static createDirectricesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startDirectricesVector(t,e){t.startVector(4,e,4)}static addRadius(t,e){t.addFieldOffset(1,e,0)}static createRadiusVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startRadiusVector(t,e){t.startVector(8,e,8)}static endSweptDiskSolidContainer(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createSweptDiskSolidContainer(t,e,s){return i.startSweptDiskSolidContainer(t),i.addDirectrices(t,e),i.addRadius(t,s),i.endSweptDiskSolidContainer(t)}}e.SweptDiskSolidContainer=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalLineSegment(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalLineSegment(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startPoint(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+i,this.bb):null}startDirection(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDirection(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_segmentLength(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static startHorizontalLineSegment(t){t.startObject(5)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartPoint(t,e){t.addFieldStruct(2,e,0)}static addStartDirection(t,e){t.addFieldFloat64(3,e,0)}static addSegmentLength(t,e){t.addFieldFloat64(4,e,0)}static endHorizontalLineSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createHorizontalLineSegment(t,e,s,r,n,o){return i.startHorizontalLineSegment(t),i.addStartTag(t,e),i.addEndTag(t,s),i.addStartPoint(t,r),i.addStartDirection(t,n),i.addSegmentLength(t,o),i.endHorizontalLineSegment(t)}}e.HorizontalLineSegment=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalCircularArcSegment(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalCircularArcSegment(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startPoint(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+i,this.bb):null}startDirection(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDirection(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_segmentLength(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}radius(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_radius(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isCCW(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isCCW(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static startHorizontalCircularArcSegment(t){t.startObject(7)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartPoint(t,e){t.addFieldStruct(2,e,0)}static addStartDirection(t,e){t.addFieldFloat64(3,e,0)}static addSegmentLength(t,e){t.addFieldFloat64(4,e,0)}static addRadius(t,e){t.addFieldFloat64(5,e,0)}static addIsCCW(t,e){t.addFieldInt8(6,+e,0)}static endHorizontalCircularArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createHorizontalCircularArcSegment(t,e,s,r,n,o,a,h){return i.startHorizontalCircularArcSegment(t),i.addStartTag(t,e),i.addEndTag(t,s),i.addStartPoint(t,r),i.addStartDirection(t,n),i.addSegmentLength(t,o),i.addRadius(t,a),i.addIsCCW(t,h),i.endHorizontalCircularArcSegment(t)}}e.HorizontalCircularArcSegment=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalClothoidalArcSegment(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalClothoidalArcSegment(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startPoint(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+i,this.bb):null}startDirection(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDirection(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_segmentLength(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startRadius(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startRadius(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}clothoidConstant(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_clothoidConstant(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isCCW(){var t=this.bb.__offset(this.bb_pos,18);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isCCW(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}isEntry(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isEntry(t){var e=this.bb.__offset(this.bb_pos,20);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static startHorizontalClothoidalArcSegment(t){t.startObject(9)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartPoint(t,e){t.addFieldStruct(2,e,0)}static addStartDirection(t,e){t.addFieldFloat64(3,e,0)}static addSegmentLength(t,e){t.addFieldFloat64(4,e,0)}static addStartRadius(t,e){t.addFieldFloat64(5,e,0)}static addClothoidConstant(t,e){t.addFieldFloat64(6,e,0)}static addIsCCW(t,e){t.addFieldInt8(7,+e,0)}static addIsEntry(t,e){t.addFieldInt8(8,+e,0)}static endHorizontalClothoidalArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createHorizontalClothoidalArcSegment(t,e,s,r,n,o,a,h,c,b){return i.startHorizontalClothoidalArcSegment(t),i.addStartTag(t,e),i.addEndTag(t,s),i.addStartPoint(t,r),i.addStartDirection(t,n),i.addSegmentLength(t,o),i.addStartRadius(t,a),i.addClothoidConstant(t,h),i.addIsCCW(t,c),i.addIsEntry(t,b),i.endHorizontalClothoidalArcSegment(t)}}e.HorizontalClothoidalArcSegment=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalTransitionArcSegment(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalTransitionArcSegment(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startPoint(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+i,this.bb):null}startDirection(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDirection(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_segmentLength(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startRadius(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startRadius(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}endRadius(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_endRadius(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isStartRadiusCCW(){var t=this.bb.__offset(this.bb_pos,18);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isStartRadiusCCW(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}isEndRadiusCCW(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isEndRadiusCCW(t){var e=this.bb.__offset(this.bb_pos,20);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}type(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt8(this.bb_pos+e):t.Technology.TrimBim.Fbs.HorizontalTransitionCurveType.Invalid}mutate_type(t){var e=this.bb.__offset(this.bb_pos,22);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}static startHorizontalTransitionArcSegment(t){t.startObject(10)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartPoint(t,e){t.addFieldStruct(2,e,0)}static addStartDirection(t,e){t.addFieldFloat64(3,e,0)}static addSegmentLength(t,e){t.addFieldFloat64(4,e,0)}static addStartRadius(t,e){t.addFieldFloat64(5,e,0)}static addEndRadius(t,e){t.addFieldFloat64(6,e,0)}static addIsStartRadiusCCW(t,e){t.addFieldInt8(7,+e,0)}static addIsEndRadiusCCW(t,e){t.addFieldInt8(8,+e,0)}static addType(e,i){e.addFieldInt8(9,i,t.Technology.TrimBim.Fbs.HorizontalTransitionCurveType.Invalid)}static endHorizontalTransitionArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createHorizontalTransitionArcSegment(t,e,s,r,n,o,a,h,c,b,l){return i.startHorizontalTransitionArcSegment(t),i.addStartTag(t,e),i.addEndTag(t,s),i.addStartPoint(t,r),i.addStartDirection(t,n),i.addSegmentLength(t,o),i.addStartRadius(t,a),i.addEndRadius(t,h),i.addIsStartRadiusCCW(t,c),i.addIsEndRadiusCCW(t,b),i.addType(t,l),i.endHorizontalTransitionArcSegment(t)}}e.HorizontalTransitionArcSegment=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVerticalLineSegment(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVerticalLineSegment(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startDistAlong(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDistAlong(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}horizontalLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_horizontalLength(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startHeight(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startHeight(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startGradient(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startGradient(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static startVerticalLineSegment(t){t.startObject(6)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartDistAlong(t,e){t.addFieldFloat64(2,e,0)}static addHorizontalLength(t,e){t.addFieldFloat64(3,e,0)}static addStartHeight(t,e){t.addFieldFloat64(4,e,0)}static addStartGradient(t,e){t.addFieldFloat64(5,e,0)}static endVerticalLineSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createVerticalLineSegment(t,i,s,r,n,o,a){return e.startVerticalLineSegment(t),e.addStartTag(t,i),e.addEndTag(t,s),e.addStartDistAlong(t,r),e.addHorizontalLength(t,n),e.addStartHeight(t,o),e.addStartGradient(t,a),e.endVerticalLineSegment(t)}}t.VerticalLineSegment=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVerticalCircularArcSegment(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVerticalCircularArcSegment(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startDistAlong(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDistAlong(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}horizontalLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_horizontalLength(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startHeight(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startHeight(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startGradient(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startGradient(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}radius(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_radius(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isConvex(){var t=this.bb.__offset(this.bb_pos,18);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isConvex(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static startVerticalCircularArcSegment(t){t.startObject(8)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartDistAlong(t,e){t.addFieldFloat64(2,e,0)}static addHorizontalLength(t,e){t.addFieldFloat64(3,e,0)}static addStartHeight(t,e){t.addFieldFloat64(4,e,0)}static addStartGradient(t,e){t.addFieldFloat64(5,e,0)}static addRadius(t,e){t.addFieldFloat64(6,e,0)}static addIsConvex(t,e){t.addFieldInt8(7,+e,0)}static endVerticalCircularArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createVerticalCircularArcSegment(t,i,s,r,n,o,a,h,c){return e.startVerticalCircularArcSegment(t),e.addStartTag(t,i),e.addEndTag(t,s),e.addStartDistAlong(t,r),e.addHorizontalLength(t,n),e.addStartHeight(t,o),e.addStartGradient(t,a),e.addRadius(t,h),e.addIsConvex(t,c),e.endVerticalCircularArcSegment(t)}}t.VerticalCircularArcSegment=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVerticalParabolicArcSegment(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVerticalParabolicArcSegment(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startDistAlong(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDistAlong(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}horizontalLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_horizontalLength(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startHeight(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startHeight(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startGradient(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startGradient(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}parabolaConstant(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_parabolaConstant(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isConvex(){var t=this.bb.__offset(this.bb_pos,18);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isConvex(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static startVerticalParabolicArcSegment(t){t.startObject(8)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartDistAlong(t,e){t.addFieldFloat64(2,e,0)}static addHorizontalLength(t,e){t.addFieldFloat64(3,e,0)}static addStartHeight(t,e){t.addFieldFloat64(4,e,0)}static addStartGradient(t,e){t.addFieldFloat64(5,e,0)}static addParabolaConstant(t,e){t.addFieldFloat64(6,e,0)}static addIsConvex(t,e){t.addFieldInt8(7,+e,0)}static endVerticalParabolicArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createVerticalParabolicArcSegment(t,i,s,r,n,o,a,h,c){return e.startVerticalParabolicArcSegment(t),e.addStartTag(t,i),e.addEndTag(t,s),e.addStartDistAlong(t,r),e.addHorizontalLength(t,n),e.addStartHeight(t,o),e.addStartGradient(t,a),e.addParabolaConstant(t,h),e.addIsConvex(t,c),e.endVerticalParabolicArcSegment(t)}}t.VerticalParabolicArcSegment=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalCurve(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalCurve(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}startAlongDistance(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startAlongDistance(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentTypes(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0}segmentTypesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}segmentTypesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}lineSegments(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.HorizontalLineSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}lineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}circularArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.HorizontalCircularArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}circularArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}clothoidalArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.HorizontalClothoidalArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}clothoidalArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}transitionArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,14);return s?(i||new t.Technology.TrimBim.Fbs.HorizontalTransitionArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}transitionArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}static startHorizontalCurve(t){t.startObject(6)}static addStartAlongDistance(t,e){t.addFieldFloat64(0,e,0)}static addSegmentTypes(t,e){t.addFieldOffset(1,e,0)}static createSegmentTypesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startSegmentTypesVector(t,e){t.startVector(1,e,1)}static addLineSegments(t,e){t.addFieldOffset(2,e,0)}static createLineSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startLineSegmentsVector(t,e){t.startVector(4,e,4)}static addCircularArcSegments(t,e){t.addFieldOffset(3,e,0)}static createCircularArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCircularArcSegmentsVector(t,e){t.startVector(4,e,4)}static addClothoidalArcSegments(t,e){t.addFieldOffset(4,e,0)}static createClothoidalArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startClothoidalArcSegmentsVector(t,e){t.startVector(4,e,4)}static addTransitionArcSegments(t,e){t.addFieldOffset(5,e,0)}static createTransitionArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTransitionArcSegmentsVector(t,e){t.startVector(4,e,4)}static endHorizontalCurve(t){var e=t.endObject();return t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),t.requiredField(e,14),e}static createHorizontalCurve(t,e,s,r,n,o,a){return i.startHorizontalCurve(t),i.addStartAlongDistance(t,e),i.addSegmentTypes(t,s),i.addLineSegments(t,r),i.addCircularArcSegments(t,n),i.addClothoidalArcSegments(t,o),i.addTransitionArcSegments(t,a),i.endHorizontalCurve(t)}}e.HorizontalCurve=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVerticalCurve(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVerticalCurve(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}segmentTypes(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0}segmentTypesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}segmentTypesArray(){var t=this.bb.__offset(this.bb_pos,4);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}lineSegments(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.VerticalLineSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}lineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}circularArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.VerticalCircularArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}circularArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}parabolicArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.VerticalParabolicArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}parabolicArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startVerticalCurve(t){t.startObject(4)}static addSegmentTypes(t,e){t.addFieldOffset(0,e,0)}static createSegmentTypesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startSegmentTypesVector(t,e){t.startVector(1,e,1)}static addLineSegments(t,e){t.addFieldOffset(1,e,0)}static createLineSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startLineSegmentsVector(t,e){t.startVector(4,e,4)}static addCircularArcSegments(t,e){t.addFieldOffset(2,e,0)}static createCircularArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCircularArcSegmentsVector(t,e){t.startVector(4,e,4)}static addParabolicArcSegments(t,e){t.addFieldOffset(3,e,0)}static createParabolicArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startParabolicArcSegmentsVector(t,e){t.startVector(4,e,4)}static endVerticalCurve(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),e}static createVerticalCurve(t,e,s,r,n){return i.startVerticalCurve(t),i.addSegmentTypes(t,e),i.addLineSegments(t,s),i.addCircularArcSegments(t,r),i.addParabolicArcSegments(t,n),i.endVerticalCurve(t)}}e.VerticalCurve=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsAlignmentCurve(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsAlignmentCurve(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}horizontalCurve(e){var i=this.bb.__offset(this.bb_pos,4);return i?(e||new t.Technology.TrimBim.Fbs.HorizontalCurve).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}verticalCurve(e){var i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.Technology.TrimBim.Fbs.VerticalCurve).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}name(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}static startAlignmentCurve(t){t.startObject(3)}static addHorizontalCurve(t,e){t.addFieldOffset(0,e,0)}static addVerticalCurve(t,e){t.addFieldOffset(1,e,0)}static addName(t,e){t.addFieldOffset(2,e,0)}static endAlignmentCurve(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}static createAlignmentCurve(t,e,s,r){return i.startAlignmentCurve(t),i.addHorizontalCurve(t,e),i.addVerticalCurve(t,s),i.addName(t,r),i.endAlignmentCurve(t)}}e.AlignmentCurve=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGridLineSegment(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGridLineSegment(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}axisTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}lineSegment(e){var i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.Technology.TrimBim.Fbs.Line3d).__init(this.bb_pos+i,this.bb):null}static startGridLineSegment(t){t.startObject(2)}static addAxisTag(t,e){t.addFieldOffset(0,e,0)}static addLineSegment(t,e){t.addFieldStruct(1,e,0)}static endGridLineSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createGridLineSegment(t,e,s){return i.startGridLineSegment(t),i.addAxisTag(t,e),i.addLineSegment(t,s),i.endGridLineSegment(t)}}e.GridLineSegment=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGridArc(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGridArc(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}axisTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}arc(e){var i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.Technology.TrimBim.Fbs.Arc3d).__init(this.bb_pos+i,this.bb):null}static startGridArc(t){t.startObject(2)}static addAxisTag(t,e){t.addFieldOffset(0,e,0)}static addArc(t,e){t.addFieldStruct(1,e,0)}static endGridArc(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createGridArc(t,e,s){return i.startGridArc(t),i.addAxisTag(t,e),i.addArc(t,s),i.endGridArc(t)}}e.GridArc=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGridLineContainer(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGridLineContainer(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}gridLineSegments(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.GridLineSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}gridLineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}gridArcs(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.GridArc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}gridArcsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGridLineContainer(t){t.startObject(2)}static addGridLineSegments(t,e){t.addFieldOffset(0,e,0)}static createGridLineSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startGridLineSegmentsVector(t,e){t.startVector(4,e,4)}static addGridArcs(t,e){t.addFieldOffset(1,e,0)}static createGridArcsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startGridArcsVector(t,e){t.startVector(4,e,4)}static endGridLineContainer(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createGridLineContainer(t,e,s){return i.startGridLineContainer(t),i.addGridLineSegments(t,e),i.addGridArcs(t,s),i.endGridLineContainer(t)}}e.GridLineContainer=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOwner(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsOwner(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}personId(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}personFamilyName(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}personGivenName(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}personMiddleNames(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}personRoles(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}organizationId(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}organizationName(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}organizationDescription(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}organizationRoles(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}applicationVersion(t){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__string(this.bb_pos+e,t):null}applicationFullName(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}applicationIdentifier(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}static startOwner(t){t.startObject(12)}static addPersonId(t,e){t.addFieldOffset(0,e,0)}static addPersonFamilyName(t,e){t.addFieldOffset(1,e,0)}static addPersonGivenName(t,e){t.addFieldOffset(2,e,0)}static addPersonMiddleNames(t,e){t.addFieldOffset(3,e,0)}static addPersonRoles(t,e){t.addFieldOffset(4,e,0)}static addOrganizationId(t,e){t.addFieldOffset(5,e,0)}static addOrganizationName(t,e){t.addFieldOffset(6,e,0)}static addOrganizationDescription(t,e){t.addFieldOffset(7,e,0)}static addOrganizationRoles(t,e){t.addFieldOffset(8,e,0)}static addApplicationVersion(t,e){t.addFieldOffset(9,e,0)}static addApplicationFullName(t,e){t.addFieldOffset(10,e,0)}static addApplicationIdentifier(t,e){t.addFieldOffset(11,e,0)}static endOwner(t){return t.endObject()}static createOwner(t,i,s,r,n,o,a,h,c,b,l,d,u){return e.startOwner(t),e.addPersonId(t,i),e.addPersonFamilyName(t,s),e.addPersonGivenName(t,r),e.addPersonMiddleNames(t,n),e.addPersonRoles(t,o),e.addOrganizationId(t,a),e.addOrganizationName(t,h),e.addOrganizationDescription(t,c),e.addOrganizationRoles(t,b),e.addApplicationVersion(t,l),e.addApplicationFullName(t,d),e.addApplicationIdentifier(t,u),e.endOwner(t)}}t.Owner=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.History=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}state(){return this.bb.readInt8(this.bb_pos)}mutate_state(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}changeAction(){return this.bb.readInt8(this.bb_pos+1)}mutate_changeAction(t){var e=this.bb.__offset(this.bb_pos,1);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}creationDate(){return this.bb.readInt64(this.bb_pos+8)}mutate_creationDate(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeInt64(this.bb_pos+e,t),!0)}lastModificationDate(){return this.bb.readInt64(this.bb_pos+16)}mutate_lastModificationDate(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeInt64(this.bb_pos+e,t),!0)}static createHistory(t,e,i,s,r){return t.prep(8,24),t.writeInt64(r),t.writeInt64(s),t.pad(6),t.writeInt8(i),t.writeInt8(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.Product=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}owner(){return this.bb.readUint32(this.bb_pos)}mutate_owner(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}history(){return this.bb.readUint32(this.bb_pos+4)}mutate_history(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}name(){return this.bb.readUint32(this.bb_pos+8)}mutate_name(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}description(){return this.bb.readUint32(this.bb_pos+12)}mutate_description(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}objectType(){return this.bb.readUint32(this.bb_pos+16)}mutate_objectType(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}static createProduct(t,e,i,s,r,n){return t.prep(4,20),t.writeInt32(n),t.writeInt32(r),t.writeInt32(s),t.writeInt32(i),t.writeInt32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.ProductBinding=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}entityId(){return this.bb.readUint32(this.bb_pos)}mutate_entityId(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}productId(){return this.bb.readUint32(this.bb_pos+4)}mutate_productId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}static createProductBinding(t,e,i){return t.prep(4,8),t.writeInt32(i),t.writeInt32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.SinglePropertyDefinition=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}name(){return this.bb.readUint32(this.bb_pos)}mutate_name(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}type(){return this.bb.readInt8(this.bb_pos+4)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}static createSinglePropertyDefinition(t,e,i){return t.prep(4,8),t.pad(3),t.writeInt8(i),t.writeInt32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsPropertySetDefinition(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsPropertySetDefinition(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}name(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_name(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}properties(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.SinglePropertyDefinition).__init(this.bb.__vector(this.bb_pos+s)+8*e,this.bb):null}propertiesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startPropertySetDefinition(t){t.startObject(2)}static addName(t,e){t.addFieldInt32(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static startPropertiesVector(t,e){t.startVector(8,e,4)}static endPropertySetDefinition(t){var e=t.endObject();return t.requiredField(e,6),e}static createPropertySetDefinition(t,e,s){return i.startPropertySetDefinition(t),i.addName(t,e),i.addProperties(t,s),i.endPropertySetDefinition(t)}}e.PropertySetDefinition=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsPropertySet(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsPropertySet(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}definition(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_definition(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}values(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}valuesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}valuesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}entities(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}entitiesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}entitiesArray(){var t=this.bb.__offset(this.bb_pos,8);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startPropertySet(t){t.startObject(3)}static addDefinition(t,e){t.addFieldInt32(0,e,0)}static addValues(t,e){t.addFieldOffset(1,e,0)}static createValuesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addInt32(e[i]);return t.endVector()}static startValuesVector(t,e){t.startVector(4,e,4)}static addEntities(t,e){t.addFieldOffset(2,e,0)}static createEntitiesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addInt32(e[i]);return t.endVector()}static startEntitiesVector(t,e){t.startVector(4,e,4)}static endPropertySet(t){var e=t.endObject();return t.requiredField(e,6),t.requiredField(e,8),e}static createPropertySet(t,i,s,r){return e.startPropertySet(t),e.addDefinition(t,i),e.addValues(t,s),e.addEntities(t,r),e.endPropertySet(t)}}t.PropertySet=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModelProperties(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModelProperties(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}productBindings(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.ProductBinding).__init(this.bb.__vector(this.bb_pos+s)+8*e,this.bb):null}productBindingsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}products(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Product).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}productsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}owners(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Owner).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}ownersLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}histories(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.History).__init(this.bb.__vector(this.bb_pos+s)+24*e,this.bb):null}historiesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}names(t,e){var i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}namesLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}descriptions(t,e){var i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}descriptionsLength(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}objectTypes(t,e){var i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}objectTypesLength(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}propertySetBindings(e,i){var s=this.bb.__offset(this.bb_pos,18);return s?(i||new t.Technology.TrimBim.Fbs.PropertySet).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}propertySetBindingsLength(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}propertySetNames(t,e){var i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}propertySetNamesLength(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}propertyNames(t,e){var i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}propertyNamesLength(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}definitions(e,i){var s=this.bb.__offset(this.bb_pos,24);return s?(i||new t.Technology.TrimBim.Fbs.PropertySetDefinition).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}definitionsLength(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}lengthMeasures(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}lengthMeasuresLength(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}lengthMeasuresArray(){var t=this.bb.__offset(this.bb_pos,26);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}areaMeasures(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}areaMeasuresLength(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}areaMeasuresArray(){var t=this.bb.__offset(this.bb_pos,28);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}volumeMeasures(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}volumeMeasuresLength(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__vector_len(this.bb_pos+t):0}volumeMeasuresArray(){var t=this.bb.__offset(this.bb_pos,30);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}massMeasures(t){var e=this.bb.__offset(this.bb_pos,32);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}massMeasuresLength(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.__vector_len(this.bb_pos+t):0}massMeasuresArray(){var t=this.bb.__offset(this.bb_pos,32);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}angleMeasures(t){var e=this.bb.__offset(this.bb_pos,34);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}angleMeasuresLength(){var t=this.bb.__offset(this.bb_pos,34);return t?this.bb.__vector_len(this.bb_pos+t):0}angleMeasuresArray(){var t=this.bb.__offset(this.bb_pos,34);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}stringValues(t,e){var i=this.bb.__offset(this.bb_pos,36);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}stringValuesLength(){var t=this.bb.__offset(this.bb_pos,36);return t?this.bb.__vector_len(this.bb_pos+t):0}doubleValues(t){var e=this.bb.__offset(this.bb_pos,38);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}doubleValuesLength(){var t=this.bb.__offset(this.bb_pos,38);return t?this.bb.__vector_len(this.bb_pos+t):0}doubleValuesArray(){var t=this.bb.__offset(this.bb_pos,38);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}dateTimeValues(t){var e=this.bb.__offset(this.bb_pos,40);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dateTimeValuesLength(){var t=this.bb.__offset(this.bb_pos,40);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModelProperties(t){t.startObject(19)}static addProductBindings(t,e){t.addFieldOffset(0,e,0)}static startProductBindingsVector(t,e){t.startVector(8,e,4)}static addProducts(t,e){t.addFieldOffset(1,e,0)}static startProductsVector(t,e){t.startVector(20,e,4)}static addOwners(t,e){t.addFieldOffset(2,e,0)}static createOwnersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startOwnersVector(t,e){t.startVector(4,e,4)}static addHistories(t,e){t.addFieldOffset(3,e,0)}static startHistoriesVector(t,e){t.startVector(24,e,8)}static addNames(t,e){t.addFieldOffset(4,e,0)}static createNamesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startNamesVector(t,e){t.startVector(4,e,4)}static addDescriptions(t,e){t.addFieldOffset(5,e,0)}static createDescriptionsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startDescriptionsVector(t,e){t.startVector(4,e,4)}static addObjectTypes(t,e){t.addFieldOffset(6,e,0)}static createObjectTypesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startObjectTypesVector(t,e){t.startVector(4,e,4)}static addPropertySetBindings(t,e){t.addFieldOffset(7,e,0)}static createPropertySetBindingsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startPropertySetBindingsVector(t,e){t.startVector(4,e,4)}static addPropertySetNames(t,e){t.addFieldOffset(8,e,0)}static createPropertySetNamesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startPropertySetNamesVector(t,e){t.startVector(4,e,4)}static addPropertyNames(t,e){t.addFieldOffset(9,e,0)}static createPropertyNamesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startPropertyNamesVector(t,e){t.startVector(4,e,4)}static addDefinitions(t,e){t.addFieldOffset(10,e,0)}static createDefinitionsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startDefinitionsVector(t,e){t.startVector(4,e,4)}static addLengthMeasures(t,e){t.addFieldOffset(11,e,0)}static createLengthMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startLengthMeasuresVector(t,e){t.startVector(8,e,8)}static addAreaMeasures(t,e){t.addFieldOffset(12,e,0)}static createAreaMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startAreaMeasuresVector(t,e){t.startVector(8,e,8)}static addVolumeMeasures(t,e){t.addFieldOffset(13,e,0)}static createVolumeMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startVolumeMeasuresVector(t,e){t.startVector(8,e,8)}static addMassMeasures(t,e){t.addFieldOffset(14,e,0)}static createMassMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startMassMeasuresVector(t,e){t.startVector(8,e,8)}static addAngleMeasures(t,e){t.addFieldOffset(15,e,0)}static createAngleMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startAngleMeasuresVector(t,e){t.startVector(8,e,8)}static addStringValues(t,e){t.addFieldOffset(16,e,0)}static createStringValuesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startStringValuesVector(t,e){t.startVector(4,e,4)}static addDoubleValues(t,e){t.addFieldOffset(17,e,0)}static createDoubleValuesVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startDoubleValuesVector(t,e){t.startVector(8,e,8)}static addDateTimeValues(t,e){t.addFieldOffset(18,e,0)}static createDateTimeValuesVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addInt64(e[i]);return t.endVector()}static startDateTimeValuesVector(t,e){t.startVector(8,e,8)}static endModelProperties(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),t.requiredField(e,14),t.requiredField(e,16),t.requiredField(e,18),t.requiredField(e,20),t.requiredField(e,22),t.requiredField(e,24),t.requiredField(e,26),t.requiredField(e,28),t.requiredField(e,30),t.requiredField(e,32),t.requiredField(e,34),t.requiredField(e,36),t.requiredField(e,38),t.requiredField(e,40),e}static createModelProperties(t,e,s,r,n,o,a,h,c,b,l,d,u,_,p,f,g,m,y,v){return i.startModelProperties(t),i.addProductBindings(t,e),i.addProducts(t,s),i.addOwners(t,r),i.addHistories(t,n),i.addNames(t,o),i.addDescriptions(t,a),i.addObjectTypes(t,h),i.addPropertySetBindings(t,c),i.addPropertySetNames(t,b),i.addPropertyNames(t,l),i.addDefinitions(t,d),i.addLengthMeasures(t,u),i.addAreaMeasures(t,_),i.addVolumeMeasures(t,p),i.addMassMeasures(t,f),i.addAngleMeasures(t,g),i.addStringValues(t,m),i.addDoubleValues(t,y),i.addDateTimeValues(t,v),i.endModelProperties(t)}}e.ModelProperties=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.SurfaceMaterial=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}r(){return this.bb.readUint8(this.bb_pos)}mutate_r(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}g(){return this.bb.readUint8(this.bb_pos+1)}mutate_g(t){var e=this.bb.__offset(this.bb_pos,1);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}b(){return this.bb.readUint8(this.bb_pos+2)}mutate_b(t){var e=this.bb.__offset(this.bb_pos,2);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}a(){return this.bb.readUint8(this.bb_pos+3)}mutate_a(t){var e=this.bb.__offset(this.bb_pos,3);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}textureId(){return this.bb.readUint32(this.bb_pos+4)}mutate_textureId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}sidedness(){return this.bb.readInt8(this.bb_pos+8)}mutate_sidedness(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}lineStyle(){return this.bb.readInt8(this.bb_pos+9)}mutate_lineStyle(t){var e=this.bb.__offset(this.bb_pos,9);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}metallic(){return this.bb.readFloat32(this.bb_pos+12)}mutate_metallic(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}roughness(){return this.bb.readFloat32(this.bb_pos+16)}mutate_roughness(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createSurfaceMaterial(t,e,i,s,r,n,o,a,h,c){return t.prep(4,20),t.writeFloat32(c),t.writeFloat32(h),t.pad(2),t.writeInt8(a),t.writeInt8(o),t.writeInt32(n),t.writeInt8(r),t.writeInt8(s),t.writeInt8(i),t.writeInt8(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.Entity=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}type(){return this.bb.readInt8(this.bb_pos)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}identifierIndex(){return this.bb.readUint32(this.bb_pos+4)}mutate_identifierIndex(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}classIndex(){return this.bb.readUint32(this.bb_pos+8)}mutate_classIndex(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}globalPlacement(e){return(e||new t.Technology.TrimBim.Fbs.Placement3).__init(this.bb_pos+16,this.bb)}static createEntity(t,e,i,s,r,n,o,a,h,c,b,l,d){return t.prep(8,64),t.prep(8,48),t.prep(4,12),t.writeFloat32(d),t.writeFloat32(l),t.writeFloat32(b),t.prep(4,12),t.writeFloat32(c),t.writeFloat32(h),t.writeFloat32(a),t.prep(8,24),t.writeFloat64(o),t.writeFloat64(n),t.writeFloat64(r),t.pad(4),t.writeInt32(s),t.writeInt32(i),t.pad(3),t.writeInt8(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.GeometryDefinition=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}type(){return this.bb.readInt8(this.bb_pos)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}index(){return this.bb.readUint32(this.bb_pos+4)}mutate_index(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}boundingBox(e){return(e||new t.Technology.TrimBim.Fbs.AABB3f).__init(this.bb_pos+8,this.bb)}static createGeometryDefinition(t,e,i,s,r,n,o,a,h){return t.prep(4,32),t.prep(4,24),t.prep(4,12),t.writeFloat32(h),t.writeFloat32(a),t.writeFloat32(o),t.prep(4,12),t.writeFloat32(n),t.writeFloat32(r),t.writeFloat32(s),t.writeInt32(i),t.pad(3),t.writeInt8(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.GeometryInstance=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}localPlacementId(){return this.bb.readUint32(this.bb_pos)}mutate_localPlacementId(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}entityId(){return this.bb.readUint32(this.bb_pos+4)}mutate_entityId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}definitionId(){return this.bb.readUint32(this.bb_pos+8)}mutate_definitionId(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}surfaceMaterialId(){return this.bb.readUint32(this.bb_pos+12)}mutate_surfaceMaterialId(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}layerId(){return this.bb.readUint32(this.bb_pos+16)}mutate_layerId(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}static createGeometryInstance(t,e,i,s,r,n){return t.prep(4,20),t.writeInt32(n),t.writeInt32(r),t.writeInt32(s),t.writeInt32(i),t.writeInt32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTexture(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTexture(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}type(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):t.Technology.TrimBim.Fbs.TextureType.None}mutate_type(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}bytes(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0}bytesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}bytesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTexture(t){t.startObject(2)}static addType(e,i){e.addFieldInt8(0,i,t.Technology.TrimBim.Fbs.TextureType.None)}static addBytes(t,e){t.addFieldOffset(1,e,0)}static createBytesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startBytesVector(t,e){t.startVector(1,e,1)}static endTexture(t){var e=t.endObject();return t.requiredField(e,6),e}static createTexture(t,e,s){return i.startTexture(t),i.addType(t,e),i.addBytes(t,s),i.endTexture(t)}}e.Texture=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGraphicsContainer(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGraphicsContainer(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}lineSegments(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Line3f).__init(this.bb.__vector(this.bb_pos+s)+24*e,this.bb):null}lineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}arcs(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Arc3f).__init(this.bb.__vector(this.bb_pos+s)+44*e,this.bb):null}arcsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGraphicsContainer(t){t.startObject(2)}static addLineSegments(t,e){t.addFieldOffset(0,e,0)}static startLineSegmentsVector(t,e){t.startVector(24,e,4)}static addArcs(t,e){t.addFieldOffset(1,e,0)}static startArcsVector(t,e){t.startVector(44,e,4)}static endGraphicsContainer(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createGraphicsContainer(t,e,s){return i.startGraphicsContainer(t),i.addLineSegments(t,e),i.addArcs(t,s),i.endGraphicsContainer(t)}}e.GraphicsContainer=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCoordinateGeometryPoint(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCoordinateGeometryPoint(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}name(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}symbol(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startCoordinateGeometryPoint(t){t.startObject(2)}static addName(t,e){t.addFieldOffset(0,e,0)}static addSymbol(t,e){t.addFieldOffset(1,e,0)}static endCoordinateGeometryPoint(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createCoordinateGeometryPoint(t,i,s){return e.startCoordinateGeometryPoint(t),e.addName(t,i),e.addSymbol(t,s),e.endCoordinateGeometryPoint(t)}}t.CoordinateGeometryPoint=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBillboardText(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBillboardText(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}textStyleId(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_textStyleId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}text(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startBillboardText(t){t.startObject(2)}static addTextStyleId(t,e){t.addFieldInt32(0,e,0)}static addText(t,e){t.addFieldOffset(1,e,0)}static endBillboardText(t){var e=t.endObject();return t.requiredField(e,6),e}static createBillboardText(t,i,s){return e.startBillboardText(t),e.addTextStyleId(t,i),e.addText(t,s),e.endBillboardText(t)}}t.BillboardText=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTextStyle(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTextStyle(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}font(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}size(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_size(t){var e=this.bb.__offset(this.bb_pos,6);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}options(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_options(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}verticalAlign(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_verticalAlign(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}horizontalAlign(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_horizontalAlign(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}rotationAngle(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_rotationAngle(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}layout(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt8(this.bb_pos+e):t.Technology.TrimBim.Fbs.LayoutType.Invalid}mutate_layout(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}alignment(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt8(this.bb_pos+e):t.Technology.TrimBim.Fbs.AlignmentType.Invalid}mutate_alignment(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}maxAutoScale(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_maxAutoScale(t){var e=this.bb.__offset(this.bb_pos,20);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}verticalDistanceToObject(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_verticalDistanceToObject(t){var e=this.bb.__offset(this.bb_pos,22);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static startTextStyle(t){t.startObject(10)}static addFont(t,e){t.addFieldOffset(0,e,0)}static addSize(t,e){t.addFieldFloat64(1,e,0)}static addOptions(t,e){t.addFieldInt32(2,e,0)}static addVerticalAlign(t,e){t.addFieldFloat64(3,e,0)}static addHorizontalAlign(t,e){t.addFieldFloat64(4,e,0)}static addRotationAngle(t,e){t.addFieldFloat64(5,e,0)}static addLayout(e,i){e.addFieldInt8(6,i,t.Technology.TrimBim.Fbs.LayoutType.Invalid)}static addAlignment(e,i){e.addFieldInt8(7,i,t.Technology.TrimBim.Fbs.AlignmentType.Invalid)}static addMaxAutoScale(t,e){t.addFieldFloat64(8,e,0)}static addVerticalDistanceToObject(t,e){t.addFieldFloat64(9,e,0)}static endTextStyle(t){return t.endObject()}static createTextStyle(t,e,s,r,n,o,a,h,c,b,l){return i.startTextStyle(t),i.addFont(t,e),i.addSize(t,s),i.addOptions(t,r),i.addVerticalAlign(t,n),i.addHorizontalAlign(t,o),i.addRotationAngle(t,a),i.addLayout(t,h),i.addAlignment(t,c),i.addMaxAutoScale(t,b),i.addVerticalDistanceToObject(t,l),i.endTextStyle(t)}}e.TextStyle=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBillboard(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBillboard(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBillboard(t){t.startObject(0)}static endBillboard(t){return t.endObject()}static createBillboard(t){return e.startBillboard(t),e.endBillboard(t)}}t.Billboard=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){e.TexturedBillboard=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}leftUpXY(e){return(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos,this.bb)}leftUpUV(e){return(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+16,this.bb)}rightDownXY(e){return(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+32,this.bb)}rightDownUV(e){return(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+48,this.bb)}IsInWorldUnits(){return!!this.bb.readInt8(this.bb_pos+64)}mutate_IsInWorldUnits(t){var e=this.bb.__offset(this.bb_pos,64);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static createTexturedBillboard(t,e,i,s,r,n,o,a,h,c){return t.prep(8,72),t.pad(7),t.writeInt8(+c),t.prep(8,16),t.writeFloat64(h),t.writeFloat64(a),t.prep(8,16),t.writeFloat64(o),t.writeFloat64(n),t.prep(8,16),t.writeFloat64(r),t.writeFloat64(s),t.prep(8,16),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.BoltTop=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}topDiameter(){return this.bb.readFloat32(this.bb_pos)}mutate_topDiameter(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}thickness(){return this.bb.readFloat32(this.bb_pos+4)}mutate_thickness(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}diameter(){return this.bb.readFloat32(this.bb_pos+8)}mutate_diameter(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}length(){return this.bb.readFloat32(this.bb_pos+12)}mutate_length(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}type(){return this.bb.readInt8(this.bb_pos+16)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}static createBoltTop(t,e,i,s,r,n){return t.prep(4,20),t.pad(3),t.writeInt8(n),t.writeFloat32(r),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.Washer=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readFloat32(this.bb_pos)}mutate_offset(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}innerDiameter(){return this.bb.readFloat32(this.bb_pos+4)}mutate_innerDiameter(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}outerDiameter(){return this.bb.readFloat32(this.bb_pos+8)}mutate_outerDiameter(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}thickness(){return this.bb.readFloat32(this.bb_pos+12)}mutate_thickness(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createWasher(t,e,i,s,r){return t.prep(4,16),t.writeFloat32(r),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.Nut=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readFloat32(this.bb_pos)}mutate_offset(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}innerDiameter(){return this.bb.readFloat32(this.bb_pos+4)}mutate_innerDiameter(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}outerDiameter(){return this.bb.readFloat32(this.bb_pos+8)}mutate_outerDiameter(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}thickness(){return this.bb.readFloat32(this.bb_pos+12)}mutate_thickness(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createNut(t,e,i,s,r){return t.prep(4,16),t.writeFloat32(r),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.Hole=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readFloat32(this.bb_pos)}mutate_offset(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}length(){return this.bb.readFloat32(this.bb_pos+4)}mutate_length(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}diameter(){return this.bb.readFloat32(this.bb_pos+8)}mutate_diameter(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}xslot(){return this.bb.readFloat32(this.bb_pos+12)}mutate_xslot(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}yslot(){return this.bb.readFloat32(this.bb_pos+16)}mutate_yslot(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createHole(t,e,i,s,r,n){return t.prep(4,20),t.writeFloat32(n),t.writeFloat32(r),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBolt(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBolt(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}top(e){var i=this.bb.__offset(this.bb_pos,4);return i?(e||new t.Technology.TrimBim.Fbs.BoltTop).__init(this.bb_pos+i,this.bb):null}washers(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Washer).__init(this.bb.__vector(this.bb_pos+s)+16*e,this.bb):null}washersLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}nuts(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Nut).__init(this.bb.__vector(this.bb_pos+s)+16*e,this.bb):null}nutsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}holes(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.Hole).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}holesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startBolt(t){t.startObject(4)}static addTop(t,e){t.addFieldStruct(0,e,0)}static addWashers(t,e){t.addFieldOffset(1,e,0)}static startWashersVector(t,e){t.startVector(16,e,4)}static addNuts(t,e){t.addFieldOffset(2,e,0)}static startNutsVector(t,e){t.startVector(16,e,4)}static addHoles(t,e){t.addFieldOffset(3,e,0)}static startHolesVector(t,e){t.startVector(20,e,4)}static endBolt(t){var e=t.endObject();return t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),e}static createBolt(t,e,s,r,n){return i.startBolt(t),i.addTop(t,e),i.addWashers(t,s),i.addNuts(t,r),i.addHoles(t,n),i.endBolt(t)}}e.Bolt=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMapConversion(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMapConversion(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}eastings(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_eastings(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}northings(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_northings(t){var e=this.bb.__offset(this.bb_pos,6);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}orthogonalHeight(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_orthogonalHeight(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}xAxisAbscissa(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_xAxisAbscissa(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}xAxisOrdinate(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_xAxisOrdinate(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}scaleToMapProjection(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_scaleToMapProjection(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}projectionName(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}projectionDescription(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}projectionGeodeticDatum(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}projectionVerticalDatum(t){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__string(this.bb_pos+e,t):null}projectionProjectionType(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}projectionZone(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}projectionUnitName(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}projectionScaleToMetric(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_projectionScaleToMetric(t){var e=this.bb.__offset(this.bb_pos,30);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}sourceOrigin(e){var i=this.bb.__offset(this.bb_pos,32);return i?(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos+i,this.bb):null}static startMapConversion(t){t.startObject(15)}static addEastings(t,e){t.addFieldFloat64(0,e,0)}static addNorthings(t,e){t.addFieldFloat64(1,e,0)}static addOrthogonalHeight(t,e){t.addFieldFloat64(2,e,0)}static addXAxisAbscissa(t,e){t.addFieldFloat64(3,e,0)}static addXAxisOrdinate(t,e){t.addFieldFloat64(4,e,0)}static addScaleToMapProjection(t,e){t.addFieldFloat64(5,e,0)}static addProjectionName(t,e){t.addFieldOffset(6,e,0)}static addProjectionDescription(t,e){t.addFieldOffset(7,e,0)}static addProjectionGeodeticDatum(t,e){t.addFieldOffset(8,e,0)}static addProjectionVerticalDatum(t,e){t.addFieldOffset(9,e,0)}static addProjectionProjectionType(t,e){t.addFieldOffset(10,e,0)}static addProjectionZone(t,e){t.addFieldOffset(11,e,0)}static addProjectionUnitName(t,e){t.addFieldOffset(12,e,0)}static addProjectionScaleToMetric(t,e){t.addFieldFloat64(13,e,0)}static addSourceOrigin(t,e){t.addFieldStruct(14,e,0)}static endMapConversion(t){return t.endObject()}static createMapConversion(t,e,s,r,n,o,a,h,c,b,l,d,u,_,p,f){return i.startMapConversion(t),i.addEastings(t,e),i.addNorthings(t,s),i.addOrthogonalHeight(t,r),i.addXAxisAbscissa(t,n),i.addXAxisOrdinate(t,o),i.addScaleToMapProjection(t,a),i.addProjectionName(t,h),i.addProjectionDescription(t,c),i.addProjectionGeodeticDatum(t,b),i.addProjectionVerticalDatum(t,l),i.addProjectionProjectionType(t,d),i.addProjectionZone(t,u),i.addProjectionUnitName(t,_),i.addProjectionScaleToMetric(t,p),i.addSourceOrigin(t,f),i.endMapConversion(t)}}e.MapConversion=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModelGeometry(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModelGeometry(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}localPlacements(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Placement3).__init(this.bb.__vector(this.bb_pos+s)+48*e,this.bb):null}localPlacementsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}surfaceMaterials(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.SurfaceMaterial).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}surfaceMaterialsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}layers(t,e){var i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}layersLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}definitions(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.GeometryDefinition).__init(this.bb.__vector(this.bb_pos+s)+32*e,this.bb):null}definitionsLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}instances(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.GeometryInstance).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}instancesLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}textures(e,i){var s=this.bb.__offset(this.bb_pos,14);return s?(i||new t.Technology.TrimBim.Fbs.Texture).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}texturesLength(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}bReps(e,i){var s=this.bb.__offset(this.bb_pos,16);return s?(i||new t.Technology.TrimBim.Fbs.BRep).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}bRepsLength(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}triangleMeshes(e,i){var s=this.bb.__offset(this.bb_pos,18);return s?(i||new t.Technology.TrimBim.Fbs.TriangleMesh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}triangleMeshesLength(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}triangleMeshes8(e,i){var s=this.bb.__offset(this.bb_pos,20);return s?(i||new t.Technology.TrimBim.Fbs.TriangleMesh8).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}triangleMeshes8Length(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}texturedTriangleMeshes(e,i){var s=this.bb.__offset(this.bb_pos,22);return s?(i||new t.Technology.TrimBim.Fbs.TexturedTriangleMesh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}texturedTriangleMeshesLength(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}texturedTriangleMeshes8(e,i){var s=this.bb.__offset(this.bb_pos,24);return s?(i||new t.Technology.TrimBim.Fbs.TexturedTriangleMesh8).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}texturedTriangleMeshes8Length(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}sweptDiskSolids(e,i){var s=this.bb.__offset(this.bb_pos,26);return s?(i||new t.Technology.TrimBim.Fbs.SweptDiskSolidContainer).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}sweptDiskSolidsLength(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}bRepWithUVs(e,i){var s=this.bb.__offset(this.bb_pos,28);return s?(i||new t.Technology.TrimBim.Fbs.BRepWithUV).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}bRepWithUVsLength(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}bRepWithNormals(e,i){var s=this.bb.__offset(this.bb_pos,30);return s?(i||new t.Technology.TrimBim.Fbs.BRepWithNormal).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}bRepWithNormalsLength(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__vector_len(this.bb_pos+t):0}graphicsContainers(e,i){var s=this.bb.__offset(this.bb_pos,32);return s?(i||new t.Technology.TrimBim.Fbs.GraphicsContainer).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}graphicsContainersLength(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.__vector_len(this.bb_pos+t):0}alignmentCurves(e,i){var s=this.bb.__offset(this.bb_pos,34);return s?(i||new t.Technology.TrimBim.Fbs.AlignmentCurve).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}alignmentCurvesLength(){var t=this.bb.__offset(this.bb_pos,34);return t?this.bb.__vector_len(this.bb_pos+t):0}gridLineContainers(e,i){var s=this.bb.__offset(this.bb_pos,36);return s?(i||new t.Technology.TrimBim.Fbs.GridLineContainer).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}gridLineContainersLength(){var t=this.bb.__offset(this.bb_pos,36);return t?this.bb.__vector_len(this.bb_pos+t):0}coordinateGeometryPoints(e,i){var s=this.bb.__offset(this.bb_pos,38);return s?(i||new t.Technology.TrimBim.Fbs.CoordinateGeometryPoint).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}coordinateGeometryPointsLength(){var t=this.bb.__offset(this.bb_pos,38);return t?this.bb.__vector_len(this.bb_pos+t):0}billboardTexts(e,i){var s=this.bb.__offset(this.bb_pos,40);return s?(i||new t.Technology.TrimBim.Fbs.BillboardText).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}billboardTextsLength(){var t=this.bb.__offset(this.bb_pos,40);return t?this.bb.__vector_len(this.bb_pos+t):0}textStyles(e,i){var s=this.bb.__offset(this.bb_pos,42);return s?(i||new t.Technology.TrimBim.Fbs.TextStyle).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}textStylesLength(){var t=this.bb.__offset(this.bb_pos,42);return t?this.bb.__vector_len(this.bb_pos+t):0}billboards(e,i){var s=this.bb.__offset(this.bb_pos,44);return s?(i||new t.Technology.TrimBim.Fbs.Billboard).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}billboardsLength(){var t=this.bb.__offset(this.bb_pos,44);return t?this.bb.__vector_len(this.bb_pos+t):0}texturedBillboards(e,i){var s=this.bb.__offset(this.bb_pos,46);return s?(i||new t.Technology.TrimBim.Fbs.TexturedBillboard).__init(this.bb.__vector(this.bb_pos+s)+72*e,this.bb):null}texturedBillboardsLength(){var t=this.bb.__offset(this.bb_pos,46);return t?this.bb.__vector_len(this.bb_pos+t):0}bolts(e,i){var s=this.bb.__offset(this.bb_pos,48);return s?(i||new t.Technology.TrimBim.Fbs.Bolt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}boltsLength(){var t=this.bb.__offset(this.bb_pos,48);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModelGeometry(t){t.startObject(23)}static addLocalPlacements(t,e){t.addFieldOffset(0,e,0)}static startLocalPlacementsVector(t,e){t.startVector(48,e,8)}static addSurfaceMaterials(t,e){t.addFieldOffset(1,e,0)}static startSurfaceMaterialsVector(t,e){t.startVector(20,e,4)}static addLayers(t,e){t.addFieldOffset(2,e,0)}static createLayersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startLayersVector(t,e){t.startVector(4,e,4)}static addDefinitions(t,e){t.addFieldOffset(3,e,0)}static startDefinitionsVector(t,e){t.startVector(32,e,4)}static addInstances(t,e){t.addFieldOffset(4,e,0)}static startInstancesVector(t,e){t.startVector(20,e,4)}static addTextures(t,e){t.addFieldOffset(5,e,0)}static createTexturesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTexturesVector(t,e){t.startVector(4,e,4)}static addBReps(t,e){t.addFieldOffset(6,e,0)}static createBRepsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBRepsVector(t,e){t.startVector(4,e,4)}static addTriangleMeshes(t,e){t.addFieldOffset(7,e,0)}static createTriangleMeshesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTriangleMeshesVector(t,e){t.startVector(4,e,4)}static addTriangleMeshes8(t,e){t.addFieldOffset(8,e,0)}static createTriangleMeshes8Vector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTriangleMeshes8Vector(t,e){t.startVector(4,e,4)}static addTexturedTriangleMeshes(t,e){t.addFieldOffset(9,e,0)}static createTexturedTriangleMeshesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTexturedTriangleMeshesVector(t,e){t.startVector(4,e,4)}static addTexturedTriangleMeshes8(t,e){t.addFieldOffset(10,e,0)}static createTexturedTriangleMeshes8Vector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTexturedTriangleMeshes8Vector(t,e){t.startVector(4,e,4)}static addSweptDiskSolids(t,e){t.addFieldOffset(11,e,0)}static createSweptDiskSolidsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startSweptDiskSolidsVector(t,e){t.startVector(4,e,4)}static addBRepWithUVs(t,e){t.addFieldOffset(12,e,0)}static createBRepWithUVsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBRepWithUVsVector(t,e){t.startVector(4,e,4)}static addBRepWithNormals(t,e){t.addFieldOffset(13,e,0)}static createBRepWithNormalsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBRepWithNormalsVector(t,e){t.startVector(4,e,4)}static addGraphicsContainers(t,e){t.addFieldOffset(14,e,0)}static createGraphicsContainersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startGraphicsContainersVector(t,e){t.startVector(4,e,4)}static addAlignmentCurves(t,e){t.addFieldOffset(15,e,0)}static createAlignmentCurvesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startAlignmentCurvesVector(t,e){t.startVector(4,e,4)}static addGridLineContainers(t,e){t.addFieldOffset(16,e,0)}static createGridLineContainersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startGridLineContainersVector(t,e){t.startVector(4,e,4)}static addCoordinateGeometryPoints(t,e){t.addFieldOffset(17,e,0)}static createCoordinateGeometryPointsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCoordinateGeometryPointsVector(t,e){t.startVector(4,e,4)}static addBillboardTexts(t,e){t.addFieldOffset(18,e,0)}static createBillboardTextsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBillboardTextsVector(t,e){t.startVector(4,e,4)}static addTextStyles(t,e){t.addFieldOffset(19,e,0)}static createTextStylesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTextStylesVector(t,e){t.startVector(4,e,4)}static addBillboards(t,e){t.addFieldOffset(20,e,0)}static createBillboardsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBillboardsVector(t,e){t.startVector(4,e,4)}static addTexturedBillboards(t,e){t.addFieldOffset(21,e,0)}static startTexturedBillboardsVector(t,e){t.startVector(72,e,8)}static addBolts(t,e){t.addFieldOffset(22,e,0)}static createBoltsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBoltsVector(t,e){t.startVector(4,e,4)}static endModelGeometry(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),t.requiredField(e,14),t.requiredField(e,16),t.requiredField(e,18),t.requiredField(e,20),t.requiredField(e,22),t.requiredField(e,24),t.requiredField(e,26),t.requiredField(e,28),t.requiredField(e,30),t.requiredField(e,32),t.requiredField(e,34),t.requiredField(e,36),t.requiredField(e,38),t.requiredField(e,40),t.requiredField(e,42),t.requiredField(e,44),t.requiredField(e,46),t.requiredField(e,48),e}static createModelGeometry(t,e,s,r,n,o,a,h,c,b,l,d,u,_,p,f,g,m,y,v,x,w,T,F){return i.startModelGeometry(t),i.addLocalPlacements(t,e),i.addSurfaceMaterials(t,s),i.addLayers(t,r),i.addDefinitions(t,n),i.addInstances(t,o),i.addTextures(t,a),i.addBReps(t,h),i.addTriangleMeshes(t,c),i.addTriangleMeshes8(t,b),i.addTexturedTriangleMeshes(t,l),i.addTexturedTriangleMeshes8(t,d),i.addSweptDiskSolids(t,u),i.addBRepWithUVs(t,_),i.addBRepWithNormals(t,p),i.addGraphicsContainers(t,f),i.addAlignmentCurves(t,g),i.addGridLineContainers(t,m),i.addCoordinateGeometryPoints(t,y),i.addBillboardTexts(t,v),i.addTextStyles(t,x),i.addBillboards(t,w),i.addTexturedBillboards(t,T),i.addBolts(t,F),i.endModelGeometry(t)}}e.ModelGeometry=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){t.HierarchyNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}parentElementId(){return this.bb.readUint32(this.bb_pos)}mutate_parentElementId(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}childElementId(){return this.bb.readUint32(this.bb_pos+4)}mutate_childElementId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}type(){return this.bb.readInt8(this.bb_pos+8)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}static createHierarchyNode(t,e,i,s){return t.prep(4,12),t.pad(3),t.writeInt8(s),t.writeInt32(i),t.writeInt32(e),t.offset()}}}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModelEntities(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModelEntities(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}entities(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Entity).__init(this.bb.__vector(this.bb_pos+s)+64*e,this.bb):null}entitiesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}hierarchies(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.HierarchyNode).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}hierarchiesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}guidIdentifiers(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Guid).__init(this.bb.__vector(this.bb_pos+s)+16*e,this.bb):null}guidIdentifiersLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}stringIdentifiers(t,e){var i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}stringIdentifiersLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}spatialHashIdentifiers(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.SpatialHash).__init(this.bb.__vector(this.bb_pos+s)+88*e,this.bb):null}spatialHashIdentifiersLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}dwgHandleIdentifiers(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dwgHandleIdentifiersLength(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}entityClasses(t,e){var i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}entityClassesLength(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModelEntities(t){t.startObject(7)}static addEntities(t,e){t.addFieldOffset(0,e,0)}static startEntitiesVector(t,e){t.startVector(64,e,8)}static addHierarchies(t,e){t.addFieldOffset(1,e,0)}static startHierarchiesVector(t,e){t.startVector(12,e,4)}static addGuidIdentifiers(t,e){t.addFieldOffset(2,e,0)}static startGuidIdentifiersVector(t,e){t.startVector(16,e,4)}static addStringIdentifiers(t,e){t.addFieldOffset(3,e,0)}static createStringIdentifiersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startStringIdentifiersVector(t,e){t.startVector(4,e,4)}static addSpatialHashIdentifiers(t,e){t.addFieldOffset(4,e,0)}static startSpatialHashIdentifiersVector(t,e){t.startVector(88,e,8)}static addDwgHandleIdentifiers(t,e){t.addFieldOffset(5,e,0)}static createDwgHandleIdentifiersVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addInt64(e[i]);return t.endVector()}static startDwgHandleIdentifiersVector(t,e){t.startVector(8,e,8)}static addEntityClasses(t,e){t.addFieldOffset(6,e,0)}static createEntityClassesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startEntityClassesVector(t,e){t.startVector(4,e,4)}static endModelEntities(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),t.requiredField(e,14),t.requiredField(e,16),e}static createModelEntities(t,e,s,r,n,o,a,h){return i.startModelEntities(t),i.addEntities(t,e),i.addHierarchies(t,s),i.addGuidIdentifiers(t,r),i.addStringIdentifiers(t,n),i.addSpatialHashIdentifiers(t,o),i.addDwgHandleIdentifiers(t,a),i.addEntityClasses(t,h),i.endModelEntities(t)}}e.ModelEntities=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMetadataEntry(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMetadataEntry(t,i){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(i||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startMetadataEntry(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endMetadataEntry(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createMetadataEntry(t,i,s){return e.startMetadataEntry(t),e.addKey(t,i),e.addValue(t,s),e.endMetadataEntry(t)}}t.MetadataEntry=e}(t.Fbs||(t.Fbs={}))}(t.TrimBim||(t.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={})),function(t){!function(e){!function(e){!function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModel(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModel(t,e){return t.setPosition(t.position()+n.SIZE_PREFIX_LENGTH),(e||new i).__init(t.readInt32(t.position())+t.position(),t)}static bufferHasIdentifier(t){return t.__has_identifier("TRB8")}entities(e){var i=this.bb.__offset(this.bb_pos,4);return i?(e||new t.Technology.TrimBim.Fbs.ModelEntities).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}properties(e){var i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.Technology.TrimBim.Fbs.ModelProperties).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}geometry(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.ModelGeometry).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}mapConversions(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.MapConversion).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}mapConversionsLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}metadata(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.MetadataEntry).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}metadataLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModel(t){t.startObject(5)}static addEntities(t,e){t.addFieldOffset(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static addGeometry(t,e){t.addFieldOffset(2,e,0)}static addMapConversions(t,e){t.addFieldOffset(3,e,0)}static createMapConversionsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startMapConversionsVector(t,e){t.startVector(4,e,4)}static addMetadata(t,e){t.addFieldOffset(4,e,0)}static createMetadataVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startMetadataVector(t,e){t.startVector(4,e,4)}static endModel(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),e}static finishModelBuffer(t,e){t.finish(e,"TRB8")}static finishSizePrefixedModelBuffer(t,e){t.finish(e,"TRB8",!0)}static createModel(t,e,s,r,n,o){return i.startModel(t),i.addEntities(t,e),i.addProperties(t,s),i.addGeometry(t,r),i.addMapConversions(t,n),i.addMetadata(t,o),i.endModel(t)}}e.Model=i}(e.Fbs||(e.Fbs={}))}(e.TrimBim||(e.TrimBim={}))}(t.Technology||(t.Technology={}))}(r||(r={}));for(var o=[],a=0;a<256;a++)o[a]=(a<16?"0":"")+a.toString(16);var h={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(o[255&t]+o[t>>8&255]+o[t>>16&255]+o[t>>24&255]+"-"+o[255&e]+o[e>>8&255]+"-"+o[e>>16&15|64]+o[e>>24&255]+"-"+o[63&i|128]+o[i>>8&255]+"-"+o[i>>16&255]+o[i>>24&255]+o[255&s]+o[s>>8&255]+o[s>>16&255]+o[s>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,s,r){return s+(t-e)*(r-s)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*h.DEG2RAD},radToDeg:function(t){return t*h.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,s,r){var n=Math.cos,o=Math.sin,a=n(i/2),h=o(i/2),c=n((e+s)/2),b=o((e+s)/2),l=n((e-s)/2),d=o((e-s)/2),u=n((s-e)/2),_=o((s-e)/2);switch(r){case"XYX":t.set(a*b,h*l,h*d,a*c);break;case"YZY":t.set(h*d,a*b,h*l,a*c);break;case"ZXZ":t.set(h*l,h*d,a*b,a*c);break;case"XZX":t.set(a*b,h*_,h*u,a*c);break;case"YXY":t.set(h*u,a*b,h*_,a*c);break;case"ZYZ":t.set(h*_,h*u,a*b,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function c(t,e,i,s){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==s?s:1}Object.assign(c,{slerp:function(t,e,i,s){return i.copy(t).slerp(e,s)},slerpFlat:function(t,e,i,s,r,n,o){var a=i[s+0],h=i[s+1],c=i[s+2],b=i[s+3],l=r[n+0],d=r[n+1],u=r[n+2],_=r[n+3];if(b!==_||a!==l||h!==d||c!==u){var p=1-o,f=a*l+h*d+c*u+b*_,g=f>=0?1:-1,m=1-f*f;if(m>Number.EPSILON){var y=Math.sqrt(m),v=Math.atan2(y,f*g);p=Math.sin(p*v)/y,o=Math.sin(o*v)/y}var x=o*g;if(a=a*p+l*x,h=h*p+d*x,c=c*p+u*x,b=b*p+_*x,p===1-o){var w=1/Math.sqrt(a*a+h*h+c*c+b*b);a*=w,h*=w,c*=w,b*=w}}t[e]=a,t[e+1]=h,t[e+2]=c,t[e+3]=b},multiplyQuaternionsFlat:function(t,e,i,s,r,n){var o=i[s],a=i[s+1],h=i[s+2],c=i[s+3],b=r[n],l=r[n+1],d=r[n+2],u=r[n+3];return t[e]=o*u+c*b+a*d-h*l,t[e+1]=a*u+c*l+h*b-o*d,t[e+2]=h*u+c*d+o*l-a*b,t[e+3]=c*u-o*b-a*l-h*d,t}}),Object.defineProperties(c.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(c.prototype,{isQuaternion:!0,set:function(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,s=t._y,r=t._z,n=t.order,o=Math.cos,a=Math.sin,h=o(i/2),c=o(s/2),b=o(r/2),l=a(i/2),d=a(s/2),u=a(r/2);switch(n){case"XYZ":this._x=l*c*b+h*d*u,this._y=h*d*b-l*c*u,this._z=h*c*u+l*d*b,this._w=h*c*b-l*d*u;break;case"YXZ":this._x=l*c*b+h*d*u,this._y=h*d*b-l*c*u,this._z=h*c*u-l*d*b,this._w=h*c*b+l*d*u;break;case"ZXY":this._x=l*c*b-h*d*u,this._y=h*d*b+l*c*u,this._z=h*c*u+l*d*b,this._w=h*c*b-l*d*u;break;case"ZYX":this._x=l*c*b-h*d*u,this._y=h*d*b+l*c*u,this._z=h*c*u-l*d*b,this._w=h*c*b+l*d*u;break;case"YZX":this._x=l*c*b+h*d*u,this._y=h*d*b+l*c*u,this._z=h*c*u-l*d*b,this._w=h*c*b-l*d*u;break;case"XZY":this._x=l*c*b-h*d*u,this._y=h*d*b-l*c*u,this._z=h*c*u+l*d*b,this._w=h*c*b+l*d*u;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+n)}return!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,s=i[0],r=i[4],n=i[8],o=i[1],a=i[5],h=i[9],c=i[2],b=i[6],l=i[10],d=s+a+l;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(b-h)*e,this._y=(n-c)*e,this._z=(o-r)*e):s>a&&s>l?(e=2*Math.sqrt(1+s-a-l),this._w=(b-h)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(n+c)/e):a>l?(e=2*Math.sqrt(1+a-s-l),this._w=(n-c)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(h+b)/e):(e=2*Math.sqrt(1+l-s-a),this._w=(o-r)/e,this._x=(n+c)/e,this._y=(h+b)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(h.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);if(0===i)return this;var s=Math.min(1,e/i);return this.slerp(t,s),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,s=t._y,r=t._z,n=t._w,o=e._x,a=e._y,h=e._z,c=e._w;return this._x=i*c+n*o+s*h-r*a,this._y=s*c+n*a+r*o-i*h,this._z=r*c+n*h+i*a-s*o,this._w=n*c-i*o-s*a-r*h,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,s=this._y,r=this._z,n=this._w,o=n*t._w+i*t._x+s*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=n,this._x=i,this._y=s,this._z=r,this;var a=1-o*o;if(a<=Number.EPSILON){var h=1-e;return this._w=h*n+e*this._w,this._x=h*i+e*this._x,this._y=h*s+e*this._y,this._z=h*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(a),b=Math.atan2(c,o),l=Math.sin((1-e)*b)/c,d=Math.sin(e*b)/c;return this._w=n*l+this._w*d,this._x=i*l+this._x*d,this._y=s*l+this._y*d,this._z=r*l+this._z*d,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var b=new d,l=new c;function d(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function u(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(d.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(l.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(l.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*s,this.y=r[1]*e+r[4]*i+r[7]*s,this.z=r[2]*e+r[5]*i+r[8]*s,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,i=this.y,s=this.z,r=t.elements,n=1/(r[3]*e+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*s+r[12])*n,this.y=(r[1]*e+r[5]*i+r[9]*s+r[13])*n,this.z=(r[2]*e+r[6]*i+r[10]*s+r[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,s=this.z,r=t.x,n=t.y,o=t.z,a=t.w,h=a*e+n*s-o*i,c=a*i+o*e-r*s,b=a*s+r*i-n*e,l=-r*e-n*i-o*s;return this.x=h*a+l*-r+c*-o-b*-n,this.y=c*a+l*-n+b*-r-h*-o,this.z=b*a+l*-o+h*-n-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s,this.y=r[1]*e+r[5]*i+r[9]*s,this.z=r[2]*e+r[6]*i+r[10]*s,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,s=t.y,r=t.z,n=e.x,o=e.y,a=e.z;return this.x=s*a-r*o,this.y=r*n-i*a,this.z=i*o-s*n,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)},projectOnPlane:function(t){return b.copy(this).projectOnVector(t),this.sub(b)},reflect:function(t){return this.sub(b.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var i=this.dot(t)/e;return Math.acos(h.clamp(i,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}),Object.assign(u.prototype,{isMatrix3:!0,set:function(t,e,i,s,r,n,o,a,h){var c=this.elements;return c[0]=t,c[1]=s,c[2]=o,c[3]=e,c[4]=r,c[5]=a,c[6]=i,c[7]=n,c[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},extractBasis:function(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,s=e.elements,r=this.elements,n=i[0],o=i[3],a=i[6],h=i[1],c=i[4],b=i[7],l=i[2],d=i[5],u=i[8],_=s[0],p=s[3],f=s[6],g=s[1],m=s[4],y=s[7],v=s[2],x=s[5],w=s[8];return r[0]=n*_+o*g+a*v,r[3]=n*p+o*m+a*x,r[6]=n*f+o*y+a*w,r[1]=h*_+c*g+b*v,r[4]=h*p+c*m+b*x,r[7]=h*f+c*y+b*w,r[2]=l*_+d*g+u*v,r[5]=l*p+d*m+u*x,r[8]=l*f+d*y+u*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],o=t[5],a=t[6],h=t[7],c=t[8];return e*n*c-e*o*h-i*r*c+i*o*a+s*r*h-s*n*a},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var i=t.elements,s=this.elements,r=i[0],n=i[1],o=i[2],a=i[3],h=i[4],c=i[5],b=i[6],l=i[7],d=i[8],u=d*h-c*l,_=c*b-d*a,p=l*a-h*b,f=r*u+n*_+o*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var g=1/f;return s[0]=u*g,s[1]=(o*l-d*n)*g,s[2]=(c*n-o*h)*g,s[3]=_*g,s[4]=(d*r-o*b)*g,s[5]=(o*a-c*r)*g,s[6]=p*g,s[7]=(n*b-l*r)*g,s[8]=(h*r-n*a)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,s,r,n,o){var a=Math.cos(r),h=Math.sin(r);this.set(i*a,i*h,-i*(a*n+h*o)+n+t,-s*h,s*a,-s*(-h*n+a*o)+o+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),s=this.elements,r=s[0],n=s[3],o=s[6],a=s[1],h=s[4],c=s[7];return s[0]=e*r+i*a,s[3]=e*n+i*h,s[6]=e*o+i*c,s[1]=-i*r+e*a,s[4]=-i*n+e*h,s[7]=-i*o+e*c,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var _=new d,p=new d,f=new u;function g(t,e){this.normal=void 0!==t?t:new d(1,0,0),this.constant=void 0!==e?e:0}Object.assign(g.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,s){return this.normal.set(t,e,i),this.constant=s,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,i){var s=_.subVectors(i,e).cross(p.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new d),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new d);var i=t.delta(_),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?void 0:e.copy(i).multiplyScalar(r).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new d),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var i=e||f.getNormalMatrix(t),s=this.coplanarPoint(_).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var m=new d,y=new d,v=new d,x=new d,w=new d,T=new d,F=new d,I=new d,S=new d,B=new d;function M(t,e,i){this.a=void 0!==t?t:new d,this.b=void 0!==e?e:new d,this.c=void 0!==i?i:new d}Object.assign(M,{getNormal:function(t,e,i,s){void 0===s&&(console.warn("THREE.Triangle: .getNormal() target is now required"),s=new d),s.subVectors(i,e),m.subVectors(t,e),s.cross(m);var r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)},getBarycoord:function(t,e,i,s,r){m.subVectors(s,e),y.subVectors(i,e),v.subVectors(t,e);var n=m.dot(m),o=m.dot(y),a=m.dot(v),h=y.dot(y),c=y.dot(v),b=n*h-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new d),0===b)return r.set(-2,-1,-1);var l=1/b,u=(h*a-o*c)*l,_=(n*c-o*a)*l;return r.set(1-u-_,_,u)},containsPoint:function(t,e,i,s){return M.getBarycoord(t,e,i,s,x),x.x>=0&&x.y>=0&&x.x+x.y<=1},getUV:function(t,e,i,s,r,n,o,a){return this.getBarycoord(t,e,i,s,x),a.set(0,0),a.addScaledVector(r,x.x),a.addScaledVector(n,x.y),a.addScaledVector(o,x.z),a},isFrontFacing:function(t,e,i,s){return m.subVectors(i,e),y.subVectors(t,e),m.cross(y).dot(s)<0}}),Object.assign(M.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return m.subVectors(this.c,this.b),y.subVectors(this.a,this.b),.5*m.cross(y).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new d),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return M.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new g),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return M.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,i,s,r){return M.getUV(t,this.a,this.b,this.c,e,i,s,r)},containsPoint:function(t){return M.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return M.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new d);var i,s,r=this.a,n=this.b,o=this.c;w.subVectors(n,r),T.subVectors(o,r),I.subVectors(t,r);var a=w.dot(I),h=T.dot(I);if(a<=0&&h<=0)return e.copy(r);S.subVectors(t,n);var c=w.dot(S),b=T.dot(S);if(c>=0&&b<=c)return e.copy(n);var l=a*b-c*h;if(l<=0&&a>=0&&c<=0)return i=a/(a-c),e.copy(r).addScaledVector(w,i);B.subVectors(t,o);var u=w.dot(B),_=T.dot(B);if(_>=0&&u<=_)return e.copy(o);var p=u*h-a*_;if(p<=0&&h>=0&&_<=0)return s=h/(h-_),e.copy(r).addScaledVector(T,s);var f=c*_-u*b;if(f<=0&&b-c>=0&&u-_>=0)return F.subVectors(o,n),s=(b-c)/(b-c+(u-_)),e.copy(n).addScaledVector(F,s);var g=1/(f+p+l);return i=p*g,s=l*g,e.copy(r).addScaledVector(w,i).addScaledVector(T,s)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Object.assign(function(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(h.clamp(e/this.radius,-1,1))),this}}),Object.assign(function(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}});var V=[new d,new d,new d,new d,new d,new d,new d,new d],z=new d,L=new D,P=new d,A=new d,C=new d,E=new d,O=new d,R=new d,N=new d,G=new d,k=new d,H=new d;function D(t,e){this.min=void 0!==t?t:new d(1/0,1/0,1/0),this.max=void 0!==e?e:new d(-1/0,-1/0,-1/0)}function U(t,e,i,s,r){var n,o;for(n=0,o=t.length-3;n<=o;n+=3){H.fromArray(t,n);var a=r.x*Math.abs(H.x)+r.y*Math.abs(H.y)+r.z*Math.abs(H.z),h=e.dot(H),c=i.dot(H),b=s.dot(H);if(Math.max(-Math.max(h,c,b),Math.min(h,c,b))>a)return!1}return!0}Object.assign(D.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,s=1/0,r=-1/0,n=-1/0,o=-1/0,a=0,h=t.length;a<h;a+=3){var c=t[a],b=t[a+1],l=t[a+2];c<e&&(e=c),b<i&&(i=b),l<s&&(s=l),c>r&&(r=c),b>n&&(n=b),l>o&&(o=l)}return this.min.set(e,i,s),this.max.set(r,n,o),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,s=1/0,r=-1/0,n=-1/0,o=-1/0,a=0,h=t.count;a<h;a++){var c=t.getX(a),b=t.getY(a),l=t.getZ(a);c<e&&(e=c),b<i&&(i=b),l<s&&(s=l),c>r&&(r=c),b>n&&(n=b),l>o&&(o=l)}return this.min.set(e,i,s),this.max.set(r,n,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var i=z.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new d),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new d),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),L.copy(e.boundingBox),L.applyMatrix4(t.matrixWorld),this.union(L));for(var i=t.children,s=0,r=i.length;s<r;s++)this.expandByObject(i[s]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new d),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,z),z.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(N),G.subVectors(this.max,N),P.subVectors(t.a,N),A.subVectors(t.b,N),C.subVectors(t.c,N),E.subVectors(A,P),O.subVectors(C,A),R.subVectors(P,C);var e=[0,-E.z,E.y,0,-O.z,O.y,0,-R.z,R.y,E.z,0,-E.x,O.z,0,-O.x,R.z,0,-R.x,-E.y,E.x,0,-O.y,O.x,0,-R.y,R.x,0];return!!U(e,P,A,C,G)&&(!!U(e=[1,0,0,0,1,0,0,0,1],P,A,C,G)&&(k.crossVectors(E,O),U(e=[k.x,k.y,k.z],P,A,C,G)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new d),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return z.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(z).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(V[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),V[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),V[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),V[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),V[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),V[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),V[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),V[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(V),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var q=new D;function W(t,e){this.center=void 0!==t?t:new d,this.radius=void 0!==e?e:-1}Object.assign(W.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var i=this.center;void 0!==e?i.copy(e):q.setFromPoints(t).getCenter(i);for(var s=0,r=0,n=t.length;r<n;r++)s=Math.max(s,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new d),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new D),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var j=new W,Z=new d;function X(t,e,i,s,r,n){this.planes=[void 0!==t?t:new g,void 0!==e?e:new g,void 0!==i?i:new g,void 0!==s?s:new g,void 0!==r?r:new g,void 0!==n?n:new g]}Object.assign(X.prototype,{set:function(t,e,i,s,r,n){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(s),o[4].copy(r),o[5].copy(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromProjectionMatrix:function(t){var e=this.planes,i=t.elements,s=i[0],r=i[1],n=i[2],o=i[3],a=i[4],h=i[5],c=i[6],b=i[7],l=i[8],d=i[9],u=i[10],_=i[11],p=i[12],f=i[13],g=i[14],m=i[15];return e[0].setComponents(o-s,b-a,_-l,m-p).normalize(),e[1].setComponents(o+s,b+a,_+l,m+p).normalize(),e[2].setComponents(o+r,b+h,_+d,m+f).normalize(),e[3].setComponents(o-r,b-h,_-d,m-f).normalize(),e[4].setComponents(o-n,b-c,_-u,m-g).normalize(),e[5].setComponents(o+n,b+c,_+u,m+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),j.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(j)},intersectsSprite:function(t){return j.center.set(0,0,0),j.radius=.7071067811865476,j.applyMatrix4(t.matrixWorld),this.intersectsSphere(j)},intersectsSphere:function(t){for(var e=this.planes,i=t.center,s=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(i)<s)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,i=0;i<6;i++){var s=e[i];if(Z.x=s.normal.x>0?t.max.x:t.min.x,Z.y=s.normal.y>0?t.max.y:t.min.y,Z.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(Z)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}});var $=new d,Y=new d,Q=new d,J=new d,K=new d,tt=new d,et=new d;function it(t,e){this.origin=void 0!==t?t:new d,this.direction=void 0!==e?e:new d(0,0,-1)}Object.assign(it.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new d),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,$)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new d),e.subVectors(t,this.origin);var i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=$.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):($.copy(this.direction).multiplyScalar(e).add(this.origin),$.distanceToSquared(t))},distanceSqToSegment:function(t,e,i,s){Y.copy(t).add(e).multiplyScalar(.5),Q.copy(e).sub(t).normalize(),J.copy(this.origin).sub(Y);var r,n,o,a,h=.5*t.distanceTo(e),c=-this.direction.dot(Q),b=J.dot(this.direction),l=-J.dot(Q),d=J.lengthSq(),u=Math.abs(1-c*c);if(u>0)if(n=c*b-l,a=h*u,(r=c*l-b)>=0)if(n>=-a)if(n<=a){var _=1/u;o=(r*=_)*(r+c*(n*=_)+2*b)+n*(c*r+n+2*l)+d}else n=h,o=-(r=Math.max(0,-(c*n+b)))*r+n*(n+2*l)+d;else n=-h,o=-(r=Math.max(0,-(c*n+b)))*r+n*(n+2*l)+d;else n<=-a?o=-(r=Math.max(0,-(-c*h+b)))*r+(n=r>0?-h:Math.min(Math.max(-h,-l),h))*(n+2*l)+d:n<=a?(r=0,o=(n=Math.min(Math.max(-h,-l),h))*(n+2*l)+d):o=-(r=Math.max(0,-(c*h+b)))*r+(n=r>0?h:Math.min(Math.max(-h,-l),h))*(n+2*l)+d;else n=c>0?-h:h,o=-(r=Math.max(0,-(c*n+b)))*r+n*(n+2*l)+d;return i&&i.copy(this.direction).multiplyScalar(r).add(this.origin),s&&s.copy(Q).multiplyScalar(n).add(Y),o},intersectSphere:function(t,e){$.subVectors(t.center,this.origin);var i=$.dot(this.direction),s=$.dot($)-i*i,r=t.radius*t.radius;if(s>r)return null;var n=Math.sqrt(r-s),o=i-n,a=i+n;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,s,r,n,o,a,h=1/this.direction.x,c=1/this.direction.y,b=1/this.direction.z,l=this.origin;return h>=0?(i=(t.min.x-l.x)*h,s=(t.max.x-l.x)*h):(i=(t.max.x-l.x)*h,s=(t.min.x-l.x)*h),c>=0?(r=(t.min.y-l.y)*c,n=(t.max.y-l.y)*c):(r=(t.max.y-l.y)*c,n=(t.min.y-l.y)*c),i>n||r>s?null:((r>i||i!=i)&&(i=r),(n<s||s!=s)&&(s=n),b>=0?(o=(t.min.z-l.z)*b,a=(t.max.z-l.z)*b):(o=(t.max.z-l.z)*b,a=(t.min.z-l.z)*b),i>a||o>s?null:((o>i||i!=i)&&(i=o),(a<s||s!=s)&&(s=a),s<0?null:this.at(i>=0?i:s,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,$)},intersectTriangle:function(t,e,i,s,r){K.subVectors(e,t),tt.subVectors(i,t),et.crossVectors(K,tt);var n,o=this.direction.dot(et);if(o>0){if(s)return null;n=1}else{if(!(o<0))return null;n=-1,o=-o}J.subVectors(this.origin,t);var a=n*this.direction.dot(tt.crossVectors(J,tt));if(a<0)return null;var h=n*this.direction.dot(K.cross(J));if(h<0)return null;if(a+h>o)return null;var c=-n*J.dot(et);return c<0?null:this.at(c/o,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var st=new d,rt=new bt,nt=new d(0,0,0),ot=new d(1,1,1),at=new d,ht=new d,ct=new d;function bt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function lt(t,e){this.x=t||0,this.y=e||0}Object.assign(bt.prototype,{isMatrix4:!0,set:function(t,e,i,s,r,n,o,a,h,c,b,l,d,u,_,p){var f=this.elements;return f[0]=t,f[4]=e,f[8]=i,f[12]=s,f[1]=r,f[5]=n,f[9]=o,f[13]=a,f[2]=h,f[6]=c,f[10]=b,f[14]=l,f[3]=d,f[7]=u,f[11]=_,f[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new bt).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,i=t.elements,s=1/st.setFromMatrixColumn(t,0).length(),r=1/st.setFromMatrixColumn(t,1).length(),n=1/st.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*n,e[9]=i[9]*n,e[10]=i[10]*n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,s=t.y,r=t.z,n=Math.cos(i),o=Math.sin(i),a=Math.cos(s),h=Math.sin(s),c=Math.cos(r),b=Math.sin(r);if("XYZ"===t.order){var l=n*c,d=n*b,u=o*c,_=o*b;e[0]=a*c,e[4]=-a*b,e[8]=h,e[1]=d+u*h,e[5]=l-_*h,e[9]=-o*a,e[2]=_-l*h,e[6]=u+d*h,e[10]=n*a}else if("YXZ"===t.order){var p=a*c,f=a*b,g=h*c,m=h*b;e[0]=p+m*o,e[4]=g*o-f,e[8]=n*h,e[1]=n*b,e[5]=n*c,e[9]=-o,e[2]=f*o-g,e[6]=m+p*o,e[10]=n*a}else if("ZXY"===t.order){p=a*c,f=a*b,g=h*c,m=h*b;e[0]=p-m*o,e[4]=-n*b,e[8]=g+f*o,e[1]=f+g*o,e[5]=n*c,e[9]=m-p*o,e[2]=-n*h,e[6]=o,e[10]=n*a}else if("ZYX"===t.order){l=n*c,d=n*b,u=o*c,_=o*b;e[0]=a*c,e[4]=u*h-d,e[8]=l*h+_,e[1]=a*b,e[5]=_*h+l,e[9]=d*h-u,e[2]=-h,e[6]=o*a,e[10]=n*a}else if("YZX"===t.order){var y=n*a,v=n*h,x=o*a,w=o*h;e[0]=a*c,e[4]=w-y*b,e[8]=x*b+v,e[1]=b,e[5]=n*c,e[9]=-o*c,e[2]=-h*c,e[6]=v*b+x,e[10]=y-w*b}else if("XZY"===t.order){y=n*a,v=n*h,x=o*a,w=o*h;e[0]=a*c,e[4]=-b,e[8]=h*c,e[1]=y*b+w,e[5]=n*c,e[9]=v*b-x,e[2]=x*b-v,e[6]=o*c,e[10]=w*b+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(nt,t,ot)},lookAt:function(t,e,i){var s=this.elements;return ct.subVectors(t,e),0===ct.lengthSq()&&(ct.z=1),ct.normalize(),at.crossVectors(i,ct),0===at.lengthSq()&&(1===Math.abs(i.z)?ct.x+=1e-4:ct.z+=1e-4,ct.normalize(),at.crossVectors(i,ct)),at.normalize(),ht.crossVectors(ct,at),s[0]=at.x,s[4]=ht.x,s[8]=ct.x,s[1]=at.y,s[5]=ht.y,s[9]=ct.y,s[2]=at.z,s[6]=ht.z,s[10]=ct.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,s=e.elements,r=this.elements,n=i[0],o=i[4],a=i[8],h=i[12],c=i[1],b=i[5],l=i[9],d=i[13],u=i[2],_=i[6],p=i[10],f=i[14],g=i[3],m=i[7],y=i[11],v=i[15],x=s[0],w=s[4],T=s[8],F=s[12],I=s[1],S=s[5],B=s[9],M=s[13],V=s[2],z=s[6],L=s[10],P=s[14],A=s[3],C=s[7],E=s[11],O=s[15];return r[0]=n*x+o*I+a*V+h*A,r[4]=n*w+o*S+a*z+h*C,r[8]=n*T+o*B+a*L+h*E,r[12]=n*F+o*M+a*P+h*O,r[1]=c*x+b*I+l*V+d*A,r[5]=c*w+b*S+l*z+d*C,r[9]=c*T+b*B+l*L+d*E,r[13]=c*F+b*M+l*P+d*O,r[2]=u*x+_*I+p*V+f*A,r[6]=u*w+_*S+p*z+f*C,r[10]=u*T+_*B+p*L+f*E,r[14]=u*F+_*M+p*P+f*O,r[3]=g*x+m*I+y*V+v*A,r[7]=g*w+m*S+y*z+v*C,r[11]=g*T+m*B+y*L+v*E,r[15]=g*F+m*M+y*P+v*O,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[4],s=t[8],r=t[12],n=t[1],o=t[5],a=t[9],h=t[13],c=t[2],b=t[6],l=t[10],d=t[14];return t[3]*(+r*a*b-s*h*b-r*o*l+i*h*l+s*o*d-i*a*d)+t[7]*(+e*a*d-e*h*l+r*n*l-s*n*d+s*h*c-r*a*c)+t[11]*(+e*h*b-e*o*d-r*n*b+i*n*d+r*o*c-i*h*c)+t[15]*(-s*o*c-e*a*b+e*o*l+s*n*b-i*n*l+i*a*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,i){var s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var i=this.elements,s=t.elements,r=s[0],n=s[1],o=s[2],a=s[3],h=s[4],c=s[5],b=s[6],l=s[7],d=s[8],u=s[9],_=s[10],p=s[11],f=s[12],g=s[13],m=s[14],y=s[15],v=u*m*l-g*_*l+g*b*p-c*m*p-u*b*y+c*_*y,x=f*_*l-d*m*l-f*b*p+h*m*p+d*b*y-h*_*y,w=d*g*l-f*u*l+f*c*p-h*g*p-d*c*y+h*u*y,T=f*u*b-d*g*b-f*c*_+h*g*_+d*c*m-h*u*m,F=r*v+n*x+o*w+a*T;if(0===F)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var I=1/F;return i[0]=v*I,i[1]=(g*_*a-u*m*a-g*o*p+n*m*p+u*o*y-n*_*y)*I,i[2]=(c*m*a-g*b*a+g*o*l-n*m*l-c*o*y+n*b*y)*I,i[3]=(u*b*a-c*_*a-u*o*l+n*_*l+c*o*p-n*b*p)*I,i[4]=x*I,i[5]=(d*m*a-f*_*a+f*o*p-r*m*p-d*o*y+r*_*y)*I,i[6]=(f*b*a-h*m*a-f*o*l+r*m*l+h*o*y-r*b*y)*I,i[7]=(h*_*a-d*b*a+d*o*l-r*_*l-h*o*p+r*b*p)*I,i[8]=w*I,i[9]=(f*u*a-d*g*a-f*n*p+r*g*p+d*n*y-r*u*y)*I,i[10]=(h*g*a-f*c*a+f*n*l-r*g*l-h*n*y+r*c*y)*I,i[11]=(d*c*a-h*u*a-d*n*l+r*u*l+h*n*p-r*c*p)*I,i[12]=T*I,i[13]=(d*g*o-f*u*o+f*n*_-r*g*_-d*n*m+r*u*m)*I,i[14]=(f*c*o-h*g*o-f*n*b+r*g*b+h*n*m-r*c*m)*I,i[15]=(h*u*o-d*c*o+d*n*b-r*u*b-h*n*_+r*c*_)*I,this},scale:function(t){var e=this.elements,i=t.x,s=t.y,r=t.z;return e[0]*=i,e[4]*=s,e[8]*=r,e[1]*=i,e[5]*=s,e[9]*=r,e[2]*=i,e[6]*=s,e[10]*=r,e[3]*=i,e[7]*=s,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),s=Math.sin(e),r=1-i,n=t.x,o=t.y,a=t.z,h=r*n,c=r*o;return this.set(h*n+i,h*o-s*a,h*a+s*o,0,h*o+s*a,c*o+i,c*a-s*n,0,h*a-s*o,c*a+s*n,r*a*a+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var s=this.elements,r=e._x,n=e._y,o=e._z,a=e._w,h=r+r,c=n+n,b=o+o,l=r*h,d=r*c,u=r*b,_=n*c,p=n*b,f=o*b,g=a*h,m=a*c,y=a*b,v=i.x,x=i.y,w=i.z;return s[0]=(1-(_+f))*v,s[1]=(d+y)*v,s[2]=(u-m)*v,s[3]=0,s[4]=(d-y)*x,s[5]=(1-(l+f))*x,s[6]=(p+g)*x,s[7]=0,s[8]=(u+m)*w,s[9]=(p-g)*w,s[10]=(1-(l+_))*w,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this},decompose:function(t,e,i){var s=this.elements,r=st.set(s[0],s[1],s[2]).length(),n=st.set(s[4],s[5],s[6]).length(),o=st.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],rt.copy(this);var a=1/r,h=1/n,c=1/o;return rt.elements[0]*=a,rt.elements[1]*=a,rt.elements[2]*=a,rt.elements[4]*=h,rt.elements[5]*=h,rt.elements[6]*=h,rt.elements[8]*=c,rt.elements[9]*=c,rt.elements[10]*=c,e.setFromRotationMatrix(rt),i.x=r,i.y=n,i.z=o,this},makePerspective:function(t,e,i,s,r,n){void 0===n&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(e-t),h=2*r/(i-s),c=(e+t)/(e-t),b=(i+s)/(i-s),l=-(n+r)/(n-r),d=-2*n*r/(n-r);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=h,o[9]=b,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,i,s,r,n){var o=this.elements,a=1/(e-t),h=1/(i-s),c=1/(n-r),b=(e+t)*a,l=(i+s)*h,d=(n+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-b,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),Object.defineProperties(lt.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(lt.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),s=Math.sin(e),r=this.x-t.x,n=this.y-t.y;return this.x=r*i-n*s+t.x,this.y=r*s+n*i+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});var dt=new lt;Object.assign(function(t,e){this.min=void 0!==t?t:new lt(1/0,1/0),this.max=void 0!==e?e:new lt(-1/0,-1/0)}.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var i=dt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new lt),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new lt),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new lt),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new lt),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return dt.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var ut=new d,_t=new d;Object.assign(function(t,e){this.start=void 0!==t?t:new d,this.end=void 0!==e?e:new d}.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new d),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new d),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new d),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){ut.subVectors(t,this.start),_t.subVectors(this.end,this.start);var i=_t.dot(_t),s=_t.dot(ut)/i;return e&&(s=h.clamp(s,0,1)),s},closestPointToPoint:function(t,e,i){var s=this.closestPointToPointParameter(t,e);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new d),this.delta(i).multiplyScalar(s).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}});var pt=new bt,ft=new c;function gt(t,e,i,s){this._x=t||0,this._y=e||0,this._z=i||0,this._order=s||gt.DefaultOrder}function mt(t,e,i,s){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==s?s:1}gt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],gt.DefaultOrder="XYZ",Object.defineProperties(gt.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(gt.prototype,{isEuler:!0,set:function(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._order=s||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var s=h.clamp,r=t.elements,n=r[0],o=r[4],a=r[8],c=r[1],b=r[5],l=r[9],d=r[2],u=r[6],_=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(s(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,_),this._z=Math.atan2(-o,n)):(this._x=Math.atan2(u,b),this._z=0);break;case"YXZ":this._x=Math.asin(-s(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,_),this._z=Math.atan2(c,b)):(this._y=Math.atan2(-d,n),this._z=0);break;case"ZXY":this._x=Math.asin(s(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,_),this._z=Math.atan2(-o,b)):(this._y=0,this._z=Math.atan2(c,n));break;case"ZYX":this._y=Math.asin(-s(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,_),this._z=Math.atan2(c,n)):(this._x=0,this._z=Math.atan2(-o,b));break;case"YZX":this._z=Math.asin(s(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-l,b),this._y=Math.atan2(-d,n)):(this._x=0,this._y=Math.atan2(a,_));break;case"XZY":this._z=Math.asin(-s(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(u,b),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-l,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,i){return pt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(pt,e,i)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return ft.setFromEuler(this),this.setFromQuaternion(ft,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new d(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.defineProperties(mt.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(mt.prototype,{isVector4:!0,set:function(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,s=this.z,r=this.w,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*s+n[12]*r,this.y=n[1]*e+n[5]*i+n[9]*s+n[13]*r,this.z=n[2]*e+n[6]*i+n[10]*s+n[14]*r,this.w=n[3]*e+n[7]*i+n[11]*s+n[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,s,r,n=t.elements,o=n[0],a=n[4],h=n[8],c=n[1],b=n[5],l=n[9],d=n[2],u=n[6],_=n[10];if(Math.abs(a-c)<.01&&Math.abs(h-d)<.01&&Math.abs(l-u)<.01){if(Math.abs(a+c)<.1&&Math.abs(h+d)<.1&&Math.abs(l+u)<.1&&Math.abs(o+b+_-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var p=(o+1)/2,f=(b+1)/2,g=(_+1)/2,m=(a+c)/4,y=(h+d)/4,v=(l+u)/4;return p>f&&p>g?p<.01?(i=0,s=.707106781,r=.707106781):(s=m/(i=Math.sqrt(p)),r=y/i):f>g?f<.01?(i=.707106781,s=0,r=.707106781):(i=m/(s=Math.sqrt(f)),r=v/s):g<.01?(i=.707106781,s=.707106781,r=0):(i=y/(r=Math.sqrt(g)),s=v/r),this.set(i,s,r,e),this}var x=Math.sqrt((u-l)*(u-l)+(h-d)*(h-d)+(c-a)*(c-a));return Math.abs(x)<.001&&(x=1),this.x=(u-l)/x,this.y=(h-d)/x,this.z=(c-a)/x,this.w=Math.acos((o+b+_-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});var yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vt={h:0,s:0,l:0},xt={h:0,s:0,l:0};function wt(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function Tt(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function Ft(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function It(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}Object.assign(wt.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){if(t=h.euclideanModulo(t,1),e=h.clamp(e,0,1),i=h.clamp(i,0,1),0===e)this.r=this.g=this.b=i;else{var s=i<=.5?i*(1+e):i+e-i*e,r=2*i-s;this.r=Tt(r,s,t+1/3),this.g=Tt(r,s,t),this.b=Tt(r,s,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var s,r=i[1],n=i[2];switch(r){case"rgb":case"rgba":if(s=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,e(s[5]),this;if(s=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,e(s[5]),this;break;case"hsl":case"hsla":if(s=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){var o=parseFloat(s[1])/360,a=parseInt(s[2],10)/100,h=parseInt(s[3],10)/100;return e(s[5]),this.setHSL(o,a,h)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=i[1],b=c.length;if(3===b)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===b)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=yt[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Ft(t.r),this.g=Ft(t.g),this.b=Ft(t.b),this},copyLinearToSRGB:function(t){return this.r=It(t.r),this.g=It(t.g),this.b=It(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i,s=this.r,r=this.g,n=this.b,o=Math.max(s,r,n),a=Math.min(s,r,n),h=(a+o)/2;if(a===o)e=0,i=0;else{var c=o-a;switch(i=h<=.5?c/(o+a):c/(2-o-a),o){case s:e=(r-n)/c+(r<n?6:0);break;case r:e=(n-s)/c+2;break;case n:e=(s-r)/c+4}e/=6}return t.h=e,t.s=i,t.l=h,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(vt),vt.h+=t,vt.s+=e,vt.l+=i,this.setHSL(vt.h,vt.s,vt.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(vt),t.getHSL(xt);var i=h.lerp(vt.h,xt.h,e),s=h.lerp(vt.s,xt.s,e),r=h.lerp(vt.l,xt.l,e);return this.setHSL(i,s,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),wt.NAMES=yt,Object.assign(function(t,e,i,s,r,n){this.a=t,this.b=e,this.c=i,this.normal=s&&s.isVector3?s:new d,this.vertexNormals=Array.isArray(s)?s:[],this.color=r&&r.isColor?r:new wt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==n?n:0}.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});class St{}St.zero=Object.freeze(new d(0,0,0)),St.one=Object.freeze(new d(1,1,1)),St.up=Object.freeze(new d(0,0,1)),St.down=Object.freeze(new d(0,0,-1)),St.forward=Object.freeze(new d(0,1,0)),St.back=Object.freeze(new d(0,-1,0)),St.right=Object.freeze(new d(1,0,0)),St.left=Object.freeze(new d(-1,0,0));var Bt=r.Technology.TrimBim.Fbs,Mt=(Bt.HierarchyType,Bt.PropertyType),Vt=Bt.GeometryType,zt=Bt.IdentifierType,Lt=r.Technology.TrimBim.Fbs;class Pt extends s{constructor(t){super(t),this.geometryType=Vt.TriangleMesh,this.snapGeometryType=0,this.buffers=[],this.triangleMeshes=this.geometry.triangleMeshes.bind(this.geometry),this.getVertex=(()=>{const t=new Lt.Vec3f;let e;return(i,s,r,n)=>{const o=i.indices(r);e||(e=At(s)),i.vertices(o,e),i.positions(e.positionIndex(),t),n.set(t.x(),t.y(),t.z())}})(),this.pickFace=(()=>{const t=new d,e=new d,i=new d,s=new M,r=new d;return(n,o)=>{const a=Ct(n,this.geometryType,this.geometry),h=a.indicesLength(),c=[];for(let n=0;n<h;n+=3)this.getVertex(a,this.geometryType,n,t),this.getVertex(a,this.geometryType,n+1,e),this.getVertex(a,this.geometryType,n+2,i),o.intersectTriangle(t,e,i,!1,r)&&(s.set(t,e,i),c.push({point:r.clone(),normal:s.getNormal(new d)}));return c}})(),this.pickLine=(()=>{const t=new d,e=new d,i=new d,s=new d,r=new g;return(n,o,a)=>{const h=Ct(n,this.geometryType,this.geometry),c=h.indicesLength(),b=[],l=(t,e,i)=>{a.containsPoint(s)&&b.push({point:s.clone(),normal:i.clone(),snapLineStart:t.clone(),snapLineEnd:e.clone()})};for(let n=0;n<c;n+=3)this.getVertex(h,this.geometryType,n,t),this.getVertex(h,this.geometryType,n+1,e),this.getVertex(h,this.geometryType,n+2,i),r.setFromCoplanarPoints(t,e,i),o.distanceSqToSegment(t,e,void 0,s),l(t,e,r.normal),o.distanceSqToSegment(t,i,void 0,s),l(t,i,r.normal),o.distanceSqToSegment(e,i,void 0,s),l(e,i,r.normal);return b}})(),this.pickPoint=(()=>{const t=new Lt.Vec3f,e=new d;return(i,s,r)=>{const n=At(this.geometryType),o=Ct(i,this.geometryType,this.geometry),a=[];for(let i=0;i<o.verticesLength();i++)o.vertices(i,n),o.positions(n.positionIndex(),t),e.set(t.x(),t.y(),t.z()),r.containsPoint(e)&&a.push({point:e.clone()});return a}})(),this.prepareModelTypes()}getGeometries(t,e=!0){const i=this.buffers[t];if(!i.positions&&e){const e=this.triangleMeshes(t);this.build(e,i)}return[i]}prepareModelTypes(){for(let t=0,e=this.geometry.triangleMeshesLength();t<e;t++){const e=this.geometry.triangleMeshes(t);this.buffers.push(this.calculateBufferSizes(e))}}calculateBufferSizes(t){const e=t.indicesLength();if(e>65535)throw new Error("Indices buffer larger than 65535");return t instanceof Lt.TriangleMesh||t instanceof Lt.TriangleMesh8?{objectType:0,indicesLength:e,positionsLength:3*t.verticesLength(),normalsLength:3*t.verticesLength(),uvsLength:0,pointSizesLength:0}:t instanceof Lt.TexturedTriangleMesh||t instanceof Lt.TexturedTriangleMesh8?{objectType:0,indicesLength:e,positionsLength:3*t.verticesLength(),normalsLength:3*t.verticesLength(),uvsLength:2*e,pointSizesLength:0}:void 0}build(t,e){const i=new Lt.Vec3f,s=new Lt.Vec3f,r=At(this.geometryType),n=t.verticesLength(),o=t.indicesArray(),a=new Float32Array(3*t.verticesLength()),h=new Int16Array(3*t.verticesLength());for(let e=0;e<n;e++)t.vertices(e,r),t.positions(r.positionIndex(),i),t.normals(r.normalIndex(),s),a[3*e]=i.x(),a[3*e+1]=i.y(),a[3*e+2]=i.z(),h[3*e]=32767*s.x(),h[3*e+1]=32767*s.y(),h[3*e+2]=32767*s.z();e.indices=o,e.positions=a,e.normals=h,e.uvs=new Float32Array(0)}buildTexured(t,e,i){const s=new Lt.Vec3f,r=new Lt.Vec3f,n=new Lt.UV,o=At(e),a=t.verticesLength(),h=t.indicesArray(),c=new Float32Array(3*t.verticesLength()),b=new Int16Array(3*t.verticesLength()),l=new Float32Array(2*t.verticesLength());for(let e=0;e<a;e++)t.vertices(e,o),t.positions(o.positionIndex(),s),t.normals(o.normalIndex(),r),t.uvs(o.positionIndex(),n),c[3*e]=s.x(),c[3*e+1]=s.y(),c[3*e+2]=s.z(),b[3*e]=32767*r.x(),b[3*e+1]=32767*r.y(),b[3*e+2]=32767*r.z(),l[2*e]=n.u(),l[2*e+1]=n.v();return i.indices=h,i.positions=c,i.normals=b,i.uvs=l,i}pick(t,e,i){return this.pickFace(t,e)}}function At(t){if(t===Vt.TriangleMesh8||t===Vt.TexturedTriangleMesh8)return new Lt.IndexedVertex8;if(t===Vt.TriangleMesh||t===Vt.TexturedTriangleMesh)return new Lt.IndexedVertex;throw new Error("Unkown index type for mesh")}function Ct(t,e,i){if(e===Vt.TriangleMesh8)return i.triangleMeshes8(t);if(e===Vt.TriangleMesh)return i.triangleMeshes(t);if(e===Vt.TexturedTriangleMesh8)return i.texturedTriangleMeshes8(t);if(e===Vt.TexturedTriangleMesh)return i.texturedTriangleMeshes(t);throw new Error(`Unknown Mesh type: ${e}`)}class Et extends Pt{constructor(t){super(t),this.geometryType=Vt.TriangleMesh8,this.triangleMeshes=t.triangleMeshes8.bind(t),this.prepareModelTypes()}prepareModelTypes(){for(let t=0,e=this.geometry.triangleMeshes8Length();t<e;t++){const e=this.geometry.triangleMeshes8(t);this.buffers.push(this.calculateBufferSizes(e))}}}class Ot extends Pt{constructor(t){super(t),this.geometryType=Vt.TexturedTriangleMesh,this.producedType=0,this.triangleMeshes=t.texturedTriangleMeshes.bind(t),this.prepareModelTypes()}prepareModelTypes(){for(let t=0,e=this.geometry.texturedTriangleMeshesLength();t<e;t++){const e=this.geometry.texturedTriangleMeshes(t);this.buffers.push(this.calculateBufferSizes(e))}}getGeometries(t,e=!0){const i=this.buffers[t];if(!i.positions&&e){const e=this.triangleMeshes(t);this.buffers[t]=this.buildTexured(e,this.geometryType,i)}return[i]}}class Rt extends Pt{constructor(t){super(t),this.geometryType=Vt.TexturedTriangleMesh8,this.producedType=0,this.triangleMeshes=t.texturedTriangleMeshes8.bind(t),this.prepareModelTypes()}prepareModelTypes(){for(let t=0,e=this.geometry.texturedTriangleMeshes8Length();t<e;t++){const e=this.geometry.texturedTriangleMeshes8(t);this.buffers.push(this.calculateBufferSizes(e))}}getGeometries(t,e=!0){let i=this.buffers[t];if(!i.positions&&e){const e=this.triangleMeshes(t);this.buffers[t]=this.buildTexured(e,this.geometryType,i)}return[i]}}var Nt=function(t,e,i){i=i||2;var s,r,n,o,a,h,c,b=e&&e.length,l=b?e[0]*i:t.length,d=Gt(t,0,l,i,!0),u=[];if(!d||d.next===d.prev)return u;if(b&&(d=function(t,e,i,s){var r,n,o,a,h,c=[];for(r=0,n=e.length;r<n;r++)o=e[r]*s,a=r<n-1?e[r+1]*s:t.length,(h=Gt(t,o,a,s,!1))===h.next&&(h.steiner=!0),c.push(Yt(h));for(c.sort(jt),r=0;r<c.length;r++)Zt(c[r],i),i=kt(i,i.next);return i}(t,e,d,i)),t.length>80*i){s=n=t[0],r=o=t[1];for(var _=i;_<l;_+=i)(a=t[_])<s&&(s=a),(h=t[_+1])<r&&(r=h),a>n&&(n=a),h>o&&(o=h);c=0!==(c=Math.max(n-s,o-r))?1/c:0}return Ht(d,u,i,s,r,c),u};function Gt(t,e,i,s,r){var n,o;if(r===function(t,e,i,s){for(var r=0,n=e,o=i-s;n<i;n+=s)r+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return r}(t,e,i,s)>0)for(n=e;n<i;n+=s)o=oe(n,t[n],t[n+1],o);else for(n=i-s;n>=e;n-=s)o=oe(n,t[n],t[n+1],o);return o&&te(o,o.next)&&(ae(o),o=o.next),o}function kt(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!te(s,s.next)&&0!==Kt(s.prev,s,s.next))s=s.next;else{if(ae(s),(s=e=s.prev)===s.next)break;i=!0}}while(i||s!==e);return e}function Ht(t,e,i,s,r,n,o){if(t){!o&&n&&function(t,e,i,s){var r=t;do{null===r.z&&(r.z=$t(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,s,r,n,o,a,h,c=1;do{for(i=t,t=null,n=null,o=0;i;){for(o++,s=i,a=0,e=0;e<c&&(a++,s=s.nextZ);e++);for(h=c;a>0||h>0&&s;)0!==a&&(0===h||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,h--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,c*=2}while(o>1)}(r)}(t,s,r,n);for(var a,h,c=t;t.prev!==t.next;)if(a=t.prev,h=t.next,n?Ut(t,s,r,n):Dt(t))e.push(a.i/i),e.push(t.i/i),e.push(h.i/i),ae(t),t=h.next,c=h.next;else if((t=h)===c){o?1===o?Ht(t=qt(kt(t),e,i),e,i,s,r,n,2):2===o&&Wt(t,e,i,s,r,n):Ht(kt(t),e,i,s,r,n,1);break}}}function Dt(t){var e=t.prev,i=t,s=t.next;if(Kt(e,i,s)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Qt(e.x,e.y,i.x,i.y,s.x,s.y,r.x,r.y)&&Kt(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ut(t,e,i,s){var r=t.prev,n=t,o=t.next;if(Kt(r,n,o)>=0)return!1;for(var a=r.x<n.x?r.x<o.x?r.x:o.x:n.x<o.x?n.x:o.x,h=r.y<n.y?r.y<o.y?r.y:o.y:n.y<o.y?n.y:o.y,c=r.x>n.x?r.x>o.x?r.x:o.x:n.x>o.x?n.x:o.x,b=r.y>n.y?r.y>o.y?r.y:o.y:n.y>o.y?n.y:o.y,l=$t(a,h,e,i,s),d=$t(c,b,e,i,s),u=t.prevZ,_=t.nextZ;u&&u.z>=l&&_&&_.z<=d;){if(u!==t.prev&&u!==t.next&&Qt(r.x,r.y,n.x,n.y,o.x,o.y,u.x,u.y)&&Kt(u.prev,u,u.next)>=0)return!1;if(u=u.prevZ,_!==t.prev&&_!==t.next&&Qt(r.x,r.y,n.x,n.y,o.x,o.y,_.x,_.y)&&Kt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;u&&u.z>=l;){if(u!==t.prev&&u!==t.next&&Qt(r.x,r.y,n.x,n.y,o.x,o.y,u.x,u.y)&&Kt(u.prev,u,u.next)>=0)return!1;u=u.prevZ}for(;_&&_.z<=d;){if(_!==t.prev&&_!==t.next&&Qt(r.x,r.y,n.x,n.y,o.x,o.y,_.x,_.y)&&Kt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function qt(t,e,i){var s=t;do{var r=s.prev,n=s.next.next;!te(r,n)&&ee(r,s,s.next,n)&&re(r,n)&&re(n,r)&&(e.push(r.i/i),e.push(s.i/i),e.push(n.i/i),ae(s),ae(s.next),s=t=n),s=s.next}while(s!==t);return kt(s)}function Wt(t,e,i,s,r,n){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Jt(o,a)){var h=ne(o,a);return o=kt(o,o.next),h=kt(h,h.next),Ht(o,e,i,s,r,n),void Ht(h,e,i,s,r,n)}a=a.next}o=o.next}while(o!==t)}function jt(t,e){return t.x-e.x}function Zt(t,e){if(e=function(t,e){var i,s=e,r=t.x,n=t.y,o=-1/0;do{if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){var a=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(a<=r&&a>o){if(o=a,a===r){if(n===s.y)return s;if(n===s.next.y)return s.next}i=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!i)return null;if(r===o)return i;var h,c=i,b=i.x,l=i.y,d=1/0;s=i;do{r>=s.x&&s.x>=b&&r!==s.x&&Qt(n<l?r:o,n,b,l,n<l?o:r,n,s.x,s.y)&&(h=Math.abs(n-s.y)/(r-s.x),re(s,t)&&(h<d||h===d&&(s.x>i.x||s.x===i.x&&Xt(i,s)))&&(i=s,d=h)),s=s.next}while(s!==c);return i}(t,e)){var i=ne(e,t);kt(e,e.next),kt(i,i.next)}}function Xt(t,e){return Kt(t.prev,t,e.prev)<0&&Kt(e.next,t,t.next)<0}function $t(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Yt(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Qt(t,e,i,s,r,n,o,a){return(r-o)*(e-a)-(t-o)*(n-a)>=0&&(t-o)*(s-a)-(i-o)*(e-a)>=0&&(i-o)*(n-a)-(r-o)*(s-a)>=0}function Jt(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&ee(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(re(t,e)&&re(e,t)&&function(t,e){var i=t,s=!1,r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(Kt(t.prev,t,e.prev)||Kt(t,e.prev,e))||te(t,e)&&Kt(t.prev,t,t.next)>0&&Kt(e.prev,e,e.next)>0)}function Kt(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function te(t,e){return t.x===e.x&&t.y===e.y}function ee(t,e,i,s){var r=se(Kt(t,e,i)),n=se(Kt(t,e,s)),o=se(Kt(i,s,t)),a=se(Kt(i,s,e));return r!==n&&o!==a||(!(0!==r||!ie(t,i,e))||(!(0!==n||!ie(t,s,e))||(!(0!==o||!ie(i,t,s))||!(0!==a||!ie(i,e,s)))))}function ie(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function se(t){return t>0?1:t<0?-1:0}function re(t,e){return Kt(t.prev,t,t.next)<0?Kt(t,e,t.next)>=0&&Kt(t,t.prev,e)>=0:Kt(t,e,t.prev)<0||Kt(t,t.next,e)<0}function ne(t,e){var i=new he(t.i,t.x,t.y),s=new he(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function oe(t,e,i,s){var r=new he(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function ae(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function he(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ce,be=r.Technology.TrimBim.Fbs,le=r.Technology.TrimBim.Fbs.BRep,de=r.Technology.TrimBim.Fbs.BRepWithUV,ue=r.Technology.TrimBim.Fbs.BRepWithNormal;!function(t){t[t.triangle=3]="triangle",t[t.rectangle=4]="rectangle"}(ce||(ce={}));class _e extends s{constructor(){super(...arguments),this.snapGeometryType=0,this.v0=new d,this.v1=new d,this.v2=new d,this.n1=new d,this.calculateBufferSizes=(()=>{const t=new be.InnerWire,e=new be.OuterWire,i=new Uint16Array(65536),s=new Uint16Array(65536);return r=>{let n=0;for(let e=0,o=r.innerWiresLength();e<o;e++){const o=r.innerWires(e,t).outerWire();++i[o],s[o]+=3*t.vertexIndicesLength(),n+=t.vertexIndicesLength()}let o=0,a=0;for(let t=0,n=r.outerWiresLength();t<n;t++){const n=r.outerWires(t,e).vertexIndicesLength();o+=n,i[t]?a+=3*(n+s[t]/3-2+2*i[t]):a+=3*(n-2)}for(let e=0,n=r.innerWiresLength();e<n;++e){const n=r.innerWires(e,t).outerWire();i[n]=0,s[n]=0}const h={objectType:0,indicesLength:a,positionsLength:3*(n+o),normalsLength:3*(n+o),uvsLength:0,pointSizesLength:0};return this.geometryType===Vt.BRepWithUV&&(h.uvsLength=2*(n+o)),h}})(),this.build=(()=>{const t=new be.OuterWire;return(e,i)=>{const s={vertex_count:0,index_count:0,vertex_length:0,uv_length:0,normal_length:0,normal_count:0};i.indices=new Uint16Array(i.indicesLength),i.positions=new Float32Array(i.positionsLength),i.normals=new Int16Array(i.normalsLength),i.uvs=new Float32Array(i.uvsLength),Object.seal(i);const r=this.getBrepData(e,this.getVertexDataSize(this.geometryType)),n=this.buildHoles(e);for(let o=0,a=e.outerWiresLength();o<a;o++){e.outerWires(o,t);const a=t.vertexIndicesArray();t.vertexIndicesLength()!==ce.triangle||n.has(o)?t.vertexIndicesLength()!==ce.rectangle||n.has(o)?ve(a,r,o,this.geometryType,i,n,s):me(a,r,o,this.geometryType,i,s):ye(a,r,this.geometryType,i,s)}this.geometryType!==Vt.BRepWithNormals&&pe.computeNormals(i)}})(),this.buildHoles=(()=>{const t=new be.Vec3f,e=new be.PositionUV,i=new be.PositionNormal,s=new be.InnerWire,r=new Map;return n=>{r.clear();for(let o=0,a=n.innerWiresLength();o<a;o++){const a=n.innerWires(o,s).outerWire();if(r.has(a)){const t=r.get(a);t.indices.push(t.vertices.length/3),r.set(a,t)}else this.geometryType===Vt.BRep?r.set(a,{indices:[0],vertices:[]}):this.geometryType===Vt.BRepWithNormals?r.set(a,{indices:[0],vertices:[],normals:[]}):this.geometryType===Vt.BRepWithUV&&r.set(a,{indices:[0],vertices:[],uvs:[]});const h=r.get(a);for(let r=0,o=s.vertexIndicesLength();r<o;r++)this.geometryType===Vt.BRep&&n instanceof le?(n.vertices(s.vertexIndices(r),t),h.vertices.push(t.x(),t.y(),t.z())):this.geometryType===Vt.BRepWithUV&&n instanceof de?(n.vertices(s.vertexIndices(r),e),h.vertices.push(e.position().x(),e.position().y(),e.position().z()),h.uvs.push(e.uv().u(),e.uv().v())):this.geometryType===Vt.BRepWithNormals&&n instanceof ue&&(n.vertices(s.vertexIndices(r),i),h.vertices.push(i.position().x(),i.position().y(),i.position().z()),h.normals.push(32767*i.normal().x(),32767*i.normal().y(),32767*i.normal().z()))}return r}})(),this.pickFace=(()=>{const t=new g,e=[],i=new Map,s=new d,r=new d,n=new d;return(o,a)=>{const h=this.getBRep(o);e.length=0,i.clear();for(let t=0;t<h.innerWiresLength();t++){const e=h.innerWires(t).outerWire();i.has(e)?i.get(e).push(t):i.set(h.innerWires(t).outerWire(),[t])}const c=this.getVertexDataSize(this.geometryType),b=this.getBrepData(h,c);for(let o=0,l=h.outerWiresLength();o<l;o++){const l=h.outerWires(o).vertexIndicesArray();if(this.v0.set(0,0,0),this.v1.set(0,0,0),this.v2.set(0,0,0),this.n1.set(0,0,0),3===l.length){let t=l[0],i=l[1],o=l[2];t*=c,i*=c,o*=c,s.set(b[t],b[t+1],b[t+2]),r.set(b[i],b[i+1],b[i+2]),n.set(b[o],b[o+1],b[o+2]);const h=this.intersectTriangle(a,s,r,n);h&&e.push(h);continue}const d=l[0]*c;if(this.v0.set(b[d],b[d+1],b[d+2]),we(this.n1,b,l,c),t.setFromNormalAndCoplanarPoint(this.n1,this.v0),a.intersectPlane(t,this.v1)){if(i.has(o)){const e=i.get(o);if(this.insideHole(this.v1,t,e,h,b))continue}this.pointInsidePolygon(this.v1,b,l,c,t)&&e.push({point:this.v1.clone(),normal:t.normal.clone()})}}return e}})(),this.pickLine=(()=>{const t=new be.OuterWire,e=new d,i=new d,s=new d,r=new g;return(n,o,a)=>{const h=this.getBRep(n),c=[];for(let n=0,b=h.outerWiresLength();n<b;n++){h.outerWires(n,t),this.getVertex(h,t.vertexIndices(0),e),this.getVertex(h,t.vertexIndices(1),s),this.getVertex(h,t.vertexIndices(t.vertexIndicesLength()-1),i),r.setFromCoplanarPoints(e,i,s);for(let n=0,b=t.vertexIndicesLength();n<b;n++)this.getVertex(h,t.vertexIndices(n),e),o.distanceSqToSegment(e,i,void 0,s),a.containsPoint(s)&&c.push({point:s.clone(),normal:r.normal.clone(),snapLineStart:e.clone(),snapLineEnd:i.clone()}),i.copy(e)}return c}})(),this.pickPoint=(()=>{const t=new d;return(e,i,s)=>{const r=this.getBRep(e),n=[];for(let e=0,i=r.verticesLength();e<i;e++)this.getVertex(r,e,t),s.containsPoint(t)&&n.push({point:t.clone()});return n}})(),this.getVertex=(()=>{const t=new be.Vec3f,e=new be.PositionUV,i=new be.PositionNormal;return(s,r,n)=>{s instanceof le?s.vertices(r,t):s instanceof ue?s.vertices(r,i).position(t):s instanceof de&&s.vertices(r,e).position(t),n.set(t.x(),t.y(),t.z())}})(),this.insideHole=(()=>(t,e,i,s,r)=>{let n;n=this.geometryType===Vt.BRepWithUV?5:this.geometryType===Vt.BRepWithNormals?6:3;for(let o=0,a=i.length;o<a;o++){const a=s.innerWires(i[o]).vertexIndicesArray();if(this.pointInsidePolygon(t,r,a,n,e))return!0}return!1})(),this.intersectTriangle=(()=>{const t=new M,e=new d;return(i,s,r,n)=>{if(t.a=s,t.b=r,t.c=n,i.intersectTriangle(s,r,n,!1,e))return{point:e.clone(),normal:t.getNormal(new d)}}})(),this.pointInsidePolygon=(()=>{const t=new d,e=new d,i=new d;return(s,r,n,o,a)=>{this.createOrthonormalBasis(a.normal,e,t);const h=n.length,c=n[h-1]*o,b=i.set(r[c],r[c+1],r[c+2]).sub(s);let l=b.dot(t),d=b.dot(e),u=!1;for(let a=0;a<h;a++){const h=n[a]*o,c=i.set(r[h],r[h+1],r[h+2]).sub(s),b=c.dot(t),_=c.dot(e);_>0!=d>0&&0<(l-b)*-_/(d-_)+b&&(u=!u),l=b,d=_}return u}})()}getGeometries(t,e=!0){const i=this.buffers[t];if(!i.positions&&e){const e=this.getBRep(t);this.build(e,i)}return[i]}getVertexDataSize(t){return t===Vt.BRepWithUV?5:t===Vt.BRepWithNormals?6:3}getBrepData(t,e){const i=t.bb.__offset(t.bb_pos,8);return new Float32Array(t.bb.bytes().buffer,t.bb.__vector(t.bb_pos+i),t.verticesLength()*e)}pick(t,e,i){return this.pickFace(t,e)}createOrthonormalBasis(t,e,i){if(Math.abs(t.x)>=Math.abs(t.y)){const s=1/Math.sqrt(t.x*t.x+t.z*t.z);e.set(-t.z*s,0,t.x*s),i.set(t.y*e.z,t.z*e.x-t.x*e.z,-t.y*e.x)}else{const s=1/Math.sqrt(t.y*t.y+t.z*t.z);e.set(0,t.z*s,-t.y*s),i.set(t.y*e.z-t.z*e.y,-t.x*e.z,t.x*e.y)}e.normalize(),i.normalize()}}_e.computeNormals=(()=>{const t=new d,e=new d,i=new d,s=new d,r=new d;let n,o=0,a=0,h=0;return c=>{const b=c.indices,l=c.positions;!n||n.length<c.normals.length?n=new Float32Array(c.normals.length):n.fill(0);for(let d=0,u=c.indices.length;d<u;d+=3)o=3*b[d],a=3*b[d+1],h=3*b[d+2],t.fromArray(l,o),e.fromArray(l,a),i.fromArray(l,h),r.subVectors(i,e),s.subVectors(t,e),r.cross(s),n[o]+=r.x,n[o+1]+=r.y,n[o+2]+=r.z,n[a]+=r.x,n[a+1]+=r.y,n[a+2]+=r.z,n[h]+=r.x,n[h+1]+=r.y,n[h+2]+=r.z;for(let t=0,e=c.normals.length;t<e;t+=3)r.fromArray(n,t),r.normalize(),r.multiplyScalar(32767),r.toArray(c.normals,t)}})();class pe extends _e{constructor(t){super(t),this.geometryType=Vt.BRep,this.getBRep=(()=>{const t=new le;return e=>this.geometry.bReps(e,t)})(),this.prepareModelTypes()}prepareModelTypes(){for(let t=0,e=this.geometry.bRepsLength();t<e;t++){const e=this.getBRep(t);this.buffers.push(this.calculateBufferSizes(e))}}}class fe extends _e{constructor(t){super(t),this.geometryType=Vt.BRepWithUV,this.getBRep=(()=>{const t=new de;return e=>this.geometry.bRepWithUVs(e,t)})(),this.prepareModelTypes()}prepareModelTypes(){for(let t=0,e=this.geometry.bRepWithUVsLength();t<e;t++){const e=this.getBRep(t);this.buffers.push(this.calculateBufferSizes(e))}}}class ge extends _e{constructor(t){super(t),this.geometryType=Vt.BRepWithNormals,this.getBRep=(()=>{const t=new ue;return e=>this.geometry.bRepWithNormals(e,t)})(),this.prepareModelTypes()}prepareModelTypes(){for(let t=0,e=this.geometry.bRepWithNormalsLength();t<e;t++){const e=this.getBRep(t);this.buffers.push(this.calculateBufferSizes(e))}}}const me=(()=>{const t=new d,e=new d,i=new d,s=new d,r=new d,n=new d,o=new d,a=new d,h=new d;let c=0,b=0,l=0,u=0;return(d,_,p,f,g,m)=>{c=d[0],b=d[1],l=d[2],u=d[3],f===Vt.BRep?(c*=3,b*=3,l*=3,u*=3):f===Vt.BRepWithUV?(c*=5,b*=5,l*=5,u*=5):f===Vt.BRepWithNormals&&(c*=6,b*=6,l*=6,u*=6),t.set(_[c],_[c+1],_[c+2]),e.set(_[b],_[b+1],_[b+2]),i.set(_[l],_[l+1],_[l+2]),s.set(_[u],_[u+1],_[u+2]),r.copy(e),n.copy(i),o.copy(s),r.sub(t),n.sub(t),o.sub(t),a.crossVectors(r,n),h.crossVectors(n,o),a.dot(h)>0?(g.indices[m.index_count]=m.vertex_count,g.indices[m.index_count+1]=m.vertex_count+1,g.indices[m.index_count+2]=m.vertex_count+3,g.indices[m.index_count+3]=m.vertex_count+3,g.indices[m.index_count+4]=m.vertex_count+1,g.indices[m.index_count+5]=m.vertex_count+2,m.index_count+=6,g.positions[m.vertex_length]=t.x,g.positions[m.vertex_length+1]=t.y,g.positions[m.vertex_length+2]=t.z,g.positions[m.vertex_length+3]=e.x,g.positions[m.vertex_length+4]=e.y,g.positions[m.vertex_length+5]=e.z,g.positions[m.vertex_length+6]=i.x,g.positions[m.vertex_length+7]=i.y,g.positions[m.vertex_length+8]=i.z,g.positions[m.vertex_length+9]=s.x,g.positions[m.vertex_length+10]=s.y,g.positions[m.vertex_length+11]=s.z,m.vertex_count+=4,m.vertex_length+=12,f===Vt.BRepWithUV?(g.uvs[m.uv_length]=_[c+3],g.uvs[m.uv_length+1]=_[c+4],g.uvs[m.uv_length+2]=_[b+3],g.uvs[m.uv_length+3]=_[b+4],g.uvs[m.uv_length+4]=_[l+3],g.uvs[m.uv_length+5]=_[l+4],g.uvs[m.uv_length+6]=_[u+3],g.uvs[m.uv_length+7]=_[u+4],m.uv_length+=8):f===Vt.BRepWithNormals&&(g.normals[m.normal_length]=32767*_[c+3],g.normals[m.normal_length+1]=32767*_[c+4],g.normals[m.normal_length+2]=32767*_[c+5],g.normals[m.normal_length+3]=32767*_[b+3],g.normals[m.normal_length+4]=32767*_[b+4],g.normals[m.normal_length+5]=32767*_[b+5],g.normals[m.normal_length+6]=32767*_[l+3],g.normals[m.normal_length+7]=32767*_[l+4],g.normals[m.normal_length+8]=32767*_[l+5],g.normals[m.normal_length+9]=32767*_[u+3],g.normals[m.normal_length+10]=32767*_[u+4],g.normals[m.normal_length+11]=32767*_[u+5],m.normal_length+=12)):ve(d,_,p,f,g,void 0,m)}})(),ye=(t,e,i,s,r)=>{let n=t[0],o=t[1],a=t[2];i===Vt.BRep?(n*=3,o*=3,a*=3):i===Vt.BRepWithUV?(n*=5,o*=5,a*=5,s.uvs[r.uv_length]=e[n+3],s.uvs[r.uv_length+1]=e[n+4],s.uvs[r.uv_length+2]=e[o+3],s.uvs[r.uv_length+3]=e[o+4],s.uvs[r.uv_length+4]=e[a+3],s.uvs[r.uv_length+5]=e[a+4],r.uv_length+=6):i===Vt.BRepWithNormals&&(n*=6,o*=6,a*=6,s.normals.set([s.normals[r.normal_length]=32767*e[n+3],s.normals[r.normal_length+1]=32767*e[n+4],s.normals[r.normal_length+2]=32767*e[n+5],s.normals[r.normal_length+3]=32767*e[o+3],s.normals[r.normal_length+4]=32767*e[o+4],s.normals[r.normal_length+5]=32767*e[o+5],s.normals[r.normal_length+6]=32767*e[a+3],s.normals[r.normal_length+7]=32767*e[a+4],s.normals[r.normal_length+8]=32767*e[a+5]],r.normal_length),r.normal_length+=9),s.indices[r.index_count]=r.vertex_count,s.indices[r.index_count+1]=r.vertex_count+1,s.indices[r.index_count+2]=r.vertex_count+2,r.index_count+=3,s.positions[r.vertex_length]=e[n+0],s.positions[r.vertex_length+1]=e[n+1],s.positions[r.vertex_length+2]=e[n+2],s.positions[r.vertex_length+3]=e[o+0],s.positions[r.vertex_length+4]=e[o+1],s.positions[r.vertex_length+5]=e[o+2],s.positions[r.vertex_length+6]=e[a+0],s.positions[r.vertex_length+7]=e[a+1],s.positions[r.vertex_length+8]=e[a+2],r.vertex_count+=3,r.vertex_length+=9},ve=(()=>{const t=new d;return(e,i,s,r,n,o,a)=>{const h=e.length,c=a.vertex_length;if(r===Vt.BRep)for(let t=0;t<h;t++){const s=3*e[t];n.positions[a.vertex_length]=i[s],n.positions[a.vertex_length+1]=i[s+1],n.positions[a.vertex_length+2]=i[s+2],a.vertex_count+=1,a.vertex_length+=3}else if(r===Vt.BRepWithUV)for(let t=0;t<h;t++){const s=5*e[t];n.positions[a.vertex_length]=i[s],n.positions[a.vertex_length+1]=i[s+1],n.positions[a.vertex_length+2]=i[s+2],a.vertex_count+=1,a.vertex_length+=3,n.uvs[a.uv_length]=i[s+3],n.uvs[a.uv_length+1]=i[s+4],a.uv_length+=2}else if(r===Vt.BRepWithNormals)for(let t=0;t<h;t++){const s=6*e[t];n.positions[a.vertex_length]=i[s],n.positions[a.vertex_length+1]=i[s+1],n.positions[a.vertex_length+2]=i[s+2],a.vertex_count+=1,a.vertex_length+=3,n.normals[a.normal_length]=32767*i[s+3],n.normals[a.normal_length+1]=32767*i[s+4],n.normals[a.normal_length+2]=32767*i[s+5],a.normal_length+=3}let b;if(o&&o.has(s)){const t=o.get(s);b=t.indices.map(t=>t+h),n.positions.set(t.vertices,a.vertex_length),a.vertex_length+=t.vertices.length,a.vertex_count+=t.vertices.length/3,r===Vt.BRepWithNormals?(n.normals.set(t.normals,a.normal_length),a.normal_length+=t.vertices.length):r===Vt.BRepWithUV&&(n.uvs.set(t.uvs,a.uv_length),a.uv_length+=t.vertices.length/3*2)}xe(n.positions,t,(a.vertex_length-c)/3,c);const l=Te(n.positions,t,a.vertex_length-c,c),d=Nt(l,b,2);for(let t=0,e=d.length;t<e;t++)d[t]=d[t]+c/3;n.indices.set(d,a.index_count),a.index_count+=d.length}})(),xe=(t,e,i,s=0)=>{e.set(0,0,0);let r=0;for(let n=0,o=i;n<o;n++)r=(n+1)%i,e.x+=(t[s+3*n+1]-t[s+3*r+1])*(t[s+3*n+2]+t[s+3*r+2]),e.y+=(t[s+3*n+2]-t[s+3*r+2])*(t[s+3*n]+t[s+3*r]),e.z+=(t[s+3*n]-t[s+3*r])*(t[s+3*n+1]+t[s+3*r+1]);e.normalize()},we=(t,e,i,s)=>{t.set(0,0,0);for(let r=0,n=i.length;r<n;r++){const o=(r+1)%n,a=i[r]*s,h=i[o]*s;t.x+=(e[a+1]-e[h+1])*(e[a+2]+e[h+2]),t.y+=(e[a+2]-e[h+2])*(e[a]+e[h]),t.z+=(e[a]-e[h])*(e[a+1]+e[h+1])}t.normalize()},Te=(()=>{const t=new d,e=new d,i=new d,s=new d,r=new d,n=new d,o=new ArrayBuffer(174762);return(a,h,c,b=0)=>{const l=new Float32Array(o,0,2*c/3);r.set(a[b],a[b+1],a[b+2]),n.set(a[b+3],a[b+4],a[b+5]),t.subVectors(r,n),e.crossVectors(h,t),t.normalize(),e.normalize();for(let n=0,o=c/3;n<o;n++)i.set(a[b+3*n],a[b+3*n+1],a[b+3*n+2]),s.set(a[b+3*n],a[b+3*n+1],a[b+3*n+2]),l[2*n]=i.sub(r).dot(t),l[2*n+1]=s.sub(r).dot(e);return l}})();function Fe(t,e,i){const s=Math.round(t.angle()*t.radius()*e);return Math.min(Math.max(s,i),30)}function Ie(t){return Fe(t,5,4)}function Se(t){return Fe(t,10,8)}const Be=(()=>{const t=new d,e=new d,i=new r.Technology.TrimBim.Fbs.Vec3f,s=new r.Technology.TrimBim.Fbs.Line3f;return(r,n)=>{const o=r.lineSegmentsLength();for(let a=0;a<o;a++)r.lineSegments(a,s),s.start(i),t.set(i.x(),i.y(),i.z()),s.end(i),e.set(i.x(),i.y(),i.z()),n(t,e)}})(),Me=(()=>{const t=new d,e=new d,i=[],s=new d,n=new d,o=new r.Technology.TrimBim.Fbs.Arc3f;return(r,a,h)=>{const c=r.arcsLength();for(let b=0;b<c;b++){r.arcs(b,o);const c=h(o);s.set(o.center().x(),o.center().y(),o.center().z()),n.set(o.axis().x(),o.axis().y(),o.axis().z()),t.set(o.refDirection().x(),o.refDirection().y(),o.refDirection().z()),i.length=c-2;for(let e=0;e<i.length;e++)i[e]=new d,i[e].copy(t),i[e].applyAxisAngle(n,o.angle()*(e+1)/(c-1)),i[e].multiplyScalar(o.radius()),i[e].add(s);e.copy(t),e.applyAxisAngle(n,o.angle()),e.multiplyScalar(o.radius()),e.add(s),t.multiplyScalar(o.radius()),t.add(s),a(t,i,e)}}})(),Ve=(()=>{const t=new d,e=new d,i=new r.Technology.TrimBim.Fbs.Polyline3f;return(s,r)=>{const n=s.polyLinesLength();for(let o=0;o<n;o++){s.polyLines(o,i);for(let s=0,n=i.pointsLength()-1;s<n;s++)t.set(i.points(s).x(),i.points(s).y(),i.points(s).z()),e.set(i.points(s+1).x(),i.points(s+1).y(),i.points(s+1).z()),r(t,e)}}})(),ze=(()=>{const t=[];return(e,i,s=1)=>(t.length=0,Be(e,(e,r)=>{Ce(t,e,r,i,s)}),t)})(),Le=(()=>{const t=[];return(e,i,s=1,r)=>(t.length=0,Me(e,(e,r,n)=>{Ce(t,e,r[0],i,s),r.forEach((e,n)=>{n>0&&Ce(t,r[n-1],e,i,s)}),Ce(t,r[r.length-1],n,i,s)},r),t)})(),Pe=(()=>{const t=[];return(e,i,s=1)=>(t.length=0,Ve(e,(e,r)=>{Ce(t,e,r,i,s)}),t)})(),Ae=(()=>{const t=[],e=new d,i=new d;return(s,r)=>{if(s){t.length=0;const n=s.length/3;for(let o=1;o<n;o++)i.set(s[3*o],s[3*o+1],s[3*o+2]),e.set(s[3*(o-1)],s[3*(o-1)+1],s[3*(o-1)+2]),Ce(t,e,i,r,1/0);return t}}})(),Ce=(()=>{const t=new d,e=new d;return(i,s,r,n,o)=>{const a=n.distanceSqToSegment(s,r,t,e);return Ee(i,s,r,n,o,a,e),a}})(),Ee=(t,e,i,s,r,n,o)=>{n>r||t.push({point:o.clone(),snapLineStart:e.clone(),snapLineEnd:i.clone()})},Oe=(()=>{const t=new d,e=new d,i=new d,s=new bt,r=new bt,n=new it,o=new d,a=new d,h=new d,c=[],b=(()=>{const t=new d(0,0,1),e=new d(1,0,0);return(i,s)=>{Math.abs(i.dot(t))>.9?s.crossVectors(i,e).normalize():s.crossVectors(i,t).normalize()}})(),l=(t,e,i)=>{o.copy(n.direction).normalize().multiplyScalar(t).add(n.origin),o.z>=0&&o.z<=e/i&&(a.set(o.x,o.y,0).applyMatrix4(r).normalize(),o.applyMatrix4(s),c.push({point:o.clone(),normal:a.clone()}))};return(o,a,d,u)=>{const _=a.distanceTo(o);t.copy(a).sub(o).normalize(),b(t,i),e.crossVectors(t,i),s.identity().makeBasis(i,e,t),s.setPosition(o),s.scale(h.set(u,u,u)),r.getInverse(s),n.copy(d).applyMatrix4(r);const p=n.direction.x*n.direction.x+n.direction.y*n.direction.y,f=2*n.origin.x*n.direction.x+2*n.origin.y*n.direction.y,g=n.origin.x*n.origin.x+n.origin.y*n.origin.y-1;if(4*p*g>f*f)return[];const m=(-f+Math.sqrt(f*f-4*p*g))/(2*p),y=(-f-Math.sqrt(f*f-4*p*g))/(2*p);return c.length=0,r.transpose(),l(m,_,u),l(y,_,u),c}})();class Re{static buildSegments(t,e){const i=t.lineSegmentsLength();for(let s=0;s<i;s++){const i=t.lineSegments(s);Re.buildLine(i,e)}return e}static buildLine(t,e){const i=t.start(),s=t.end();e.positions[e.positionPointer]=i.x(),e.positions[e.positionPointer+1]=i.y(),e.positions[e.positionPointer+2]=i.z(),e.positions[e.positionPointer+3]=s.x(),e.positions[e.positionPointer+4]=s.y(),e.positions[e.positionPointer+5]=s.z(),e.positionPointer+=6}static getTotalArcSectionsCount(t){let e=0;const i=new r.Technology.TrimBim.Fbs.Arc3f;for(let s=0;s<t.arcsLength();s++)t.arcs(s,i),e+=Se(i);return e}static buildArcs(t,e){const i=new r.Technology.TrimBim.Fbs.Arc3f;let s=[];for(let r=0,n=t.arcsLength();r<n;r++){t.arcs(r,i);const n=Se(i);s=Ne(i,n),e.positions[e.positionPointer]=s[0].x,e.positions[e.positionPointer+1]=s[0].y,e.positions[e.positionPointer+2]=s[0].z,e.positionPointer+=3;for(let t=1;t<n-1;t++)e.positions[e.positionPointer]=s[t].x,e.positions[e.positionPointer+1]=s[t].y,e.positions[e.positionPointer+2]=s[t].z,e.positions[e.positionPointer+3]=s[t].x,e.positions[e.positionPointer+4]=s[t].y,e.positions[e.positionPointer+5]=s[t].z,e.positionPointer+=6;e.positions[e.positionPointer+0]=s[n-1].x,e.positions[e.positionPointer+1]=s[n-1].y,e.positions[e.positionPointer+2]=s[n-1].z,e.positionPointer+=3}return e}}function Ne(t,e){const i=new d,s=new d,r=new d,n=new d,o=[],a=[];i.set(t.center().x(),t.center().y(),t.center().z()),s.set(t.axis().x(),t.axis().y(),t.axis().z()),r.set(t.refDirection().x(),t.refDirection().y(),t.refDirection().z());for(let n=0;n<e-2;n++)o[n]=new d,o[n].copy(r),o[n].applyAxisAngle(s,t.angle()*(n+1)/(e-1)),o[n].multiplyScalar(t.radius()),o[n].add(i);return n.copy(r),n.applyAxisAngle(s,t.angle()),n.multiplyScalar(t.radius()),n.add(i),r.multiplyScalar(t.radius()),r.add(i),a.push(r),a.push(...o),a.push(n),a}var Ge=r.Technology.TrimBim.Fbs;class ke extends s{constructor(t){super(t),this.geometryType=Vt.GraphicsContainer,this.snapGeometryType=1,this.pickLine=(()=>{const t=[],e=new Ge.GraphicsContainer;return(i,s,r)=>(t.length=0,this.geometry.graphicsContainers(i,e),t.push(...ze(e,s,1/0)),t.push(...Le(e,s,1/0,Se)),t.filter(t=>r.containsPoint(t.point)))})(),this.pickPoint=(()=>{const t=[],e=new Ge.GraphicsContainer;return(i,s,r)=>(t.length=0,this.geometry.graphicsContainers(i,e),Be(e,(e,i)=>{t.push({point:e.clone()}),t.push({point:i.clone()})}),Me(e,(e,i,s)=>{t.push({point:e.clone()}),t.push({point:s.clone()})},Ie),t.filter(t=>r.containsPoint(t.point)))})(),this.prepareModelTypes()}getGeometries(t,e=!0){const i=this.buffers[t];if(!i.positions&&e){const e=this.geometry.graphicsContainers(t);this.build(e,i)}return[i]}prepareModelTypes(){for(let t=0,e=this.geometry.graphicsContainersLength();t<e;t++){const e=this.geometry.graphicsContainers(t);this.buffers.push(this.calculateBufferSizes(e))}}calculateBufferSizes(t){const e=t.lineSegmentsLength(),i=t.arcsLength();return{objectType:1,indicesLength:0,positionsLength:6*e+6*(Re.getTotalArcSectionsCount(t)-2*i)+6*i,normalsLength:0,uvsLength:0,pointSizesLength:0,indexPointer:0,positionPointer:0}}build(t,e){e.positions=new Float32Array(e.positionsLength),e.normals=new Int16Array(e.normalsLength),Re.buildSegments(t,e),Re.buildArcs(t,e)}pick(t,e,i){return this.pickLine(t,e,i)}pickFace(t,e){}}var He=r.Technology.TrimBim.Fbs,De=r.Technology.TrimBim.Fbs.Directrix;class Ue extends s{constructor(t){super(t),this.geometryType=Vt.SweptDiskSolid,this.snapGeometryType=0,this.directrix=new De,this.arcCrossSections=[],this.arc=new r.Technology.TrimBim.Fbs.Arc3f,this.lineStart=new d,this.lineEnd=new d,this.lineQuaternion=new c,this.tmp=new d,this.pickFace=(()=>{const t=[],e=new He.SweptDiskSolidContainer,i=new He.Directrix;return(s,r,n,o=!0)=>{t.length=0,this.geometry.sweptDiskSolids(s,e);for(let s=0,n=e.directricesLength();s<n;s++){e.directrices(s,i);const n=e.radius(s);o&&n<.02||(Be(i,(e,i)=>{t.push(...Oe(e,i,r,n))}),Me(i,(e,i,s)=>{t.push(...Oe(e,i[0],r,n)),i.forEach((e,s)=>{s>0&&t.push(...Oe(i[s-1],e,r,n))}),t.push(...Oe(i[i.length-1],s,r,n))},Ie),Ve(i,(e,i)=>{t.push(...Oe(e,i,r,n))}))}return t}})(),this.pickLine=(()=>{const t=[],e=new He.SweptDiskSolidContainer,i=new He.Directrix;return(s,r,n)=>{t.length=0,this.geometry.sweptDiskSolids(s,e);for(let s=0,n=e.directricesLength();s<n;s++)e.directrices(s,i),t.push(...ze(i,r,1/0)),t.push(...Le(i,r,1/0,Ie)),t.push(...Pe(i,r,1/0));return t.filter(t=>n.containsPoint(t.point))}})(),this.pickPoint=(()=>{const t=[],e=new He.SweptDiskSolidContainer,i=new He.Directrix;return(s,r,n)=>{t.length=0,this.geometry.sweptDiskSolids(s,e);for(let s=0,r=e.directricesLength();s<r;s++)e.directrices(s,i),Be(i,(e,i)=>{t.push({point:e.clone()}),t.push({point:i.clone()})}),Me(i,(e,i,s)=>{t.push({point:e.clone()}),t.push({point:s.clone()})},Ie),Ve(i,(e,i)=>{t.push({point:e.clone()}),t.push({point:i.clone()})});return t.filter(t=>n.containsPoint(t.point))}})(),this.prepareModelTypes()}getCrossSectionsPointCount(t,e=200){const i=Math.round(t*e);return Math.min(Math.max(i,5),30)}getGeometries(t,e=!0){const i=this.buffers[t];if(!i.positions&&e){const e=this.geometry.sweptDiskSolids(t);this.build(e,i)}return[i]}prepareModelTypes(){for(let t=0,e=this.geometry.sweptDiskSolidsLength();t<e;t++){const e=this.geometry.sweptDiskSolids(t);this.buffers.push(this.calculateBufferSizes(e))}}calculateBufferSizes(t){let e=0,i=0,s=0,r=0,n=0,o=0,a=0;for(let h=0,c=t.directricesLength();h<c;h++){t.directrices(h,this.directrix);const c=t.radius(h),b=this.getCrossSectionsPointCount(c);e+=this.directrix.lineSegmentsLength(),i+=this.directrix.arcsLength(),a+=this.directrix.arcsLength()*b*2;for(let t=0;t<this.directrix.polyLinesLength();t++)s+=this.directrix.polyLines(t).pointsLength()-1,o+=b*(this.directrix.polyLines(t).pointsLength()-1)*2;for(let t=0;t<this.directrix.arcsLength();t++)this.directrix.arcs(t,this.arc),n+=b*Ie(this.arc);for(let t=0;t<this.directrix.lineSegmentsLength();t++)r+=2*b}const h=3*(r+n+o);return{objectType:0,indicesLength:3*(r-2*e*2)+3*(a-2*i*2)+3*(o-2*s*2)+(r/2*6+6*(n-a/2)+o/2*6)+6*a,positionsLength:h,normalsLength:h,uvsLength:0,pointSizesLength:0,indexPointer:0,positionPointer:0,normalPointer:0}}build(t,e){e.positions=new Float32Array(e.positionsLength),e.normals=new Int16Array(e.normalsLength),e.positionsLength>65535?e.indices=new Uint32Array(e.indicesLength):e.indices=new Uint16Array(e.indicesLength);const i={};for(let s=0,r=t.directricesLength();s<r;s++){const r=t.radius(s),n=t.directrices(s,this.directrix),o=this.getCrossSectionsPointCount(r);for(let t=0;t<n.indexesLength();t++){0===t&&(i.isStartSegment=!0),t===n.indexesLength()-1&&(i.isEndSegment=!0);const s=n.types(t),a=n.indexes(t);switch(s){case He.SegmentType.LineSegment:this.buildLineSegment(n.lineSegments(a),r,e,o,i);break;case He.SegmentType.PolyLine:this.buildPolyLine(n.polyLines(a),r,e,o,i);break;case He.SegmentType.Arc:this.buildArc(n.arcs(a),r,e,o,i)}i.isStartSegment&&(i.isStartSegment=!i.isStartSegment),i.isEndSegment&&(i.isEndSegment=!i.isEndSegment)}}}buildPolyLine(t,e,i,s,r){for(let n=1,o=t.pointsLength();n<o;n++)this.lineStart.set(t.points(n-1).x(),t.points(n-1).y(),t.points(n-1).z()),this.lineEnd.set(t.points(n).x(),t.points(n).y(),t.points(n).z()),this.tmp.copy(this.lineEnd).sub(this.lineStart).normalize(),this.lineQuaternion.setFromUnitVectors(St.up,this.tmp),this.buildCrossSection(this.lineStart,e,this.lineQuaternion,i,s),1===n?this.connectFirstCrossSection(i,s,r,this.lineStart,He.SegmentType.PolyLine):this.buildCrossSectionIndices(i,s),this.buildCrossSection(this.lineEnd,e,this.lineQuaternion,i,s),n!==o-1||r.isEndSegment?this.buildCrossSectionIndices(i,s,!0):(r.position=this.lineEnd,r.type=He.SegmentType.PolyLine),this.connectCrossSections(i,s)}connectFirstCrossSection(t,e,i,s,r){i.isStartSegment?this.buildCrossSectionIndices(t,e):We(i.type,r)&&qe(i.position,s)?this.connectCrossSections(t,e):(this.buildCrossSectionIndices(t,e,!0,!0),this.buildCrossSectionIndices(t,e))}buildStartCrossSection(t,e,i,s,r){this.tmp.copy(e).sub(t).normalize(),this.lineQuaternion.setFromUnitVectors(St.up,this.tmp),this.buildCrossSection(t,i,this.lineQuaternion,s,r)}buildMidCrossSection(t,e,i,s,r,n){this.tmp.copy(i).sub(t).normalize(),this.lineQuaternion.setFromUnitVectors(St.up,this.tmp),this.buildCrossSection(e,s,this.lineQuaternion,r,n),this.connectCrossSections(r,n)}buildEndCrossSection(t,e,i,s,r){this.tmp.copy(e).sub(t).normalize(),this.lineQuaternion.setFromUnitVectors(St.up,this.tmp),this.buildCrossSection(e,i,this.lineQuaternion,s,r)}buildArc(t,e,i,s,r){const n=Ie(t);this.arcCrossSections=Ne(t,n),this.buildStartCrossSection(this.arcCrossSections[0],this.arcCrossSections[1],e,i,s),this.connectFirstCrossSection(i,s,r,this.arcCrossSections[0],He.SegmentType.Arc);for(let t=0;t<n-2;t++)this.buildMidCrossSection(this.arcCrossSections[t],this.arcCrossSections[t+1],this.arcCrossSections[t+2],e,i,s);this.buildEndCrossSection(this.arcCrossSections[n-2],this.arcCrossSections[n-1],e,i,s),r.isEndSegment?this.buildCrossSectionIndices(i,s,!0):(r.position=this.arcCrossSections[n-1],r.type=He.SegmentType.Arc),this.connectCrossSections(i,s)}buildLineSegment(t,e,i,s,r){const n=t.start(),o=t.end();this.lineStart.set(n.x(),n.y(),n.z()),this.lineEnd.set(o.x(),o.y(),o.z()),this.tmp.copy(this.lineEnd).sub(this.lineStart).normalize(),this.lineQuaternion.setFromUnitVectors(St.up,this.tmp),this.buildCrossSection(this.lineStart,e,this.lineQuaternion,i,s),this.connectFirstCrossSection(i,s,r,this.lineStart,He.SegmentType.LineSegment),this.buildCrossSection(this.lineEnd,e,this.lineQuaternion,i,s),r.isEndSegment?this.buildCrossSectionIndices(i,s,!0):(r.position=this.lineEnd,r.type=He.SegmentType.LineSegment),this.connectCrossSections(i,s)}buildCrossSection(t,e,i,s,r){if(!this.crossSectionPoints||this.crossSectionPoints.length!==r){this.crossSectionPoints=[];for(let t=0;t<r;t++){const e=2*Math.PI*t/r;this.crossSectionPoints.push(new d(Math.sin(e),Math.cos(e),0))}}for(let n=0;n<r;n++)this.tmp.copy(this.crossSectionPoints[n]).multiplyScalar(e).applyQuaternion(i).add(t),s.positions[s.positionPointer]=this.tmp.x,s.positions[s.positionPointer+1]=this.tmp.y,s.positions[s.positionPointer+2]=this.tmp.z,s.positionPointer+=3,this.tmp.copy(this.crossSectionPoints[n]).applyQuaternion(i),s.normals[s.normalPointer]=32767*this.tmp.x,s.normals[s.normalPointer+1]=32767*this.tmp.y,s.normals[s.normalPointer+2]=32767*this.tmp.z,s.normalPointer+=3}buildCrossSectionIndices(t,e,i=!1,s=!1){for(let r=0;r<e-2;r++)t.indices[t.indexPointer]=t.positionPointer/3-e*(s?2:1),t.indices[t.indexPointer+1]=t.positionPointer/3+r+(i?2:1)-e*(s?2:1),t.indices[t.indexPointer+2]=t.positionPointer/3+r+(i?1:2)-e*(s?2:1),t.indexPointer+=3}connectCrossSections(t,e){const i=t.positionPointer/3-e,s=i-e;for(let r=0;r<e;r++){const n=(r+1)%e;t.indices[t.indexPointer]=i+r,t.indices[t.indexPointer+1]=i+n,t.indices[t.indexPointer+2]=s+r,t.indexPointer+=3,t.indices[t.indexPointer]=s+r,t.indices[t.indexPointer+1]=i+n,t.indices[t.indexPointer+2]=s+n,t.indexPointer+=3}}pick(t,e,i){return this.pickFace(t,e,i,!1)}}const qe=(t,e)=>t.distanceToSquared(e)<1e-8,We=(t,e)=>e===He.SegmentType.Arc||(e===He.SegmentType.PolyLine||e===He.SegmentType.LineSegment)&&t===He.SegmentType.Arc;class je{constructor(){this.placeholder=new Int32Array(1),this.bytes=new Uint8Array(this.placeholder.buffer),this.crc=-1}add(t){switch(typeof t){case"number":this.placeholder[0]=t,this.compute();break;case"boolean":this.placeholder[0]=t?1:0,this.compute();break;case"string":for(let e=0;e<t.length;++e)this.placeholder[0]=t.codePointAt(e),this.compute()}return this}get(){return~this.crc}clear(){return this.crc=-1,this}compute(){for(let t=0;t<4;++t){this.crc^=this.bytes[t];for(let t=0;t<8;++t)this.crc=1&this.crc?this.crc>>1^je.POLY:this.crc>>1}}}je.POLY=2197175160;class Ze{static transformFrustum(t,e,i=new X){for(let s=0;s<i.planes.length;s++)i.planes[s].copy(t.planes[s]).applyMatrix4(e);return i}static planesIntersectBox(t,e){return Ze.planesIntersectBoxInternal(t,e,!1)}static planesContainBox(t,e){return Ze.planesIntersectBoxInternal(t,e,!0)}static insideNonIntersectingPlanes(t,e){let i=!0;for(const s of e)i=i&&s.distanceToPoint(t)>0;return i}}Ze.planesIntersectBoxInternal=(()=>{const t=new d;return(e,i,s)=>{for(let r=0,n=e.length;r<n;r++){const n=e[r].normal;if(t.set(n.x>=0!==s?i.max.x:i.min.x,n.y>=0!==s?i.max.y:i.min.y,n.z>=0!==s?i.max.z:i.min.z),e[r].distanceToPoint(t)<0)return!1}return!0}})();const Xe=new je,$e=(t,e)=>{const i=Xe.clear().add(t);return e&&i.add(e.font).add(e.size).add(e.alignment).add(e.verticalAlign).add(e.horizontalAlign),{string:t,style:e,checksum:i.get()}};var Ye=r.Technology.TrimBim.Fbs;class Qe extends s{prepareModelTypes(){}pick(t,e,i){return this.pickPoint(t,e,i)}pickFace(t,e){}pickLine(t,e,i){}pickPoint(t,e,i){return i.containsPoint(St.zero)?[{point:St.zero.clone()}]:void 0}}class Je extends Qe{constructor(){super(...arguments),this.geometryType=Vt.TexturedBillboard,this.snapGeometryType=2}build(t,e){return e.positions=new Float32Array(e.positionsLength),e.uvs=new Float32Array(e.uvsLength),e.pointSizes=new Float32Array(e.pointSizesLength),e.uvs[0]=t.leftUpUV().x(),e.uvs[1]=t.leftUpUV().y(),e.uvs[2]=t.rightDownUV().x(),e.uvs[3]=t.rightDownUV().y(),e.pointSizes[0]=t.leftUpXY().x(),e.pointSizes[1]=t.leftUpXY().y(),e.pointSizes[2]=t.rightDownXY().x(),e.pointSizes[3]=t.rightDownXY().y(),e}calculateBufferSizes(t,e){return{objectType:e,indicesLength:0,positionsLength:3,normalsLength:0,uvsLength:4,pointSizesLength:4,indexPointer:0,positionPointer:0}}getGeometries(t,e=!0){const i=this.geometry.texturedBillboards(t),s=i.IsInWorldUnits()?3:2,r=this.calculateBufferSizes(i,s);return e&&this.build(i,r),[r]}}class Ke extends Qe{constructor(){super(...arguments),this.geometryType=Vt.BillboardText,this.getGeometries=(()=>{const t=new Ye.TextStyle;return(e,i=!0)=>{const s=this.geometry.billboardTexts(e),r=this.calculateBufferSizes(s,2),n=s.textStyleId();this.geometry.textStyles(n,t);const o={font:t.font()||"sans-serif",size:t.size()||14,alignment:t.alignment()||Ye.AlignmentType.LeftTop,horizontalAlign:t.horizontalAlign()||0,verticalAlign:t.verticalAlign()||0};return r.text=$e(s.text(),o),i&&this.build(s,r),[r]}})()}build(t,e){return e.positions=new Float32Array(e.positionsLength),e.uvs=new Float32Array(e.uvsLength),e.uvs[0]=0,e.uvs[1]=0,e.uvs[2]=1,e.uvs[3]=1,e}calculateBufferSizes(t,e){return{objectType:e,indicesLength:0,positionsLength:3,normalsLength:0,uvsLength:4,pointSizesLength:0,indexPointer:0,positionPointer:0}}}var ti=r.Technology.TrimBim.Fbs;class ei extends s{constructor(t){super(t),this.geometryType=Vt.GridLineContainer,this.snapGeometryType=1,this.labelBuffers=[],this.intersections=[],this.surfaceNormals=new Array,this.labelTextStyle={size:16,font:"sans-serif",alignment:ti.AlignmentType.CenterBottom,horizontalAlign:0,verticalAlign:-.5},this.buildIntersections=(()=>{const t=[],e=[],i=[],s=new d,r=new d,n=new d,o=new d,a=new it,h=new d,c=new d,b=new d;return(l,d,u)=>{t.length=0,e.length=0,i.length=0;for(let _=0;_<d;++_){s.set(l[6*_],l[6*_+1],l[6*_+2]),r.set(l[6*_+3],l[6*_+4],l[6*_+5]),n.copy(r).sub(s),o.copy(n).normalize(),a.set(s,o);for(let l=0;l<t.length;++l){a.distanceSqToSegment(t[l],e[l],null,h)<1e-4&&(c.copy(h).sub(s),b.copy(h).sub(r),n.dot(c)>=-1e-4&&n.dot(b)<=1e-4&&(i.push(h.clone()),0===u.lengthSq()&&u.crossVectors(o,h.sub(t[l]))))}t.push(s.clone()),e.push(r.clone())}return i.slice()}})(),this.pickLine=(()=>{const t=new ti.GridLineContainer,e=new d,i=new d,s=[];return(r,n,o)=>{s.length=0,this.geometry.gridLineContainers(r,t),this.buffers[r].positions||this.getGeometries(r,!0);const a=this.buffers[r].positions;for(let r=0,o=t.gridLineSegmentsLength();r<o;++r)e.set(a[6*r],a[6*r+1],a[6*r+2]),i.set(a[6*r+3],a[6*r+4],a[6*r+5]),Ce(s,e,i,n,1/0);return s.filter(t=>o.containsPoint(t.point))}})(),this.prepareModelTypes()}getGeometries(t,e=!0){const i=this.buffers[t],s=this.labelBuffers[t];if(i&&!i.positions&&e){const e=this.geometry.gridLineContainers(t);this.buildGridLines(e,i);for(let t=0;t<e.gridLineSegmentsLength();++t){const i=e.gridLineSegments(t).axisTag(),r=s.get(i);this.buildGridLabels(e,r,t)}this.surfaceNormals[t]=new d,this.intersections[t]=this.buildIntersections(i.positions,e.gridLineSegmentsLength(),this.surfaceNormals[t])}for(const t of s.values())t.positionPointer=0,t.uvPointer=0;return[i,...s.values()]}prepareModelTypes(){for(let t=0,e=this.geometry.gridLineContainersLength();t<e;t++){const e=this.geometry.gridLineContainers(t);this.buffers.push(this.calculateBufferSizes(e,1));const i=new Map;for(let t=0;t<e.gridLineSegmentsLength();++t){const s=e.gridLineSegments(t).axisTag();if(i.has(s)){const t=i.get(s);t.positionsLength+=6,t.uvsLength+=8}else{const r=this.calculateBufferSizes(e,2);r.text=$e(e.gridLineSegments(t).axisTag(),this.labelTextStyle),i.set(s,r)}}this.labelBuffers.push(i)}}build(t,e,i){}buildGridLines(t,e){e.positions=new Float32Array(e.positionsLength),e.normals=new Int16Array(e.normalsLength);for(let i=0,s=t.gridLineSegmentsLength();i<s;i++){const s=t.gridLineSegments(i).lineSegment();Re.buildLine(s,e)}}buildGridLabels(t,e,i){e.positions||(e.positions=new Float32Array(e.positionsLength)),e.uvs||(e.uvs=new Float32Array(e.uvsLength));const s=t.gridLineSegments(i),r=s.lineSegment().start(),n=s.lineSegment().end();e.positions.set([r.x(),r.y(),r.z(),n.x(),n.y(),n.z()],e.positionPointer),e.uvs.set([0,0,1,1,0,0,1,1],e.uvPointer),e.positionPointer+=6,e.uvPointer+=8}calculateBufferSizes(t,e){return 2===e?{objectType:2,indicesLength:0,positionsLength:6,normalsLength:0,uvsLength:8,pointSizesLength:0,indexPointer:0,positionPointer:0}:{objectType:1,indicesLength:0,positionsLength:6*t.gridLineSegmentsLength(),normalsLength:0,uvsLength:0,pointSizesLength:0,indexPointer:0,positionPointer:0}}pick(t,e,i){return this.pickLine(t,e,i)}pickFace(t,e,i){if(0===this.surfaceNormals[t].lengthSq())return;const s=this.pickLine(t,e,i);for(const e of s)e.normal=this.surfaceNormals[t];return s}pickPoint(t,e,i){return this.intersections[t]||this.getGeometries(t,!0),this.intersections[t].filter(t=>i.containsPoint(t)).map(t=>({point:t.clone()}))}}let ii=0;const si=new bt;class ri{constructor(t,e){this.modelId=t,this.id=e}createLocalBoundingBox(){const t=new D;return t.max.set(this.max[0]-this.min[0],this.max[1]-this.min[1],this.max[2]-this.min[2]),t}static createBatchPrototype(t,e){return{indicesLength:t.indicesLength,verticesLength:t.positionsLength,normalsLength:t.normalsLength,uvsLength:t.uvsLength,pointSizesLength:t.pointSizesLength,instances:[e],indexOffset:[0],indexBuffer32bit:t.positionsLength>65535,id:ii++,geometryBuilt:!1,state:{visible:[{start:0,count:1/0}],selected:[]},text:t.text}}static addToPrototype(t,e,i){const s=0!==t.indicesLength?t.indicesLength:t.verticesLength/3;t.indexOffset.push(s),t.indicesLength+=e.indicesLength,t.verticesLength+=e.positionsLength,t.normalsLength+=e.normalsLength,t.uvsLength+=e.uvsLength,t.pointSizesLength+=e.pointSizesLength,t.instances.includes(i)||t.instances.push(i)}static addObjectToFreePrototype(t,e,i){let s=this.findFreeBatchPrototype(t,e);return s?ri.addToPrototype(s,e,i):(s=ri.createBatchPrototype(e,i),t.push(s)),s}static findFreeBatchPrototype(t,e){for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.verticesLength+e.positionsLength<=(s.indexBuffer32bit?2147483647:65535))return t[i]}}}class ni extends ri{constructor(t,e,i,s,r,n){super(t,e),this.id=e,this.im=i,this.geom=s,this.messenger=r,this.lodManager=n,this.lodLevelToBatches=new Map,this.lodLevelToBatches.set(0,[])}get materialId(){return this.id[3]}get type(){return this.id[4]}get textChecksum(){return this.id[5]}belongsToCluster(t){return t.objectType===this.type&&(!this.textChecksum&&!t.text||!(!this.textChecksum||!t.text)&&this.textChecksum===t.text.checksum)}getBatches(t){if(this.lodLevelToBatches.has(t))return this.lodLevelToBatches.get(t);{const e=[];return this.lodLevelToBatches.set(t,e),e}}getInstanceIds(){let t=[];for(const e of this.lodLevelToBatches.values())for(const i of e)t=t.concat(i.instances);return t}removeGeometry(){for(const t of this.lodLevelToBatches.values())for(const e of t)this.removeBatchGeometry(e)}removeBatchGeometry(t){if(!t.geometryBuilt)return;const e={actionType:0,modelId:this.modelId,batchId:t.id,userData:{id:t.id}};this.messenger.send(e),t.geometryBuilt=!1}insertObject(t,e,i){for(let s=this.lodManager.getLevelsCount()-1;s>=0;s--)if(i>=this.lodManager.getMinObjectSize(s)){const i=this.getBatches(s);return ri.addObjectToFreePrototype(i,t,e)}}clearBatches(){this.lodLevelToBatches.clear(),this.lodLevelToBatches.set(0,[])}buildGeometry(t){const e=this.lodManager.getLevelsCount();for(let i=0;i<e;i++){const e=this.getBatches(i);if(i>=t)for(const t of e){if(t.geometryBuilt||0===t.instances.length)continue;const e=this.buildBatchGeometry(t,this.type,this.min),i={actionType:1,modelId:this.modelId,objectType:e.objectType,batchId:t.id,indices:e.indices,positions:e.positions,normals:e.normals,uvs:e.uvs,pointSizes:e.pointSizes,userData:{id:t.id,clusterId:this.id.toString()},materialId:this.materialId,position:this.min,state:t.state,boundingBox:this.createLocalBoundingBox(),text:e.text};this.messenger.send(i),t.geometryBuilt=!0}else for(const t of e)this.removeBatchGeometry(t)}}buildBatchGeometry(t,e,i){const s={objectType:e,indices:t.indexBuffer32bit?new Uint32Array(t.indicesLength):new Uint16Array(t.indicesLength),positions:new Float32Array(t.verticesLength),normals:new Int16Array(t.normalsLength),uvs:new Float32Array(t.uvsLength),pointSizes:new Float32Array(t.pointSizesLength),indexPointer:0,positionPointer:0,normalPointer:0,uvPointer:0,pointSizePointer:0,indicesLength:t.indicesLength,positionsLength:t.verticesLength,normalsLength:t.normalsLength,uvsLength:t.uvsLength,pointSizesLength:t.pointSizesLength,text:t.text};for(const e of t.instances){this.im.getInstanceTransform(e,si),si.elements[12]-=i[0],si.elements[13]-=i[1],si.elements[14]-=i[2];const t=this.geom.getGeometries(e,!0);for(const e of t)this.belongsToCluster(e)&&this.mergeGeometry(s,si,e)}return s}mergeGeometry(t,e,i){const s=t.indexPointer,r=t.positionPointer/3,n=i.indicesLength;for(let e=0,o=s;e<n;e++,o++)t.indices[o]=i.indices[e]+r;!function(t,e,i,s=0,r){const n=t.elements;for(let t=0;t<r;t+=3){const r=e[t],o=e[t+1],a=e[t+2];i[t+s]=n[0]*r+n[4]*o+n[8]*a+n[12],i[t+s+1]=n[1]*r+n[5]*o+n[9]*a+n[13],i[t+s+2]=n[2]*r+n[6]*o+n[10]*a+n[14]}}(e,i.positions,t.positions,t.positionPointer,i.positions.length),i.normals&&function(t,e,i,s=0,r){const n=t.elements;for(let t=0;t<r;t+=3){const r=e[t],o=e[t+1],a=e[t+2];i[t+s]=n[0]*r+n[4]*o+n[8]*a,i[t+s+1]=n[1]*r+n[5]*o+n[9]*a,i[t+s+2]=n[2]*r+n[6]*o+n[10]*a}}(e,i.normals,t.normals,t.normalPointer,i.normalsLength),t.indexPointer+=i.indicesLength,t.positionPointer+=i.positionsLength,t.normalPointer+=i.normalsLength,i.uvs&&(t.uvs.set(i.uvs,t.uvPointer),t.uvPointer+=i.uvs.length),i.pointSizes&&(t.pointSizes.set(i.pointSizes,t.pointSizePointer),t.pointSizePointer+=i.pointSizes.length),i.materialId&&(t.materialId=i.materialId),t.text=i.text}}class oi extends ni{insertObject(t,e,i){const s=this.getBatches(2);return ri.addObjectToFreePrototype(s,t,e)}}class ai{constructor(t){this.modelId=t,this.actions=[],this.intervalId=setInterval(()=>this.update(),50)}send(t){this.actions.push(t),this.actions.length>20&&this.update()}update(){if(0===this.actions.length)return;const t={type:1,modelId:this.modelId,actions:this.actions};this.actions=[];const e=[];for(const i of t.actions)1===i.actionType&&(i.positions&&e.push(i.positions.buffer),i.indices&&e.push(i.indices.buffer),i.normals&&e.push(i.normals.buffer),i.uvs&&e.push(i.uvs.buffer),i.pointSizes&&e.push(i.pointSizes.buffer));postMessage(t,e)}removePendingUpdateFinishedAction(){this.actions=this.actions.filter(t=>3!==t.actionType)}dispose(){clearInterval(this.intervalId)}}class hi{constructor(t,e,i,s,n,o,a,h){this.modelId=t,this._model=e,this._im=i,this._geom=s,this._lodManager=n,this._layerManager=o,this._modelState=a,this.materialIds=h,this.generateClusterId=(()=>{const t=new Float64Array(6);let e=0,i=0,s=0;const n=this._model.geometry(),o=new r.Technology.TrimBim.Fbs.GeometryInstance;return(r,a)=>{const h=new Int32Array(6);n.instances(a,o);const c=isNaN(r.materialId)?this.materialIds[o.surfaceMaterialId()]:r.materialId;this._im.boundingBoxes?(e=.5*(this._im.boundingBoxes[6*a]+this._im.boundingBoxes[6*a+3]),i=.5*(this._im.boundingBoxes[6*a+1]+this._im.boundingBoxes[6*a+4]),s=.5*(this._im.boundingBoxes[6*a+2]+this._im.boundingBoxes[6*a+5])):(this._im.getInstanceAABB(a,t),e=.5*(t[0]+t[3]),i=.5*(t[1]+t[4]),s=.5*(t[2]+t[5]));const b=e%this.grid_size,l=i%this.grid_size,d=s%this.grid_size;return h[0]=e-b,h[1]=i-l,h[2]=s-d,h[3]=c,h[4]=r.objectType,h[5]=r.text?r.text.checksum:0,h}})(),this.getSize=(()=>{const t=new Float64Array(6);return e=>{let i=0,s=0,r=0;return this._im.boundingBoxes?(i=this._im.boundingBoxes[6*e+3]-this._im.boundingBoxes[6*e],s=this._im.boundingBoxes[6*e+4]-this._im.boundingBoxes[6*e+1],r=this._im.boundingBoxes[6*e+5]-this._im.boundingBoxes[6*e+2]):(this._im.getInstanceAABB(e,t),i=t[3]-t[0],s=t[4]-t[1],r=t[5]-t[2]),Math.sqrt(i*i+s*s+r*r)}})(),this.clusterLUT=new Map,this._instanceIdToClusters=new Map,this._instanceIdToBatches=new Map,this.messenger=new ai(t);const c=i.worldBoundingbox.min.distanceTo(i.worldBoundingbox.max);this.grid_size=this._lodManager.getClusterSize(c);for(let t=0,e=i.boundingBoxes.length/6;t<e;t++){const e=s.getGeometries(t,!1);for(const i of e){const e=this.generateClusterId(i,t),s=this.getCluster(e);ci(s,this._im.boundingBoxes,t);const r=this.getSize(t),n=s.insertObject(i,t,r);this.addInstanceToBatchMapping(t,n),this._instanceIdToClusters.has(t)||this._instanceIdToClusters.set(t,new Set),this._instanceIdToClusters.get(t).add(s)}}}addInstanceToBatchMapping(t,e){this._instanceIdToBatches.has(t)||this._instanceIdToBatches.set(t,new Set),this._instanceIdToBatches.get(t).add(e)}setMaterial(t,e){t.sort((t,e)=>t-e);const i=new Map,s=new Set;for(const r of t){const t=this._geom.getGeometries(r,!1),n=this._instanceIdToClusters.get(r);for(const o of n){if(o.materialId===e)continue;i.has(o)?i.get(o).add(r):i.set(o,(new Set).add(r));const a=o.id.slice();a[3]=e;const h=this.getCluster(a);n.delete(o),n.add(h),ci(h,this._im.boundingBoxes,r),this.populateCluster(h,r,t),s.add(h)}}s.forEach(t=>t.removeGeometry()),this.removeInstanceIdsFromClusters(i)}getMaterialId(t){return this._instanceIdToClusters.get(t).values().next().value.materialId}getInstanceIds(){return Array.from(this._instanceIdToClusters.keys())}calculateRanges(t){const e=[];for(const{geometry:i,start:s}of t){const t=0!==i.indicesLength?i.indicesLength:i.positionsLength/3;e.push({start:s,count:t})}return e}resetMaterials(t){t.sort((t,e)=>t-e);const e=new Map,i=new Set;for(const s of t){const t=this._geom.getGeometries(s,!1),r=this._instanceIdToClusters.get(s);for(const n of r)for(const o of t){if(!n.belongsToCluster(o))continue;if(0===o.positionsLength)continue;const t=this.generateClusterId(o,s),a=this.getCluster(t);if(n===a)continue;ci(a,this._im.boundingBoxes,s),e.has(n)?e.get(n).add(s):e.set(n,(new Set).add(s));const h=this.getSize(s),c=a.insertObject(o,s,h);this.restoreInstanceState(s,c,o),r.delete(n),r.add(a),this.addInstanceToBatchMapping(s,c),i.add(a)}}i.forEach(t=>t.removeGeometry()),this.removeInstanceIdsFromClusters(e)}restoreInstanceState(i,s,r){const n=this._geom.getEntityId(i);if(this._modelState.isSelected(n)||!this._modelState.isVisible(n)||!this._layerManager.isVisibleByLayer(i)){const o=s.instances.indexOf(i),a={batch:s,geometry:r,start:s.indexOffset[o]};this._modelState.isSelected(n)&&(s.state.selected=t(s.state.selected.concat(this.calculateRanges([a])))),this._modelState.isVisible(n)&&this._layerManager.isVisibleByLayer(i)||(s.state.visible=e(s.state.visible,this.calculateRanges([a])))}}removeInstanceIdsFromClusters(t){for(const[e,i]of t.entries()){const t=e.getInstanceIds();t.sort((t,e)=>t-e),e.removeGeometry(),e.clearBatches();for(const s of t)if(!i.has(s)){const t=this._geom.getGeometries(s,!1);this.populateCluster(e,s,t)}}}populateCluster(t,e,i){const s=this.getSize(e);for(const r of i)if(t.belongsToCluster(r)){const i=t.insertObject(r,e,s);this.restoreInstanceState(e,i,r),this.addInstanceToBatchMapping(e,i)}}getBatchGeometryByInstanceIds(t){const e=new Map;for(const i of t){const t=this._geom.getGeometries(i,!1),s=this._instanceIdToBatches.get(i);for(const r of s){const s=r.instances.indexOf(i);if(-1===s)throw new Error("Inconsistency error: selection not found in batch.");const n=r.indexOffset[s];for(const i of t)if(this.belongsToBatchPrototype(i,r)){const t={geometry:i,start:n,batch:r};e.has(r.id)?e.get(r.id).push(t):e.set(r.id,[t])}}}return e}belongsToBatchPrototype(t,e){return!t.text&&!e.text||!(!t.text||!e.text)&&t.text.checksum===e.text.checksum}getCluster(t){const e=`${t[0]},${t[1]},${t[2]},${t[3]},${t[4]},${t[5]}`;if(this.clusterLUT.has(e))return this.clusterLUT.get(e);{const i=this.createCluster(t);return this.clusterLUT.set(e,i),i}}createCluster(t){return 2===t[4]||3===t[4]?new oi(this.modelId,t,this._im,this._geom,this.messenger,this._lodManager):new ni(this.modelId,t,this._im,this._geom,this.messenger,this._lodManager)}dispose(){this.messenger.dispose()}}function ci(t,e,i){const s=[0,0,0],r=[0,0,0];return s[0]=e[6*i],s[1]=e[6*i+1],s[2]=e[6*i+2],r[0]=e[6*i+3],r[1]=e[6*i+4],r[2]=e[6*i+5],void 0===t.min||void 0===t.max?(t.min=new Float64Array(s),t.max=new Float64Array(r)):(t.min[0]=t.min[0]<s[0]?t.min[0]:s[0],t.min[1]=t.min[1]<s[1]?t.min[1]:s[1],t.min[2]=t.min[2]<s[2]?t.min[2]:s[2],t.max[0]=t.max[0]>r[0]?t.max[0]:r[0],t.max[1]=t.max[1]>r[1]?t.max[1]:r[1],t.max[2]=t.max[2]>r[2]?t.max[2]:r[2]),t}var bi=r.Technology.TrimBim.Fbs;class li extends s{constructor(t,e,i,s){super(e),this.modelId=t,this.instanceManager=i,this._lodManager=s,this.snapGeometryType=1,this.geometryType=Vt.AlignmentCurve,this.indexAlignments(),this.prepareModelTypes()}indexAlignments(){this.grid_size=this._lodManager.getAlignmentClusterSize(),this.horizontSegmentOffsets=new Map,this.grid=new Map;const t=new bt,e=new d,i=new Int32Array([0,0,0]),s=[0,0,0,0,0,0],r=new bi.GeometryInstance,n=new bi.GeometryDefinition;for(let o=0,a=this.geometry.instancesLength();o<a;o++)if(this.geometry.instances(o,r),this.geometry.definitions(r.definitionId(),n),n.type()===Vt.AlignmentCurve){const r=this.geometry.alignmentCurves(n.index()),a=li.buildSpans(r,.1),h=li.buildSpanBoundingBoxes(r,a);let c=0;if(h)for(const r of h){this.instanceManager.getInstanceTransform(o,t),r.applyMatrix4(t),r.getCenter(e);const n=e.x%this.grid_size,b=e.y%this.grid_size,l=e.z%this.grid_size;i[0]=e.x-n,i[1]=e.y-b,i[2]=e.z-l;const d=`${i[0]},${i[1]},${i[2]}`;r.min.toArray(s,0),r.max.toArray(s,3);const u=a[c];if(u.instanceId=o,u.first=0===c,u.last=c===h.length-1,this.grid.has(d)){ci(this.grid.get(d),s,0)}else{const t=new ri(this.modelId,new Int32Array(i));ci(t,s,0),this.grid.set(d,t)}c++}const b=r.horizontalCurve();let l=b.startAlongDistance();const d=[];for(let t=0,e=b.segmentTypesLength();t<e;t++){d.push(l),l+=li.horizontalCurveGetSegmentAt(b,t).segmentLength()}this.horizontSegmentOffsets.set(o,d)}}prepareModelTypes(){for(let t=0;t<this.geometry.alignmentCurvesLength();t++){const e=this.geometry.alignmentCurves(t);this.buffers[t]=this.calculateBufferSizes(e)}}getGeometries(t,e=!0){const i=this.buffers[t];if(i&&!i.positions&&e){const e=this.geometry.alignmentCurves(t);this.build(e,i)}return[i]}calculateBufferSizes(t){return{objectType:1,indicesLength:0,positionsLength:6*li.computeTesselationCount(t,.1),normalsLength:0,uvsLength:0,pointSizesLength:0,indexPointer:0,positionPointer:0}}build(t,e){e.positions=new Float64Array(e.positionsLength),e.normals=new Int16Array(e.normalsLength);li.buildSegments(t,.1,e)}pick(t,e,i){return this.pickLine(t,e,i)}pickFace(t,e){}pickLine(t,e,i){return Ae(this.getGeometries(t)[0].positions,e).filter(t=>i.containsPoint(t.point))}pickPoint(t,e,i){}static computeTesselationCount(t,e){let i=0;const s=li.buildSpans(t,e);if(null===s)return;const r=t.horizontalCurve();{let t=r.startAlongDistance();for(let e=0,i=r.segmentTypesLength();e<i;e++){t+=li.horizontalCurveGetSegmentAt(r,e).segmentLength()}}const n=t.verticalCurve();for(const t of s)if(t.hasHorizontalCurve&&t.hasVerticalCurve){const e=r.segmentTypes(t.horizontalCurveIndex),s=n.segmentTypes(t.verticalCurveIndex),o=li.getTessellationCountHorizontal(e),a=li.getTessellationCountVertical(s);i+=Math.max(o,a)}return i}static horizontalCurveGetSegmentAt(t,e){let i=0;const s=t.segmentTypes(e);for(let r=0;r<e;r++)t.segmentTypes(r)===s&&(i+=1);switch(s){case bi.HorizontalSegmentType.LineSegment:return t.lineSegments(i);case bi.HorizontalSegmentType.CircularArcSegment:return t.circularArcSegments(i);case bi.HorizontalSegmentType.ClothoidalArcSegment:return t.clothoidalArcSegments(i);case bi.HorizontalSegmentType.TransientCurveSegment:return t.transitionArcSegments(i)}}static verticalCurveGetSegmentAt(t,e){let i=0;const s=t.segmentTypes(e);for(let r=0;r<e;r++)t.segmentTypes(r)===s&&(i+=1);switch(s){case bi.VerticalSegmentType.LineSegment:return t.lineSegments(i);case bi.VerticalSegmentType.CircularArcSegment:return t.circularArcSegments(i);case bi.VerticalSegmentType.ParabolicArcSegment:return t.parabolicArcSegments(i)}}static segmentClothoidSpaceLocation(t,e){if(t.startRadius()===t.endRadius()){const t=new lt;return t.setX(e),t}let i;if(i=0===t.startRadius()?Math.abs(t.endRadius()*t.segmentLength()):0===t.endRadius()?Math.abs(t.startRadius()*t.segmentLength()):Math.abs(t.segmentLength()*t.startRadius()*t.endRadius()/(t.startRadius()-t.endRadius())),0===i)return new lt;const s=0!==t.startRadius()?Math.abs(i/t.startRadius()):0,r=0!==t.endRadius()?Math.abs(i/t.endRadius()):0,n=Math.sign(r-s)*s,o=n+e,a=Math.sign(n+o)*Math.sign(t.startRadius()+t.endRadius()),h=a*n*n/i/2,c=a*o*o/i/2,b=n*li.cloCos(h),l=n*li.cloSin(h),d=o*li.cloCos(c),u=o*li.cloSin(c),_=Math.sin(h),p=Math.cos(h);return new lt(+p*(d-b)+_*(u-l),-_*(d-b)+p*(u-l))}static cloCos(t){const e=t*t;return 1-e*(.1-e*(1/216-e*(1/9360-e*(1/685440-e*(1/76204800-e*(1/1197504e4-e/2528170444800))))))}static cloSin(t){const e=t*t;return t*(1/3-e*(1/42-e*(1/1320-e*(1/75600-e*(1/6894720-e*(1/918086400-e*(1/168129561600-e/40537905408e3)))))))}static segmentGetElevationAt(t,e,i){const s=i-e.startDistAlong();switch(i=s<0?0:s>e.horizontalLength()?e.horizontalLength():s,t){case bi.VerticalSegmentType.LineSegment:return e.startHeight()+e.startGradient()*i;case bi.VerticalSegmentType.CircularArcSegment:{const t=e,s=e.startHeight(),r=e.startGradient(),n=t.radius(),o=i,a=Math.sqrt(1+r*r),h=n/a;if(t.isConvex()){let t=o-n*(r/a);return t>n&&(t=n),s+Math.sqrt(n*n-t*t)-h}{let t=o+n*(r/a);return t>n&&(t=n),s-Math.sqrt(n*n-t*t)+h}}case bi.VerticalSegmentType.ParabolicArcSegment:{const t=e,s=t.isConvex()?-t.parabolaConstant():t.parabolaConstant(),r=e.startHeight(),n=e.startGradient();return i*(i/s+n+n)/2+r}}}static getTessellationCountHorizontal(t,e=1){switch(t){case bi.HorizontalSegmentType.LineSegment:return 1;case bi.HorizontalSegmentType.CircularArcSegment:case bi.HorizontalSegmentType.TransientCurveSegment:return 24*e}return 1}static getTessellationCountVertical(t,e=1){switch(t){case bi.VerticalSegmentType.LineSegment:return 1;case bi.VerticalSegmentType.CircularArcSegment:case bi.VerticalSegmentType.ParabolicArcSegment:return 24*e}return 1}static buildSpans(t,e){const i=li.buildVerticalBreaks(t.verticalCurve(),e);if(null===i)return null;const s=[];{const e=t.horizontalCurve();let s=e.startAlongDistance();for(let t=0,r=e.segmentTypesLength();t<r;t++){i.push(new di(s,!1,!1,t)),s+=li.horizontalCurveGetSegmentAt(e,t).segmentLength()}i.push(new di(s,!1,!1,-1)),i.sort((t,e)=>t.Distance<e.Distance?-1:t.Distance>e.Distance?1:0)}{let t=-1,r=-1,n=!1,o=Number.MIN_VALUE;for(let a=0,h=i.length;a<h;a++){const h=i[a];n&&(-1===r&&-1===t||h.Distance-o>e&&s.push(new ui(-1!==r,-1!==t,r,t,o,h.Distance-o))),h.IsVertical?t=h.CurveIndex:r=h.CurveIndex,n=!0,o=h.Distance}}return s}static buildVerticalBreaks(t,e){if(0===t.segmentTypesLength())return null;const i=[];let s=li.verticalCurveGetSegmentAt(t,0).startDistAlong();for(let r=0,n=t.segmentTypesLength();r<n;r++){const n=li.verticalCurveGetSegmentAt(t,r),o=s-n.startDistAlong();if(o>e){const t=n.horizontalLength()-o;t>e&&(i.push(new di(s,!0,!0,r)),s+=t)}else o<-e?(i.push(new di(s,!0,!1,-1)),i.push(new di(n.startDistAlong(),!0,!0,r)),s=n.startDistAlong()+n.horizontalLength()):(i.push(new di(n.startDistAlong(),!0,!0,r)),s=n.startDistAlong()+n.horizontalLength())}return i.push(new di(s,!0,!1,-1)),i}}li.buildSpanBoundingBoxes=(()=>{const t=new d,e=new lt;return(i,s)=>{const r=[];if(null===s)return;const n=i.horizontalCurve(),o=[];{let t=n.startAlongDistance();for(let e=0,i=n.segmentTypesLength();e<i;e++){o.push(t),t+=li.horizontalCurveGetSegmentAt(n,e).segmentLength()}}const a=i.verticalCurve();for(const i of s)if(i.hasHorizontalCurve&&i.hasVerticalCurve){const s=new D,h=n.segmentTypes(i.horizontalCurveIndex),c=li.horizontalCurveGetSegmentAt(n,i.horizontalCurveIndex),b=a.segmentTypes(i.verticalCurveIndex),l=li.verticalCurveGetSegmentAt(a,i.verticalCurveIndex),d=li.getTessellationCountHorizontal(h),u=li.getTessellationCountVertical(b),_=Math.max(d,u),p=o[i.horizontalCurveIndex];for(let r=0;r<=_;r++){const n=i.startDistance+r/_*i.horizontalLength,o=n-p;li.horizontalSegmentGetPointAt(h,c,o,e),t.set(e.x,e.y,li.segmentGetElevationAt(b,l,n)),s.expandByPoint(t)}r.push(s)}return r}})(),li.buildSegments=(()=>{const t=new lt,e=new lt,i=new d,s=new d;return(r,n,o)=>{const a=li.buildSpans(r,n);if(null===a)return;const h=r.horizontalCurve();let c=h.startAlongDistance();const b=[];for(let t=0,e=h.segmentTypesLength();t<e;t++){b.push(c),c+=li.horizontalCurveGetSegmentAt(h,t).segmentLength()}const l=r.verticalCurve();for(const r of a)if(r.hasHorizontalCurve&&r.hasVerticalCurve){const n=h.segmentTypes(r.horizontalCurveIndex),a=li.horizontalCurveGetSegmentAt(h,r.horizontalCurveIndex),c=l.segmentTypes(r.verticalCurveIndex),d=li.verticalCurveGetSegmentAt(l,r.verticalCurveIndex),u=li.getTessellationCountHorizontal(n),_=li.getTessellationCountVertical(c),p=Math.max(u,_),f=b[r.horizontalCurveIndex];li.horizontalSegmentGetPointAt(n,a,r.startDistance-f,t),s.set(t.x,t.y,li.segmentGetElevationAt(c,d,r.startDistance));let g=r.startDistance;for(let t=1;t<=p;t++){const h=r.startDistance+t/p*r.horizontalLength;li.horizontalSegmentGetPointAt(n,a,h-f,e),i.set(e.x,e.y,li.segmentGetElevationAt(c,d,h)),o.positions[o.positionPointer]=s.x,o.positions[o.positionPointer+1]=s.y,o.positions[o.positionPointer+2]=s.z,o.positions[o.positionPointer+3]=i.x,o.positions[o.positionPointer+4]=i.y,o.positions[o.positionPointer+5]=i.z,o.positionPointer+=6,s.copy(i),g=h}}}})(),li.horizontalSegmentGetPointAt=(()=>{const t=new lt,e=new lt,i=new lt;return(s,r,n,o)=>{switch(s){case bi.HorizontalSegmentType.LineSegment:n<0?n=0:n>r.segmentLength()&&(n=r.segmentLength()),o.setX(r.startPoint().x()+n*Math.cos(r.startDirection())),o.setY(r.startPoint().y()+n*Math.sin(r.startDirection()));break;case bi.HorizontalSegmentType.CircularArcSegment:{const s=r.radius(),a=r.isCCW(),h=n/s,c=r.startDirection()+(a?-Math.PI:Math.PI)/2+(a?h:-h),b=r.startDirection()+(a?Math.PI:-Math.PI)/2;t.set(Math.cos(b)*s,Math.sin(b)*s),e.set(r.startPoint().x(),r.startPoint().y()),e.add(t),o.addVectors(e,i.set(Math.cos(c)*s,Math.sin(c)*s));break}case bi.HorizontalSegmentType.ClothoidalArcSegment:break;case bi.HorizontalSegmentType.TransientCurveSegment:switch(r.type()){case bi.HorizontalTransitionCurveType.ClothoidCurve:if(r.isStartRadiusCCW()===r.isEndRadiusCCW())return li.segmentClothoidGetPointAt(r,n,o);break;case bi.HorizontalTransitionCurveType.BiquadraticParabola:case bi.HorizontalTransitionCurveType.BlossCurve:case bi.HorizontalTransitionCurveType.CosineCurve:case bi.HorizontalTransitionCurveType.SineCurve:console.error("horizontal segment of type "+r.type()+" not yet implemented")}}return new lt}})(),li.segmentClothoidGetPointAt=(()=>{const t=new lt;return(e,i,s)=>{const r=li.segmentClothoidSpaceLocation(e,i),n=r.x,o=r.y,a=Math.cos(e.startDirection()),h=Math.sin(e.startDirection());s.set(e.startPoint().x(),e.startPoint().y()),e.isStartRadiusCCW()?s.add(t.set(a*n-h*o,h*n+a*o)):s.add(t.set(a*n+h*o,h*n-a*o))}})();class di{constructor(t,e,i,s){this.Distance=t,this.IsVertical=e,this.HasCurve=i,this.CurveIndex=s}}class ui{constructor(t,e,i,s,r,n){this.hasHorizontalCurve=t,this.hasVerticalCurve=e,this.horizontalCurveIndex=i,this.verticalCurveIndex=s,this.startDistance=r,this.horizontalLength=n}}var _i=r.Technology.TrimBim.Fbs;class pi{constructor(t,e,i,s){this.geometry=e,this._lodManager=s,this.getEntityId=(()=>{const t=new _i.GeometryInstance;return e=>(this.geometry.instances(e,t),t.entityId())})(),this.geometryBuilders=new Map,this.registerGeometryBuilder(new pe(this.geometry)),this.registerGeometryBuilder(new ge(this.geometry)),this.registerGeometryBuilder(new fe(this.geometry)),this.registerGeometryBuilder(new Pt(this.geometry)),this.registerGeometryBuilder(new Et(this.geometry)),this.registerGeometryBuilder(new Ot(this.geometry)),this.registerGeometryBuilder(new Rt(this.geometry)),this.registerGeometryBuilder(new ke(this.geometry)),this.registerGeometryBuilder(new Ue(this.geometry)),this.registerGeometryBuilder(new ei(this.geometry)),this.registerGeometryBuilder(new Je(this.geometry)),this.registerGeometryBuilder(new Ke(this.geometry)),this.registerGeometryBuilder(new li(t,this.geometry,i,this._lodManager))}registerGeometryBuilder(t){this.geometryBuilders.set(t.geometryType,t)}getGeometries(t,e){const i=this.geometry.instances(t),s=this.geometry.definitions(i.definitionId()),r=s.type(),n=s.index(),o=this.geometryBuilders.get(r);return o?o.getGeometries(n,e):(console.warn("Unsupported geometry type:",r),[])}getIsMesh(t){return this.geometryBuilders.has(t)&&0===this.geometryBuilders.get(t).snapGeometryType}pick(t,e,i,s){const r=t.type(),n=t.index(),o=this.geometryBuilders.get(r);if(void 0===o)return;const a=2===e?o.pickPoint(n,i,s):1===e?o.pickLine(n,i,s):0===e?o.pickFace(n,i,s):o.pick(n,i,s);if(a)for(const t of a)t.snapGeometryType=o.snapGeometryType;return a}}var fi=r.Technology.TrimBim.Fbs,gi=r.Technology.TrimBim.Fbs.TextureType;class mi{constructor(t,e=self.postMessage.bind(self)){this.modelId=t,this.postMessage=e,this.tmpTexture=new r.Technology.TrimBim.Fbs.Texture,this.materials=[]}addModelTextures(t){const e=t.geometry();for(let t=0;t<e.texturesLength();t++){const i=e.textures(t,this.tmpTexture),s=new Int8Array(i.bytesLength());s.set(i.bytesArray()),this.postMessage({type:2,modelId:this.modelId,textureId:t,image:s},[s.buffer])}}addModelMaterials(t){const e=[],i=t.geometry(),s=i.surfaceMaterialsLength();for(let t=0;t<s;t++){const s=i.surfaceMaterials(t);let r=!1,n=s.textureId();if(4294967295===n&&(n=void 0),void 0!==n){r=i.textures(n,this.tmpTexture).type()===gi.Png}const o={color:s.b()|s.g()<<8|s.r()<<16,side:s.sidedness(),lineStyle:s.lineStyle(),textureId:n,opacity:s.a()/255,transparent:r||s.a()<255};e.push(o)}return this.addMaterials(e)}addMaterials(t){const e=[],i=[];t:for(const s of t){for(let t=0,i=this.materials.length;t<i;t++)if(this.equal(s,this.materials[t])){e.push(t);continue t}this.materials.push(s),i.push(s),e.push(this.materials.length-1)}return this.postMessage({type:3,modelId:this.modelId,materials:i}),e}equal(t,e){return t.color===e.color&&this.eq(t.opacity,e.opacity,1)&&this.eq(t.side,e.side,fi.Sidedness.Single)&&this.eq(t.lineStyle,e.lineStyle,fi.LineStyle.Normal)&&t.textureId===e.textureId}eq(t,e,i){return t===e||void 0===t&&e===i||t===i&&void 0===e}getMaterial(t){return this.materials[t]}}var yi=r.Technology.TrimBim.Fbs;class vi{constructor(t){this._model=t,this.getAABBFromIds=(()=>{const t=new D,e=new Float64Array(6);return(i,s)=>{i.forEach(i=>{this.entityToInstance.has(i)&&this.entityToInstance.get(i).forEach(i=>{this.getInstanceAABB(i,e),t.min.fromArray(e,0),t.max.fromArray(e,3),s.union(t)})})}})(),this.getInstanceAABB=(()=>{const t=new d,e=new d,i=new d;let s;const r=new d,n=new d;let o;const a=new d;let h,c,b;const l=new yi.GeometryInstance,u=new yi.GeometryDefinition,_=new yi.AABB3f,p=new yi.Vec3f,f=new yi.Vec3f,g=new bt;return(d,m,y=0)=>{this.geometry.instances(d,l),this.geometry.definitions(l.definitionId(),u),u.boundingBox(_),_.min(p),_.max(f),this.getInstanceTransform(d,g),t.set(g.elements[0],g.elements[1],g.elements[2]),e.set(g.elements[4],g.elements[5],g.elements[6]),i.set(g.elements[8],g.elements[9],g.elements[10]),r.copy(t).multiplyScalar(p.x()),s=t.multiplyScalar(f.x()),n.copy(e).multiplyScalar(p.y()),o=e.multiplyScalar(f.y()),a.copy(i).multiplyScalar(p.z()),h=i.multiplyScalar(f.z()),c=r.clone().min(s).add(n.clone().min(o)).add(a.clone().min(h)),b=r.max(s).add(n.max(o)).add(a.max(h)),m[y]=c.x+g.elements[12],m[y+1]=c.y+g.elements[13],m[y+2]=c.z+g.elements[14],m[y+3]=b.x+g.elements[12],m[y+4]=b.y+g.elements[13],m[y+5]=b.z+g.elements[14]}})(),this.getInstanceTransform=(()=>{const t=new yi.GeometryInstance;return(e,i)=>(this.geometry.instances(e,t),this.getTransform(t,i))})(),this.toMatrix4=(()=>{const t=new d,e=new d,i=new d,s=new d,r=new yi.Vec3d,n=new yi.Vec3f;return(o,a)=>{o.origin(r),t.set(r.x(),r.y(),r.z()),o.xAxis(n),e.set(n.x(),n.y(),n.z()),o.yAxis(n),i.set(n.x(),n.y(),n.z()),s.crossVectors(e,i),a.set(e.x,i.x,s.x,t.x,e.y,i.y,s.y,t.y,e.z,i.z,s.z,t.z,0,0,0,1)}})(),this.getTransform=(()=>{const t=new bt,e=new bt,i=new yi.Placement3,s=new yi.Placement3,r=new yi.Entity;return(n,o)=>{this.geometry.localPlacements(n.localPlacementId(),i),this.toMatrix4(i,t),this._model.entities().entities(n.entityId(),r),r.globalPlacement(s),this.toMatrix4(s,e),o.multiplyMatrices(e,t)}})(),this.geometry=t.geometry(),this.entityToInstance=new Map,this.analyzeInstances()}analyzeInstances(){this.worldBoundingbox=new D,this.boundingBoxes=new Float64Array(6*this.geometry.instancesLength());const t=this.geometry.instancesLength(),e=new yi.GeometryInstance,i=new yi.GeometryDefinition;for(let s=0;s<t;s++){this.geometry.instances(s,e),this.geometry.definitions(e.definitionId(),i);const t=e.entityId();this.entityToInstance.has(t)?this.entityToInstance.get(t).push(s):this.entityToInstance.set(t,[s]),this.getInstanceAABB(s,this.boundingBoxes,6*s),this.updateWorldBoundingBox(s,this.boundingBoxes,6*s)}}updateWorldBoundingBox(t,e,i=0){0===t?(this.worldBoundingbox.min.x=e[i],this.worldBoundingbox.min.y=e[i+1],this.worldBoundingbox.min.z=e[i+2],this.worldBoundingbox.max.x=e[i+3],this.worldBoundingbox.max.y=e[i+4],this.worldBoundingbox.max.z=e[i+5]):(this.worldBoundingbox.min.x=this.worldBoundingbox.min.x<e[i]?this.worldBoundingbox.min.x:e[i],this.worldBoundingbox.min.y=this.worldBoundingbox.min.y<e[i+1]?this.worldBoundingbox.min.y:e[i+1],this.worldBoundingbox.min.z=this.worldBoundingbox.min.z<e[i+2]?this.worldBoundingbox.min.z:e[i+2],this.worldBoundingbox.max.x=this.worldBoundingbox.max.x>e[i+3]?this.worldBoundingbox.max.x:e[i+3],this.worldBoundingbox.max.y=this.worldBoundingbox.max.y>e[i+4]?this.worldBoundingbox.max.y:e[i+4],this.worldBoundingbox.max.z=this.worldBoundingbox.max.z>e[i+5]?this.worldBoundingbox.max.z:e[i+5])}filterDefinition(t,e){const i=new yi.GeometryInstance,s=new yi.GeometryDefinition,r=[];for(const n of t){const t=this.entityToInstance.get(n);t&&t.length>0&&(this.geometry.instances(t[0],i),this.geometry.definitions(i.definitionId(),s),e.expressions[0]&&"geometryType"===e.expressions[0].token&&e.expressions[0].operations[0](s.type())&&r.push(n))}return r}}class xi{constructor(t,e,i,s,r,n){this.modelId=t,this.cm=e,this.im=i,this.geom=s,this.lodManager=r,this.model=n,this.enabled=!0,this.clustersProcessedForCurrentCamera=0,this.updateFinishedSent=!1,this.geometry=n.geometry(),this.startGeometryUpdateLoop()}buildGeometryForCamera(t,e){this.setCameraForGeometryUpdate(t,e)}startGeometryUpdateLoop(){const t=new D;let e=0;const i=()=>{if(this.clustersProcessedForCurrentCamera<this.cm.clusterLUT.size&&this.cameraPosition){const i=Array.from(this.cm.clusterLUT.values()),s=performance.now();for(let r=0;r<i.length&&(performance.now()-s<4||r<5);r++){const s=i[e];t.min.set(s.min[0],s.min[1],s.min[2]),t.max.set(s.max[0],s.max[1],s.max[2]),this.cameraFrustum.intersectsBox(t)?s.buildGeometry(this.getLodLevel(this.cameraPosition,t)):s.removeGeometry(),e++,e>=i.length&&(e=0),this.clustersProcessedForCurrentCamera++}}this.clustersProcessedForCurrentCamera>=this.cm.clusterLUT.size&&!this.updateFinishedSent&&(this.cm.messenger.send({actionType:3,modelId:this.modelId}),this.updateFinishedSent=!0),this.enabled&&setTimeout(i,this.clustersProcessedForCurrentCamera<this.cm.clusterLUT.size?0:100)};i()}forceUpdate(){this.updateFinishedSent=!1,this.clustersProcessedForCurrentCamera=0,this.cm.messenger.removePendingUpdateFinishedAction()}dispose(){this.enabled=!1}setCameraForGeometryUpdate(t,e){this.cameraFrustum=t,this.cameraPosition=e,this.updateFinishedSent=!1,this.clustersProcessedForCurrentCamera=0,this.cm.messenger.removePendingUpdateFinishedAction()}getLodLevel(t,e){const i=e.distanceToPoint(t);return this.lodManager.getLevel(i)}}var wi=/iPhone/i,Ti=/iPod/i,Fi=/iPad/i,Ii=/\biOS-universal(?:.+)Mac\b/i,Si=/\bAndroid(?:.+)Mobile\b/i,Bi=/Android/i,Mi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Vi=/Silk/i,zi=/Windows Phone/i,Li=/\bWindows(?:.+)ARM\b/i,Pi=/BlackBerry/i,Ai=/BB10/i,Ci=/Opera Mini/i,Ei=/\b(CriOS|Chrome)(?:.+)Mobile/i,Oi=/Mobile(?:.+)Firefox\b/i,Ri=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};class Ni{constructor(){this.lodObjectSizes=new Map,this.lodObjectSizes.set(0,0),this.lodObjectSizes.set(1,.5),this.lodObjectSizes.set(2,2)}isMobile(){return void 0===this._isMobile&&(this._isMobile=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,s=i.split("[FBAN");void 0!==s[1]&&(i=s[0]),void 0!==(s=i.split("Twitter"))[1]&&(i=s[0]);var r=function(t){return function(e){return e.test(t)}}(i),n={apple:{phone:r(wi)&&!r(zi),ipod:r(Ti),tablet:!r(wi)&&(r(Fi)||Ri(e))&&!r(zi),universal:r(Ii),device:(r(wi)||r(Ti)||r(Fi)||r(Ii)||Ri(e))&&!r(zi)},amazon:{phone:r(Mi),tablet:!r(Mi)&&r(Vi),device:r(Mi)||r(Vi)},android:{phone:!r(zi)&&r(Mi)||!r(zi)&&r(Si),tablet:!r(zi)&&!r(Mi)&&!r(Si)&&(r(Vi)||r(Bi)),device:!r(zi)&&(r(Mi)||r(Vi)||r(Si)||r(Bi))||r(/\bokhttp\b/i)},windows:{phone:r(zi),tablet:r(Li),device:r(zi)||r(Li)},other:{blackberry:r(Pi),blackberry10:r(Ai),opera:r(Ci),firefox:r(Oi),chrome:r(Ei),device:r(Pi)||r(Ai)||r(Ci)||r(Oi)||r(Ei)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}(navigator).any),this._isMobile}getLevelsCount(){return this.lodObjectSizes.size}getMinObjectSize(t){return this.lodObjectSizes.get(t)}getLevel(t){return t<(this.isMobile()?5:30)?0:t<(this.isMobile()?50:200)?1:2}getClusterSize(t){return t<1500?25:400}getAlignmentClusterSize(){return 400}}class Gi{}class ki{}const Hi=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","_","$"];class Di{constructor({data:t,ifcGuid:e,msGuid:i}){this.type="UUID",t?this.data=t:e?this.setIfcGuid(e):i?this.setMsGuid(i):this.data=new Uint8Array(16)}fromJSON({type:t,data:e}){if("UUID"!==t)throw TypeError("Incorrect type, type needs to be UUID");this.data=new Uint8Array(JSON.parse("["+e+"]"))}equals(t){for(let e=0;e<16;e++)if(this.data[e]!==t.data[e])return!1;return!0}toString(){return this.msGuid}get msGuid(){const t=this.data.byteOffset,e=new DataView(this.data.buffer,t,16);return`${e.getUint32(0,!0).toString(16).padStart(8,"0")}-${e.getUint16(4,!0).toString(16).padStart(4,"0")}-${e.getUint16(6,!0).toString(16).padStart(4,"0")}-${e.getUint8(8).toString(16).padStart(2,"0")}${e.getUint8(9).toString(16).padStart(2,"0")}-${e.getUint8(10).toString(16).padStart(2,"0")}${e.getUint8(11).toString(16).padStart(2,"0")}${e.getUint8(12).toString(16).padStart(2,"0")}${e.getUint8(13).toString(16).padStart(2,"0")}${e.getUint8(14).toString(16).padStart(2,"0")}${e.getUint8(15).toString(16).padStart(2,"0")}`}setMsGuid(t){this.data=this.data||new Uint8Array(16);const e=this.data.byteOffset,i=new DataView(this.data.buffer,e,16),s=(e,i)=>parseInt(t.slice(e,e+i),16);i.setUint32(0,s(0,8),!0),i.setUint16(4,s(9,4),!0),i.setUint16(6,s(14,4),!0),i.setUint8(8,s(19,2)),i.setUint8(9,s(21,2)),i.setUint8(10,s(24,2)),i.setUint8(11,s(26,2)),i.setUint8(12,s(28,2)),i.setUint8(13,s(30,2)),i.setUint8(14,s(32,2)),i.setUint8(15,s(34,2))}get ifcGuid(){const t=new Uint8Array(24),e=this.data;t[0]=e[15],t[1]=e[14],t[2]=e[13],t[3]=0,t[4]=e[12],t[5]=e[11],t[6]=e[10],t[7]=0,t[8]=e[9],t[9]=e[8],t[10]=e[6],t[11]=0,t[12]=e[7],t[13]=e[4],t[14]=e[5],t[15]=0,t[16]=e[0],t[17]=e[1],t[18]=e[2],t[19]=0,t[20]=e[3],t[21]=0,t[22]=0,t[23]=0;const i=new Uint32Array(t.buffer);return this.toBase64(i[5],8)+this.toBase64(i[4],24)+this.toBase64(i[3],24)+this.toBase64(i[2],24)+this.toBase64(i[1],24)+this.toBase64(i[0],24)}setIfcGuid(t){this.data=new Uint8Array(16);const e=this.fromBase64(t[0],6)+this.fromBase64(t[1],0),i=this.fromBase64(t[2],18)+this.fromBase64(t[3],12)+this.fromBase64(t[4],6)+this.fromBase64(t[5],0),s=this.fromBase64(t[6],18)+this.fromBase64(t[7],12)+this.fromBase64(t[8],6)+this.fromBase64(t[9],0),r=this.fromBase64(t[10],18)+this.fromBase64(t[11],12)+this.fromBase64(t[12],6)+this.fromBase64(t[13],0),n=this.fromBase64(t[14],18)+this.fromBase64(t[15],12)+this.fromBase64(t[16],6)+this.fromBase64(t[17],0),o=this.fromBase64(t[18],18)+this.fromBase64(t[19],12)+this.fromBase64(t[20],6)+this.fromBase64(t[21],0),a=this.getBytes(o),h=this.getBytes(n),c=this.getBytes(r),b=this.getBytes(s),l=this.getBytes(i),d=this.getBytes(e);this.data[15]=a[0],this.data[14]=a[1],this.data[13]=a[2],this.data[12]=h[0],this.data[11]=h[1],this.data[10]=h[2],this.data[9]=c[0],this.data[8]=c[1],this.data[6]=c[2],this.data[7]=b[0],this.data[4]=b[1],this.data[5]=b[2],this.data[0]=l[0],this.data[1]=l[1],this.data[2]=l[2],this.data[3]=d[0]}setFromBufferData(t,e){this.data=new Uint8Array(t,e,16)}toBase64(t,e){let i="";if(e>0){i+=Hi[63&t],i=this.toBase64(t>>6,e-6)+i}return i}fromBase64(t,e){let i=0;for(;i<64&&Hi[i]!=t;)i++;return i<<e}getBytes(t){const e=new ArrayBuffer(8);return new Int32Array(e)[0]=t,new Uint8Array(e)}}var Ui=r.Technology.TrimBim.Fbs;class qi{constructor(t,e){this.modelEntities=t,this.properties=e,this.hierarchyIndex=new Map,this.getIdentifier=(()=>{const t=new Ui.Guid;return(e,i)=>{switch(e){case zt.Guid:const s=this.modelEntities.guidIdentifiers(i.identifierIndex(),t);return Wi(s);case zt.String:return this.modelEntities.stringIdentifiers(i.identifierIndex());case zt.SpatialHash:return[this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).x(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).y(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).z(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d0(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d1(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d2(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d3(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d4(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d5(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d6(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d7()];case zt.DwgHandle:return[this.modelEntities.dwgHandleIdentifiers(i.identifierIndex()).high,this.modelEntities.dwgHandleIdentifiers(i.identifierIndex()).low];case zt.None:return;default:return void console.warn("Unknown identifier",e)}}})(),this.streams=[]}getProductId(t){if(void 0===t)throw new RangeError("Must provide entityId");return this.loadProductIndex()[t]}getProduct(t){if(void 0===t||t<0||t>=this.properties.productsLength())throw new Error("Must provide a valid productId");const e=this.properties.products(t);return{name:this.properties.names(e.name()),description:this.properties.descriptions(e.description()),objectType:this.properties.objectTypes(e.objectType())}}getPropertySetIdsFromEntity(t){if(void 0===t)throw new RangeError("Must provide entityId");return this.loadPropertyIndex()[t]}getPropertySet(t){if(void 0===t)throw new RangeError("Must provide propSetId");const e=this.properties.propertySetBindings(t),i=this.properties.definitions(e.definition()),s=this.getSinglePropertyDefinitions(i,e);return{name:this.properties.propertySetNames(i.name()),properties:s}}getPropertySetNames(){const t=new Array(this.properties.propertySetNamesLength());for(let e=0;e<t.length;e++)t[e]=this.properties.propertySetNames(e);return t}getSetNameId(t){const e=this.properties.propertySetNamesLength();for(let i=0;i<e;i++)if(this.properties.propertySetNames(i)===t)return i}getPropertySetIdsFromName(t){const e=this.getSetNameId(t);let i=this.properties.definitionsLength();const s=new Set;for(let t=0;t<i;t++){e===this.properties.definitions(t).name()&&s.add(t)}i=this.properties.propertySetBindingsLength();const r=new Set;for(let t=0;t<i;t++){const e=this.properties.propertySetBindings(t);s.has(e.definition())&&r.add(t)}return r}getDefinitionIdsFromNames(t,e){const i=this.getSetNameId(t),s=e?this.getPropertyNameIds(e):void 0,r=this.properties.definitionsLength(),n=new Map;for(let t=0;t<r;t++){const e=this.properties.definitions(t);if(i===e.name())if(void 0!==s){const i=e.propertiesLength();for(let r=0;r<i;r++){const i=e.properties(r);s.has(i.name())&&n.set(t,r)}}else n.set(t,void 0)}return n}getPropertyDefinitions(t){if(void 0===t)throw new Error("Must provide propSetName");const e=this.getDefinitionIdsFromNames(t);if(0===e.size)throw new Error(`No property set name found matching ${t} `);const i=new Map;for(const t of e.keys()){const e=this.properties.definitions(t);for(let t=0,s=e.propertiesLength();t<s;t++){const s=this.properties.propertyNames(e.properties(t).name());i.has(s)||i.set(s,{name:s,type:e.properties(t).type()})}}return Array.from(i.values())}getPropertyNameIds(t){const e=this.properties.propertyNamesLength(),i=new Set;for(let s=0;s<e;s++)t===this.properties.propertyNames(s)&&i.add(s);return i}getPropertyValues(t){if(void 0===t)throw new Error("Must provide propertyName");const e=this.getPropertyNameIds(t);if(void 0===e)throw new Error(`PropertyName ${t} does not exist`);const i=new Set,s=this.properties.propertySetBindingsLength();for(let t=0;t<s;t++){const s=this.properties.propertySetBindings(t),r=this.properties.definitions(s.definition()),n=r.propertiesLength();for(let t=0;t<n;t++){const n=r.properties(t).name();if(e.has(n)){const e=r.properties(t).type();i.add(this.getValue(e,s.values(t)))}}}return[...i]}queryHierarchy(t){const e=t.$AND,i=[];for(const t of e){const e=t.$HIERARCHYTYPE;switch(t.$SCOPE){case"Descendants":if(t.$ENTITYID)for(const s of t.$ENTITYID)i.push(...this.getChildren(s,e));if(t.$UNIQUEIDENTIFIERS){const s=this.getEntityIdsFromGuids(t.$UNIQUEIDENTIFIERS);for(const t of s)i.push(...this.getChildren(t,e))}break;case"DescendantsAndSelf":if(t.$ENTITYID)for(const s of t.$ENTITYID)i.push(...this.getChildren(s,e)),i.push(s);if(t.$UNIQUEIDENTIFIERS){const s=this.getEntityIdsFromGuids(t.$UNIQUEIDENTIFIERS);for(const t of s)i.push(...this.getChildren(t,e)),i.push(t)}break;case"Root":if(t.$ENTITYID)for(const s of t.$ENTITYID){const t=this.getParents([s],e)[0];i.push(void 0!==t?t:s)}if(t.$UNIQUEIDENTIFIERS){const s=this.getEntityIdsFromGuids(t.$UNIQUEIDENTIFIERS);for(const t of s){const s=this.getParents([t],e)[0];i.push(void 0!==s?s:t)}}break;default:throw new Error(`Unknown scope ${t.$SCOPE}`)}}return new Set(i)}indexEntityQuery(t){const e=[];for(const i of t){const{propertyName:t,setName:s}=i,r=this.getDefinitionIdsFromNames(s,t);e.push({expression:i,definitionIds:r})}return e}indexProductQuery(t){const e=new Map;for(const i of t){const t=i.setName;let s;if(e.has(t)?s=e.get(t):(s=new Set,e.set(t,s)),"name"===t)for(let t=0,e=this.properties.namesLength();t<e;t++){const e=this.properties.names(t);i.operations[0](e)&&s.add(t)}}return e}getAllEntityIds(){const t=this.modelEntities.entitiesLength(),e=new Set;for(let i=0;i<t;i++)e.add(i);return e}findProducts(t){if(0===t.expressions.length)return this.getAllEntityIds();const e=new Set,i=this.indexProductQuery(t.expressions),s=this.properties.productsLength();for(let t=0;t<s;t++){const s=this.properties.products(t);for(const[r,n]of i)"productType"===r&&n.has(s.objectType())&&e.add(t)}const r=new Set,n=this.loadProductIndex();for(let t=0,i=n.length;t<i;t++)e.has(n[t])&&r.add(n[t]);return r}filterEntities(t){if(0===t.expressions.length)return this.getAllEntityIds();const e=t.expressions[0],i=e.operations[0],s=new Set,r=new Set;if("class"===e.token){for(let t=0,e=this.modelEntities.entityClassesLength();t<e;t++){i(this.modelEntities.entityClasses(t))&&s.add(t)}const t=new Ui.Entity;for(let e=0,i=this.modelEntities.entitiesLength();e<i;e++)this.modelEntities.entities(e,t),s.has(t.classIndex())&&r.add(e)}return r}filterProperties(t){if(0===t.expressions.length)return this.getAllEntityIds();const e=(t,e)=>{r.has(t)?r.get(t).push(e):r.set(t,[e])},i=this.indexEntityQuery(t.expressions),s=this.properties.propertySetBindingsLength(),r=new Map;for(let t=0;t<s;t++){const s=this.properties.propertySetBindings(t),r=s.definition();for(const n of i)if(n.definitionIds.has(r)){const i=n.expression.operations[0],o=n.definitionIds.get(r);i?this.checkEntityConditions(r,o,i,s)&&e(n,t):e(n,t)}}for(const[t,e]of r)t.expression.entityIds=this.getEntitiesFromBinding(e);return t.getIds()}startPropertyStreaming(t,e){const i=this.getPropertySetIdsFromName(e.expressions[0].setName);return this.streams.push({entityIds:[...t],setIds:i}),{streamId:0,length:t.size}}getPropertyStreamPage(t,e,i){const{entityIds:s,setIds:r}=this.streams[t],n=[],o=e*i,a=Math.min(o+i,s.length);for(let t=o;t<a;t++){const e=s[t],i=this.getPropertySetIdsFromEntity(e),o=[];for(const t of i)if(r.has(t)){const e=this.getPropertySet(t).properties,i={};for(const t of e)i[t.name]=t.value;o.push(i)}n.push(o)}return n}getParents(t,e){const i=new Ui.HierarchyNode;let s=new Map;t.forEach((t,e)=>s.set(t,e));let r=new Map;const n=new Set;for(;s.size>0;){for(let t=0,o=this.modelEntities.hierarchiesLength();t<o;t++){if(this.modelEntities.hierarchies(t,i),i.type()!==e)continue;const o=s.get(i.childElementId());if(void 0!==o){const t=i.parentElementId();n.delete(o),n.add(t),r.set(t,o)}}s.clear();const t=r;r=s,s=t}return Array.from(n)}getChildren(t,e){const i=this.loadHierarchyIndex(e)[t];if(!i)return new Set;const s=new Set([...i]),r=new Set;for(const t of i){const i=this.getChildren(t,e);i&&i.forEach(t=>r.add(t))}return r.forEach(t=>s.add(t)),s}getHierarchyTree(t,e){const i=new Set(t),s=this.getParents(t,e);for(const t of s){this.getChildren(t,e).forEach(t=>i.add(t))}return{parentIds:s,childrenIds:[...i]}}checkEntityConditions(t,e,i,s){const r=this.properties.definitions(t).properties(e).type();return i(this.getValue(r,s.values(e)))}getEntitiesFromBinding(t){const e=new Set;for(const i of t){const t=this.properties.propertySetBindings(i),s=t.entitiesLength();for(let i=0;i<s;i++)e.add(t.entities(i))}return e}getHierarchy(t,e){if(void 0===t)throw new RangeError("Must provide hierarchy type");const i=new Gi;return null!=e&&(!0===e.entity&&(i.entities=new Map),!0===e.product&&(i.products=new Map),!0===e.properties&&(i.propertySets=new Map)),i.hierarchy=this.getHierarchyInternal(t,void 0===e?void 0:e.parentId,i),i}getEntityIdsFromGuids(t){const e=new Map,i=new Di({});let s=0;for(const r of t)22===r.length?e.set(r,s):36===r.length?(i.setMsGuid(r),e.set(i.ifcGuid,s)):console.warn("Only IFC GUID and MS GUID is currently supported"),s++;const r=new Ui.Guid,n=new Ui.Entity,o=new Array(t.length);let a=0;for(let s=0,h=this.modelEntities.entitiesLength();s<h;s++)if(this.modelEntities.entities(s,n),n.type()===Ui.IdentifierType.Guid){this.modelEntities.guidIdentifiers(n.identifierIndex(),r),i.setFromBufferData(r.bb.bytes().buffer,r.bb_pos);const h=i.ifcGuid;if(e.has(h)&&(o[e.get(h)]=s,a++,a===t.length))return o}return o.length!==t.length&&console.warn("Not all ids could be converted"),o}getEntity(t){if(t<0||t>this.modelEntities.entitiesLength())return;const e=new ki,i=this.modelEntities.entities(t),s=i.type();return e.id=t,e.identifierType=s,e.identifier=this.getIdentifier(e.identifierType,i),e.class=this.modelEntities.entityClasses(i.classIndex()),e}getEntitiesFromIds(t){const e=Array(t.length);for(let i=0,s=t.length;i<s;i++)e[i]=this.getEntity(t[i]);return e}getHierarchyInternal(t,e,i){const s=this.loadHierarchyIndex(t);let r=[];if(void 0===e){const e=new Set;for(const t of s)if(t)for(const i of t)e.add(i);for(let o=0,a=s.length;o<a;o++)if(s[o]&&!e.has(o)){const e={id:o,productId:this.getProductId(o),propertySetIds:[...this.getPropertySetIdsFromEntity(o)]};if(void 0===i.entities||i.entities.has(e.id)||i.entities.set(e.id,this.getEntity(e.id)),void 0!==i.products&&e.productId&&!i.products.has(e.productId)&&i.products.set(e.productId,this.getProduct(e.productId)),void 0!==i.propertySets)for(var n of e.propertySetIds)i.propertySets.has(n)||i.propertySets.set(n,this.getPropertySet(n));e.children=this.getHierarchyInternal(t,o,i),r.push(e)}}else{const o=s[e];if(void 0!==o){r=Array(o.size);let e=0;for(let s of o){const o={id:s,productId:this.getProductId(s),propertySetIds:[...this.getPropertySetIdsFromEntity(s)]};if(void 0===i.entities||i.entities.has(o.id)||i.entities.set(o.id,this.getEntity(o.id)),void 0===i.products||i.products.has(o.productId)||i.products.set(o.productId,this.getProduct(o.productId)),void 0!==i.propertySets)for(var n of o.propertySetIds)i.propertySets.has(n)||i.propertySets.set(n,this.getPropertySet(n));o.children=this.getHierarchyInternal(t,s,i),r[e++]=o}}}return r}loadProductIndex(){if(void 0===this.productIndex){const t=this.modelEntities.entitiesLength();this.productIndex=new Array(t);for(let t=0,e=this.properties.productBindingsLength();t<e;t++){const e=this.properties.productBindings(t);this.productIndex[e.entityId()]=e.productId()}}return this.productIndex}loadPropertyIndex(){if(void 0===this.propertyIndex){const t=this.modelEntities.entitiesLength(),e=new Map;for(let t=0,i=this.properties.propertySetBindingsLength();t<i;t++){const i=this.properties.propertySetBindings(t);for(let s=0,r=i.entitiesLength();s<r;s++){const r=i.entities(s);e.has(r)?e.get(r).add(t):e.set(r,new Set([t]))}}this.propertyIndex=new Array(t);for(let i=0;i<t;i++)e.has(i)?this.propertyIndex[i]=e.get(i):this.propertyIndex[i]=new Set}return this.propertyIndex}loadHierarchyIndex(t){let e=this.hierarchyIndex.get(t);if(void 0===e){const s=this.modelEntities.entitiesLength();e=new Array(s);for(let s=0,r=this.modelEntities.hierarchiesLength();s<r;s++){const r=this.modelEntities.hierarchies(s);if(r.type()===t){var i=e[r.parentElementId()];void 0===i&&(i=new Set,e[r.parentElementId()]=i),i.add(r.childElementId())}}this.hierarchyIndex.set(t,e)}return e}getSinglePropertyDefinitions(t,e){const i=new Array(t.propertiesLength());for(let s=0,r=t.propertiesLength();s<r;s++){const r=t.properties(s),n=this.properties.propertyNames(r.name()),o=this.getValue(r.type(),e.values(s)),a=r.type();i[s]={name:n,value:o,type:a}}return i}getValue(t,e){switch(t){case Mt.LengthMeasure:return this.properties.lengthMeasures(e);case Mt.AreaMeasure:return this.properties.areaMeasures(e);case Mt.VolumeMeasure:return this.properties.volumeMeasures(e);case Mt.MassMeasure:return this.properties.massMeasures(e);case Mt.AngleMeasure:return this.properties.angleMeasures(e);case Mt.StringValue:return this.properties.stringValues(e);case Mt.IntValue:return e;case Mt.DoubleValue:return this.properties.doubleValues(e);case Mt.DateTime:return this.properties.dateTimeValues(e);case Mt.Logical:case Mt.Boolean:return e}}}const Wi=t=>new Di({data:t.bb.bytes().slice(t.bb_pos,t.bb_pos+16)});class ji{constructor(t){this.expressions=t,this.children=[]}getIds(){return this.expressions[0].entityIds}}class Zi extends ji{constructor(t){super(),this.expressions=t}getIds(){const t=this.expressions.values(),e=t.next().value;if(!e)return new Set;const i=e.entityIds;for(const e of t)for(const t of i)e.entityIds.has(t)||i.delete(t);return i}}class Xi extends ji{constructor(t){super(),this.expressions=t}getIds(){const t=new Set;for(const e of this.expressions)for(const i of e.entityIds)t.add(i);return t}}class $i{constructor({token:t,operation:e,isSelector:i,wrapperOperation:s}){if(this.token=t,this.operations=e?[e]:[],this.isSelector=!!i,this.isOperation=!i,this.isLogical=!!s,this.isSelector){const[e,i]=t.split(".");this.setName=e,this.propertyName=i}this.isLogical&&(this.wrapperOperation=s),this.entityIds=new Set}addOperations(t){this.operations.push(...t)}combineOperations(t){if(!this.wrapperOperation)throw new Error("Error: Trying to combine without combine operation");const e=[];for(const i of t){if(!i.operations)throw new Error("Syntax Error, Expression without operation");e.push(...i.operations)}this.operations=[this.wrapperOperation(e)]}combineExpressions(t){if(this.isSelector)for(const e of t)e.isOperation&&this.addOperations(e.operations);else this.isOperation&&this.isLogical&&this.combineOperations(t)}}function Yi(t){return Object.values(t)[0]instanceof Array?function(t){for(let[e,i]of Object.entries(t)){if(e=e.startsWith("$")?e.toUpperCase():e,!(i instanceof Array))return;switch(e){case"$OR":return new Xi(Ji(i));case"$AND":return new Zi(Ji(i));default:return t}}}(t):new ji(Qi(t))}function Qi(t){const e=[];for(const[s,r]of Object.entries(t)){const t=Ki(s,r);if(r instanceof Array){const e=Ji(r);t.combineExpressions(e)}else if((i=r)instanceof Object&&Object.keys(i).length>0){const e=Qi(r);t.combineExpressions(e)}e.push(t)}var i;return e}function Ji(t){const e=[];for(const i of t)e.push(...Qi(i));return e}function Ki(t,e){switch(t=t.startsWith("$")?t.toUpperCase():t){case"$OR":case"$AND":case"$NOT":return function(t,e){if(e instanceof Array)return new $i({token:t,wrapperOperation:ts(t)});throw new Error("TODO")}(t,e);case"$GT":case"$GTE":case"$EQ":case"$LT":case"$LTE":return function(t,e){if(!isNaN(e)||e instanceof Date)return new $i({token:t,operation:es(t,e)});throw new Error(`Comparison operators cannot be used with ${typeof e}`)}(t,e);case"$REGEX":case"$TEXT":break;default:return function(t,e){const i=(s=e,"string"==typeof s||s instanceof String||!isNaN(s)?function(t){return e=>e===t}(e):void 0);var s;return new $i({token:t,operation:i,isSelector:!0})}(t,e)}}function ts(t){switch(t){case"$OR":return t=>e=>t.reduce((t,i)=>t||i(e),!1);case"$AND":return t=>e=>t.reduce((t,i)=>t&&i(e),!0)}}function es(t,e){switch(t){case"$GT":return t=>t>e;case"$GTE":return t=>t>=e;case"$EQ":return t=>t===e;case"$LT":return t=>t<e;case"$LTE":return t=>t<=e;default:throw new Error(`Missing comparison operator ${t}.`)}}const is=(t,e,i)=>{const s={entityIds:new Set},r=i.find.$hierarchy?function(t){let e={};for(const i of Object.keys(t)){const s=i.toUpperCase(),r=t[i];switch(s){case"$UNIQUEIDENTIFIERS":case"$ENTITYID":e[s]=r instanceof Array?r:[r];break;default:e[s]=r}}return"$AND"in e||(e={$AND:[e]}),e}(i.find.$hierarchy):void 0,n=i.find.$filter?Yi(i.find.$filter):void 0,o=i.find.$product?Yi(i.find.$product):void 0,a=i.find.$entity?Yi(i.find.$entity):void 0,h=i.find.$definition?Yi(i.find.$definition):void 0,c=i.find.$selector?Yi(i.find.$selector):void 0;if(n&&(s.entityIds=t.filterProperties(n)),o&&(s.entityIds=new Set([...t.findProducts(o),...s.entityIds])),a&&(s.entityIds=new Set([...t.filterEntities(a),...s.entityIds])),h&&(s.entityIds=new Set([...e.filterDefinition(t.getAllEntityIds(),h),...s.entityIds])),r&&(s.entityIds=new Set([...t.queryHierarchy(r),...s.entityIds])),n||r||o||a||h||(s.entityIds=t.getAllEntityIds()),i.find.stream){const{streamId:e,length:r}=t.startPropertyStreaming(s.entityIds,c);return i.output={find:{streamId:e,length:r}},i}return s.entityIds||(s.entityIds=new Set),i.output={find:{entityIds:[...s.entityIds]}},i};class ss{constructor(t){this.pickPriorityOffset=2,this.pickPriorityMask=3<<this.pickPriorityOffset,this.state=new Uint8Array(t),this.state.fill(1)}isVisible(t){return this.is(t,1)}isSelected(t){return this.is(t,2)}is(t,e){return!!(this.state[t]&e)}getPickPriority(t){return(this.state[t]&this.pickPriorityMask)>>this.pickPriorityOffset}setVisibility(t,e){if(e)for(let i=0,s=e.length;i<s;i++){const s=this.state[e[i]];this.state[e[i]]=t?1|s:-2&s}else for(let e=0,i=this.state.length;e<i;e++){const i=this.state[e];this.state[e]=t?1|i:-2&i}}resetVisibility(){for(let t=0,e=this.state.length;t<e;t++)this.state[t]=1|this.state[t]}setPickPriority(t,e){const i=t<<this.pickPriorityOffset;if(e)for(let t=0,s=e.length;t<s;t++){const s=this.state[e[t]];this.state[e[t]]=s&~this.pickPriorityMask|i}else for(let t=0,e=this.state.length;t<e;t++){const e=this.state[t];this.state[t]=e&~this.pickPriorityMask|i}}resetPickPriority(){for(let t=0,e=this.state.length;t<e;t++)this.state[t]=this.state[t]&~this.pickPriorityMask}setSelection(t,e){for(let i=0,s=e.length;i<s;i++){const s=this.state[e[i]];this.state[e[i]]=t?2|s:-3&s}}clearSelection(){for(let t=0,e=this.state.length;t<e;t++)this.state[t]=-3&this.state[t]}}class rs{constructor(t=new Float64Array(6),e=0){this.aabb=t,this.offset=e}get MinX(){return this.aabb[this.offset]}get MaxX(){return this.aabb[this.offset+1]}get MinY(){return this.aabb[this.offset+2]}get MaxY(){return this.aabb[this.offset+3]}get MinZ(){return this.aabb[this.offset+4]}get MaxZ(){return this.aabb[this.offset+5]}copy(t){this.aabb[this.offset]=t.MinX,this.aabb[this.offset+1]=t.MaxX,this.aabb[this.offset+2]=t.MinY,this.aabb[this.offset+3]=t.MaxY,this.aabb[this.offset+4]=t.MinZ,this.aabb[this.offset+5]=t.MaxZ}CreateMergedWith(t,e){this.aabb[this.offset]=Math.min(t.MinX,e.MinX),this.aabb[this.offset+1]=Math.max(t.MaxX,e.MaxX),this.aabb[this.offset+2]=Math.min(t.MinY,e.MinY),this.aabb[this.offset+3]=Math.max(t.MaxY,e.MaxY),this.aabb[this.offset+4]=Math.min(t.MinZ,e.MinZ),this.aabb[this.offset+5]=Math.max(t.MaxZ,e.MaxZ)}}class ns{constructor(t,e){this.quantizedAabb=new rs(t,e)}IsDataNode(){return this.widthOrValue>=0}GetQuantizedAabb(){return this.quantizedAabb}GetBranchNodeWidth(){return-this.widthOrValue}GetDataNodeValue(){return this.widthOrValue}SetAsBranch(t,e){this.widthOrValue=-t,this.quantizedAabb.copy(e)}SetBranch(t){this.widthOrValue=-t}SetAsDataValue(t,e){this.widthOrValue=t,this.quantizedAabb.copy(e)}SetDataValue(t){this.widthOrValue=t}TestQuantizedBoxOverlap(t){return!(this.quantizedAabb.MinX>t.MaxX||this.quantizedAabb.MaxX<t.MinX||this.quantizedAabb.MinY>t.MaxY||this.quantizedAabb.MaxY<t.MinY||this.quantizedAabb.MinZ>t.MaxZ||this.quantizedAabb.MaxZ<t.MinZ)}}class os{constructor(t,e){this.index=t,this.Data=e}}class as{constructor(t,e){this.boundingBoxes=t,this.InPlaceSplitX=(()=>{const t=new d,e=new D;return(i,s,r,n)=>{let o=s;for(let a=s;a<r;a++)this.getBox3FromArray(this.boundingBoxes,e,i[a].index),e.getCenter(t).x>n&&(this.SwapInputBoxes(i,a,o),o++);return o}})(),this.InPlaceSplitY=(()=>{const t=new d,e=new D;return(i,s,r,n)=>{let o=s;for(let a=s;a<r;a++)this.getBox3FromArray(this.boundingBoxes,e,i[a].index),e.getCenter(t).y>n&&(this.SwapInputBoxes(i,a,o),o++);return o}})(),this.InPlaceSplitZ=(()=>{const t=new d,e=new D;return(i,s,r,n)=>{let o=s;for(let a=s;a<r;a++)this.getBox3FromArray(this.boundingBoxes,e,i[a].index),e.getCenter(t).z>n&&(this.SwapInputBoxes(i,a,o),o++);return o}})(),this.CalculateMeanOfCenterPoints=(()=>{const t=new d,e=new D;return(i,s,r,n)=>{this.getBox3FromArray(this.boundingBoxes,e,i[s].index),e.getCenter(n);for(let o=s+1;o<r;o++)this.getBox3FromArray(this.boundingBoxes,e,i[o].index),n.add(e.getCenter(t));const o=r-s;return n.divideScalar(o)}})(),this.MergeBoxes=(()=>{const t=new D;return(e,i,s)=>{this.getBox3FromArray(this.boundingBoxes,t,e[i].index);const r=t.clone();for(let n=i+1;n<s;n++)this.getBox3FromArray(this.boundingBoxes,t,e[n].index),r.union(t);return r}})(),this.Quantize=(()=>{const t=new d,e=new d;return(i,s)=>{t.subVectors(i.min,this.globalAabb.min),e.subVectors(i.max,this.globalAabb.min),s.aabb[s.offset]=t.x,s.aabb[s.offset+1]=e.x,s.aabb[s.offset+2]=t.y,s.aabb[s.offset+3]=e.y,s.aabb[s.offset+4]=t.z,s.aabb[s.offset+5]=e.z}})(),this.BuildSubTree=(()=>{const t=new D;return(e,i,s,r,n,o)=>{if(n-r==1)return this.getBox3FromArray(this.boundingBoxes,t,s[r].index),this.Quantize(t,o),this.CreateDataNode(i,o,s[r].Data),1;if(n-r==2){const e=this.quantizedAabbTreeNodes[i+1].GetQuantizedAabb();this.getBox3FromArray(this.boundingBoxes,t,s[r].index),this.Quantize(t,e),this.setAsDataNode(i+1,s[r].Data);const n=this.quantizedAabbTreeNodes[i+2].GetQuantizedAabb();return this.getBox3FromArray(this.boundingBoxes,t,s[r+1].index),this.Quantize(t,n),this.setAsDataNode(i+2,s[r+1].Data),o.CreateMergedWith(e,n),this.CreateBranchNode(i,o,3),3}const a=this.SplitByOneAxis(s,r,n),h=this.BuildSubTree(e+1,i+1,s,r,a,this.leftBoundingBoxes[e]),c=this.BuildSubTree(e+1,i+h+1,s,a,n,this.rightBoundingBoxes[e]);o.CreateMergedWith(this.leftBoundingBoxes[e],this.rightBoundingBoxes[e]);const b=h+c+1;return this.CreateBranchNode(i,o,b),b}})(),this.SplitByOneAxis=(()=>{const t=new d,e=new d,i=new d,s=new D;return(r,n,o)=>{this.CalculateMeanOfCenterPoints(r,n,o,i),t.set(0,0,0);for(let a=n;a<o;a++){this.getBox3FromArray(this.boundingBoxes,s,r[a].index),s.getCenter(e).sub(i);const n=e.multiply(e);t.add(n)}let a;a=t.x>t.y?t.x>t.z?this.InPlaceSplitX(r,n,o,i.x):this.InPlaceSplitZ(r,n,o,i.z):t.y>t.z?this.InPlaceSplitY(r,n,o,i.y):this.InPlaceSplitZ(r,n,o,i.z);const h=(o-n)/3;return a<=n+h?a=(n+o)/2:a>=o-1-h&&(a=(n+o)/2),Math.round(a)}})(),this.globalAabb=this.MergeBoxes(e,0,e.length);const i=2*e.length-1;this.quantizedAabbTreeNodes=[];const s=new Float64Array(6*i);for(let t=0;t<i;t++)this.quantizedAabbTreeNodes.push(new ns(s,6*t));const r=new rs;this.leftBoundingBoxes=[],this.rightBoundingBoxes=[];for(let t=0;t<32;t++)this.leftBoundingBoxes.push(new rs),this.rightBoundingBoxes.push(new rs);this.BuildSubTree(0,0,e,0,e.length,r)}DataNodeCount(){return(this.quantizedAabbTreeNodes.length+1)/2}BoxQuery(t){const e=[],i=new rs;this.Quantize(t,i);let s=0;for(;s<this.quantizedAabbTreeNodes.length;){const t=this.TestQuantizedBoxOverlap(s,i),r=this.IsDataNode(s);r&&t?(e.push(this.GetNodeDataValue(s)),s++):r||t?s++:s+=this.GetBranchNodeWidth(s)}return e}QueryRay(t,e){const i=e&&e.length>0?t=>Ze.planesIntersectBox(e,t):()=>!0;return this.Query(e=>t.intersectsBox(e),()=>!1,i)}QueryFrustum(t,e){const i=[...t.planes];e&&i.push(...e);return this.Query(t=>Ze.planesIntersectBox(i,t),t=>Ze.planesContainBox(i,t),()=>!0)}Query(t,e,i){const s=[];let r=0;const n=this.quantizedAabbTreeNodes.length;for(;r<n;){const n=this.GetAabb(r),o=this.IsDataNode(r),a=e(n),h=a||t(n);if(o&&h&&i(n)&&s.push(this.GetNodeDataValue(r)),h||o){if(r++,a&&!o){const t=r+this.GetBranchNodeWidth(r);for(;r<t;r++)this.IsDataNode(r)&&i(n)&&s.push(this.GetNodeDataValue(r))}}else r+=this.GetBranchNodeWidth(r)}return s}CalculateAverageNodeDepth(){let t=0;const e=[];for(let i=0;i<this.quantizedAabbTreeNodes.length;i++){for(;0!==e.length&&e[e.length-1]===i;)e.pop();if(this.IsDataNode(i))t+=e.length;else{const t=this.GetBranchNodeWidth(i);e.push(i+t)}}return t/this.DataNodeCount()}getBox3FromArray(t,e,i){e.min.fromArray(t,6*i),e.max.fromArray(t,6*i+3)}SwapInputBoxes(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}TestQuantizedBoxOverlap(t,e){return this.quantizedAabbTreeNodes[t].TestQuantizedBoxOverlap(e)}IsDataNode(t){return this.quantizedAabbTreeNodes[t].IsDataNode()}GetAabb(t){const e=this.quantizedAabbTreeNodes[t].GetQuantizedAabb();return this.Unquantize(e)}CreateDataNode(t,e,i){this.quantizedAabbTreeNodes[t].SetAsDataValue(i,e)}setAsDataNode(t,e){this.quantizedAabbTreeNodes[t].SetDataValue(e)}CreateBranchNode(t,e,i){this.quantizedAabbTreeNodes[t].SetAsBranch(i,e)}GetNodeDataValue(t){return this.quantizedAabbTreeNodes[t].GetDataNodeValue()}GetBranchNodeWidth(t){return this.quantizedAabbTreeNodes[t].GetBranchNodeWidth()}Unquantize(t){return new D(new d(t.MinX+this.globalAabb.min.x,t.MinY+this.globalAabb.min.y,t.MinZ+this.globalAabb.min.z),new d(t.MaxX+this.globalAabb.min.x,t.MaxY+this.globalAabb.min.y,t.MaxZ+this.globalAabb.min.z))}}var hs=r.Technology.TrimBim.Fbs;class cs{constructor(t,e,i,s,r,n){this._boundingBoxes=e,this._instanceManager=i,this._geometryManager=s,this._layerManager=r,this._state=n,this.instance=new hs.GeometryInstance,this.definition=new hs.GeometryDefinition,this.pickGeometry=(()=>{const t=new it,e=new X,i=new bt,s=new bt;return(r,n,o,a,h,c,b)=>{this._instanceManager.getTransform(o,i),s.getInverse(i),t.copy(a).applyMatrix4(s),Ze.transformFrustum(h,s,e);let l=this._geometryManager.pick(n,c,t,e);if(l&&b&&b.length>0){const t=this.transformClipPlanes(b,s);l=l.filter(e=>Ze.insideNonIntersectingPlanes(e.point,t))}const d=[];return l&&l.forEach(t=>{const e=t;e.point.applyMatrix4(i),e.normal&&e.normal.transformDirection(i),e.instanceId=r,e.entityId=this._geometryManager.getEntityId(e.instanceId),e.pickPriority=this._state.getPickPriority(e.entityId),e.distance=a.origin.distanceTo(e.point),e.snapType=c,e.snapLineStart&&e.snapLineStart.applyMatrix4(i),e.snapLineEnd&&e.snapLineEnd.applyMatrix4(i),d.push(e)}),d}})(),this._geometry=t.geometry();const o=[];for(let t=0;t<this._boundingBoxes.length/6;t++)o.push(new os(t,t));this.searchTree=new as(this._boundingBoxes,o),o.length=0}filterPickableInstances(t){return t.filter(t=>{const e=this._geometryManager.getEntityId(t);return this._state.isVisible(e)&&2!==this._state.getPickPriority(e)&&this._layerManager.isVisibleByLayer(t)})}frustumPick(t,e){return this.filterPickableInstances(this.searchTree.QueryFrustum(t,e)).map(t=>this._geometryManager.getEntityId(t))}pick(t,e,i){const s=this.pickBoundingBoxes(e,i);if(0===s.length)return;const r=this.pickBoundingBoxes(t,i),n=[];for(const o of s){this._geometry.instances(o,this.instance),this._geometry.definitions(this.instance.definitionId(),this.definition),this._geometryManager.getIsMesh(this.definition.type())&&!r.includes(o)||n.push(...this.pickGeometry(o,this.definition,this.instance,t,e,void 0,i))}if(0===n.length)return;const o=n.filter(t=>1===this._state.getPickPriority(t.entityId));return o.length>0?this.findClosestHit(o):this.findClosestHit(n)}pickSnapped(t,e,i,s){const r=[],n=this.pick(t,e,s);if(!n)return this.pickSnappedEdges(t,e,i,s);this._geometry.instances(n.instanceId,this.instance),this._geometry.definitions(this.instance.definitionId(),this.definition);for(const o of i)r.push(...this.pickGeometry(n.instanceId,this.definition,this.instance,t,e,o,s));return r}pickSnappedEdges(t,e,i,s){const r=[];if(i.includes(1)||i.includes(2)){const n=this.pickBoundingBoxes(e,s);for(const o of n){this._geometry.instances(o,this.instance),this._geometry.definitions(this.instance.definitionId(),this.definition);for(const n of i)0!==n&&r.push(...this.pickGeometry(o,this.definition,this.instance,t,e,n,s))}}return r}pickBoundingBoxes(t,e){const i=t instanceof it?this.searchTree.QueryRay(t,e):this.searchTree.QueryFrustum(t,e);return this.filterPickableInstances(i)}findClosestHit(t){return t.reduce((t,e)=>t.distance<e.distance?t:e)}transformClipPlanes(t,e){return t?t.map(t=>(new g).copy(t).applyMatrix4(e)):[]}}var bs=r.Technology.TrimBim.Fbs;class ls{constructor(t){this.model=t,this.instance=new bs.GeometryInstance,this.geometry=t.geometry(),this.entities=t.entities(),this.layerVisibilities=new Array(this.geometry.layersLength())}getLayers(){const t=[];for(let e=0;e<this.geometry.layersLength();e++)t.push(this.geometry.layers(e));return t}findLayersByEntities(t){const e=new Set;for(let i=0;i<this.geometry.instancesLength();i++)this.geometry.instances(i,this.instance),t.includes(this.instance.entityId())&&e.add(this.geometry.layers(this.instance.layerId()));return Array.from(e)}getLayerIndex(t){for(let e=0;e<this.geometry.layersLength();e++)if(this.geometry.layers(e)===t)return e}getLayerVisibility(t){return this.layerVisibilities[this.getLayerIndex(t)]}setLayerVisibility(t,e){this.layerVisibilities[this.getLayerIndex(t)]=e}isVisibleByLayer(t){const e=this.layerVisibilities[this.geometry.instances(t,this.instance).layerId()];return!0===e||void 0===e}getLayerInstances(t){const e=this.getLayerIndex(t),i=[];for(let t=0;t<this.geometry.instancesLength();t++)this.geometry.instances(t,this.instance).layerId()===e&&i.push(t);return i}}var ds=r.Technology.TrimBim.Fbs;class us{constructor(t,e){this.modelId=t;const s=new n.ByteBuffer(new Uint8Array(e)),r=ds.Model.getRootAsModel(s);this.model=r,this.state=new ss(r.entities().entitiesLength()),this.instanceManager=new vi(r),this.lodManager=new Ni;const o=r.geometry();this.geometryManager=new pi(this.modelId,o,this.instanceManager,this.lodManager),this.layerManager=new ls(r),this.entityManager=new qi(r.entities(),r.properties()),this.materialManager=new mi(this.modelId),this.materialManager.addModelTextures(r);const a=this.materialManager.addModelMaterials(r);this.clusterManager=new hi(this.modelId,r,this.instanceManager,this.geometryManager,this.lodManager,this.layerManager,this.state,a),this.modelStateManager=new i(this.modelId,this.materialManager,this.clusterManager,this.instanceManager,this.lodManager,this.layerManager,this.state,this.geometryManager),this.modelBuilderWorker=new xi(this.modelId,this.clusterManager,this.instanceManager,this.geometryManager,this.lodManager,r),this.pickHandler=new cs(this.model,this.instanceManager.boundingBoxes,this.instanceManager,this.geometryManager,this.layerManager,this.state)}pick(t,e,i){return this.pickHandler.pick(t,e,i)}pickSnapped(t,e,i,s){return this.pickHandler.pickSnapped(t,e,i,s)}getHierarchyTree(t,e){return this.entityManager.getHierarchyTree(t,e)}frustumPick(t,e){return this.pickHandler.frustumPick(t,e)}setSelection(t){this.modelStateManager.setSelection(t)}setHovered(t){this.modelStateManager.setHovered(t)}setMaterial(t,e){this.modelStateManager.setMaterial(t,e),this.modelBuilderWorker.forceUpdate()}getMaterials(t){return this.modelStateManager.getMaterials(t)}setVisibility(t,e){this.modelStateManager.setVisibility(t,e),this.modelBuilderWorker.forceUpdate()}setPickPriority(t,e){this.modelStateManager.setPickPriority(t,e)}getEntities(t){return this.entityManager.getEntitiesFromIds(t)}getLayers(){return this.layerManager.getLayers()}findLayersByEntities(t){return this.layerManager.findLayersByEntities(t)}getLayerVisibility(t){return this.layerManager.getLayerVisibility(t)}setLayerVisibility(t,e){this.modelStateManager.setLayerVisibility(t,e),this.modelBuilderWorker.forceUpdate()}getEntityParentId(t,e){if(void 0===e)return t;const i=this.entityManager.getParents([t],e)[0];return void 0!==i?i:t}getEntity(t){return this.entityManager.getEntity(t)}getEntityProduct(t){const e=this.entityManager.getProductId(t);return void 0!==e?this.entityManager.getProduct(e):void 0}getEntityProperties(t){const e=this.entityManager.getPropertySetIdsFromEntity(t),i=[];for(const t of e)i.push(this.entityManager.getPropertySet(t));return i}getHierarchy(t,e){return this.entityManager.getHierarchy(t,e)}setCamera(t,e){this.modelBuilderWorker.buildGeometryForCamera(t,e)}getBoundingBox(){return this.instanceManager.worldBoundingbox}getEntitiesBoundingBox(t){const e=new D;return this.instanceManager.getAABBFromIds(t,e),e}resetMaterial(t){this.modelStateManager.resetMaterials(t),this.modelBuilderWorker.forceUpdate()}clearSelection(){this.modelStateManager.clearSelection()}resetVisibility(){this.modelStateManager.resetVisibility(),this.modelBuilderWorker.forceUpdate()}resetPickPriority(){this.modelStateManager.resetPickPriority()}getPropertySetNames(){return this.entityManager.getPropertySetNames()}getPropertyDefinitions(t){return this.entityManager.getPropertyDefinitions(t)}getPropertyValues(t){return this.entityManager.getPropertyValues(t)}getEntitiesByFilter(t){const e=Yi(t);return[...this.entityManager.filterProperties(e)]}guidsToEntityIds(t){return this.entityManager.getEntityIdsFromGuids(t)}query(t){t.find&&is(this.entityManager,this.instanceManager,t)}queryPage(t,e,i){return this.entityManager.getPropertyStreamPage(t,e,i)}getEntityIdsByState(t,e){const i=[];for(const s of this.instanceManager.entityToInstance.keys())void 0!==t&&this.state.isVisible(s)!==t||void 0!==e&&this.state.getPickPriority(s)!==e||i.push(s);return i}aggregateProperties(t,e){for(const i of t){const t=this.getEntityProperties(i);for(const i of e)this.aggregate(i,t)}}getProperty(t,e,i){const s=t.find(t=>t.name===e);return s?s.properties.find(t=>t.name===i):void 0}aggregate(t,e){if(1===t.operator){if(null===t.value)return;const i=this.getProperty(e,t.propertySetName,t.propertyName);i?void 0===t.value?(t.value=i.value,t.type=i.type):t.value!==i.value&&(t.value=null):t.value=null}else if(0===t.operator){const i=this.getProperty(e,t.propertySetName,t.propertyName);i&&(void 0===t.value&&(t.value=0,t.type=i.type),t.value+="string"==typeof i.value?Number.parseFloat(i.value):i.value)}}dispose(){this.clusterManager.dispose(),this.modelBuilderWorker.dispose()}}const _s=new class{constructor(){this.models=new Map,this.it=this,this.it[4]=t=>{const e=new us(t.modelId,t.buffer);this.models.set(t.modelId,e),t.buffer=void 0,t.boundingBox=e.getBoundingBox()},this.it[5]=t=>{this.models.get(t.modelId).dispose(),this.models.delete(t.modelId)},this.it[9]=t=>{if(t.snapTypes)t.hits=this.models.get(t.modelId).pickSnapped(this.restoreRay(t.ray),this.restoreFrustum(t.frustum),t.snapTypes,this.restorePlanes(t.clipPlanes));else if(t.ray){const e=this.models.get(t.modelId).pick(this.restoreRay(t.ray),this.restoreFrustum(t.frustum),this.restorePlanes(t.clipPlanes));e&&(t.hits=[e])}else t.childrenEntityIds=this.models.get(t.modelId).frustumPick(this.restoreFrustum(t.frustum),this.restorePlanes(t.clipPlanes))},this.it[20]=t=>{t.entities=this.models.get(t.modelId).getEntities(t.entityIds),t.entityIds=void 0},this.it[21]=t=>{const e=this.models.get(t.modelId),i=e.getEntityParentId(t.id,t.hierarchyType);t.entity=e.getEntity(i),t.product=e.getEntityProduct(t.id),t.properties=e.getEntityProperties(i)},this.it[18]=t=>{t.hierarchy=this.models.get(t.modelId).getHierarchy(t.hierarchyType,t.options)},this.it[19]=t=>{const e=this.models.get(t.modelId).getHierarchyTree(t.entityIds,t.hierarchyType);t.parentIds=e.parentIds,t.childrenIds=e.childrenIds,t.entityIds=void 0},this.it[7]=t=>{this.models.get(t.modelId).setCamera(this.restoreFrustum(t.frustum),this.restoreVector(t.position))},this.it[8]=t=>{t.boundingBoxes=[];for(const e of t.entityIdGroups){const i=this.models.get(t.modelId).getEntitiesBoundingBox(e);t.boundingBoxes.push(i)}t.entityIdGroups=void 0},this.it[13]=t=>{t.names=this.models.get(t.modelId).getPropertySetNames()},this.it[14]=t=>{t.properties=this.models.get(t.modelId).getPropertyDefinitions(t.setName)},this.it[16]=t=>{t.properties=this.models.get(t.modelId).getPropertyValues(t.propertyName)},this.it[15]=t=>{t.entities=this.models.get(t.modelId).getEntitiesByFilter(t.conditions)},this.it[17]=t=>{t.entityIds=this.models.get(t.modelId).guidsToEntityIds(t.guids)},this.it[10]=t=>{this.models.get(t.modelId).query(t.query)},this.it[11]=t=>{t.data=this.models.get(t.modelId).queryPage(t.streamId,t.page,t.pageSize)},this.it[12]=t=>{t.entityIds=this.models.get(t.modelId).getEntityIdsByState(t.visible,t.pickPriority)},this.it[22]=t=>{this.models.get(t.modelId).aggregateProperties(t.entityIds,t.aggregations),t.entityIds=void 0},this.it[6]=t=>{t.materials=this.models.get(t.modelId).getMaterials(t.entityIds),t.entityIds=void 0},this.it[0]=t=>{const e=this.models.get(t.modelId);t.result=e[t.methodName].apply(e,t.args),t.args=void 0}}restoreVector(t){return(new d).copy(t)}restorePlanes(t){return t?t.map(t=>new g(this.restoreVector(t.normal),t.constant)):t}restoreFrustum(t){if(!t)return;const e=this.restorePlanes(t.planes);return new X(e[0],e[1],e[2],e[3],e[4],e[5])}restoreRay(t){return new it(this.restoreVector(t.origin),this.restoreVector(t.direction))}onMessage(t){if(!t.data)return;const e=t.data;try{this.it[e.type](e),postMessage(e)}catch(t){console.error(t),e.error=t.toString(),postMessage(e)}}};self.onmessage=t=>_s.onMessage(t)}();
//# sourceMappingURL=threadworker.min.js.map
