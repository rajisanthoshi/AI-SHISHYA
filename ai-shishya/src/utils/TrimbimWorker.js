var Worker=function(t){"use strict";var e,i={};i.SIZEOF_SHORT=2,i.SIZEOF_INT=4,i.FILE_IDENTIFIER_LENGTH=4,i.SIZE_PREFIX_LENGTH=4,i.Encoding={UTF8_BYTES:1,UTF16_STRING:2},i.int32=new Int32Array(2),i.float32=new Float32Array(i.int32.buffer),i.float64=new Float64Array(i.int32.buffer),i.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],i.Long=function(t,e){this.low=0|t,this.high=0|e},i.Long.create=function(t,e){return 0==t&&0==e?i.Long.ZERO:new i.Long(t,e)},i.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},i.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},i.Long.ZERO=new i.Long(0,0),i.Builder=function(t){if(t)e=t;else var e=1024;this.bb=i.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},i.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},i.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},i.Builder.prototype.dataBuffer=function(){return this.bb},i.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},i.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var s=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<s+t+e;){var r=this.bb.capacity();this.bb=i.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(s)},i.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},i.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},i.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},i.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},i.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},i.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},i.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},i.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},i.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},i.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},i.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},i.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},i.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},i.Builder.prototype.addFieldInt8=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt8(e),this.slot(t))},i.Builder.prototype.addFieldInt16=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt16(e),this.slot(t))},i.Builder.prototype.addFieldInt32=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt32(e),this.slot(t))},i.Builder.prototype.addFieldInt64=function(t,e,i){!this.force_defaults&&e.equals(i)||(this.addInt64(e),this.slot(t))},i.Builder.prototype.addFieldFloat32=function(t,e,i){(this.force_defaults||e!=i)&&(this.addFloat32(e),this.slot(t))},i.Builder.prototype.addFieldFloat64=function(t,e,i){(this.force_defaults||e!=i)&&(this.addFloat64(e),this.slot(t))},i.Builder.prototype.addFieldOffset=function(t,e,i){(this.force_defaults||e!=i)&&(this.addOffset(e),this.slot(t))},i.Builder.prototype.addFieldStruct=function(t,e,i){e!=i&&(this.nested(e),this.slot(t))},i.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},i.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},i.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},i.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},i.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var s=e<<1,r=i.ByteBuffer.allocate(s);return r.setPosition(s-e),r.bytes().set(t.bytes(),s-e),r},i.Builder.prototype.addOffset=function(t){this.prep(i.SIZEOF_INT,0),this.writeInt32(this.offset()-t+i.SIZEOF_INT)},i.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},i.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var s=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var r=(s+2)*i.SIZEOF_SHORT;this.addInt16(r);var n=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var a=this.bb.capacity()-this.vtables[e];if(r==this.bb.readInt16(a)){for(var h=i.SIZEOF_SHORT;h<r;h+=i.SIZEOF_SHORT)if(this.bb.readInt16(o+h)!=this.bb.readInt16(a+h))continue t;n=this.vtables[e];break}}return n?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,n-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},i.Builder.prototype.finish=function(t,e,s){var r=s?i.SIZE_PREFIX_LENGTH:0;if(e){var n=e;if(this.prep(this.minalign,i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH+r),n.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var o=i.FILE_IDENTIFIER_LENGTH-1;o>=0;o--)this.writeInt8(n.charCodeAt(o))}this.prep(this.minalign,i.SIZEOF_INT+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},i.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},i.Builder.prototype.requiredField=function(t,e){var i=this.bb.capacity()-t,s=i-this.bb.readInt32(i);if(!(0!=this.bb.readInt16(s+e)))throw new Error("FlatBuffers: field "+e+" must be set")},i.Builder.prototype.startVector=function(t,e,s){this.notNested(),this.vector_num_elems=e,this.prep(i.SIZEOF_INT,t*e),this.prep(s,t*e)},i.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},i.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var i=0;i<t.length;){var s,r=t.charCodeAt(i++);if(r<55296||r>=56320)s=r;else s=(r<<10)+t.charCodeAt(i++)+-56613888;s<128?e.push(s):(s<2048?e.push(s>>6&31|192):(s<65536?e.push(s>>12&15|224):e.push(s>>18&7|240,s>>12&63|128),e.push(s>>6&63|128)),e.push(63&s|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);i=0;for(var n=this.space,o=this.bb.bytes();i<e.length;i++)o[n++]=e[i];return this.endVector()},i.Builder.prototype.createLong=function(t,e){return i.Long.create(t,e)},i.ByteBuffer=function(t){this.bytes_=t,this.position_=0},i.ByteBuffer.allocate=function(t){return new i.ByteBuffer(new Uint8Array(t))},i.ByteBuffer.prototype.clear=function(){this.position_=0},i.ByteBuffer.prototype.bytes=function(){return this.bytes_},i.ByteBuffer.prototype.position=function(){return this.position_},i.ByteBuffer.prototype.setPosition=function(t){this.position_=t},i.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},i.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},i.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},i.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},i.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},i.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},i.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},i.ByteBuffer.prototype.readInt64=function(t){return new i.Long(this.readInt32(t),this.readInt32(t+4))},i.ByteBuffer.prototype.readUint64=function(t){return new i.Long(this.readUint32(t),this.readUint32(t+4))},i.ByteBuffer.prototype.readFloat32=function(t){return i.int32[0]=this.readInt32(t),i.float32[0]},i.ByteBuffer.prototype.readFloat64=function(t){return i.int32[i.isLittleEndian?0:1]=this.readInt32(t),i.int32[i.isLittleEndian?1:0]=this.readInt32(t+4),i.float64[0]},i.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},i.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},i.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},i.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},i.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},i.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},i.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},i.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},i.ByteBuffer.prototype.writeFloat32=function(t,e){i.float32[0]=e,this.writeInt32(t,i.int32[0])},i.ByteBuffer.prototype.writeFloat64=function(t,e){i.float64[0]=e,this.writeInt32(t,i.int32[i.isLittleEndian?0:1]),this.writeInt32(t+4,i.int32[i.isLittleEndian?1:0])},i.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<i.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+i.SIZEOF_INT+e));return t},i.ByteBuffer.prototype.__offset=function(t,e){var i=t-this.readInt32(t);return e<this.readInt16(i)?this.readInt16(i+e):0},i.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},i.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var s=this.readInt32(t),r="",n=0;if(t+=i.SIZEOF_INT,e===i.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+s);for(;n<s;){var o,a=this.readUint8(t+n++);if(a<192)o=a;else{var h=this.readUint8(t+n++);if(a<224)o=(31&a)<<6|63&h;else{var b=this.readUint8(t+n++);if(a<240)o=(15&a)<<12|(63&h)<<6|63&b;else o=(7&a)<<18|(63&h)<<12|(63&b)<<6|63&this.readUint8(t+n++)}}o<65536?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296+(o>>10),56320+(1023&o)))}return r},i.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},i.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+i.SIZEOF_INT},i.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},i.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var e=0;e<i.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+i.SIZEOF_INT+e))return!1;return!0},i.ByteBuffer.prototype.createLong=function(t,e){return i.Long.create(t,e)},function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.SegmentType||(t.SegmentType={}))[e.LineSegment=0]="LineSegment",e[e.PolyLine=1]="PolyLine",e[e.Arc=2]="Arc"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.HorizontalSegmentType||(t.HorizontalSegmentType={}))[e.Invalid=0]="Invalid",e[e.LineSegment=1]="LineSegment",e[e.CircularArcSegment=2]="CircularArcSegment",e[e.ClothoidalArcSegment=3]="ClothoidalArcSegment",e[e.TransientCurveSegment=4]="TransientCurveSegment"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.VerticalSegmentType||(t.VerticalSegmentType={}))[e.Invalid=0]="Invalid",e[e.LineSegment=1]="LineSegment",e[e.CircularArcSegment=2]="CircularArcSegment",e[e.ParabolicArcSegment=3]="ParabolicArcSegment"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.HorizontalTransitionCurveType||(t.HorizontalTransitionCurveType={}))[e.Invalid=0]="Invalid",e[e.BiquadraticParabola=1]="BiquadraticParabola",e[e.BlossCurve=2]="BlossCurve",e[e.ClothoidCurve=3]="ClothoidCurve",e[e.CosineCurve=4]="CosineCurve",e[e.CubicParabola=5]="CubicParabola",e[e.SineCurve=6]="SineCurve"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.OwnerHistoryState||(t.OwnerHistoryState={}))[e.Undefined=0]="Undefined",e[e.ReadWrite=1]="ReadWrite",e[e.ReadOnly=2]="ReadOnly",e[e.Locked=3]="Locked",e[e.ReadWriteLocked=4]="ReadWriteLocked",e[e.ReadOnlyLocked=5]="ReadOnlyLocked"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.OwnerHistoryChangeAction||(t.OwnerHistoryChangeAction={}))[e.NoChange=0]="NoChange",e[e.Modified=1]="Modified",e[e.Added=2]="Added",e[e.Deleted=3]="Deleted"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){!function(t){t[t.LengthMeasure=0]="LengthMeasure",t[t.AreaMeasure=1]="AreaMeasure",t[t.VolumeMeasure=2]="VolumeMeasure",t[t.MassMeasure=3]="MassMeasure",t[t.AngleMeasure=4]="AngleMeasure",t[t.StringValue=5]="StringValue",t[t.IntValue=6]="IntValue",t[t.DoubleValue=7]="DoubleValue",t[t.DateTime=8]="DateTime",t[t.Logical=9]="Logical",t[t.Boolean=10]="Boolean"}(t.PropertyType||(t.PropertyType={}))}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.Logical||(t.Logical={}))[e.False=0]="False",e[e.True=1]="True",e[e.Unknown=2]="Unknown"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.Sidedness||(t.Sidedness={}))[e.Single=0]="Single",e[e.Double=1]="Double",e[e.FrontFace=2]="FrontFace",e[e.BackFace=3]="BackFace"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.LineStyle||(t.LineStyle={}))[e.Normal=0]="Normal",e[e.Border=1]="Border",e[e.Center=2]="Center",e[e.DashDot=3]="DashDot",e[e.Dashed=4]="Dashed",e[e.Divide=5]="Divide",e[e.Dot=6]="Dot",e[e.Hidden=7]="Hidden",e[e.ISO02W100=8]="ISO02W100",e[e.ISO03W100=9]="ISO03W100",e[e.ISO04W100=10]="ISO04W100",e[e.ISO05W100=11]="ISO05W100",e[e.ISO06W100=12]="ISO06W100",e[e.ISO07W100=13]="ISO07W100",e[e.ISO08W100=14]="ISO08W100",e[e.ISO09W100=15]="ISO09W100",e[e.ISO10W100=16]="ISO10W100",e[e.ISO11W100=17]="ISO11W100",e[e.ISO12W100=18]="ISO12W100",e[e.ISO13W100=19]="ISO13W100",e[e.ISO14W100=20]="ISO14W100",e[e.ISO15W100=21]="ISO15W100"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){!function(t){t[t.Guid=0]="Guid",t[t.String=1]="String",t[t.SpatialHash=2]="SpatialHash",t[t.DwgHandle=3]="DwgHandle",t[t.None=4]="None"}(t.IdentifierType||(t.IdentifierType={}))}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.GeometryType||(t.GeometryType={}))[e.None=0]="None",e[e.BRep=1]="BRep",e[e.TriangleMesh=2]="TriangleMesh",e[e.TriangleMesh8=3]="TriangleMesh8",e[e.SweptDiskSolid=4]="SweptDiskSolid",e[e.GraphicsContainer=5]="GraphicsContainer",e[e.BRepWithUV=6]="BRepWithUV",e[e.BRepWithNormals=7]="BRepWithNormals",e[e.AlignmentCurve=8]="AlignmentCurve",e[e.GridLineContainer=9]="GridLineContainer",e[e.TexturedTriangleMesh=10]="TexturedTriangleMesh",e[e.TexturedTriangleMesh8=11]="TexturedTriangleMesh8",e[e.CoordinateGeometryPoint=12]="CoordinateGeometryPoint",e[e.BillboardText=13]="BillboardText",e[e.Billboard=14]="Billboard",e[e.TexturedBillboard=15]="TexturedBillboard",e[e.Bolt=16]="Bolt"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.TextureType||(t.TextureType={}))[e.None=0]="None",e[e.Png=1]="Png",e[e.JPeg=2]="JPeg"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.LayoutType||(t.LayoutType={}))[e.Invalid=0]="Invalid",e[e.LeftToRight=1]="LeftToRight",e[e.RightToLeft=2]="RightToLeft",e[e.Vertical=3]="Vertical"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.AlignmentType||(t.AlignmentType={}))[e.Invalid=0]="Invalid",e[e.LeftTop=1]="LeftTop",e[e.LeftCenter=2]="LeftCenter",e[e.LeftBottom=3]="LeftBottom",e[e.CenterTop=4]="CenterTop",e[e.CenterCenter=5]="CenterCenter",e[e.CenterBottom=6]="CenterBottom",e[e.RightTop=7]="RightTop",e[e.RightCenter=8]="RightCenter",e[e.RightBottom=9]="RightBottom",e[e.LeftBaseLine=10]="LeftBaseLine",e[e.CenterBaseLine=11]="CenterBaseLine",e[e.RightBaseLine=12]="RightBaseLine",e[e.LeftBottomBaseLine=13]="LeftBottomBaseLine",e[e.CenterBottomBaseLine=14]="CenterBottomBaseLine",e[e.RightBottomBaseLine=15]="RightBottomBaseLine"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.BoltType||(t.BoltType={}))[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Round=2]="Round",e[e.Countersunk=3]="Countersunk",e[e.Stud=4]="Stud"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){var e;(e=t.HierarchyType||(t.HierarchyType={}))[e.Unknown=0]="Unknown",e[e.SpatialHierarchy=1]="SpatialHierarchy",e[e.SpatialContainment=2]="SpatialContainment",e[e.Containment=3]="Containment",e[e.ElementAssembly=4]="ElementAssembly",e[e.Group=5]="Group",e[e.System=6]="System",e[e.Zone=7]="Zone"}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.Vec3f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}x(){return this.bb.readFloat32(this.bb_pos)}mutate_x(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}y(){return this.bb.readFloat32(this.bb_pos+4)}mutate_y(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}z(){return this.bb.readFloat32(this.bb_pos+8)}mutate_z(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createVec3f(t,e,i,s){return t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.Vec2d=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}x(){return this.bb.readFloat64(this.bb_pos)}mutate_x(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}y(){return this.bb.readFloat64(this.bb_pos+8)}mutate_y(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static createVec2d(t,e,i){return t.prep(8,16),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.Vec3d=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}x(){return this.bb.readFloat64(this.bb_pos)}mutate_x(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}y(){return this.bb.readFloat64(this.bb_pos+8)}mutate_y(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}z(){return this.bb.readFloat64(this.bb_pos+16)}mutate_z(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static createVec3d(t,e,i,s){return t.prep(8,24),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.AABB3f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}min(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}max(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+12,this.bb)}static createAABB3f(t,e,i,s,r,n,o){return t.prep(4,24),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.Placement3=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}origin(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos,this.bb)}xAxis(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+24,this.bb)}yAxis(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+36,this.bb)}static createPlacement3(t,e,i,s,r,n,o,a,h,b){return t.prep(8,48),t.prep(4,12),t.writeFloat32(b),t.writeFloat32(h),t.writeFloat32(a),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(8,24),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.Line3f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}start(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}end(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+12,this.bb)}static createLine3f(t,e,i,s,r,n,o){return t.prep(4,24),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.Line3d=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}start(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos,this.bb)}end(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos+24,this.bb)}static createLine3d(t,e,i,s,r,n,o){return t.prep(8,48),t.prep(8,24),t.writeFloat64(o),t.writeFloat64(n),t.writeFloat64(r),t.prep(8,24),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsPolyline3f(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsPolyline3f(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}points(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}pointsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startPolyline3f(t){t.startObject(1)}static addPoints(t,e){t.addFieldOffset(0,e,0)}static startPointsVector(t,e){t.startVector(12,e,4)}static endPolyline3f(t){return t.endObject()}static createPolyline3f(t,e){return s.startPolyline3f(t),s.addPoints(t,e),s.endPolyline3f(t)}}e.Polyline3f=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.Arc3f=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}center(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}axis(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+12,this.bb)}refDirection(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+24,this.bb)}radius(){return this.bb.readFloat32(this.bb_pos+36)}mutate_radius(t){var e=this.bb.__offset(this.bb_pos,36);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}angle(){return this.bb.readFloat32(this.bb_pos+40)}mutate_angle(t){var e=this.bb.__offset(this.bb_pos,40);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createArc3f(t,e,i,s,r,n,o,a,h,b,c,l){return t.prep(4,44),t.writeFloat32(l),t.writeFloat32(c),t.prep(4,12),t.writeFloat32(b),t.writeFloat32(h),t.writeFloat32(a),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.Arc3d=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}center(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos,this.bb)}axis(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos+24,this.bb)}refDirection(e){return(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos+48,this.bb)}radius(){return this.bb.readFloat64(this.bb_pos+72)}mutate_radius(t){var e=this.bb.__offset(this.bb_pos,72);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}angle(){return this.bb.readFloat64(this.bb_pos+80)}mutate_angle(t){var e=this.bb.__offset(this.bb_pos,80);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static createArc3d(t,e,i,s,r,n,o,a,h,b,c,l){return t.prep(8,88),t.writeFloat64(l),t.writeFloat64(c),t.prep(8,24),t.writeFloat64(b),t.writeFloat64(h),t.writeFloat64(a),t.prep(8,24),t.writeFloat64(o),t.writeFloat64(n),t.writeFloat64(r),t.prep(8,24),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.Guid=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}data1(){return this.bb.readUint32(this.bb_pos)}mutate_data1(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}data2(){return this.bb.readUint16(this.bb_pos+4)}mutate_data2(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}data3(){return this.bb.readUint16(this.bb_pos+6)}mutate_data3(t){var e=this.bb.__offset(this.bb_pos,6);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}data41(){return this.bb.readUint8(this.bb_pos+8)}mutate_data4_1(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data42(){return this.bb.readUint8(this.bb_pos+9)}mutate_data4_2(t){var e=this.bb.__offset(this.bb_pos,9);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data43(){return this.bb.readUint8(this.bb_pos+10)}mutate_data4_3(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data44(){return this.bb.readUint8(this.bb_pos+11)}mutate_data4_4(t){var e=this.bb.__offset(this.bb_pos,11);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data45(){return this.bb.readUint8(this.bb_pos+12)}mutate_data4_5(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data46(){return this.bb.readUint8(this.bb_pos+13)}mutate_data4_6(t){var e=this.bb.__offset(this.bb_pos,13);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data47(){return this.bb.readUint8(this.bb_pos+14)}mutate_data4_7(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}data48(){return this.bb.readUint8(this.bb_pos+15)}mutate_data4_8(t){var e=this.bb.__offset(this.bb_pos,15);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}static createGuid(t,e,i,s,r,n,o,a,h,b,c,l){return t.prep(4,16),t.writeInt8(l),t.writeInt8(c),t.writeInt8(b),t.writeInt8(h),t.writeInt8(a),t.writeInt8(o),t.writeInt8(n),t.writeInt8(r),t.writeInt16(s),t.writeInt16(i),t.writeInt32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.SpatialHash=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}x(){return this.bb.readFloat64(this.bb_pos)}mutate_x(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}y(){return this.bb.readFloat64(this.bb_pos+8)}mutate_y(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}z(){return this.bb.readFloat64(this.bb_pos+16)}mutate_z(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d0(){return this.bb.readFloat64(this.bb_pos+24)}mutate_d0(t){var e=this.bb.__offset(this.bb_pos,24);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d1(){return this.bb.readFloat64(this.bb_pos+32)}mutate_d1(t){var e=this.bb.__offset(this.bb_pos,32);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d2(){return this.bb.readFloat64(this.bb_pos+40)}mutate_d2(t){var e=this.bb.__offset(this.bb_pos,40);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d3(){return this.bb.readFloat64(this.bb_pos+48)}mutate_d3(t){var e=this.bb.__offset(this.bb_pos,48);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d4(){return this.bb.readFloat64(this.bb_pos+56)}mutate_d4(t){var e=this.bb.__offset(this.bb_pos,56);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d5(){return this.bb.readFloat64(this.bb_pos+64)}mutate_d5(t){var e=this.bb.__offset(this.bb_pos,64);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d6(){return this.bb.readFloat64(this.bb_pos+72)}mutate_d6(t){var e=this.bb.__offset(this.bb_pos,72);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}d7(){return this.bb.readFloat64(this.bb_pos+80)}mutate_d7(t){var e=this.bb.__offset(this.bb_pos,80);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static createSpatialHash(t,e,i,s,r,n,o,a,h,b,c,l){return t.prep(8,88),t.writeFloat64(l),t.writeFloat64(c),t.writeFloat64(b),t.writeFloat64(h),t.writeFloat64(a),t.writeFloat64(o),t.writeFloat64(n),t.writeFloat64(r),t.writeFloat64(s),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.UV=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}u(){return this.bb.readFloat32(this.bb_pos)}mutate_u(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}v(){return this.bb.readFloat32(this.bb_pos+4)}mutate_v(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createUV(t,e,i){return t.prep(4,8),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOuterWire(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsOuterWire(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}vertexIndices(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+2*t):0}vertexIndicesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}vertexIndicesArray(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startOuterWire(t){t.startObject(1)}static addVertexIndices(t,e){t.addFieldOffset(0,e,0)}static createVertexIndicesVector(t,e){t.startVector(2,e.length,2);for(var i=e.length-1;i>=0;i--)t.addInt16(e[i]);return t.endVector()}static startVertexIndicesVector(t,e){t.startVector(2,e,2)}static endOuterWire(t){var e=t.endObject();return t.requiredField(e,4),e}static createOuterWire(t,i){return e.startOuterWire(t),e.addVertexIndices(t,i),e.endOuterWire(t)}}t.OuterWire=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInnerWire(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInnerWire(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}outerWire(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint16(this.bb_pos+t):0}mutate_outerWire(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}vertexIndices(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+2*t):0}vertexIndicesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertexIndicesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startInnerWire(t){t.startObject(2)}static addOuterWire(t,e){t.addFieldInt16(0,e,0)}static addVertexIndices(t,e){t.addFieldOffset(1,e,0)}static createVertexIndicesVector(t,e){t.startVector(2,e.length,2);for(var i=e.length-1;i>=0;i--)t.addInt16(e[i]);return t.endVector()}static startVertexIndicesVector(t,e){t.startVector(2,e,2)}static endInnerWire(t){var e=t.endObject();return t.requiredField(e,6),e}static createInnerWire(t,i,s){return e.startInnerWire(t),e.addOuterWire(t,i),e.addVertexIndices(t,s),e.endInnerWire(t)}}t.InnerWire=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBRep(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBRep(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}outerWires(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.OuterWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}outerWiresLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}innerWires(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.InnerWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}innerWiresLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startBRep(t){t.startObject(3)}static addOuterWires(t,e){t.addFieldOffset(0,e,0)}static createOuterWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startOuterWiresVector(t,e){t.startVector(4,e,4)}static addInnerWires(t,e){t.addFieldOffset(1,e,0)}static createInnerWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startInnerWiresVector(t,e){t.startVector(4,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(12,e,4)}static endBRep(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}static createBRep(t,e,i,r){return s.startBRep(t),s.addOuterWires(t,e),s.addInnerWires(t,i),s.addVertices(t,r),s.endBRep(t)}}e.BRep=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.PositionUV=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}position(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}uv(e){return(e||new t.Technology.TrimBim.Fbs.UV).__init(this.bb_pos+12,this.bb)}static createPositionUV(t,e,i,s,r,n){return t.prep(4,20),t.prep(4,8),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.PositionNormal=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}position(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos,this.bb)}normal(e){return(e||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb_pos+12,this.bb)}static createPositionNormal(t,e,i,s,r,n,o){return t.prep(4,24),t.prep(4,12),t.writeFloat32(o),t.writeFloat32(n),t.writeFloat32(r),t.prep(4,12),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBRepWithUV(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBRepWithUV(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}outerWires(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.OuterWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}outerWiresLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}innerWires(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.InnerWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}innerWiresLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.PositionUV).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startBRepWithUV(t){t.startObject(3)}static addOuterWires(t,e){t.addFieldOffset(0,e,0)}static createOuterWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startOuterWiresVector(t,e){t.startVector(4,e,4)}static addInnerWires(t,e){t.addFieldOffset(1,e,0)}static createInnerWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startInnerWiresVector(t,e){t.startVector(4,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(20,e,4)}static endBRepWithUV(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}static createBRepWithUV(t,e,i,r){return s.startBRepWithUV(t),s.addOuterWires(t,e),s.addInnerWires(t,i),s.addVertices(t,r),s.endBRepWithUV(t)}}e.BRepWithUV=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBRepWithNormal(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBRepWithNormal(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}outerWires(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.OuterWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}outerWiresLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}innerWires(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.InnerWire).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}innerWiresLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.PositionNormal).__init(this.bb.__vector(this.bb_pos+s)+24*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startBRepWithNormal(t){t.startObject(3)}static addOuterWires(t,e){t.addFieldOffset(0,e,0)}static createOuterWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startOuterWiresVector(t,e){t.startVector(4,e,4)}static addInnerWires(t,e){t.addFieldOffset(1,e,0)}static createInnerWiresVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startInnerWiresVector(t,e){t.startVector(4,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(24,e,4)}static endBRepWithNormal(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}static createBRepWithNormal(t,e,i,r){return s.startBRepWithNormal(t),s.addOuterWires(t,e),s.addInnerWires(t,i),s.addVertices(t,r),s.endBRepWithNormal(t)}}e.BRepWithNormal=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.IndexedVertex=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}positionIndex(){return this.bb.readUint16(this.bb_pos)}mutate_positionIndex(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}normalIndex(){return this.bb.readUint16(this.bb_pos+2)}mutate_normalIndex(t){var e=this.bb.__offset(this.bb_pos,2);return 0!==e&&(this.bb.writeUint16(this.bb_pos+e,t),!0)}static createIndexedVertex(t,e,i){return t.prep(2,4),t.writeInt16(i),t.writeInt16(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTriangleMesh(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTriangleMesh(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}positions(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}positionsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}normals(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}normalsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.IndexedVertex).__init(this.bb.__vector(this.bb_pos+s)+4*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}indices(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+2*t):0}indicesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}indicesArray(){var t=this.bb.__offset(this.bb_pos,10);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTriangleMesh(t){t.startObject(4)}static addPositions(t,e){t.addFieldOffset(0,e,0)}static startPositionsVector(t,e){t.startVector(12,e,4)}static addNormals(t,e){t.addFieldOffset(1,e,0)}static startNormalsVector(t,e){t.startVector(12,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(4,e,2)}static addIndices(t,e){t.addFieldOffset(3,e,0)}static createIndicesVector(t,e){t.startVector(2,e.length,2);for(var i=e.length-1;i>=0;i--)t.addInt16(e[i]);return t.endVector()}static startIndicesVector(t,e){t.startVector(2,e,2)}static endTriangleMesh(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),e}static createTriangleMesh(t,e,i,r,n){return s.startTriangleMesh(t),s.addPositions(t,e),s.addNormals(t,i),s.addVertices(t,r),s.addIndices(t,n),s.endTriangleMesh(t)}}e.TriangleMesh=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.IndexedVertex8=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}positionIndex(){return this.bb.readUint8(this.bb_pos)}mutate_positionIndex(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}normalIndex(){return this.bb.readUint8(this.bb_pos+1)}mutate_normalIndex(t){var e=this.bb.__offset(this.bb_pos,1);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}static createIndexedVertex8(t,e,i){return t.prep(1,2),t.writeInt8(i),t.writeInt8(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTriangleMesh8(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTriangleMesh8(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}positions(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}positionsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}normals(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}normalsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.IndexedVertex8).__init(this.bb.__vector(this.bb_pos+s)+2*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}indices(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}indicesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}indicesArray(){var t=this.bb.__offset(this.bb_pos,10);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTriangleMesh8(t){t.startObject(4)}static addPositions(t,e){t.addFieldOffset(0,e,0)}static startPositionsVector(t,e){t.startVector(12,e,4)}static addNormals(t,e){t.addFieldOffset(1,e,0)}static startNormalsVector(t,e){t.startVector(12,e,4)}static addVertices(t,e){t.addFieldOffset(2,e,0)}static startVerticesVector(t,e){t.startVector(2,e,1)}static addIndices(t,e){t.addFieldOffset(3,e,0)}static createIndicesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startIndicesVector(t,e){t.startVector(1,e,1)}static endTriangleMesh8(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),e}static createTriangleMesh8(t,e,i,r,n){return s.startTriangleMesh8(t),s.addPositions(t,e),s.addNormals(t,i),s.addVertices(t,r),s.addIndices(t,n),s.endTriangleMesh8(t)}}e.TriangleMesh8=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTexturedTriangleMesh(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTexturedTriangleMesh(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}positions(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}positionsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}normals(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}normalsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}uvs(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.UV).__init(this.bb.__vector(this.bb_pos+s)+8*e,this.bb):null}uvsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.IndexedVertex).__init(this.bb.__vector(this.bb_pos+s)+4*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}indices(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+2*t):0}indicesLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}indicesArray(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTexturedTriangleMesh(t){t.startObject(5)}static addPositions(t,e){t.addFieldOffset(0,e,0)}static startPositionsVector(t,e){t.startVector(12,e,4)}static addNormals(t,e){t.addFieldOffset(1,e,0)}static startNormalsVector(t,e){t.startVector(12,e,4)}static addUvs(t,e){t.addFieldOffset(2,e,0)}static startUvsVector(t,e){t.startVector(8,e,4)}static addVertices(t,e){t.addFieldOffset(3,e,0)}static startVerticesVector(t,e){t.startVector(4,e,2)}static addIndices(t,e){t.addFieldOffset(4,e,0)}static createIndicesVector(t,e){t.startVector(2,e.length,2);for(var i=e.length-1;i>=0;i--)t.addInt16(e[i]);return t.endVector()}static startIndicesVector(t,e){t.startVector(2,e,2)}static endTexturedTriangleMesh(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),e}static createTexturedTriangleMesh(t,e,i,r,n,o){return s.startTexturedTriangleMesh(t),s.addPositions(t,e),s.addNormals(t,i),s.addUvs(t,r),s.addVertices(t,n),s.addIndices(t,o),s.endTexturedTriangleMesh(t)}}e.TexturedTriangleMesh=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTexturedTriangleMesh8(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTexturedTriangleMesh8(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}positions(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}positionsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}normals(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Vec3f).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}normalsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}uvs(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.UV).__init(this.bb.__vector(this.bb_pos+s)+8*e,this.bb):null}uvsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}vertices(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.IndexedVertex8).__init(this.bb.__vector(this.bb_pos+s)+2*e,this.bb):null}verticesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}indices(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}indicesLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}indicesArray(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTexturedTriangleMesh8(t){t.startObject(5)}static addPositions(t,e){t.addFieldOffset(0,e,0)}static startPositionsVector(t,e){t.startVector(12,e,4)}static addNormals(t,e){t.addFieldOffset(1,e,0)}static startNormalsVector(t,e){t.startVector(12,e,4)}static addUvs(t,e){t.addFieldOffset(2,e,0)}static startUvsVector(t,e){t.startVector(8,e,4)}static addVertices(t,e){t.addFieldOffset(3,e,0)}static startVerticesVector(t,e){t.startVector(2,e,1)}static addIndices(t,e){t.addFieldOffset(4,e,0)}static createIndicesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startIndicesVector(t,e){t.startVector(1,e,1)}static endTexturedTriangleMesh8(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),e}static createTexturedTriangleMesh8(t,e,i,r,n,o){return s.startTexturedTriangleMesh8(t),s.addPositions(t,e),s.addNormals(t,i),s.addUvs(t,r),s.addVertices(t,n),s.addIndices(t,o),s.endTexturedTriangleMesh8(t)}}e.TexturedTriangleMesh8=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDirectrix(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDirectrix(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}types(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0}typesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}typesArray(){var t=this.bb.__offset(this.bb_pos,4);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}indexes(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}indexesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}indexesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}lineSegments(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Line3f).__init(this.bb.__vector(this.bb_pos+s)+24*e,this.bb):null}lineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}polyLines(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.Polyline3f).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}polyLinesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}arcs(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.Arc3f).__init(this.bb.__vector(this.bb_pos+s)+44*e,this.bb):null}arcsLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startDirectrix(t){t.startObject(5)}static addTypes(t,e){t.addFieldOffset(0,e,0)}static createTypesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startTypesVector(t,e){t.startVector(1,e,1)}static addIndexes(t,e){t.addFieldOffset(1,e,0)}static createIndexesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addInt32(e[i]);return t.endVector()}static startIndexesVector(t,e){t.startVector(4,e,4)}static addLineSegments(t,e){t.addFieldOffset(2,e,0)}static startLineSegmentsVector(t,e){t.startVector(24,e,4)}static addPolyLines(t,e){t.addFieldOffset(3,e,0)}static createPolyLinesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startPolyLinesVector(t,e){t.startVector(4,e,4)}static addArcs(t,e){t.addFieldOffset(4,e,0)}static startArcsVector(t,e){t.startVector(44,e,4)}static endDirectrix(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),e}static createDirectrix(t,e,i,r,n,o){return s.startDirectrix(t),s.addTypes(t,e),s.addIndexes(t,i),s.addLineSegments(t,r),s.addPolyLines(t,n),s.addArcs(t,o),s.endDirectrix(t)}}e.Directrix=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSweptDiskSolidContainer(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSweptDiskSolidContainer(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}directrices(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Directrix).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}directricesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}radius(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}radiusLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}radiusArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startSweptDiskSolidContainer(t){t.startObject(2)}static addDirectrices(t,e){t.addFieldOffset(0,e,0)}static createDirectricesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startDirectricesVector(t,e){t.startVector(4,e,4)}static addRadius(t,e){t.addFieldOffset(1,e,0)}static createRadiusVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startRadiusVector(t,e){t.startVector(8,e,8)}static endSweptDiskSolidContainer(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createSweptDiskSolidContainer(t,e,i){return s.startSweptDiskSolidContainer(t),s.addDirectrices(t,e),s.addRadius(t,i),s.endSweptDiskSolidContainer(t)}}e.SweptDiskSolidContainer=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalLineSegment(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalLineSegment(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startPoint(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+i,this.bb):null}startDirection(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDirection(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_segmentLength(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static startHorizontalLineSegment(t){t.startObject(5)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartPoint(t,e){t.addFieldStruct(2,e,0)}static addStartDirection(t,e){t.addFieldFloat64(3,e,0)}static addSegmentLength(t,e){t.addFieldFloat64(4,e,0)}static endHorizontalLineSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createHorizontalLineSegment(t,e,i,r,n,o){return s.startHorizontalLineSegment(t),s.addStartTag(t,e),s.addEndTag(t,i),s.addStartPoint(t,r),s.addStartDirection(t,n),s.addSegmentLength(t,o),s.endHorizontalLineSegment(t)}}e.HorizontalLineSegment=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalCircularArcSegment(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalCircularArcSegment(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startPoint(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+i,this.bb):null}startDirection(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDirection(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_segmentLength(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}radius(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_radius(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isCCW(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isCCW(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static startHorizontalCircularArcSegment(t){t.startObject(7)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartPoint(t,e){t.addFieldStruct(2,e,0)}static addStartDirection(t,e){t.addFieldFloat64(3,e,0)}static addSegmentLength(t,e){t.addFieldFloat64(4,e,0)}static addRadius(t,e){t.addFieldFloat64(5,e,0)}static addIsCCW(t,e){t.addFieldInt8(6,+e,0)}static endHorizontalCircularArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createHorizontalCircularArcSegment(t,e,i,r,n,o,a,h){return s.startHorizontalCircularArcSegment(t),s.addStartTag(t,e),s.addEndTag(t,i),s.addStartPoint(t,r),s.addStartDirection(t,n),s.addSegmentLength(t,o),s.addRadius(t,a),s.addIsCCW(t,h),s.endHorizontalCircularArcSegment(t)}}e.HorizontalCircularArcSegment=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalClothoidalArcSegment(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalClothoidalArcSegment(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startPoint(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+i,this.bb):null}startDirection(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDirection(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_segmentLength(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startRadius(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startRadius(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}clothoidConstant(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_clothoidConstant(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isCCW(){var t=this.bb.__offset(this.bb_pos,18);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isCCW(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}isEntry(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isEntry(t){var e=this.bb.__offset(this.bb_pos,20);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static startHorizontalClothoidalArcSegment(t){t.startObject(9)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartPoint(t,e){t.addFieldStruct(2,e,0)}static addStartDirection(t,e){t.addFieldFloat64(3,e,0)}static addSegmentLength(t,e){t.addFieldFloat64(4,e,0)}static addStartRadius(t,e){t.addFieldFloat64(5,e,0)}static addClothoidConstant(t,e){t.addFieldFloat64(6,e,0)}static addIsCCW(t,e){t.addFieldInt8(7,+e,0)}static addIsEntry(t,e){t.addFieldInt8(8,+e,0)}static endHorizontalClothoidalArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createHorizontalClothoidalArcSegment(t,e,i,r,n,o,a,h,b,c){return s.startHorizontalClothoidalArcSegment(t),s.addStartTag(t,e),s.addEndTag(t,i),s.addStartPoint(t,r),s.addStartDirection(t,n),s.addSegmentLength(t,o),s.addStartRadius(t,a),s.addClothoidConstant(t,h),s.addIsCCW(t,b),s.addIsEntry(t,c),s.endHorizontalClothoidalArcSegment(t)}}e.HorizontalClothoidalArcSegment=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalTransitionArcSegment(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalTransitionArcSegment(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startPoint(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+i,this.bb):null}startDirection(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDirection(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_segmentLength(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startRadius(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startRadius(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}endRadius(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_endRadius(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isStartRadiusCCW(){var t=this.bb.__offset(this.bb_pos,18);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isStartRadiusCCW(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}isEndRadiusCCW(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isEndRadiusCCW(t){var e=this.bb.__offset(this.bb_pos,20);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}type(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt8(this.bb_pos+e):t.Technology.TrimBim.Fbs.HorizontalTransitionCurveType.Invalid}mutate_type(t){var e=this.bb.__offset(this.bb_pos,22);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}static startHorizontalTransitionArcSegment(t){t.startObject(10)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartPoint(t,e){t.addFieldStruct(2,e,0)}static addStartDirection(t,e){t.addFieldFloat64(3,e,0)}static addSegmentLength(t,e){t.addFieldFloat64(4,e,0)}static addStartRadius(t,e){t.addFieldFloat64(5,e,0)}static addEndRadius(t,e){t.addFieldFloat64(6,e,0)}static addIsStartRadiusCCW(t,e){t.addFieldInt8(7,+e,0)}static addIsEndRadiusCCW(t,e){t.addFieldInt8(8,+e,0)}static addType(e,i){e.addFieldInt8(9,i,t.Technology.TrimBim.Fbs.HorizontalTransitionCurveType.Invalid)}static endHorizontalTransitionArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createHorizontalTransitionArcSegment(t,e,i,r,n,o,a,h,b,c,l){return s.startHorizontalTransitionArcSegment(t),s.addStartTag(t,e),s.addEndTag(t,i),s.addStartPoint(t,r),s.addStartDirection(t,n),s.addSegmentLength(t,o),s.addStartRadius(t,a),s.addEndRadius(t,h),s.addIsStartRadiusCCW(t,b),s.addIsEndRadiusCCW(t,c),s.addType(t,l),s.endHorizontalTransitionArcSegment(t)}}e.HorizontalTransitionArcSegment=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVerticalLineSegment(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVerticalLineSegment(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startDistAlong(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDistAlong(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}horizontalLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_horizontalLength(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startHeight(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startHeight(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startGradient(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startGradient(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static startVerticalLineSegment(t){t.startObject(6)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartDistAlong(t,e){t.addFieldFloat64(2,e,0)}static addHorizontalLength(t,e){t.addFieldFloat64(3,e,0)}static addStartHeight(t,e){t.addFieldFloat64(4,e,0)}static addStartGradient(t,e){t.addFieldFloat64(5,e,0)}static endVerticalLineSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createVerticalLineSegment(t,i,s,r,n,o,a){return e.startVerticalLineSegment(t),e.addStartTag(t,i),e.addEndTag(t,s),e.addStartDistAlong(t,r),e.addHorizontalLength(t,n),e.addStartHeight(t,o),e.addStartGradient(t,a),e.endVerticalLineSegment(t)}}t.VerticalLineSegment=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVerticalCircularArcSegment(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVerticalCircularArcSegment(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startDistAlong(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDistAlong(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}horizontalLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_horizontalLength(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startHeight(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startHeight(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startGradient(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startGradient(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}radius(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_radius(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isConvex(){var t=this.bb.__offset(this.bb_pos,18);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isConvex(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static startVerticalCircularArcSegment(t){t.startObject(8)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartDistAlong(t,e){t.addFieldFloat64(2,e,0)}static addHorizontalLength(t,e){t.addFieldFloat64(3,e,0)}static addStartHeight(t,e){t.addFieldFloat64(4,e,0)}static addStartGradient(t,e){t.addFieldFloat64(5,e,0)}static addRadius(t,e){t.addFieldFloat64(6,e,0)}static addIsConvex(t,e){t.addFieldInt8(7,+e,0)}static endVerticalCircularArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createVerticalCircularArcSegment(t,i,s,r,n,o,a,h,b){return e.startVerticalCircularArcSegment(t),e.addStartTag(t,i),e.addEndTag(t,s),e.addStartDistAlong(t,r),e.addHorizontalLength(t,n),e.addStartHeight(t,o),e.addStartGradient(t,a),e.addRadius(t,h),e.addIsConvex(t,b),e.endVerticalCircularArcSegment(t)}}t.VerticalCircularArcSegment=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVerticalParabolicArcSegment(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVerticalParabolicArcSegment(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}startTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}endTag(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}startDistAlong(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startDistAlong(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}horizontalLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_horizontalLength(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startHeight(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startHeight(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}startGradient(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startGradient(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}parabolaConstant(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_parabolaConstant(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}isConvex(){var t=this.bb.__offset(this.bb_pos,18);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}mutate_isConvex(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static startVerticalParabolicArcSegment(t){t.startObject(8)}static addStartTag(t,e){t.addFieldOffset(0,e,0)}static addEndTag(t,e){t.addFieldOffset(1,e,0)}static addStartDistAlong(t,e){t.addFieldFloat64(2,e,0)}static addHorizontalLength(t,e){t.addFieldFloat64(3,e,0)}static addStartHeight(t,e){t.addFieldFloat64(4,e,0)}static addStartGradient(t,e){t.addFieldFloat64(5,e,0)}static addParabolaConstant(t,e){t.addFieldFloat64(6,e,0)}static addIsConvex(t,e){t.addFieldInt8(7,+e,0)}static endVerticalParabolicArcSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createVerticalParabolicArcSegment(t,i,s,r,n,o,a,h,b){return e.startVerticalParabolicArcSegment(t),e.addStartTag(t,i),e.addEndTag(t,s),e.addStartDistAlong(t,r),e.addHorizontalLength(t,n),e.addStartHeight(t,o),e.addStartGradient(t,a),e.addParabolaConstant(t,h),e.addIsConvex(t,b),e.endVerticalParabolicArcSegment(t)}}t.VerticalParabolicArcSegment=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHorizontalCurve(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHorizontalCurve(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}startAlongDistance(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_startAlongDistance(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}segmentTypes(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0}segmentTypesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}segmentTypesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}lineSegments(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.HorizontalLineSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}lineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}circularArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.HorizontalCircularArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}circularArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}clothoidalArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.HorizontalClothoidalArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}clothoidalArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}transitionArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,14);return s?(i||new t.Technology.TrimBim.Fbs.HorizontalTransitionArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}transitionArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}static startHorizontalCurve(t){t.startObject(6)}static addStartAlongDistance(t,e){t.addFieldFloat64(0,e,0)}static addSegmentTypes(t,e){t.addFieldOffset(1,e,0)}static createSegmentTypesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startSegmentTypesVector(t,e){t.startVector(1,e,1)}static addLineSegments(t,e){t.addFieldOffset(2,e,0)}static createLineSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startLineSegmentsVector(t,e){t.startVector(4,e,4)}static addCircularArcSegments(t,e){t.addFieldOffset(3,e,0)}static createCircularArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCircularArcSegmentsVector(t,e){t.startVector(4,e,4)}static addClothoidalArcSegments(t,e){t.addFieldOffset(4,e,0)}static createClothoidalArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startClothoidalArcSegmentsVector(t,e){t.startVector(4,e,4)}static addTransitionArcSegments(t,e){t.addFieldOffset(5,e,0)}static createTransitionArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTransitionArcSegmentsVector(t,e){t.startVector(4,e,4)}static endHorizontalCurve(t){var e=t.endObject();return t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),t.requiredField(e,14),e}static createHorizontalCurve(t,e,i,r,n,o,a){return s.startHorizontalCurve(t),s.addStartAlongDistance(t,e),s.addSegmentTypes(t,i),s.addLineSegments(t,r),s.addCircularArcSegments(t,n),s.addClothoidalArcSegments(t,o),s.addTransitionArcSegments(t,a),s.endHorizontalCurve(t)}}e.HorizontalCurve=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVerticalCurve(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVerticalCurve(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}segmentTypes(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0}segmentTypesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}segmentTypesArray(){var t=this.bb.__offset(this.bb_pos,4);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}lineSegments(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.VerticalLineSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}lineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}circularArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.VerticalCircularArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}circularArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}parabolicArcSegments(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.VerticalParabolicArcSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}parabolicArcSegmentsLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startVerticalCurve(t){t.startObject(4)}static addSegmentTypes(t,e){t.addFieldOffset(0,e,0)}static createSegmentTypesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startSegmentTypesVector(t,e){t.startVector(1,e,1)}static addLineSegments(t,e){t.addFieldOffset(1,e,0)}static createLineSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startLineSegmentsVector(t,e){t.startVector(4,e,4)}static addCircularArcSegments(t,e){t.addFieldOffset(2,e,0)}static createCircularArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCircularArcSegmentsVector(t,e){t.startVector(4,e,4)}static addParabolicArcSegments(t,e){t.addFieldOffset(3,e,0)}static createParabolicArcSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startParabolicArcSegmentsVector(t,e){t.startVector(4,e,4)}static endVerticalCurve(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),e}static createVerticalCurve(t,e,i,r,n){return s.startVerticalCurve(t),s.addSegmentTypes(t,e),s.addLineSegments(t,i),s.addCircularArcSegments(t,r),s.addParabolicArcSegments(t,n),s.endVerticalCurve(t)}}e.VerticalCurve=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsAlignmentCurve(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsAlignmentCurve(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}horizontalCurve(e){var i=this.bb.__offset(this.bb_pos,4);return i?(e||new t.Technology.TrimBim.Fbs.HorizontalCurve).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}verticalCurve(e){var i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.Technology.TrimBim.Fbs.VerticalCurve).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}name(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}static startAlignmentCurve(t){t.startObject(3)}static addHorizontalCurve(t,e){t.addFieldOffset(0,e,0)}static addVerticalCurve(t,e){t.addFieldOffset(1,e,0)}static addName(t,e){t.addFieldOffset(2,e,0)}static endAlignmentCurve(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}static createAlignmentCurve(t,e,i,r){return s.startAlignmentCurve(t),s.addHorizontalCurve(t,e),s.addVerticalCurve(t,i),s.addName(t,r),s.endAlignmentCurve(t)}}e.AlignmentCurve=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGridLineSegment(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGridLineSegment(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}axisTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}lineSegment(e){var i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.Technology.TrimBim.Fbs.Line3d).__init(this.bb_pos+i,this.bb):null}static startGridLineSegment(t){t.startObject(2)}static addAxisTag(t,e){t.addFieldOffset(0,e,0)}static addLineSegment(t,e){t.addFieldStruct(1,e,0)}static endGridLineSegment(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createGridLineSegment(t,e,i){return s.startGridLineSegment(t),s.addAxisTag(t,e),s.addLineSegment(t,i),s.endGridLineSegment(t)}}e.GridLineSegment=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGridArc(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGridArc(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}axisTag(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}arc(e){var i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.Technology.TrimBim.Fbs.Arc3d).__init(this.bb_pos+i,this.bb):null}static startGridArc(t){t.startObject(2)}static addAxisTag(t,e){t.addFieldOffset(0,e,0)}static addArc(t,e){t.addFieldStruct(1,e,0)}static endGridArc(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createGridArc(t,e,i){return s.startGridArc(t),s.addAxisTag(t,e),s.addArc(t,i),s.endGridArc(t)}}e.GridArc=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGridLineContainer(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGridLineContainer(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}gridLineSegments(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.GridLineSegment).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}gridLineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}gridArcs(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.GridArc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}gridArcsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGridLineContainer(t){t.startObject(2)}static addGridLineSegments(t,e){t.addFieldOffset(0,e,0)}static createGridLineSegmentsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startGridLineSegmentsVector(t,e){t.startVector(4,e,4)}static addGridArcs(t,e){t.addFieldOffset(1,e,0)}static createGridArcsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startGridArcsVector(t,e){t.startVector(4,e,4)}static endGridLineContainer(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createGridLineContainer(t,e,i){return s.startGridLineContainer(t),s.addGridLineSegments(t,e),s.addGridArcs(t,i),s.endGridLineContainer(t)}}e.GridLineContainer=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOwner(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsOwner(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}personId(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}personFamilyName(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}personGivenName(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}personMiddleNames(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}personRoles(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}organizationId(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}organizationName(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}organizationDescription(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}organizationRoles(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}applicationVersion(t){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__string(this.bb_pos+e,t):null}applicationFullName(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}applicationIdentifier(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}static startOwner(t){t.startObject(12)}static addPersonId(t,e){t.addFieldOffset(0,e,0)}static addPersonFamilyName(t,e){t.addFieldOffset(1,e,0)}static addPersonGivenName(t,e){t.addFieldOffset(2,e,0)}static addPersonMiddleNames(t,e){t.addFieldOffset(3,e,0)}static addPersonRoles(t,e){t.addFieldOffset(4,e,0)}static addOrganizationId(t,e){t.addFieldOffset(5,e,0)}static addOrganizationName(t,e){t.addFieldOffset(6,e,0)}static addOrganizationDescription(t,e){t.addFieldOffset(7,e,0)}static addOrganizationRoles(t,e){t.addFieldOffset(8,e,0)}static addApplicationVersion(t,e){t.addFieldOffset(9,e,0)}static addApplicationFullName(t,e){t.addFieldOffset(10,e,0)}static addApplicationIdentifier(t,e){t.addFieldOffset(11,e,0)}static endOwner(t){return t.endObject()}static createOwner(t,i,s,r,n,o,a,h,b,c,l,d,u){return e.startOwner(t),e.addPersonId(t,i),e.addPersonFamilyName(t,s),e.addPersonGivenName(t,r),e.addPersonMiddleNames(t,n),e.addPersonRoles(t,o),e.addOrganizationId(t,a),e.addOrganizationName(t,h),e.addOrganizationDescription(t,b),e.addOrganizationRoles(t,c),e.addApplicationVersion(t,l),e.addApplicationFullName(t,d),e.addApplicationIdentifier(t,u),e.endOwner(t)}}t.Owner=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.History=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}state(){return this.bb.readInt8(this.bb_pos)}mutate_state(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}changeAction(){return this.bb.readInt8(this.bb_pos+1)}mutate_changeAction(t){var e=this.bb.__offset(this.bb_pos,1);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}creationDate(){return this.bb.readInt64(this.bb_pos+8)}mutate_creationDate(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeInt64(this.bb_pos+e,t),!0)}lastModificationDate(){return this.bb.readInt64(this.bb_pos+16)}mutate_lastModificationDate(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeInt64(this.bb_pos+e,t),!0)}static createHistory(t,e,i,s,r){return t.prep(8,24),t.writeInt64(r),t.writeInt64(s),t.pad(6),t.writeInt8(i),t.writeInt8(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.Product=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}owner(){return this.bb.readUint32(this.bb_pos)}mutate_owner(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}history(){return this.bb.readUint32(this.bb_pos+4)}mutate_history(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}name(){return this.bb.readUint32(this.bb_pos+8)}mutate_name(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}description(){return this.bb.readUint32(this.bb_pos+12)}mutate_description(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}objectType(){return this.bb.readUint32(this.bb_pos+16)}mutate_objectType(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}static createProduct(t,e,i,s,r,n){return t.prep(4,20),t.writeInt32(n),t.writeInt32(r),t.writeInt32(s),t.writeInt32(i),t.writeInt32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.ProductBinding=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}entityId(){return this.bb.readUint32(this.bb_pos)}mutate_entityId(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}productId(){return this.bb.readUint32(this.bb_pos+4)}mutate_productId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}static createProductBinding(t,e,i){return t.prep(4,8),t.writeInt32(i),t.writeInt32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.SinglePropertyDefinition=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}name(){return this.bb.readUint32(this.bb_pos)}mutate_name(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}type(){return this.bb.readInt8(this.bb_pos+4)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}static createSinglePropertyDefinition(t,e,i){return t.prep(4,8),t.pad(3),t.writeInt8(i),t.writeInt32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsPropertySetDefinition(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsPropertySetDefinition(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}name(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_name(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}properties(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.SinglePropertyDefinition).__init(this.bb.__vector(this.bb_pos+s)+8*e,this.bb):null}propertiesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startPropertySetDefinition(t){t.startObject(2)}static addName(t,e){t.addFieldInt32(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static startPropertiesVector(t,e){t.startVector(8,e,4)}static endPropertySetDefinition(t){var e=t.endObject();return t.requiredField(e,6),e}static createPropertySetDefinition(t,e,i){return s.startPropertySetDefinition(t),s.addName(t,e),s.addProperties(t,i),s.endPropertySetDefinition(t)}}e.PropertySetDefinition=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsPropertySet(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsPropertySet(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}definition(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_definition(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}values(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}valuesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}valuesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}entities(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}entitiesLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}entitiesArray(){var t=this.bb.__offset(this.bb_pos,8);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startPropertySet(t){t.startObject(3)}static addDefinition(t,e){t.addFieldInt32(0,e,0)}static addValues(t,e){t.addFieldOffset(1,e,0)}static createValuesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addInt32(e[i]);return t.endVector()}static startValuesVector(t,e){t.startVector(4,e,4)}static addEntities(t,e){t.addFieldOffset(2,e,0)}static createEntitiesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addInt32(e[i]);return t.endVector()}static startEntitiesVector(t,e){t.startVector(4,e,4)}static endPropertySet(t){var e=t.endObject();return t.requiredField(e,6),t.requiredField(e,8),e}static createPropertySet(t,i,s,r){return e.startPropertySet(t),e.addDefinition(t,i),e.addValues(t,s),e.addEntities(t,r),e.endPropertySet(t)}}t.PropertySet=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModelProperties(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModelProperties(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}productBindings(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.ProductBinding).__init(this.bb.__vector(this.bb_pos+s)+8*e,this.bb):null}productBindingsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}products(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Product).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}productsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}owners(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Owner).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}ownersLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}histories(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.History).__init(this.bb.__vector(this.bb_pos+s)+24*e,this.bb):null}historiesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}names(t,e){var i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}namesLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}descriptions(t,e){var i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}descriptionsLength(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}objectTypes(t,e){var i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}objectTypesLength(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}propertySetBindings(e,i){var s=this.bb.__offset(this.bb_pos,18);return s?(i||new t.Technology.TrimBim.Fbs.PropertySet).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}propertySetBindingsLength(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}propertySetNames(t,e){var i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}propertySetNamesLength(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}propertyNames(t,e){var i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}propertyNamesLength(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}definitions(e,i){var s=this.bb.__offset(this.bb_pos,24);return s?(i||new t.Technology.TrimBim.Fbs.PropertySetDefinition).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}definitionsLength(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}lengthMeasures(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}lengthMeasuresLength(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}lengthMeasuresArray(){var t=this.bb.__offset(this.bb_pos,26);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}areaMeasures(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}areaMeasuresLength(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}areaMeasuresArray(){var t=this.bb.__offset(this.bb_pos,28);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}volumeMeasures(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}volumeMeasuresLength(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__vector_len(this.bb_pos+t):0}volumeMeasuresArray(){var t=this.bb.__offset(this.bb_pos,30);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}massMeasures(t){var e=this.bb.__offset(this.bb_pos,32);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}massMeasuresLength(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.__vector_len(this.bb_pos+t):0}massMeasuresArray(){var t=this.bb.__offset(this.bb_pos,32);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}angleMeasures(t){var e=this.bb.__offset(this.bb_pos,34);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}angleMeasuresLength(){var t=this.bb.__offset(this.bb_pos,34);return t?this.bb.__vector_len(this.bb_pos+t):0}angleMeasuresArray(){var t=this.bb.__offset(this.bb_pos,34);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}stringValues(t,e){var i=this.bb.__offset(this.bb_pos,36);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}stringValuesLength(){var t=this.bb.__offset(this.bb_pos,36);return t?this.bb.__vector_len(this.bb_pos+t):0}doubleValues(t){var e=this.bb.__offset(this.bb_pos,38);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}doubleValuesLength(){var t=this.bb.__offset(this.bb_pos,38);return t?this.bb.__vector_len(this.bb_pos+t):0}doubleValuesArray(){var t=this.bb.__offset(this.bb_pos,38);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}dateTimeValues(t){var e=this.bb.__offset(this.bb_pos,40);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dateTimeValuesLength(){var t=this.bb.__offset(this.bb_pos,40);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModelProperties(t){t.startObject(19)}static addProductBindings(t,e){t.addFieldOffset(0,e,0)}static startProductBindingsVector(t,e){t.startVector(8,e,4)}static addProducts(t,e){t.addFieldOffset(1,e,0)}static startProductsVector(t,e){t.startVector(20,e,4)}static addOwners(t,e){t.addFieldOffset(2,e,0)}static createOwnersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startOwnersVector(t,e){t.startVector(4,e,4)}static addHistories(t,e){t.addFieldOffset(3,e,0)}static startHistoriesVector(t,e){t.startVector(24,e,8)}static addNames(t,e){t.addFieldOffset(4,e,0)}static createNamesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startNamesVector(t,e){t.startVector(4,e,4)}static addDescriptions(t,e){t.addFieldOffset(5,e,0)}static createDescriptionsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startDescriptionsVector(t,e){t.startVector(4,e,4)}static addObjectTypes(t,e){t.addFieldOffset(6,e,0)}static createObjectTypesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startObjectTypesVector(t,e){t.startVector(4,e,4)}static addPropertySetBindings(t,e){t.addFieldOffset(7,e,0)}static createPropertySetBindingsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startPropertySetBindingsVector(t,e){t.startVector(4,e,4)}static addPropertySetNames(t,e){t.addFieldOffset(8,e,0)}static createPropertySetNamesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startPropertySetNamesVector(t,e){t.startVector(4,e,4)}static addPropertyNames(t,e){t.addFieldOffset(9,e,0)}static createPropertyNamesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startPropertyNamesVector(t,e){t.startVector(4,e,4)}static addDefinitions(t,e){t.addFieldOffset(10,e,0)}static createDefinitionsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startDefinitionsVector(t,e){t.startVector(4,e,4)}static addLengthMeasures(t,e){t.addFieldOffset(11,e,0)}static createLengthMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startLengthMeasuresVector(t,e){t.startVector(8,e,8)}static addAreaMeasures(t,e){t.addFieldOffset(12,e,0)}static createAreaMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startAreaMeasuresVector(t,e){t.startVector(8,e,8)}static addVolumeMeasures(t,e){t.addFieldOffset(13,e,0)}static createVolumeMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startVolumeMeasuresVector(t,e){t.startVector(8,e,8)}static addMassMeasures(t,e){t.addFieldOffset(14,e,0)}static createMassMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startMassMeasuresVector(t,e){t.startVector(8,e,8)}static addAngleMeasures(t,e){t.addFieldOffset(15,e,0)}static createAngleMeasuresVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startAngleMeasuresVector(t,e){t.startVector(8,e,8)}static addStringValues(t,e){t.addFieldOffset(16,e,0)}static createStringValuesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startStringValuesVector(t,e){t.startVector(4,e,4)}static addDoubleValues(t,e){t.addFieldOffset(17,e,0)}static createDoubleValuesVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addFloat64(e[i]);return t.endVector()}static startDoubleValuesVector(t,e){t.startVector(8,e,8)}static addDateTimeValues(t,e){t.addFieldOffset(18,e,0)}static createDateTimeValuesVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addInt64(e[i]);return t.endVector()}static startDateTimeValuesVector(t,e){t.startVector(8,e,8)}static endModelProperties(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),t.requiredField(e,14),t.requiredField(e,16),t.requiredField(e,18),t.requiredField(e,20),t.requiredField(e,22),t.requiredField(e,24),t.requiredField(e,26),t.requiredField(e,28),t.requiredField(e,30),t.requiredField(e,32),t.requiredField(e,34),t.requiredField(e,36),t.requiredField(e,38),t.requiredField(e,40),e}static createModelProperties(t,e,i,r,n,o,a,h,b,c,l,d,u,p,_,g,f,m,y,v){return s.startModelProperties(t),s.addProductBindings(t,e),s.addProducts(t,i),s.addOwners(t,r),s.addHistories(t,n),s.addNames(t,o),s.addDescriptions(t,a),s.addObjectTypes(t,h),s.addPropertySetBindings(t,b),s.addPropertySetNames(t,c),s.addPropertyNames(t,l),s.addDefinitions(t,d),s.addLengthMeasures(t,u),s.addAreaMeasures(t,p),s.addVolumeMeasures(t,_),s.addMassMeasures(t,g),s.addAngleMeasures(t,f),s.addStringValues(t,m),s.addDoubleValues(t,y),s.addDateTimeValues(t,v),s.endModelProperties(t)}}e.ModelProperties=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.SurfaceMaterial=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}r(){return this.bb.readUint8(this.bb_pos)}mutate_r(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}g(){return this.bb.readUint8(this.bb_pos+1)}mutate_g(t){var e=this.bb.__offset(this.bb_pos,1);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}b(){return this.bb.readUint8(this.bb_pos+2)}mutate_b(t){var e=this.bb.__offset(this.bb_pos,2);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}a(){return this.bb.readUint8(this.bb_pos+3)}mutate_a(t){var e=this.bb.__offset(this.bb_pos,3);return 0!==e&&(this.bb.writeUint8(this.bb_pos+e,t),!0)}textureId(){return this.bb.readUint32(this.bb_pos+4)}mutate_textureId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}sidedness(){return this.bb.readInt8(this.bb_pos+8)}mutate_sidedness(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}lineStyle(){return this.bb.readInt8(this.bb_pos+9)}mutate_lineStyle(t){var e=this.bb.__offset(this.bb_pos,9);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}metallic(){return this.bb.readFloat32(this.bb_pos+12)}mutate_metallic(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}roughness(){return this.bb.readFloat32(this.bb_pos+16)}mutate_roughness(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createSurfaceMaterial(t,e,i,s,r,n,o,a,h,b){return t.prep(4,20),t.writeFloat32(b),t.writeFloat32(h),t.pad(2),t.writeInt8(a),t.writeInt8(o),t.writeInt32(n),t.writeInt8(r),t.writeInt8(s),t.writeInt8(i),t.writeInt8(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.Entity=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}type(){return this.bb.readInt8(this.bb_pos)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}identifierIndex(){return this.bb.readUint32(this.bb_pos+4)}mutate_identifierIndex(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}classIndex(){return this.bb.readUint32(this.bb_pos+8)}mutate_classIndex(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}globalPlacement(e){return(e||new t.Technology.TrimBim.Fbs.Placement3).__init(this.bb_pos+16,this.bb)}static createEntity(t,e,i,s,r,n,o,a,h,b,c,l,d){return t.prep(8,64),t.prep(8,48),t.prep(4,12),t.writeFloat32(d),t.writeFloat32(l),t.writeFloat32(c),t.prep(4,12),t.writeFloat32(b),t.writeFloat32(h),t.writeFloat32(a),t.prep(8,24),t.writeFloat64(o),t.writeFloat64(n),t.writeFloat64(r),t.pad(4),t.writeInt32(s),t.writeInt32(i),t.pad(3),t.writeInt8(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.GeometryDefinition=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}type(){return this.bb.readInt8(this.bb_pos)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}index(){return this.bb.readUint32(this.bb_pos+4)}mutate_index(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}boundingBox(e){return(e||new t.Technology.TrimBim.Fbs.AABB3f).__init(this.bb_pos+8,this.bb)}static createGeometryDefinition(t,e,i,s,r,n,o,a,h){return t.prep(4,32),t.prep(4,24),t.prep(4,12),t.writeFloat32(h),t.writeFloat32(a),t.writeFloat32(o),t.prep(4,12),t.writeFloat32(n),t.writeFloat32(r),t.writeFloat32(s),t.writeInt32(i),t.pad(3),t.writeInt8(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.GeometryInstance=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}localPlacementId(){return this.bb.readUint32(this.bb_pos)}mutate_localPlacementId(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}entityId(){return this.bb.readUint32(this.bb_pos+4)}mutate_entityId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}definitionId(){return this.bb.readUint32(this.bb_pos+8)}mutate_definitionId(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}surfaceMaterialId(){return this.bb.readUint32(this.bb_pos+12)}mutate_surfaceMaterialId(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}layerId(){return this.bb.readUint32(this.bb_pos+16)}mutate_layerId(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}static createGeometryInstance(t,e,i,s,r,n){return t.prep(4,20),t.writeInt32(n),t.writeInt32(r),t.writeInt32(s),t.writeInt32(i),t.writeInt32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTexture(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTexture(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}type(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):t.Technology.TrimBim.Fbs.TextureType.None}mutate_type(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}bytes(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0}bytesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}bytesArray(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startTexture(t){t.startObject(2)}static addType(e,i){e.addFieldInt8(0,i,t.Technology.TrimBim.Fbs.TextureType.None)}static addBytes(t,e){t.addFieldOffset(1,e,0)}static createBytesVector(t,e){t.startVector(1,e.length,1);for(var i=e.length-1;i>=0;i--)t.addInt8(e[i]);return t.endVector()}static startBytesVector(t,e){t.startVector(1,e,1)}static endTexture(t){var e=t.endObject();return t.requiredField(e,6),e}static createTexture(t,e,i){return s.startTexture(t),s.addType(t,e),s.addBytes(t,i),s.endTexture(t)}}e.Texture=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGraphicsContainer(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGraphicsContainer(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}lineSegments(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Line3f).__init(this.bb.__vector(this.bb_pos+s)+24*e,this.bb):null}lineSegmentsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}arcs(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Arc3f).__init(this.bb.__vector(this.bb_pos+s)+44*e,this.bb):null}arcsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGraphicsContainer(t){t.startObject(2)}static addLineSegments(t,e){t.addFieldOffset(0,e,0)}static startLineSegmentsVector(t,e){t.startVector(24,e,4)}static addArcs(t,e){t.addFieldOffset(1,e,0)}static startArcsVector(t,e){t.startVector(44,e,4)}static endGraphicsContainer(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createGraphicsContainer(t,e,i){return s.startGraphicsContainer(t),s.addLineSegments(t,e),s.addArcs(t,i),s.endGraphicsContainer(t)}}e.GraphicsContainer=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCoordinateGeometryPoint(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCoordinateGeometryPoint(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}name(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}symbol(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startCoordinateGeometryPoint(t){t.startObject(2)}static addName(t,e){t.addFieldOffset(0,e,0)}static addSymbol(t,e){t.addFieldOffset(1,e,0)}static endCoordinateGeometryPoint(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createCoordinateGeometryPoint(t,i,s){return e.startCoordinateGeometryPoint(t),e.addName(t,i),e.addSymbol(t,s),e.endCoordinateGeometryPoint(t)}}t.CoordinateGeometryPoint=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBillboardText(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBillboardText(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}textStyleId(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_textStyleId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}text(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startBillboardText(t){t.startObject(2)}static addTextStyleId(t,e){t.addFieldInt32(0,e,0)}static addText(t,e){t.addFieldOffset(1,e,0)}static endBillboardText(t){var e=t.endObject();return t.requiredField(e,6),e}static createBillboardText(t,i,s){return e.startBillboardText(t),e.addTextStyleId(t,i),e.addText(t,s),e.endBillboardText(t)}}t.BillboardText=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTextStyle(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTextStyle(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}font(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}size(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_size(t){var e=this.bb.__offset(this.bb_pos,6);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}options(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_options(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}verticalAlign(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_verticalAlign(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}horizontalAlign(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_horizontalAlign(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}rotationAngle(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_rotationAngle(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}layout(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt8(this.bb_pos+e):t.Technology.TrimBim.Fbs.LayoutType.Invalid}mutate_layout(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}alignment(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt8(this.bb_pos+e):t.Technology.TrimBim.Fbs.AlignmentType.Invalid}mutate_alignment(t){var e=this.bb.__offset(this.bb_pos,18);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}maxAutoScale(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_maxAutoScale(t){var e=this.bb.__offset(this.bb_pos,20);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}verticalDistanceToObject(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_verticalDistanceToObject(t){var e=this.bb.__offset(this.bb_pos,22);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}static startTextStyle(t){t.startObject(10)}static addFont(t,e){t.addFieldOffset(0,e,0)}static addSize(t,e){t.addFieldFloat64(1,e,0)}static addOptions(t,e){t.addFieldInt32(2,e,0)}static addVerticalAlign(t,e){t.addFieldFloat64(3,e,0)}static addHorizontalAlign(t,e){t.addFieldFloat64(4,e,0)}static addRotationAngle(t,e){t.addFieldFloat64(5,e,0)}static addLayout(e,i){e.addFieldInt8(6,i,t.Technology.TrimBim.Fbs.LayoutType.Invalid)}static addAlignment(e,i){e.addFieldInt8(7,i,t.Technology.TrimBim.Fbs.AlignmentType.Invalid)}static addMaxAutoScale(t,e){t.addFieldFloat64(8,e,0)}static addVerticalDistanceToObject(t,e){t.addFieldFloat64(9,e,0)}static endTextStyle(t){return t.endObject()}static createTextStyle(t,e,i,r,n,o,a,h,b,c,l){return s.startTextStyle(t),s.addFont(t,e),s.addSize(t,i),s.addOptions(t,r),s.addVerticalAlign(t,n),s.addHorizontalAlign(t,o),s.addRotationAngle(t,a),s.addLayout(t,h),s.addAlignment(t,b),s.addMaxAutoScale(t,c),s.addVerticalDistanceToObject(t,l),s.endTextStyle(t)}}e.TextStyle=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBillboard(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBillboard(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBillboard(t){t.startObject(0)}static endBillboard(t){return t.endObject()}static createBillboard(t){return e.startBillboard(t),e.endBillboard(t)}}t.Billboard=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(e){e.TexturedBillboard=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}leftUpXY(e){return(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos,this.bb)}leftUpUV(e){return(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+16,this.bb)}rightDownXY(e){return(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+32,this.bb)}rightDownUV(e){return(e||new t.Technology.TrimBim.Fbs.Vec2d).__init(this.bb_pos+48,this.bb)}IsInWorldUnits(){return!!this.bb.readInt8(this.bb_pos+64)}mutate_IsInWorldUnits(t){var e=this.bb.__offset(this.bb_pos,64);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,+t),!0)}static createTexturedBillboard(t,e,i,s,r,n,o,a,h,b){return t.prep(8,72),t.pad(7),t.writeInt8(+b),t.prep(8,16),t.writeFloat64(h),t.writeFloat64(a),t.prep(8,16),t.writeFloat64(o),t.writeFloat64(n),t.prep(8,16),t.writeFloat64(r),t.writeFloat64(s),t.prep(8,16),t.writeFloat64(i),t.writeFloat64(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.BoltTop=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}topDiameter(){return this.bb.readFloat32(this.bb_pos)}mutate_topDiameter(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}thickness(){return this.bb.readFloat32(this.bb_pos+4)}mutate_thickness(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}diameter(){return this.bb.readFloat32(this.bb_pos+8)}mutate_diameter(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}length(){return this.bb.readFloat32(this.bb_pos+12)}mutate_length(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}type(){return this.bb.readInt8(this.bb_pos+16)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}static createBoltTop(t,e,i,s,r,n){return t.prep(4,20),t.pad(3),t.writeInt8(n),t.writeFloat32(r),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.Washer=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readFloat32(this.bb_pos)}mutate_offset(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}innerDiameter(){return this.bb.readFloat32(this.bb_pos+4)}mutate_innerDiameter(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}outerDiameter(){return this.bb.readFloat32(this.bb_pos+8)}mutate_outerDiameter(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}thickness(){return this.bb.readFloat32(this.bb_pos+12)}mutate_thickness(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createWasher(t,e,i,s,r){return t.prep(4,16),t.writeFloat32(r),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.Nut=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readFloat32(this.bb_pos)}mutate_offset(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}innerDiameter(){return this.bb.readFloat32(this.bb_pos+4)}mutate_innerDiameter(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}outerDiameter(){return this.bb.readFloat32(this.bb_pos+8)}mutate_outerDiameter(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}thickness(){return this.bb.readFloat32(this.bb_pos+12)}mutate_thickness(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createNut(t,e,i,s,r){return t.prep(4,16),t.writeFloat32(r),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.Hole=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readFloat32(this.bb_pos)}mutate_offset(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}length(){return this.bb.readFloat32(this.bb_pos+4)}mutate_length(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}diameter(){return this.bb.readFloat32(this.bb_pos+8)}mutate_diameter(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}xslot(){return this.bb.readFloat32(this.bb_pos+12)}mutate_xslot(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}yslot(){return this.bb.readFloat32(this.bb_pos+16)}mutate_yslot(t){var e=this.bb.__offset(this.bb_pos,16);return 0!==e&&(this.bb.writeFloat32(this.bb_pos+e,t),!0)}static createHole(t,e,i,s,r,n){return t.prep(4,20),t.writeFloat32(n),t.writeFloat32(r),t.writeFloat32(s),t.writeFloat32(i),t.writeFloat32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBolt(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBolt(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}top(e){var i=this.bb.__offset(this.bb_pos,4);return i?(e||new t.Technology.TrimBim.Fbs.BoltTop).__init(this.bb_pos+i,this.bb):null}washers(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.Washer).__init(this.bb.__vector(this.bb_pos+s)+16*e,this.bb):null}washersLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}nuts(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Nut).__init(this.bb.__vector(this.bb_pos+s)+16*e,this.bb):null}nutsLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}holes(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.Hole).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}holesLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startBolt(t){t.startObject(4)}static addTop(t,e){t.addFieldStruct(0,e,0)}static addWashers(t,e){t.addFieldOffset(1,e,0)}static startWashersVector(t,e){t.startVector(16,e,4)}static addNuts(t,e){t.addFieldOffset(2,e,0)}static startNutsVector(t,e){t.startVector(16,e,4)}static addHoles(t,e){t.addFieldOffset(3,e,0)}static startHolesVector(t,e){t.startVector(20,e,4)}static endBolt(t){var e=t.endObject();return t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),e}static createBolt(t,e,i,r,n){return s.startBolt(t),s.addTop(t,e),s.addWashers(t,i),s.addNuts(t,r),s.addHoles(t,n),s.endBolt(t)}}e.Bolt=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMapConversion(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMapConversion(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}eastings(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_eastings(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}northings(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_northings(t){var e=this.bb.__offset(this.bb_pos,6);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}orthogonalHeight(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_orthogonalHeight(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}xAxisAbscissa(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_xAxisAbscissa(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}xAxisOrdinate(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_xAxisOrdinate(t){var e=this.bb.__offset(this.bb_pos,12);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}scaleToMapProjection(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_scaleToMapProjection(t){var e=this.bb.__offset(this.bb_pos,14);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}projectionName(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}projectionDescription(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}projectionGeodeticDatum(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}projectionVerticalDatum(t){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__string(this.bb_pos+e,t):null}projectionProjectionType(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}projectionZone(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}projectionUnitName(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}projectionScaleToMetric(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_projectionScaleToMetric(t){var e=this.bb.__offset(this.bb_pos,30);return 0!==e&&(this.bb.writeFloat64(this.bb_pos+e,t),!0)}sourceOrigin(e){var i=this.bb.__offset(this.bb_pos,32);return i?(e||new t.Technology.TrimBim.Fbs.Vec3d).__init(this.bb_pos+i,this.bb):null}static startMapConversion(t){t.startObject(15)}static addEastings(t,e){t.addFieldFloat64(0,e,0)}static addNorthings(t,e){t.addFieldFloat64(1,e,0)}static addOrthogonalHeight(t,e){t.addFieldFloat64(2,e,0)}static addXAxisAbscissa(t,e){t.addFieldFloat64(3,e,0)}static addXAxisOrdinate(t,e){t.addFieldFloat64(4,e,0)}static addScaleToMapProjection(t,e){t.addFieldFloat64(5,e,0)}static addProjectionName(t,e){t.addFieldOffset(6,e,0)}static addProjectionDescription(t,e){t.addFieldOffset(7,e,0)}static addProjectionGeodeticDatum(t,e){t.addFieldOffset(8,e,0)}static addProjectionVerticalDatum(t,e){t.addFieldOffset(9,e,0)}static addProjectionProjectionType(t,e){t.addFieldOffset(10,e,0)}static addProjectionZone(t,e){t.addFieldOffset(11,e,0)}static addProjectionUnitName(t,e){t.addFieldOffset(12,e,0)}static addProjectionScaleToMetric(t,e){t.addFieldFloat64(13,e,0)}static addSourceOrigin(t,e){t.addFieldStruct(14,e,0)}static endMapConversion(t){return t.endObject()}static createMapConversion(t,e,i,r,n,o,a,h,b,c,l,d,u,p,_,g){return s.startMapConversion(t),s.addEastings(t,e),s.addNorthings(t,i),s.addOrthogonalHeight(t,r),s.addXAxisAbscissa(t,n),s.addXAxisOrdinate(t,o),s.addScaleToMapProjection(t,a),s.addProjectionName(t,h),s.addProjectionDescription(t,b),s.addProjectionGeodeticDatum(t,c),s.addProjectionVerticalDatum(t,l),s.addProjectionProjectionType(t,d),s.addProjectionZone(t,u),s.addProjectionUnitName(t,p),s.addProjectionScaleToMetric(t,_),s.addSourceOrigin(t,g),s.endMapConversion(t)}}e.MapConversion=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModelGeometry(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModelGeometry(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}localPlacements(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Placement3).__init(this.bb.__vector(this.bb_pos+s)+48*e,this.bb):null}localPlacementsLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}surfaceMaterials(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.SurfaceMaterial).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}surfaceMaterialsLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}layers(t,e){var i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}layersLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}definitions(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.GeometryDefinition).__init(this.bb.__vector(this.bb_pos+s)+32*e,this.bb):null}definitionsLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}instances(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.GeometryInstance).__init(this.bb.__vector(this.bb_pos+s)+20*e,this.bb):null}instancesLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}textures(e,i){var s=this.bb.__offset(this.bb_pos,14);return s?(i||new t.Technology.TrimBim.Fbs.Texture).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}texturesLength(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}bReps(e,i){var s=this.bb.__offset(this.bb_pos,16);return s?(i||new t.Technology.TrimBim.Fbs.BRep).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}bRepsLength(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}triangleMeshes(e,i){var s=this.bb.__offset(this.bb_pos,18);return s?(i||new t.Technology.TrimBim.Fbs.TriangleMesh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}triangleMeshesLength(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}triangleMeshes8(e,i){var s=this.bb.__offset(this.bb_pos,20);return s?(i||new t.Technology.TrimBim.Fbs.TriangleMesh8).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}triangleMeshes8Length(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}texturedTriangleMeshes(e,i){var s=this.bb.__offset(this.bb_pos,22);return s?(i||new t.Technology.TrimBim.Fbs.TexturedTriangleMesh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}texturedTriangleMeshesLength(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}texturedTriangleMeshes8(e,i){var s=this.bb.__offset(this.bb_pos,24);return s?(i||new t.Technology.TrimBim.Fbs.TexturedTriangleMesh8).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}texturedTriangleMeshes8Length(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}sweptDiskSolids(e,i){var s=this.bb.__offset(this.bb_pos,26);return s?(i||new t.Technology.TrimBim.Fbs.SweptDiskSolidContainer).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}sweptDiskSolidsLength(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}bRepWithUVs(e,i){var s=this.bb.__offset(this.bb_pos,28);return s?(i||new t.Technology.TrimBim.Fbs.BRepWithUV).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}bRepWithUVsLength(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}bRepWithNormals(e,i){var s=this.bb.__offset(this.bb_pos,30);return s?(i||new t.Technology.TrimBim.Fbs.BRepWithNormal).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}bRepWithNormalsLength(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__vector_len(this.bb_pos+t):0}graphicsContainers(e,i){var s=this.bb.__offset(this.bb_pos,32);return s?(i||new t.Technology.TrimBim.Fbs.GraphicsContainer).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}graphicsContainersLength(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.__vector_len(this.bb_pos+t):0}alignmentCurves(e,i){var s=this.bb.__offset(this.bb_pos,34);return s?(i||new t.Technology.TrimBim.Fbs.AlignmentCurve).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}alignmentCurvesLength(){var t=this.bb.__offset(this.bb_pos,34);return t?this.bb.__vector_len(this.bb_pos+t):0}gridLineContainers(e,i){var s=this.bb.__offset(this.bb_pos,36);return s?(i||new t.Technology.TrimBim.Fbs.GridLineContainer).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}gridLineContainersLength(){var t=this.bb.__offset(this.bb_pos,36);return t?this.bb.__vector_len(this.bb_pos+t):0}coordinateGeometryPoints(e,i){var s=this.bb.__offset(this.bb_pos,38);return s?(i||new t.Technology.TrimBim.Fbs.CoordinateGeometryPoint).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}coordinateGeometryPointsLength(){var t=this.bb.__offset(this.bb_pos,38);return t?this.bb.__vector_len(this.bb_pos+t):0}billboardTexts(e,i){var s=this.bb.__offset(this.bb_pos,40);return s?(i||new t.Technology.TrimBim.Fbs.BillboardText).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}billboardTextsLength(){var t=this.bb.__offset(this.bb_pos,40);return t?this.bb.__vector_len(this.bb_pos+t):0}textStyles(e,i){var s=this.bb.__offset(this.bb_pos,42);return s?(i||new t.Technology.TrimBim.Fbs.TextStyle).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}textStylesLength(){var t=this.bb.__offset(this.bb_pos,42);return t?this.bb.__vector_len(this.bb_pos+t):0}billboards(e,i){var s=this.bb.__offset(this.bb_pos,44);return s?(i||new t.Technology.TrimBim.Fbs.Billboard).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}billboardsLength(){var t=this.bb.__offset(this.bb_pos,44);return t?this.bb.__vector_len(this.bb_pos+t):0}texturedBillboards(e,i){var s=this.bb.__offset(this.bb_pos,46);return s?(i||new t.Technology.TrimBim.Fbs.TexturedBillboard).__init(this.bb.__vector(this.bb_pos+s)+72*e,this.bb):null}texturedBillboardsLength(){var t=this.bb.__offset(this.bb_pos,46);return t?this.bb.__vector_len(this.bb_pos+t):0}bolts(e,i){var s=this.bb.__offset(this.bb_pos,48);return s?(i||new t.Technology.TrimBim.Fbs.Bolt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}boltsLength(){var t=this.bb.__offset(this.bb_pos,48);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModelGeometry(t){t.startObject(23)}static addLocalPlacements(t,e){t.addFieldOffset(0,e,0)}static startLocalPlacementsVector(t,e){t.startVector(48,e,8)}static addSurfaceMaterials(t,e){t.addFieldOffset(1,e,0)}static startSurfaceMaterialsVector(t,e){t.startVector(20,e,4)}static addLayers(t,e){t.addFieldOffset(2,e,0)}static createLayersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startLayersVector(t,e){t.startVector(4,e,4)}static addDefinitions(t,e){t.addFieldOffset(3,e,0)}static startDefinitionsVector(t,e){t.startVector(32,e,4)}static addInstances(t,e){t.addFieldOffset(4,e,0)}static startInstancesVector(t,e){t.startVector(20,e,4)}static addTextures(t,e){t.addFieldOffset(5,e,0)}static createTexturesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTexturesVector(t,e){t.startVector(4,e,4)}static addBReps(t,e){t.addFieldOffset(6,e,0)}static createBRepsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBRepsVector(t,e){t.startVector(4,e,4)}static addTriangleMeshes(t,e){t.addFieldOffset(7,e,0)}static createTriangleMeshesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTriangleMeshesVector(t,e){t.startVector(4,e,4)}static addTriangleMeshes8(t,e){t.addFieldOffset(8,e,0)}static createTriangleMeshes8Vector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTriangleMeshes8Vector(t,e){t.startVector(4,e,4)}static addTexturedTriangleMeshes(t,e){t.addFieldOffset(9,e,0)}static createTexturedTriangleMeshesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTexturedTriangleMeshesVector(t,e){t.startVector(4,e,4)}static addTexturedTriangleMeshes8(t,e){t.addFieldOffset(10,e,0)}static createTexturedTriangleMeshes8Vector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTexturedTriangleMeshes8Vector(t,e){t.startVector(4,e,4)}static addSweptDiskSolids(t,e){t.addFieldOffset(11,e,0)}static createSweptDiskSolidsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startSweptDiskSolidsVector(t,e){t.startVector(4,e,4)}static addBRepWithUVs(t,e){t.addFieldOffset(12,e,0)}static createBRepWithUVsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBRepWithUVsVector(t,e){t.startVector(4,e,4)}static addBRepWithNormals(t,e){t.addFieldOffset(13,e,0)}static createBRepWithNormalsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBRepWithNormalsVector(t,e){t.startVector(4,e,4)}static addGraphicsContainers(t,e){t.addFieldOffset(14,e,0)}static createGraphicsContainersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startGraphicsContainersVector(t,e){t.startVector(4,e,4)}static addAlignmentCurves(t,e){t.addFieldOffset(15,e,0)}static createAlignmentCurvesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startAlignmentCurvesVector(t,e){t.startVector(4,e,4)}static addGridLineContainers(t,e){t.addFieldOffset(16,e,0)}static createGridLineContainersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startGridLineContainersVector(t,e){t.startVector(4,e,4)}static addCoordinateGeometryPoints(t,e){t.addFieldOffset(17,e,0)}static createCoordinateGeometryPointsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCoordinateGeometryPointsVector(t,e){t.startVector(4,e,4)}static addBillboardTexts(t,e){t.addFieldOffset(18,e,0)}static createBillboardTextsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBillboardTextsVector(t,e){t.startVector(4,e,4)}static addTextStyles(t,e){t.addFieldOffset(19,e,0)}static createTextStylesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startTextStylesVector(t,e){t.startVector(4,e,4)}static addBillboards(t,e){t.addFieldOffset(20,e,0)}static createBillboardsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBillboardsVector(t,e){t.startVector(4,e,4)}static addTexturedBillboards(t,e){t.addFieldOffset(21,e,0)}static startTexturedBillboardsVector(t,e){t.startVector(72,e,8)}static addBolts(t,e){t.addFieldOffset(22,e,0)}static createBoltsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startBoltsVector(t,e){t.startVector(4,e,4)}static endModelGeometry(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),t.requiredField(e,14),t.requiredField(e,16),t.requiredField(e,18),t.requiredField(e,20),t.requiredField(e,22),t.requiredField(e,24),t.requiredField(e,26),t.requiredField(e,28),t.requiredField(e,30),t.requiredField(e,32),t.requiredField(e,34),t.requiredField(e,36),t.requiredField(e,38),t.requiredField(e,40),t.requiredField(e,42),t.requiredField(e,44),t.requiredField(e,46),t.requiredField(e,48),e}static createModelGeometry(t,e,i,r,n,o,a,h,b,c,l,d,u,p,_,g,f,m,y,v,x,T,w,F){return s.startModelGeometry(t),s.addLocalPlacements(t,e),s.addSurfaceMaterials(t,i),s.addLayers(t,r),s.addDefinitions(t,n),s.addInstances(t,o),s.addTextures(t,a),s.addBReps(t,h),s.addTriangleMeshes(t,b),s.addTriangleMeshes8(t,c),s.addTexturedTriangleMeshes(t,l),s.addTexturedTriangleMeshes8(t,d),s.addSweptDiskSolids(t,u),s.addBRepWithUVs(t,p),s.addBRepWithNormals(t,_),s.addGraphicsContainers(t,g),s.addAlignmentCurves(t,f),s.addGridLineContainers(t,m),s.addCoordinateGeometryPoints(t,y),s.addBillboardTexts(t,v),s.addTextStyles(t,x),s.addBillboards(t,T),s.addTexturedBillboards(t,w),s.addBolts(t,F),s.endModelGeometry(t)}}e.ModelGeometry=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,i;e=t.Technology||(t.Technology={}),function(t){t.HierarchyNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}parentElementId(){return this.bb.readUint32(this.bb_pos)}mutate_parentElementId(t){var e=this.bb.__offset(this.bb_pos,0);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}childElementId(){return this.bb.readUint32(this.bb_pos+4)}mutate_childElementId(t){var e=this.bb.__offset(this.bb_pos,4);return 0!==e&&(this.bb.writeUint32(this.bb_pos+e,t),!0)}type(){return this.bb.readInt8(this.bb_pos+8)}mutate_type(t){var e=this.bb.__offset(this.bb_pos,8);return 0!==e&&(this.bb.writeInt8(this.bb_pos+e,t),!0)}static createHierarchyNode(t,e,i,s){return t.prep(4,12),t.pad(3),t.writeInt8(s),t.writeInt32(i),t.writeInt32(e),t.offset()}}}((i=e.TrimBim||(e.TrimBim={})).Fbs||(i.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModelEntities(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModelEntities(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}entities(e,i){var s=this.bb.__offset(this.bb_pos,4);return s?(i||new t.Technology.TrimBim.Fbs.Entity).__init(this.bb.__vector(this.bb_pos+s)+64*e,this.bb):null}entitiesLength(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}hierarchies(e,i){var s=this.bb.__offset(this.bb_pos,6);return s?(i||new t.Technology.TrimBim.Fbs.HierarchyNode).__init(this.bb.__vector(this.bb_pos+s)+12*e,this.bb):null}hierarchiesLength(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}guidIdentifiers(e,i){var s=this.bb.__offset(this.bb_pos,8);return s?(i||new t.Technology.TrimBim.Fbs.Guid).__init(this.bb.__vector(this.bb_pos+s)+16*e,this.bb):null}guidIdentifiersLength(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}stringIdentifiers(t,e){var i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}stringIdentifiersLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}spatialHashIdentifiers(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.SpatialHash).__init(this.bb.__vector(this.bb_pos+s)+88*e,this.bb):null}spatialHashIdentifiersLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}dwgHandleIdentifiers(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dwgHandleIdentifiersLength(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}entityClasses(t,e){var i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+4*t,e):null}entityClassesLength(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModelEntities(t){t.startObject(7)}static addEntities(t,e){t.addFieldOffset(0,e,0)}static startEntitiesVector(t,e){t.startVector(64,e,8)}static addHierarchies(t,e){t.addFieldOffset(1,e,0)}static startHierarchiesVector(t,e){t.startVector(12,e,4)}static addGuidIdentifiers(t,e){t.addFieldOffset(2,e,0)}static startGuidIdentifiersVector(t,e){t.startVector(16,e,4)}static addStringIdentifiers(t,e){t.addFieldOffset(3,e,0)}static createStringIdentifiersVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startStringIdentifiersVector(t,e){t.startVector(4,e,4)}static addSpatialHashIdentifiers(t,e){t.addFieldOffset(4,e,0)}static startSpatialHashIdentifiersVector(t,e){t.startVector(88,e,8)}static addDwgHandleIdentifiers(t,e){t.addFieldOffset(5,e,0)}static createDwgHandleIdentifiersVector(t,e){t.startVector(8,e.length,8);for(var i=e.length-1;i>=0;i--)t.addInt64(e[i]);return t.endVector()}static startDwgHandleIdentifiersVector(t,e){t.startVector(8,e,8)}static addEntityClasses(t,e){t.addFieldOffset(6,e,0)}static createEntityClassesVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startEntityClassesVector(t,e){t.startVector(4,e,4)}static endModelEntities(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),t.requiredField(e,14),t.requiredField(e,16),e}static createModelEntities(t,e,i,r,n,o,a,h){return s.startModelEntities(t),s.addEntities(t,e),s.addHierarchies(t,i),s.addGuidIdentifiers(t,r),s.addStringIdentifiers(t,n),s.addSpatialHashIdentifiers(t,o),s.addDwgHandleIdentifiers(t,a),s.addEntityClasses(t,h),s.endModelEntities(t)}}e.ModelEntities=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMetadataEntry(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMetadataEntry(t,s){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(s||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startMetadataEntry(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endMetadataEntry(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createMetadataEntry(t,i,s){return e.startMetadataEntry(t),e.addKey(t,i),e.addValue(t,s),e.endMetadataEntry(t)}}t.MetadataEntry=e}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={})),function(t){var e,s;e=t.Technology||(t.Technology={}),function(e){class s{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModel(t,e){return(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModel(t,e){return t.setPosition(t.position()+i.SIZE_PREFIX_LENGTH),(e||new s).__init(t.readInt32(t.position())+t.position(),t)}static bufferHasIdentifier(t){return t.__has_identifier("TRB8")}entities(e){var i=this.bb.__offset(this.bb_pos,4);return i?(e||new t.Technology.TrimBim.Fbs.ModelEntities).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}properties(e){var i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.Technology.TrimBim.Fbs.ModelProperties).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}geometry(e){var i=this.bb.__offset(this.bb_pos,8);return i?(e||new t.Technology.TrimBim.Fbs.ModelGeometry).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}mapConversions(e,i){var s=this.bb.__offset(this.bb_pos,10);return s?(i||new t.Technology.TrimBim.Fbs.MapConversion).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}mapConversionsLength(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}metadata(e,i){var s=this.bb.__offset(this.bb_pos,12);return s?(i||new t.Technology.TrimBim.Fbs.MetadataEntry).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*e),this.bb):null}metadataLength(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startModel(t){t.startObject(5)}static addEntities(t,e){t.addFieldOffset(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static addGeometry(t,e){t.addFieldOffset(2,e,0)}static addMapConversions(t,e){t.addFieldOffset(3,e,0)}static createMapConversionsVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startMapConversionsVector(t,e){t.startVector(4,e,4)}static addMetadata(t,e){t.addFieldOffset(4,e,0)}static createMetadataVector(t,e){t.startVector(4,e.length,4);for(var i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startMetadataVector(t,e){t.startVector(4,e,4)}static endModel(t){var e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),t.requiredField(e,10),t.requiredField(e,12),e}static finishModelBuffer(t,e){t.finish(e,"TRB8")}static finishSizePrefixedModelBuffer(t,e){t.finish(e,"TRB8",!0)}static createModel(t,e,i,r,n,o){return s.startModel(t),s.addEntities(t,e),s.addProperties(t,i),s.addGeometry(t,r),s.addMapConversions(t,n),s.addMetadata(t,o),s.endModel(t)}}e.Model=s}((s=e.TrimBim||(e.TrimBim={})).Fbs||(s.Fbs={}))}(e||(e={}));const s=[];for(let t=0;t<256;t++)s[t]=(t<16?"0":"")+t.toString(16);let r=1234567;const n={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(s[255&t]+s[t>>8&255]+s[t>>16&255]+s[t>>24&255]+"-"+s[255&e]+s[e>>8&255]+"-"+s[e>>16&15|64]+s[e>>24&255]+"-"+s[63&i|128]+s[i>>8&255]+"-"+s[i>>16&255]+s[i>>24&255]+s[255&r]+s[r>>8&255]+s[r>>16&255]+s[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,s,r){return s+(t-e)*(r-s)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},damp:function(t,e,i,s){return n.lerp(t,e,1-Math.exp(-i*s))},pingpong:function(t,e=1){return e-Math.abs(n.euclideanModulo(t,2*e)-e)},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(r=t%2147483647),r=16807*r%2147483647,(r-1)/2147483646},degToRad:function(t){return t*n.DEG2RAD},radToDeg:function(t){return t*n.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,s,r){const n=Math.cos,o=Math.sin,a=n(i/2),h=o(i/2),b=n((e+s)/2),c=o((e+s)/2),l=n((e-s)/2),d=o((e-s)/2),u=n((s-e)/2),p=o((s-e)/2);switch(r){case"XYX":t.set(a*c,h*l,h*d,a*b);break;case"YZY":t.set(h*d,a*c,h*l,a*b);break;case"ZXZ":t.set(h*l,h*d,a*c,a*b);break;case"XZX":t.set(a*c,h*p,h*u,a*b);break;case"YXY":t.set(h*u,a*c,h*p,a*b);break;case"ZYZ":t.set(h*p,h*u,a*c,a*b);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class o{constructor(t=0,e=0,i=0,s=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=i,this._w=s}static slerp(t,e,i,s){return i.copy(t).slerp(e,s)}static slerpFlat(t,e,i,s,r,n,o){let a=i[s+0],h=i[s+1],b=i[s+2],c=i[s+3];const l=r[n+0],d=r[n+1],u=r[n+2],p=r[n+3];if(c!==p||a!==l||h!==d||b!==u){let t=1-o;const e=a*l+h*d+b*u+c*p,i=e>=0?1:-1,s=1-e*e;if(s>Number.EPSILON){const r=Math.sqrt(s),n=Math.atan2(r,e*i);t=Math.sin(t*n)/r,o=Math.sin(o*n)/r}const r=o*i;if(a=a*t+l*r,h=h*t+d*r,b=b*t+u*r,c=c*t+p*r,t===1-o){const t=1/Math.sqrt(a*a+h*h+b*b+c*c);a*=t,h*=t,b*=t,c*=t}}t[e]=a,t[e+1]=h,t[e+2]=b,t[e+3]=c}static multiplyQuaternionsFlat(t,e,i,s,r,n){const o=i[s],a=i[s+1],h=i[s+2],b=i[s+3],c=r[n],l=r[n+1],d=r[n+2],u=r[n+3];return t[e]=o*u+b*c+a*d-h*l,t[e+1]=a*u+b*l+h*c-o*d,t[e+2]=h*u+b*d+o*l-a*c,t[e+3]=b*u-o*c-a*l-h*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,s=t._y,r=t._z,n=t._order,o=Math.cos,a=Math.sin,h=o(i/2),b=o(s/2),c=o(r/2),l=a(i/2),d=a(s/2),u=a(r/2);switch(n){case"XYZ":this._x=l*b*c+h*d*u,this._y=h*d*c-l*b*u,this._z=h*b*u+l*d*c,this._w=h*b*c-l*d*u;break;case"YXZ":this._x=l*b*c+h*d*u,this._y=h*d*c-l*b*u,this._z=h*b*u-l*d*c,this._w=h*b*c+l*d*u;break;case"ZXY":this._x=l*b*c-h*d*u,this._y=h*d*c+l*b*u,this._z=h*b*u+l*d*c,this._w=h*b*c-l*d*u;break;case"ZYX":this._x=l*b*c-h*d*u,this._y=h*d*c+l*b*u,this._z=h*b*u-l*d*c,this._w=h*b*c+l*d*u;break;case"YZX":this._x=l*b*c+h*d*u,this._y=h*d*c+l*b*u,this._z=h*b*u-l*d*c,this._w=h*b*c-l*d*u;break;case"XZY":this._x=l*b*c-h*d*u,this._y=h*d*c-l*b*u,this._z=h*b*u+l*d*c,this._w=h*b*c+l*d*u;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+n)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],s=e[4],r=e[8],n=e[1],o=e[5],a=e[9],h=e[2],b=e[6],c=e[10],l=i+o+c;if(l>0){const t=.5/Math.sqrt(l+1);this._w=.25/t,this._x=(b-a)*t,this._y=(r-h)*t,this._z=(n-s)*t}else if(i>o&&i>c){const t=2*Math.sqrt(1+i-o-c);this._w=(b-a)/t,this._x=.25*t,this._y=(s+n)/t,this._z=(r+h)/t}else if(o>c){const t=2*Math.sqrt(1+o-i-c);this._w=(r-h)/t,this._x=(s+n)/t,this._y=.25*t,this._z=(a+b)/t}else{const t=2*Math.sqrt(1+c-i-o);this._w=(n-s)/t,this._x=(r+h)/t,this._y=(a+b)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(n.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,s=t._y,r=t._z,n=t._w,o=e._x,a=e._y,h=e._z,b=e._w;return this._x=i*b+n*o+s*h-r*a,this._y=s*b+n*a+r*o-i*h,this._z=r*b+n*h+i*a-s*o,this._w=n*b-i*o-s*a-r*h,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,s=this._y,r=this._z,n=this._w;let o=n*t._w+i*t._x+s*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=n,this._x=i,this._y=s,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*n+e*this._w,this._x=t*i+e*this._x,this._y=t*s+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(a),b=Math.atan2(h,o),c=Math.sin((1-e)*b)/h,l=Math.sin(e*b)/h;return this._w=n*c+this._w*l,this._x=i*c+this._x*l,this._y=s*c+this._y*l,this._z=r*c+this._z*l,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class a{constructor(t=0,e=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(b.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(b.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*s,this.y=r[1]*e+r[4]*i+r[7]*s,this.z=r[2]*e+r[5]*i+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=t.elements,n=1/(r[3]*e+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*s+r[12])*n,this.y=(r[1]*e+r[5]*i+r[9]*s+r[13])*n,this.z=(r[2]*e+r[6]*i+r[10]*s+r[14])*n,this}applyQuaternion(t){const e=this.x,i=this.y,s=this.z,r=t.x,n=t.y,o=t.z,a=t.w,h=a*e+n*s-o*i,b=a*i+o*e-r*s,c=a*s+r*i-n*e,l=-r*e-n*i-o*s;return this.x=h*a+l*-r+b*-o-c*-n,this.y=b*a+l*-n+c*-r-h*-o,this.z=c*a+l*-o+h*-n-b*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s,this.y=r[1]*e+r[5]*i+r[9]*s,this.z=r[2]*e+r[6]*i+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,s=t.y,r=t.z,n=e.x,o=e.y,a=e.z;return this.x=s*a-r*o,this.y=r*n-i*a,this.z=i*o-s*n,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return h.copy(this).projectOnVector(t),this.sub(h)}reflect(t){return this.sub(h.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(n.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const h=new a,b=new o;class c{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,s,r,n,o,a,h){const b=this.elements;return b[0]=t,b[1]=s,b[2]=o,b[3]=e,b[4]=r,b[5]=a,b[6]=i,b[7]=n,b[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,n=i[0],o=i[3],a=i[6],h=i[1],b=i[4],c=i[7],l=i[2],d=i[5],u=i[8],p=s[0],_=s[3],g=s[6],f=s[1],m=s[4],y=s[7],v=s[2],x=s[5],T=s[8];return r[0]=n*p+o*f+a*v,r[3]=n*_+o*m+a*x,r[6]=n*g+o*y+a*T,r[1]=h*p+b*f+c*v,r[4]=h*_+b*m+c*x,r[7]=h*g+b*y+c*T,r[2]=l*p+d*f+u*v,r[5]=l*_+d*m+u*x,r[8]=l*g+d*y+u*T,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],o=t[5],a=t[6],h=t[7],b=t[8];return e*n*b-e*o*h-i*r*b+i*o*a+s*r*h-s*n*a}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],o=t[5],a=t[6],h=t[7],b=t[8],c=b*n-o*h,l=o*a-b*r,d=h*r-n*a,u=e*c+i*l+s*d;if(0===u)return this.set(0,0,0,0,0,0,0,0,0);const p=1/u;return t[0]=c*p,t[1]=(s*h-b*i)*p,t[2]=(o*i-s*n)*p,t[3]=l*p,t[4]=(b*e-s*a)*p,t[5]=(s*r-o*e)*p,t[6]=d*p,t[7]=(i*a-h*e)*p,t[8]=(n*e-i*r)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).copy(this).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,r,n,o){const a=Math.cos(r),h=Math.sin(r);return this.set(i*a,i*h,-i*(a*n+h*o)+n+t,-s*h,s*a,-s*(-h*n+a*o)+o+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.elements,r=s[0],n=s[3],o=s[6],a=s[1],h=s[4],b=s[7];return s[0]=e*r+i*a,s[3]=e*n+i*h,s[6]=e*o+i*b,s[1]=-i*r+e*a,s[4]=-i*n+e*h,s[7]=-i*o+e*b,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}const l=new a,d=new a,u=new c;class p{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new a(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,s){return this.normal.set(t,e,i),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const s=l.subVectors(i,e).cross(d.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new a),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new a);const i=t.delta(l),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?void 0:e.copy(i).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new a),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||u.getNormalMatrix(t),s=this.coplanarPoint(l).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const _=new a,g=new a,f=new a,m=new a,y=new a,v=new a,x=new a,T=new a,w=new a,F=new a;class S{constructor(t,e,i){this.a=void 0!==t?t:new a,this.b=void 0!==e?e:new a,this.c=void 0!==i?i:new a}static getNormal(t,e,i,s){void 0===s&&(console.warn("THREE.Triangle: .getNormal() target is now required"),s=new a),s.subVectors(i,e),_.subVectors(t,e),s.cross(_);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,i,s,r){_.subVectors(s,e),g.subVectors(i,e),f.subVectors(t,e);const n=_.dot(_),o=_.dot(g),h=_.dot(f),b=g.dot(g),c=g.dot(f),l=n*b-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new a),0===l)return r.set(-2,-1,-1);const d=1/l,u=(b*h-o*c)*d,p=(n*c-o*h)*d;return r.set(1-u-p,p,u)}static containsPoint(t,e,i,s){return this.getBarycoord(t,e,i,s,m),m.x>=0&&m.y>=0&&m.x+m.y<=1}static getUV(t,e,i,s,r,n,o,a){return this.getBarycoord(t,e,i,s,m),a.set(0,0),a.addScaledVector(r,m.x),a.addScaledVector(n,m.y),a.addScaledVector(o,m.z),a}static isFrontFacing(t,e,i,s){return _.subVectors(i,e),g.subVectors(t,e),_.cross(g).dot(s)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return _.subVectors(this.c,this.b),g.subVectors(this.a,this.b),.5*_.cross(g).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new a),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return S.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new p),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return S.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,s,r){return S.getUV(t,this.a,this.b,this.c,e,i,s,r)}containsPoint(t){return S.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return S.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new a);const i=this.a,s=this.b,r=this.c;let n,o;y.subVectors(s,i),v.subVectors(r,i),T.subVectors(t,i);const h=y.dot(T),b=v.dot(T);if(h<=0&&b<=0)return e.copy(i);w.subVectors(t,s);const c=y.dot(w),l=v.dot(w);if(c>=0&&l<=c)return e.copy(s);const d=h*l-c*b;if(d<=0&&h>=0&&c<=0)return n=h/(h-c),e.copy(i).addScaledVector(y,n);F.subVectors(t,r);const u=y.dot(F),p=v.dot(F);if(p>=0&&u<=p)return e.copy(r);const _=u*b-h*p;if(_<=0&&b>=0&&p<=0)return o=b/(b-p),e.copy(i).addScaledVector(v,o);const g=c*p-u*l;if(g<=0&&l-c>=0&&u-p>=0)return x.subVectors(r,s),o=(l-c)/(l-c+(u-p)),e.copy(s).addScaledVector(x,o);const f=1/(g+_+d);return n=_*f,o=d*f,e.copy(i).addScaledVector(y,n).addScaledVector(v,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}class I{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new a(1/0,1/0,1/0),this.max=void 0!==e?e:new a(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,s=1/0,r=-1/0,n=-1/0,o=-1/0;for(let a=0,h=t.length;a<h;a+=3){const h=t[a],b=t[a+1],c=t[a+2];h<e&&(e=h),b<i&&(i=b),c<s&&(s=c),h>r&&(r=h),b>n&&(n=b),c>o&&(o=c)}return this.min.set(e,i,s),this.max.set(r,n,o),this}setFromBufferAttribute(t){let e=1/0,i=1/0,s=1/0,r=-1/0,n=-1/0,o=-1/0;for(let a=0,h=t.count;a<h;a++){const h=t.getX(a),b=t.getY(a),c=t.getZ(a);h<e&&(e=h),b<i&&(i=b),c<s&&(s=c),h>r&&(r=h),b>n&&(n=b),c>o&&(o=c)}return this.min.set(e,i,s),this.max.set(r,n,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=V.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new a),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new a),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),L.copy(e.boundingBox),L.applyMatrix4(t.matrixWorld),this.union(L));const i=t.children;for(let t=0,e=i.length;t<e;t++)this.expandByObject(i[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new a),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,V),V.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(R),G.subVectors(this.max,R),P.subVectors(t.a,R),z.subVectors(t.b,R),A.subVectors(t.c,R),C.subVectors(z,P),E.subVectors(A,z),O.subVectors(P,A);let e=[0,-C.z,C.y,0,-E.z,E.y,0,-O.z,O.y,C.z,0,-C.x,E.z,0,-E.x,O.z,0,-O.x,-C.y,C.x,0,-E.y,E.x,0,-O.y,O.x,0];return!!B(e,P,z,A,G)&&(e=[1,0,0,0,1,0,0,0,1],!!B(e,P,z,A,G)&&(D.crossVectors(C,E),e=[D.x,D.y,D.z],B(e,P,z,A,G)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new a),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return V.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(V).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(M[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),M[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),M[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),M[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),M[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),M[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),M[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),M[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(M)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function B(t,e,i,s,r){for(let n=0,o=t.length-3;n<=o;n+=3){H.fromArray(t,n);const o=r.x*Math.abs(H.x)+r.y*Math.abs(H.y)+r.z*Math.abs(H.z),a=e.dot(H),h=i.dot(H),b=s.dot(H);if(Math.max(-Math.max(a,h,b),Math.min(a,h,b))>o)return!1}return!0}const M=[new a,new a,new a,new a,new a,new a,new a,new a],V=new a,L=new I,P=new a,z=new a,A=new a,C=new a,E=new a,O=new a,R=new a,G=new a,D=new a,H=new a,N=new I;class U{constructor(t,e){this.center=void 0!==t?t:new a,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):N.setFromPoints(t).getCenter(i);let s=0;for(let e=0,r=t.length;e<r;e++)s=Math.max(s,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(s),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new a),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new I),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const q=new U,k=new a;class W{constructor(t,e,i,s,r,n){this.planes=[void 0!==t?t:new p,void 0!==e?e:new p,void 0!==i?i:new p,void 0!==s?s:new p,void 0!==r?r:new p,void 0!==n?n:new p]}set(t,e,i,s,r,n){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(s),o[4].copy(r),o[5].copy(n),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,s=i[0],r=i[1],n=i[2],o=i[3],a=i[4],h=i[5],b=i[6],c=i[7],l=i[8],d=i[9],u=i[10],p=i[11],_=i[12],g=i[13],f=i[14],m=i[15];return e[0].setComponents(o-s,c-a,p-l,m-_).normalize(),e[1].setComponents(o+s,c+a,p+l,m+_).normalize(),e[2].setComponents(o+r,c+h,p+d,m+g).normalize(),e[3].setComponents(o-r,c-h,p-d,m-g).normalize(),e[4].setComponents(o-n,c-b,p-u,m-f).normalize(),e[5].setComponents(o+n,c+b,p+u,m+f).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),q.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(q)}intersectsSprite(t){return q.center.set(0,0,0),q.radius=.7071067811865476,q.applyMatrix4(t.matrixWorld),this.intersectsSphere(q)}intersectsSphere(t){const e=this.planes,i=t.center,s=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(i)<s)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const s=e[i];if(k.x=s.normal.x>0?t.max.x:t.min.x,k.y=s.normal.y>0?t.max.y:t.min.y,k.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(k)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}}const j=new a,Z=new a,X=new a,Q=new a,Y=new a,$=new a,K=new a;class J{constructor(t,e){this.origin=void 0!==t?t:new a,this.direction=void 0!==e?e:new a(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new a),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,j)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new a),e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=j.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(j.copy(this.direction).multiplyScalar(e).add(this.origin),j.distanceToSquared(t))}distanceSqToSegment(t,e,i,s){Z.copy(t).add(e).multiplyScalar(.5),X.copy(e).sub(t).normalize(),Q.copy(this.origin).sub(Z);const r=.5*t.distanceTo(e),n=-this.direction.dot(X),o=Q.dot(this.direction),a=-Q.dot(X),h=Q.lengthSq(),b=Math.abs(1-n*n);let c,l,d,u;if(b>0)if(c=n*a-o,l=n*o-a,u=r*b,c>=0)if(l>=-u)if(l<=u){const t=1/b;c*=t,l*=t,d=c*(c+n*l+2*o)+l*(n*c+l+2*a)+h}else l=r,c=Math.max(0,-(n*l+o)),d=-c*c+l*(l+2*a)+h;else l=-r,c=Math.max(0,-(n*l+o)),d=-c*c+l*(l+2*a)+h;else l<=-u?(c=Math.max(0,-(-n*r+o)),l=c>0?-r:Math.min(Math.max(-r,-a),r),d=-c*c+l*(l+2*a)+h):l<=u?(c=0,l=Math.min(Math.max(-r,-a),r),d=l*(l+2*a)+h):(c=Math.max(0,-(n*r+o)),l=c>0?r:Math.min(Math.max(-r,-a),r),d=-c*c+l*(l+2*a)+h);else l=n>0?-r:r,c=Math.max(0,-(n*l+o)),d=-c*c+l*(l+2*a)+h;return i&&i.copy(this.direction).multiplyScalar(c).add(this.origin),s&&s.copy(X).multiplyScalar(l).add(Z),d}intersectSphere(t,e){j.subVectors(t.center,this.origin);const i=j.dot(this.direction),s=j.dot(j)-i*i,r=t.radius*t.radius;if(s>r)return null;const n=Math.sqrt(r-s),o=i-n,a=i+n;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,s,r,n,o,a;const h=1/this.direction.x,b=1/this.direction.y,c=1/this.direction.z,l=this.origin;return h>=0?(i=(t.min.x-l.x)*h,s=(t.max.x-l.x)*h):(i=(t.max.x-l.x)*h,s=(t.min.x-l.x)*h),b>=0?(r=(t.min.y-l.y)*b,n=(t.max.y-l.y)*b):(r=(t.max.y-l.y)*b,n=(t.min.y-l.y)*b),i>n||r>s?null:((r>i||i!=i)&&(i=r),(n<s||s!=s)&&(s=n),c>=0?(o=(t.min.z-l.z)*c,a=(t.max.z-l.z)*c):(o=(t.max.z-l.z)*c,a=(t.min.z-l.z)*c),i>a||o>s?null:((o>i||i!=i)&&(i=o),(a<s||s!=s)&&(s=a),s<0?null:this.at(i>=0?i:s,e)))}intersectsBox(t){return null!==this.intersectBox(t,j)}intersectTriangle(t,e,i,s,r){Y.subVectors(e,t),$.subVectors(i,t),K.crossVectors(Y,$);let n,o=this.direction.dot(K);if(o>0){if(s)return null;n=1}else{if(!(o<0))return null;n=-1,o=-o}Q.subVectors(this.origin,t);const a=n*this.direction.dot($.crossVectors(Q,$));if(a<0)return null;const h=n*this.direction.dot(Y.cross(Q));if(h<0)return null;if(a+h>o)return null;const b=-n*Q.dot(K);return b<0?null:this.at(b/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class tt{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,s,r,n,o,a,h,b,c,l,d,u,p,_){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=s,g[1]=r,g[5]=n,g[9]=o,g[13]=a,g[2]=h,g[6]=b,g[10]=c,g[14]=l,g[3]=d,g[7]=u,g[11]=p,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new tt).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,s=1/et.setFromMatrixColumn(t,0).length(),r=1/et.setFromMatrixColumn(t,1).length(),n=1/et.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*n,e[9]=i[9]*n,e[10]=i[10]*n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,i=t.x,s=t.y,r=t.z,n=Math.cos(i),o=Math.sin(i),a=Math.cos(s),h=Math.sin(s),b=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=n*b,i=n*c,s=o*b,r=o*c;e[0]=a*b,e[4]=-a*c,e[8]=h,e[1]=i+s*h,e[5]=t-r*h,e[9]=-o*a,e[2]=r-t*h,e[6]=s+i*h,e[10]=n*a}else if("YXZ"===t.order){const t=a*b,i=a*c,s=h*b,r=h*c;e[0]=t+r*o,e[4]=s*o-i,e[8]=n*h,e[1]=n*c,e[5]=n*b,e[9]=-o,e[2]=i*o-s,e[6]=r+t*o,e[10]=n*a}else if("ZXY"===t.order){const t=a*b,i=a*c,s=h*b,r=h*c;e[0]=t-r*o,e[4]=-n*c,e[8]=s+i*o,e[1]=i+s*o,e[5]=n*b,e[9]=r-t*o,e[2]=-n*h,e[6]=o,e[10]=n*a}else if("ZYX"===t.order){const t=n*b,i=n*c,s=o*b,r=o*c;e[0]=a*b,e[4]=s*h-i,e[8]=t*h+r,e[1]=a*c,e[5]=r*h+t,e[9]=i*h-s,e[2]=-h,e[6]=o*a,e[10]=n*a}else if("YZX"===t.order){const t=n*a,i=n*h,s=o*a,r=o*h;e[0]=a*b,e[4]=r-t*c,e[8]=s*c+i,e[1]=c,e[5]=n*b,e[9]=-o*b,e[2]=-h*b,e[6]=i*c+s,e[10]=t-r*c}else if("XZY"===t.order){const t=n*a,i=n*h,s=o*a,r=o*h;e[0]=a*b,e[4]=-c,e[8]=h*b,e[1]=t*c+r,e[5]=n*b,e[9]=i*c-s,e[2]=s*c-i,e[6]=o*b,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(st,t,rt)}lookAt(t,e,i){const s=this.elements;return at.subVectors(t,e),0===at.lengthSq()&&(at.z=1),at.normalize(),nt.crossVectors(i,at),0===nt.lengthSq()&&(1===Math.abs(i.z)?at.x+=1e-4:at.z+=1e-4,at.normalize(),nt.crossVectors(i,at)),nt.normalize(),ot.crossVectors(at,nt),s[0]=nt.x,s[4]=ot.x,s[8]=at.x,s[1]=nt.y,s[5]=ot.y,s[9]=at.y,s[2]=nt.z,s[6]=ot.z,s[10]=at.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,n=i[0],o=i[4],a=i[8],h=i[12],b=i[1],c=i[5],l=i[9],d=i[13],u=i[2],p=i[6],_=i[10],g=i[14],f=i[3],m=i[7],y=i[11],v=i[15],x=s[0],T=s[4],w=s[8],F=s[12],S=s[1],I=s[5],B=s[9],M=s[13],V=s[2],L=s[6],P=s[10],z=s[14],A=s[3],C=s[7],E=s[11],O=s[15];return r[0]=n*x+o*S+a*V+h*A,r[4]=n*T+o*I+a*L+h*C,r[8]=n*w+o*B+a*P+h*E,r[12]=n*F+o*M+a*z+h*O,r[1]=b*x+c*S+l*V+d*A,r[5]=b*T+c*I+l*L+d*C,r[9]=b*w+c*B+l*P+d*E,r[13]=b*F+c*M+l*z+d*O,r[2]=u*x+p*S+_*V+g*A,r[6]=u*T+p*I+_*L+g*C,r[10]=u*w+p*B+_*P+g*E,r[14]=u*F+p*M+_*z+g*O,r[3]=f*x+m*S+y*V+v*A,r[7]=f*T+m*I+y*L+v*C,r[11]=f*w+m*B+y*P+v*E,r[15]=f*F+m*M+y*z+v*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],s=t[8],r=t[12],n=t[1],o=t[5],a=t[9],h=t[13],b=t[2],c=t[6],l=t[10],d=t[14];return t[3]*(+r*a*c-s*h*c-r*o*l+i*h*l+s*o*d-i*a*d)+t[7]*(+e*a*d-e*h*l+r*n*l-s*n*d+s*h*b-r*a*b)+t[11]*(+e*h*c-e*o*d-r*n*c+i*n*d+r*o*b-i*h*b)+t[15]*(-s*o*b-e*a*c+e*o*l+s*n*c-i*n*l+i*a*b)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],o=t[5],a=t[6],h=t[7],b=t[8],c=t[9],l=t[10],d=t[11],u=t[12],p=t[13],_=t[14],g=t[15],f=c*_*h-p*l*h+p*a*d-o*_*d-c*a*g+o*l*g,m=u*l*h-b*_*h-u*a*d+n*_*d+b*a*g-n*l*g,y=b*p*h-u*c*h+u*o*d-n*p*d-b*o*g+n*c*g,v=u*c*a-b*p*a-u*o*l+n*p*l+b*o*_-n*c*_,x=e*f+i*m+s*y+r*v;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/x;return t[0]=f*T,t[1]=(p*l*r-c*_*r-p*s*d+i*_*d+c*s*g-i*l*g)*T,t[2]=(o*_*r-p*a*r+p*s*h-i*_*h-o*s*g+i*a*g)*T,t[3]=(c*a*r-o*l*r-c*s*h+i*l*h+o*s*d-i*a*d)*T,t[4]=m*T,t[5]=(b*_*r-u*l*r+u*s*d-e*_*d-b*s*g+e*l*g)*T,t[6]=(u*a*r-n*_*r-u*s*h+e*_*h+n*s*g-e*a*g)*T,t[7]=(n*l*r-b*a*r+b*s*h-e*l*h-n*s*d+e*a*d)*T,t[8]=y*T,t[9]=(u*c*r-b*p*r-u*i*d+e*p*d+b*i*g-e*c*g)*T,t[10]=(n*p*r-u*o*r+u*i*h-e*p*h-n*i*g+e*o*g)*T,t[11]=(b*o*r-n*c*r-b*i*h+e*c*h+n*i*d-e*o*d)*T,t[12]=v*T,t[13]=(b*p*s-u*c*s+u*i*l-e*p*l-b*i*_+e*c*_)*T,t[14]=(u*o*s-n*p*s-u*i*a+e*p*a+n*i*_-e*o*_)*T,t[15]=(n*c*s-b*o*s+b*i*a-e*c*a-n*i*l+e*o*l)*T,this}scale(t){const e=this.elements,i=t.x,s=t.y,r=t.z;return e[0]*=i,e[4]*=s,e[8]*=r,e[1]*=i,e[5]*=s,e[9]*=r,e[2]*=i,e[6]*=s,e[10]*=r,e[3]*=i,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),s=Math.sin(e),r=1-i,n=t.x,o=t.y,a=t.z,h=r*n,b=r*o;return this.set(h*n+i,h*o-s*a,h*a+s*o,0,h*o+s*a,b*o+i,b*a-s*n,0,h*a-s*o,b*a+s*n,r*a*a+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this}compose(t,e,i){const s=this.elements,r=e._x,n=e._y,o=e._z,a=e._w,h=r+r,b=n+n,c=o+o,l=r*h,d=r*b,u=r*c,p=n*b,_=n*c,g=o*c,f=a*h,m=a*b,y=a*c,v=i.x,x=i.y,T=i.z;return s[0]=(1-(p+g))*v,s[1]=(d+y)*v,s[2]=(u-m)*v,s[3]=0,s[4]=(d-y)*x,s[5]=(1-(l+g))*x,s[6]=(_+f)*x,s[7]=0,s[8]=(u+m)*T,s[9]=(_-f)*T,s[10]=(1-(l+p))*T,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){const s=this.elements;let r=et.set(s[0],s[1],s[2]).length();const n=et.set(s[4],s[5],s[6]).length(),o=et.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],it.copy(this);const a=1/r,h=1/n,b=1/o;return it.elements[0]*=a,it.elements[1]*=a,it.elements[2]*=a,it.elements[4]*=h,it.elements[5]*=h,it.elements[6]*=h,it.elements[8]*=b,it.elements[9]*=b,it.elements[10]*=b,e.setFromRotationMatrix(it),i.x=r,i.y=n,i.z=o,this}makePerspective(t,e,i,s,r,n){void 0===n&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*r/(e-t),h=2*r/(i-s),b=(e+t)/(e-t),c=(i+s)/(i-s),l=-(n+r)/(n-r),d=-2*n*r/(n-r);return o[0]=a,o[4]=0,o[8]=b,o[12]=0,o[1]=0,o[5]=h,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,i,s,r,n){const o=this.elements,a=1/(e-t),h=1/(i-s),b=1/(n-r),c=(e+t)*a,l=(i+s)*h,d=(n+r)*b;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*b,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const et=new a,it=new tt,st=new a(0,0,0),rt=new a(1,1,1),nt=new a,ot=new a,at=new a;class ht{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),s=Math.sin(e),r=this.x-t.x,n=this.y-t.y;return this.x=r*i-n*s+t.x,this.y=r*s+n*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}const bt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ct={h:0,s:0,l:0},lt={h:0,s:0,l:0};function dt(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function ut(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function pt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class _t{constructor(t,e,i){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}setHSL(t,e,i){if(t=n.euclideanModulo(t,1),e=n.clamp(e,0,1),i=n.clamp(i,0,1),0===e)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+e):i+e-i*e,r=2*i-s;this.r=dt(r,s,t+1/3),this.g=dt(r,s,t),this.b=dt(r,s,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const s=i[1],r=i[2];switch(s){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const i=parseFloat(t[1])/360,s=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(i,s,r)}}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=i[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=bt[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=ut(t.r),this.g=ut(t.g),this.b=ut(t.b),this}copyLinearToSRGB(t){return this.r=pt(t.r),this.g=pt(t.g),this.b=pt(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,i=this.g,s=this.b,r=Math.max(e,i,s),n=Math.min(e,i,s);let o,a;const h=(n+r)/2;if(n===r)o=0,a=0;else{const t=r-n;switch(a=h<=.5?t/(r+n):t/(2-r-n),r){case e:o=(i-s)/t+(i<s?6:0);break;case i:o=(s-e)/t+2;break;case s:o=(e-i)/t+4}o/=6}return t.h=o,t.s=a,t.l=h,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,i){return this.getHSL(ct),ct.h+=t,ct.s+=e,ct.l+=i,this.setHSL(ct.h,ct.s,ct.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(ct),t.getHSL(lt);const i=n.lerp(ct.h,lt.h,e),s=n.lerp(ct.s,lt.s,e),r=n.lerp(ct.l,lt.l,e);return this.setHSL(i,s,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}_t.NAMES=bt,_t.prototype.r=1,_t.prototype.g=1,_t.prototype.b=1;var gt=e.Technology.TrimBim.Fbs;class ft{constructor(t,e,i){this.modelId=t,this.textureManager=e,this.postMessage=i,this.materials=[]}sendModelMaterials(t){const e=[],i=t.geometry(),s=i.surfaceMaterialsLength();for(let t=0;t<s;t++){const s=i.surfaceMaterials(t);let r=!1,n=s.textureId();4294967295===n&&(n=void 0),void 0!==n&&(r=this.textureManager.isTransparent(n));const o={color:new _t(s.r()/255,s.g()/255,s.b()/255),side:s.sidedness(),lineStyle:s.lineStyle(),textureId:n,opacity:s.a()/255,transparent:r||s.a()<255};e.push(o)}return this.sendMaterials(e)}sendMaterials(t){const e=[],i=[];t:for(const s of t){for(let t=0,i=this.materials.length;t<i;t++)if(this.equal(s,this.materials[t])){e.push(t);continue t}this.materials.push(s),i.push(s),e.push(this.materials.length-1)}return this.postMessage({type:4,modelId:this.modelId,materials:i}),e}equal(t,e){return(t.color===e.color||t.color&&e.color&&t.color.r===e.color.r&&t.color.g===e.color.g&&t.color.b===e.color.b)&&this.eq(t.opacity,e.opacity,1)&&this.eq(t.side,e.side,gt.Sidedness.Single)&&this.eq(t.lineStyle,e.lineStyle,gt.LineStyle.Normal)&&t.textureId===e.textureId}eq(t,e,i){return t===e||void 0===t&&e===i||t===i&&void 0===e}getMaterial(t){return this.materials[t]}}var mt=e.Technology.TrimBim.Fbs;class yt{constructor(t){this.instance=new mt.GeometryInstance,this.geometry=t.geometry(),this.entities=t.entities(),this.layerVisibilities=new Array(this.geometry.layersLength())}getLayers(){const t=[];for(let e=0;e<this.geometry.layersLength();e++)t.push(this.geometry.layers(e));return t}findLayersByEntities(t){const e=new Set;for(let i=0;i<this.geometry.instancesLength();i++)this.geometry.instances(i,this.instance),t.includes(this.instance.entityId())&&e.add(this.geometry.layers(this.instance.layerId()));return Array.from(e)}getLayerIndex(t){for(let e=0;e<this.geometry.layersLength();e++)if(this.geometry.layers(e)===t)return e}getLayerVisibility(t){return this.layerVisibilities[this.getLayerIndex(t)]}setLayerVisibility(t,e){this.layerVisibilities[this.getLayerIndex(t)]=e}isVisible(t){const e=this.layerVisibilities[t];return!0===e||void 0===e}}var vt=xt;function xt(t){var e=this;if(e instanceof xt||(e=new xt),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var i=0,s=arguments.length;i<s;i++)e.push(arguments[i]);return e}function Tt(t,e,i){var s=e===t.head?new St(i,null,e,t):new St(i,e,e.next,t);return null===s.next&&(t.tail=s),null===s.prev&&(t.head=s),t.length++,s}function wt(t,e){t.tail=new St(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Ft(t,e){t.head=new St(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function St(t,e,i,s){if(!(this instanceof St))return new St(t,e,i,s);this.list=s,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}xt.Node=St,xt.create=xt,xt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,i=t.prev;return e&&(e.prev=i),i&&(i.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null,e},xt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},xt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},xt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)wt(this,arguments[t]);return this.length},xt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Ft(this,arguments[t]);return this.length},xt.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},xt.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},xt.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,s=0;null!==i;s++)t.call(e,i.value,s,this),i=i.next},xt.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,s=this.length-1;null!==i;s--)t.call(e,i.value,s,this),i=i.prev},xt.prototype.get=function(t){for(var e=0,i=this.head;null!==i&&e<t;e++)i=i.next;if(e===t&&null!==i)return i.value},xt.prototype.getReverse=function(t){for(var e=0,i=this.tail;null!==i&&e<t;e++)i=i.prev;if(e===t&&null!==i)return i.value},xt.prototype.map=function(t,e){e=e||this;for(var i=new xt,s=this.head;null!==s;)i.push(t.call(e,s.value,this)),s=s.next;return i},xt.prototype.mapReverse=function(t,e){e=e||this;for(var i=new xt,s=this.tail;null!==s;)i.push(t.call(e,s.value,this)),s=s.prev;return i},xt.prototype.reduce=function(t,e){var i,s=this.head;if(arguments.length>1)i=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");s=this.head.next,i=this.head.value}for(var r=0;null!==s;r++)i=t(i,s.value,r),s=s.next;return i},xt.prototype.reduceReverse=function(t,e){var i,s=this.tail;if(arguments.length>1)i=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");s=this.tail.prev,i=this.tail.value}for(var r=this.length-1;null!==s;r--)i=t(i,s.value,r),s=s.prev;return i},xt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,i=this.head;null!==i;e++)t[e]=i.value,i=i.next;return t},xt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,i=this.tail;null!==i;e++)t[e]=i.value,i=i.prev;return t},xt.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var i=new xt;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=0,r=this.head;null!==r&&s<t;s++)r=r.next;for(;null!==r&&s<e;s++,r=r.next)i.push(r.value);return i},xt.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var i=new xt;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=this.length,r=this.tail;null!==r&&s>e;s--)r=r.prev;for(;null!==r&&s>t;s--,r=r.prev)i.push(r.value);return i},xt.prototype.splice=function(t,e,...i){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var s=0,r=this.head;null!==r&&s<t;s++)r=r.next;var n=[];for(s=0;r&&s<e;s++)n.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(s=0;s<i.length;s++)r=Tt(this,r,i[s]);return n},xt.prototype.reverse=function(){for(var t=this.head,e=this.tail,i=t;null!==i;i=i.prev){var s=i.prev;i.prev=i.next,i.next=s}return this.head=e,this.tail=t,this};try{!function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}(xt)}catch(t){}const It=Symbol("max"),Bt=Symbol("length"),Mt=Symbol("lengthCalculator"),Vt=Symbol("allowStale"),Lt=Symbol("maxAge"),Pt=Symbol("dispose"),zt=Symbol("noDisposeOnSet"),At=Symbol("lruList"),Ct=Symbol("cache"),Et=Symbol("updateAgeOnGet"),Ot=()=>1;const Rt=(t,e,i)=>{const s=t[Ct].get(e);if(s){const e=s.value;if(Gt(t,e)){if(Ht(t,s),!t[Vt])return}else i&&(t[Et]&&(s.value.now=Date.now()),t[At].unshiftNode(s));return e.value}},Gt=(t,e)=>{if(!e||!e.maxAge&&!t[Lt])return!1;const i=Date.now()-e.now;return e.maxAge?i>e.maxAge:t[Lt]&&i>t[Lt]},Dt=t=>{if(t[Bt]>t[It])for(let e=t[At].tail;t[Bt]>t[It]&&null!==e;){const i=e.prev;Ht(t,e),e=i}},Ht=(t,e)=>{if(e){const i=e.value;t[Pt]&&t[Pt](i.key,i.value),t[Bt]-=i.length,t[Ct].delete(i.key),t[At].removeNode(e)}};class Nt{constructor(t,e,i,s,r){this.key=t,this.value=e,this.length=i,this.now=s,this.maxAge=r||0}}const Ut=(t,e,i,s)=>{let r=i.value;Gt(t,r)&&(Ht(t,i),t[Vt]||(r=void 0)),r&&e.call(s,r.value,r.key,t)};var qt=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[It]=t.max||1/0;const e=t.length||Ot;if(this[Mt]="function"!=typeof e?Ot:e,this[Vt]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[Lt]=t.maxAge||0,this[Pt]=t.dispose,this[zt]=t.noDisposeOnSet||!1,this[Et]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[It]=t||1/0,Dt(this)}get max(){return this[It]}set allowStale(t){this[Vt]=!!t}get allowStale(){return this[Vt]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[Lt]=t,Dt(this)}get maxAge(){return this[Lt]}set lengthCalculator(t){"function"!=typeof t&&(t=Ot),t!==this[Mt]&&(this[Mt]=t,this[Bt]=0,this[At].forEach((t=>{t.length=this[Mt](t.value,t.key),this[Bt]+=t.length}))),Dt(this)}get lengthCalculator(){return this[Mt]}get length(){return this[Bt]}get itemCount(){return this[At].length}rforEach(t,e){e=e||this;for(let i=this[At].tail;null!==i;){const s=i.prev;Ut(this,t,i,e),i=s}}forEach(t,e){e=e||this;for(let i=this[At].head;null!==i;){const s=i.next;Ut(this,t,i,e),i=s}}keys(){return this[At].toArray().map((t=>t.key))}values(){return this[At].toArray().map((t=>t.value))}reset(){this[Pt]&&this[At]&&this[At].length&&this[At].forEach((t=>this[Pt](t.key,t.value))),this[Ct]=new Map,this[At]=new vt,this[Bt]=0}dump(){return this[At].map((t=>!Gt(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[At]}set(t,e,i){if((i=i||this[Lt])&&"number"!=typeof i)throw new TypeError("maxAge must be a number");const s=i?Date.now():0,r=this[Mt](e,t);if(this[Ct].has(t)){if(r>this[It])return Ht(this,this[Ct].get(t)),!1;const n=this[Ct].get(t).value;return this[Pt]&&(this[zt]||this[Pt](t,n.value)),n.now=s,n.maxAge=i,n.value=e,this[Bt]+=r-n.length,n.length=r,this.get(t),Dt(this),!0}const n=new Nt(t,e,r,s,i);return n.length>this[It]?(this[Pt]&&this[Pt](t,e),!1):(this[Bt]+=n.length,this[At].unshift(n),this[Ct].set(t,this[At].head),Dt(this),!0)}has(t){if(!this[Ct].has(t))return!1;const e=this[Ct].get(t).value;return!Gt(this,e)}get(t){return Rt(this,t,!0)}peek(t){return Rt(this,t,!1)}pop(){const t=this[At].tail;return t?(Ht(this,t),t.value):null}del(t){Ht(this,this[Ct].get(t))}load(t){this.reset();const e=Date.now();for(let i=t.length-1;i>=0;i--){const s=t[i],r=s.e||0;if(0===r)this.set(s.k,s.v);else{const t=r-e;t>0&&this.set(s.k,s.v,t)}}}prune(){this[Ct].forEach(((t,e)=>Rt(this,e,!1)))}};class kt{constructor(){this.intPlaceholder=new Int32Array(1),this.floatPlaceholder=new Float32Array(this.intPlaceholder.buffer),this.bytes=new Uint8Array(this.intPlaceholder.buffer),this.crc=-1}add(t){switch(typeof t){case"number":Number.isInteger(t)&&t<kt.MAX_INT32&&t>kt.MIN_INT32?this.intPlaceholder[0]=t:this.floatPlaceholder[0]=t,this.compute();break;case"boolean":this.intPlaceholder[0]=t?1:0,this.compute();break;case"string":for(let e=0;e<t.length;++e)this.intPlaceholder[0]=t.codePointAt(e),this.compute();break;case"object":for(const e in t)t.hasOwnProperty(e)&&this.add(t[e])}return this}get(){return~this.crc}clear(){return this.crc=-1,this}compute(){for(let t=0;t<4;++t){this.crc^=this.bytes[t];for(let t=0;t<8;++t)this.crc=1&this.crc?this.crc>>1^kt.POLY:this.crc>>1}}}kt.POLY=2197175160,kt.MAX_INT32=2147483647,kt.MIN_INT32=-2147483648;const Wt=65536;function jt(t,e){if(Array.isArray(t))for(let i=0;i<t.length;i++)e(t[i],i);else e(t,0)}class Zt{}Zt.zero=Object.freeze(new a(0,0,0)),Zt.one=Object.freeze(new a(1,1,1)),Zt.up=Object.freeze(new a(0,0,1)),Zt.down=Object.freeze(new a(0,0,-1)),Zt.forward=Object.freeze(new a(0,1,0)),Zt.back=Object.freeze(new a(0,-1,0)),Zt.right=Object.freeze(new a(1,0,0)),Zt.left=Object.freeze(new a(-1,0,0));const Xt=32767;class Qt{constructor(t,e){this.geometry=e,this.modelGeometryKeys=new Set,this.checksum=new kt,this.modelIdHash=this.checksum.clear().add(t).get()}static set maxCacheSize(t){Qt.geometries.max=t}initGeometryCache(t){this.geometryPrototypes=new Array(t)}setGeometryPrototype(t,e){this.geometryPrototypes[t]=Object.seal(e)}getCachedGeometryData(t){let e=Qt.geometries.get(this.getCacheKey(t));return e||(e=Object.assign({},this.geometryPrototypes[t])),e}getCachedGeometryDatas(t){let e=Qt.geometries.get(this.getCacheKey(t));return e||(e=this.geometryPrototypes[t].map((t=>Object.assign({},t)))),e}getCacheKey(t){return this.checksum.clear().add(this.modelIdHash).add(this.geometryType).add(t).get()}calculateMemSizeAndCache(t,e){jt(e,(t=>{t.memSize=t.positions.byteLength,t.indices&&(t.memSize+=t.indices.byteLength),t.normals&&(t.memSize+=t.normals.byteLength),t.uvs&&(t.memSize+=t.uvs.byteLength),t.pointUvs&&(t.memSize+=t.pointUvs.byteLength),t.pointSizes&&(t.memSize+=t.pointSizes.byteLength),Object.seal(t)}));const i=this.getCacheKey(t);Qt.geometries.set(i,e),this.modelGeometryKeys.add(i)}dispose(){for(const t of this.modelGeometryKeys)Qt.geometries.del(t)}}Qt.geometries=new qt({max:52428800*(void 0!==navigator.deviceMemory?navigator.deviceMemory:1),length:t=>Array.isArray(t)?t.reduce(((t,e)=>t+e.memSize),0):t.memSize});var Yt=e.Technology.TrimBim.Fbs;Yt.HierarchyType;var $t=Yt.PropertyType,Kt=Yt.GeometryType,Jt=Yt.IdentifierType;Yt.Sidedness,Yt.LineStyle,Yt.AlignmentType;class te{}const ee=function(t,e,i){i=i||2;const s=e&&e.length,r=s?e[0]*i:t.length;let n=ie(t,0,r,i,!0);const o=[];if(!n||n.next===n.prev)return o;let a,h,b,c,l,d,u;if(s&&(n=function(t,e,i,s){const r=[];let n,o,a,h,b;for(n=0,o=e.length;n<o;n++)a=e[n]*s,h=n<o-1?e[n+1]*s:t.length,b=ie(t,a,h,s,!1),b===b.next&&(b.steiner=!0),r.push(ue(b));for(r.sort(be),n=0;n<r.length;n++)ce(r[n],i),i=se(i,i.next);return i}(t,e,n,i)),t.length>80*i){a=b=t[0],h=c=t[1];for(let e=i;e<r;e+=i)l=t[e],d=t[e+1],l<a&&(a=l),d<h&&(h=d),l>b&&(b=l),d>c&&(c=d);u=Math.max(b-a,c-h),u=0!==u?1/u:0}return re(n,o,i,a,h,u),o};function ie(t,e,i,s,r){let n,o;if(r===function(t,e,i,s){let r=0;for(let n=e,o=i-s;n<i;n+=s)r+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return r}(t,e,i,s)>0)for(n=e;n<i;n+=s)o=we(n,t[n],t[n+1],o);else for(n=i-s;n>=e;n-=s)o=we(n,t[n],t[n+1],o);return o&&fe(o,o.next)&&(Fe(o),o=o.next),o}function se(t,e){if(!t)return t;e||(e=t);let i,s=t;do{if(i=!1,s.steiner||!fe(s,s.next)&&0!==ge(s.prev,s,s.next))s=s.next;else{if(Fe(s),s=e=s.prev,s===s.next)break;i=!0}}while(i||s!==e);return e}function re(t,e,i,s,r,n,o){if(!t)return;!o&&n&&function(t,e,i,s){let r=t;do{null===r.z&&(r.z=de(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,i,s,r,n,o,a,h,b=1;do{for(i=t,t=null,n=null,o=0;i;){for(o++,s=i,a=0,e=0;e<b&&(a++,s=s.nextZ,s);e++);for(h=b;a>0||h>0&&s;)0!==a&&(0===h||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,h--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,b*=2}while(o>1)}(r)}(t,s,r,n);let a,h,b=t;for(;t.prev!==t.next;)if(a=t.prev,h=t.next,n?oe(t,s,r,n):ne(t))e.push(a.i/i),e.push(t.i/i),e.push(h.i/i),Fe(t),t=h.next,b=h.next;else if((t=h)===b){o?1===o?re(t=ae(se(t),e,i),e,i,s,r,n,2):2===o&&he(t,e,i,s,r,n):re(se(t),e,i,s,r,n,1);break}}function ne(t){const e=t.prev,i=t,s=t.next;if(ge(e,i,s)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(pe(e.x,e.y,i.x,i.y,s.x,s.y,r.x,r.y)&&ge(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function oe(t,e,i,s){const r=t.prev,n=t,o=t.next;if(ge(r,n,o)>=0)return!1;const a=r.x<n.x?r.x<o.x?r.x:o.x:n.x<o.x?n.x:o.x,h=r.y<n.y?r.y<o.y?r.y:o.y:n.y<o.y?n.y:o.y,b=r.x>n.x?r.x>o.x?r.x:o.x:n.x>o.x?n.x:o.x,c=r.y>n.y?r.y>o.y?r.y:o.y:n.y>o.y?n.y:o.y,l=de(a,h,e,i,s),d=de(b,c,e,i,s);let u=t.prevZ,p=t.nextZ;for(;u&&u.z>=l&&p&&p.z<=d;){if(u!==t.prev&&u!==t.next&&pe(r.x,r.y,n.x,n.y,o.x,o.y,u.x,u.y)&&ge(u.prev,u,u.next)>=0)return!1;if(u=u.prevZ,p!==t.prev&&p!==t.next&&pe(r.x,r.y,n.x,n.y,o.x,o.y,p.x,p.y)&&ge(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;u&&u.z>=l;){if(u!==t.prev&&u!==t.next&&pe(r.x,r.y,n.x,n.y,o.x,o.y,u.x,u.y)&&ge(u.prev,u,u.next)>=0)return!1;u=u.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&pe(r.x,r.y,n.x,n.y,o.x,o.y,p.x,p.y)&&ge(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function ae(t,e,i){let s=t;do{const r=s.prev,n=s.next.next;!fe(r,n)&&me(r,s,s.next,n)&&xe(r,n)&&xe(n,r)&&(e.push(r.i/i),e.push(s.i/i),e.push(n.i/i),Fe(s),Fe(s.next),s=t=n),s=s.next}while(s!==t);return se(s)}function he(t,e,i,s,r,n){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&_e(o,t)){let a=Te(o,t);return o=se(o,o.next),a=se(a,a.next),re(o,e,i,s,r,n),void re(a,e,i,s,r,n)}t=t.next}o=o.next}while(o!==t)}function be(t,e){return t.x-e.x}function ce(t,e){if(e=function(t,e){let i=e;const s=t.x,r=t.y;let n,o=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const t=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=s&&t>o){if(o=t,t===s){if(r===i.y)return i;if(r===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(s===o)return n;const a=n,h=n.x,b=n.y;let c,l=1/0;i=n;do{s>=i.x&&i.x>=h&&s!==i.x&&pe(r<b?s:o,r,h,b,r<b?o:s,r,i.x,i.y)&&(c=Math.abs(r-i.y)/(s-i.x),xe(i,t)&&(c<l||c===l&&(i.x>n.x||i.x===n.x&&le(n,i)))&&(n=i,l=c)),i=i.next}while(i!==a);return n}(t,e)){const i=Te(e,t);se(e,e.next),se(i,i.next)}}function le(t,e){return ge(t.prev,t,e.prev)<0&&ge(e.next,t,t.next)<0}function de(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ue(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function pe(t,e,i,s,r,n,o,a){return(r-o)*(e-a)-(t-o)*(n-a)>=0&&(t-o)*(s-a)-(i-o)*(e-a)>=0&&(i-o)*(n-a)-(r-o)*(s-a)>=0}function _e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&me(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(xe(t,e)&&xe(e,t)&&function(t,e){let i=t,s=!1;const r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(ge(t.prev,t,e.prev)||ge(t,e.prev,e))||fe(t,e)&&ge(t.prev,t,t.next)>0&&ge(e.prev,e,e.next)>0)}function ge(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function fe(t,e){return t.x===e.x&&t.y===e.y}function me(t,e,i,s){const r=ve(ge(t,e,i)),n=ve(ge(t,e,s)),o=ve(ge(i,s,t)),a=ve(ge(i,s,e));return r!==n&&o!==a||(!(0!==r||!ye(t,i,e))||(!(0!==n||!ye(t,s,e))||(!(0!==o||!ye(i,t,s))||!(0!==a||!ye(i,e,s)))))}function ye(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function ve(t){return t>0?1:t<0?-1:0}function xe(t,e){return ge(t.prev,t,t.next)<0?ge(t,e,t.next)>=0&&ge(t,t.prev,e)>=0:ge(t,e,t.prev)<0||ge(t,t.next,e)<0}function Te(t,e){const i=new Se(t.i,t.x,t.y),s=new Se(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function we(t,e,i,s){const r=new Se(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function Fe(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Se(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Ie,Be=e.Technology.TrimBim.Fbs,Me=e.Technology.TrimBim.Fbs.BRep,Ve=e.Technology.TrimBim.Fbs.BRepWithUV,Le=e.Technology.TrimBim.Fbs.BRepWithNormal;!function(t){t[t.triangle=3]="triangle",t[t.rectangle=4]="rectangle"}(Ie||(Ie={}));class Pe extends Qt{constructor(){super(...arguments),this.snapGeometryType=0,this.v0=new a,this.v1=new a,this.v2=new a,this.n1=new a,this.createGeometryPrototype=(()=>{const t=new Be.InnerWire,e=new Be.OuterWire,i=new Uint16Array(Wt),s=new Uint16Array(Wt);return r=>{let n=0;for(let e=0,o=r.innerWiresLength();e<o;e++){const o=r.innerWires(e,t).outerWire();++i[o],s[o]+=3*t.vertexIndicesLength(),n+=t.vertexIndicesLength()}let o=0,a=0;for(let t=0,n=r.outerWiresLength();t<n;t++){const n=r.outerWires(t,e).vertexIndicesLength();o+=n,i[t]?a+=3*(n+s[t]/3-2+2*i[t]):a+=3*(n-2)}for(let e=0,n=r.innerWiresLength();e<n;++e){const n=r.innerWires(e,t).outerWire();i[n]=0,s[n]=0}const h={objectType:0,indicesLength:a,positionsLength:3*(n+o),normalsLength:3*(n+o)};return this.geometryType===Kt.BRepWithUV&&(h.uvsLength=2*(n+o)),h}})(),this.build=(()=>{const t=new Be.OuterWire;return(e,i)=>{const s={vertex_count:0,index_count:0,vertex_length:0,uv_length:0,normal_length:0,normal_count:0};i.indices=new Uint16Array(i.indicesLength),i.positions=new Float32Array(i.positionsLength),i.normals=new Int16Array(i.normalsLength),i.uvs=new Float32Array(i.uvsLength);const r=this.getBrepData(e,this.getVertexDataSize(this.geometryType)),n=this.buildHoles(e);for(let o=0,a=e.outerWiresLength();o<a;o++){e.outerWires(o,t);const a=t.vertexIndicesArray();t.vertexIndicesLength()!==Ie.triangle||n.has(o)?t.vertexIndicesLength()!==Ie.rectangle||n.has(o)?Re(a,r,o,this.geometryType,i,n,s):Ee(a,r,o,this.geometryType,i,s):Oe(a,r,this.geometryType,i,s)}this.geometryType!==Kt.BRepWithNormals&&ze.computeNormals(i)}})(),this.buildHoles=(()=>{const t=new Be.Vec3f,e=new Be.PositionUV,i=new Be.PositionNormal,s=new Be.InnerWire,r=new Map;return n=>{r.clear();for(let o=0,a=n.innerWiresLength();o<a;o++){const a=n.innerWires(o,s).outerWire();if(r.has(a)){const t=r.get(a);t.indices.push(t.vertices.length/3),r.set(a,t)}else this.geometryType===Kt.BRep?r.set(a,{indices:[0],vertices:[]}):this.geometryType===Kt.BRepWithNormals?r.set(a,{indices:[0],vertices:[],normals:[]}):this.geometryType===Kt.BRepWithUV&&r.set(a,{indices:[0],vertices:[],uvs:[]});const h=r.get(a);for(let r=0,o=s.vertexIndicesLength();r<o;r++)this.geometryType===Kt.BRep&&n instanceof Me?(n.vertices(s.vertexIndices(r),t),h.vertices.push(t.x(),t.y(),t.z())):this.geometryType===Kt.BRepWithUV&&n instanceof Ve?(n.vertices(s.vertexIndices(r),e),h.vertices.push(e.position().x(),e.position().y(),e.position().z()),h.uvs.push(e.uv().u(),e.uv().v())):this.geometryType===Kt.BRepWithNormals&&n instanceof Le&&(n.vertices(s.vertexIndices(r),i),h.vertices.push(i.position().x(),i.position().y(),i.position().z()),h.normals.push(i.normal().x()*Xt,i.normal().y()*Xt,i.normal().z()*Xt))}return r}})(),this.pickFace=(()=>{const t=new p,e=[],i=new Map,s=new a,r=new a,n=new a;return(o,a)=>{const h=this.getBRep(o);e.length=0,i.clear();for(let t=0;t<h.innerWiresLength();t++){const e=h.innerWires(t).outerWire();i.has(e)?i.get(e).push(t):i.set(h.innerWires(t).outerWire(),[t])}const b=this.getVertexDataSize(this.geometryType),c=this.getBrepData(h,b);for(let o=0,l=h.outerWiresLength();o<l;o++){const l=h.outerWires(o).vertexIndicesArray();this.v0.set(0,0,0),this.v1.set(0,0,0),this.v2.set(0,0,0),this.n1.set(0,0,0);if(3===l.length){let t=l[0],i=l[1],o=l[2];t*=b,i*=b,o*=b,s.set(c[t],c[t+1],c[t+2]),r.set(c[i],c[i+1],c[i+2]),n.set(c[o],c[o+1],c[o+2]);const h=this.intersectTriangle(a,s,r,n);h&&e.push(h);continue}const d=l[0]*b;if(this.v0.set(c[d],c[d+1],c[d+2]),De(this.n1,c,l,b),t.setFromNormalAndCoplanarPoint(this.n1,this.v0),a.intersectPlane(t,this.v1)){if(i.has(o)){const e=i.get(o);if(this.insideHole(this.v1,t,e,h,c))continue}this.pointInsidePolygon(this.v1,c,l,b,t)&&e.push({point:this.v1.clone(),normal:t.normal.clone()})}}return e}})(),this.pickLine=(()=>{const t=new Be.OuterWire,e=new a,i=new a,s=new a,r=new p;return(n,o,a)=>{const h=this.getBRep(n),b=[];for(let n=0,c=h.outerWiresLength();n<c;n++){h.outerWires(n,t),this.getVertex(h,t.vertexIndices(0),e),this.getVertex(h,t.vertexIndices(1),s),this.getVertex(h,t.vertexIndices(t.vertexIndicesLength()-1),i),r.setFromCoplanarPoints(e,i,s);for(let n=0,c=t.vertexIndicesLength();n<c;n++)this.getVertex(h,t.vertexIndices(n),e),o.distanceSqToSegment(e,i,void 0,s),a.containsPoint(s)&&b.push({point:s.clone(),normal:r.normal.clone(),snapLineStart:e.clone(),snapLineEnd:i.clone()}),i.copy(e)}return b}})(),this.pickPoint=(()=>{const t=new a;return(e,i,s)=>{const r=this.getBRep(e),n=[];for(let e=0,i=r.verticesLength();e<i;e++)this.getVertex(r,e,t),s.containsPoint(t)&&n.push({point:t.clone()});return n}})(),this.getVertex=(()=>{const t=new Be.Vec3f,e=new Be.PositionUV,i=new Be.PositionNormal;return(s,r,n)=>{s instanceof Me?s.vertices(r,t):s instanceof Le?s.vertices(r,i).position(t):s instanceof Ve&&s.vertices(r,e).position(t),n.set(t.x(),t.y(),t.z())}})(),this.insideHole=(()=>(t,e,i,s,r)=>{let n;n=this.geometryType===Kt.BRepWithUV?5:this.geometryType===Kt.BRepWithNormals?6:3;for(let o=0,a=i.length;o<a;o++){const a=s.innerWires(i[o]).vertexIndicesArray();if(this.pointInsidePolygon(t,r,a,n,e))return!0}return!1})(),this.intersectTriangle=(()=>{const t=new S,e=new a;return(i,s,r,n)=>{if(t.a=s,t.b=r,t.c=n,i.intersectTriangle(s,r,n,!1,e))return{point:e.clone(),normal:t.getNormal(new a)}}})(),this.pointInsidePolygon=(()=>{const t=new a,e=new a,i=new a;return(s,r,n,o,a)=>{this.createOrthonormalBasis(a.normal,e,t);const h=n.length,b=n[h-1]*o,c=i.set(r[b],r[b+1],r[b+2]).sub(s);let l=c.dot(t),d=c.dot(e),u=!1;for(let a=0;a<h;a++){const h=n[a]*o,b=i.set(r[h],r[h+1],r[h+2]).sub(s),c=b.dot(t),p=b.dot(e);p>0!=d>0&&0<(l-c)*-p/(d-p)+c&&(u=!u),l=c,d=p}return u}})()}getGeometries(t,e=!0){const i=this.getCachedGeometryData(t);if(!i.positions&&e){const e=this.getBRep(t);this.build(e,i),this.calculateMemSizeAndCache(t,i)}return i}getVertexDataSize(t){return t===Kt.BRepWithUV?5:t===Kt.BRepWithNormals?6:3}getBrepData(t,e){const i=t.bb.__offset(t.bb_pos,8);return new Float32Array(t.bb.bytes().buffer,t.bb.__vector(t.bb_pos+i),t.verticesLength()*e)}pick(t,e,i){return this.pickFace(t,e)}createOrthonormalBasis(t,e,i){if(Math.abs(t.x)>=Math.abs(t.y)){const s=1/Math.sqrt(t.x*t.x+t.z*t.z);e.set(-t.z*s,0,t.x*s),i.set(t.y*e.z,t.z*e.x-t.x*e.z,-t.y*e.x)}else{const s=1/Math.sqrt(t.y*t.y+t.z*t.z);e.set(0,t.z*s,-t.y*s),i.set(t.y*e.z-t.z*e.y,-t.x*e.z,t.x*e.y)}e.normalize(),i.normalize()}}Pe.computeNormals=(()=>{const t=new a,e=new a,i=new a,s=new a,r=new a;let n,o=0,h=0,b=0;return a=>{const c=a.indices,l=a.positions;!n||n.length<a.normals.length?n=new Float32Array(a.normals.length):n.fill(0);for(let d=0,u=a.indices.length;d<u;d+=3)o=3*c[d],h=3*c[d+1],b=3*c[d+2],t.fromArray(l,o),e.fromArray(l,h),i.fromArray(l,b),r.subVectors(i,e),s.subVectors(t,e),r.cross(s),n[o]+=r.x,n[o+1]+=r.y,n[o+2]+=r.z,n[h]+=r.x,n[h+1]+=r.y,n[h+2]+=r.z,n[b]+=r.x,n[b+1]+=r.y,n[b+2]+=r.z;for(let t=0,e=a.normals.length;t<e;t+=3)r.fromArray(n,t),r.normalize(),r.multiplyScalar(Xt),r.toArray(a.normals,t)}})();class ze extends Pe{constructor(t,e){super(t,e),this.geometryType=Kt.BRep,this.getBRep=(()=>{const t=new Me;return e=>this.geometry.bReps(e,t)})(),this.createGeometryPrototypes()}createGeometryPrototypes(){this.initGeometryCache(this.geometry.bRepsLength());for(let t=0,e=this.geometry.bRepsLength();t<e;t++){const e=this.getBRep(t);this.setGeometryPrototype(t,this.createGeometryPrototype(e))}}}class Ae extends Pe{constructor(t,e){super(t,e),this.geometryType=Kt.BRepWithUV,this.getBRep=(()=>{const t=new Ve;return e=>this.geometry.bRepWithUVs(e,t)})(),this.createGeometryPrototypes()}createGeometryPrototypes(){this.initGeometryCache(this.geometry.bRepWithUVsLength());for(let t=0,e=this.geometry.bRepWithUVsLength();t<e;t++){const e=this.getBRep(t);this.setGeometryPrototype(t,this.createGeometryPrototype(e))}}}class Ce extends Pe{constructor(t,e){super(t,e),this.geometryType=Kt.BRepWithNormals,this.getBRep=(()=>{const t=new Le;return e=>this.geometry.bRepWithNormals(e,t)})(),this.createGeometryPrototypes()}createGeometryPrototypes(){this.initGeometryCache(this.geometry.bRepWithNormalsLength());for(let t=0,e=this.geometry.bRepWithNormalsLength();t<e;t++){const e=this.getBRep(t);this.setGeometryPrototype(t,this.createGeometryPrototype(e))}}}const Ee=(()=>{const t=new a,e=new a,i=new a,s=new a,r=new a,n=new a,o=new a,h=new a,b=new a;let c=0,l=0,d=0,u=0;return(a,p,_,g,f,m)=>{c=a[0],l=a[1],d=a[2],u=a[3],g===Kt.BRep?(c*=3,l*=3,d*=3,u*=3):g===Kt.BRepWithUV?(c*=5,l*=5,d*=5,u*=5):g===Kt.BRepWithNormals&&(c*=6,l*=6,d*=6,u*=6),t.set(p[c],p[c+1],p[c+2]),e.set(p[l],p[l+1],p[l+2]),i.set(p[d],p[d+1],p[d+2]),s.set(p[u],p[u+1],p[u+2]),r.copy(e),n.copy(i),o.copy(s),r.sub(t),n.sub(t),o.sub(t),h.crossVectors(r,n),b.crossVectors(n,o),h.dot(b)>0?(f.indices[m.index_count]=m.vertex_count,f.indices[m.index_count+1]=m.vertex_count+1,f.indices[m.index_count+2]=m.vertex_count+3,f.indices[m.index_count+3]=m.vertex_count+3,f.indices[m.index_count+4]=m.vertex_count+1,f.indices[m.index_count+5]=m.vertex_count+2,m.index_count+=6,f.positions[m.vertex_length]=t.x,f.positions[m.vertex_length+1]=t.y,f.positions[m.vertex_length+2]=t.z,f.positions[m.vertex_length+3]=e.x,f.positions[m.vertex_length+4]=e.y,f.positions[m.vertex_length+5]=e.z,f.positions[m.vertex_length+6]=i.x,f.positions[m.vertex_length+7]=i.y,f.positions[m.vertex_length+8]=i.z,f.positions[m.vertex_length+9]=s.x,f.positions[m.vertex_length+10]=s.y,f.positions[m.vertex_length+11]=s.z,m.vertex_count+=4,m.vertex_length+=12,g===Kt.BRepWithUV?(f.uvs[m.uv_length]=p[c+3],f.uvs[m.uv_length+1]=p[c+4],f.uvs[m.uv_length+2]=p[l+3],f.uvs[m.uv_length+3]=p[l+4],f.uvs[m.uv_length+4]=p[d+3],f.uvs[m.uv_length+5]=p[d+4],f.uvs[m.uv_length+6]=p[u+3],f.uvs[m.uv_length+7]=p[u+4],m.uv_length+=8):g===Kt.BRepWithNormals&&(f.normals[m.normal_length]=p[c+3]*Xt,f.normals[m.normal_length+1]=p[c+4]*Xt,f.normals[m.normal_length+2]=p[c+5]*Xt,f.normals[m.normal_length+3]=p[l+3]*Xt,f.normals[m.normal_length+4]=p[l+4]*Xt,f.normals[m.normal_length+5]=p[l+5]*Xt,f.normals[m.normal_length+6]=p[d+3]*Xt,f.normals[m.normal_length+7]=p[d+4]*Xt,f.normals[m.normal_length+8]=p[d+5]*Xt,f.normals[m.normal_length+9]=p[u+3]*Xt,f.normals[m.normal_length+10]=p[u+4]*Xt,f.normals[m.normal_length+11]=p[u+5]*Xt,m.normal_length+=12)):Re(a,p,_,g,f,void 0,m)}})(),Oe=(t,e,i,s,r)=>{let n=t[0],o=t[1],a=t[2];i===Kt.BRep?(n*=3,o*=3,a*=3):i===Kt.BRepWithUV?(n*=5,o*=5,a*=5,s.uvs[r.uv_length]=e[n+3],s.uvs[r.uv_length+1]=e[n+4],s.uvs[r.uv_length+2]=e[o+3],s.uvs[r.uv_length+3]=e[o+4],s.uvs[r.uv_length+4]=e[a+3],s.uvs[r.uv_length+5]=e[a+4],r.uv_length+=6):i===Kt.BRepWithNormals&&(n*=6,o*=6,a*=6,s.normals.set([s.normals[r.normal_length]=e[n+3]*Xt,s.normals[r.normal_length+1]=e[n+4]*Xt,s.normals[r.normal_length+2]=e[n+5]*Xt,s.normals[r.normal_length+3]=e[o+3]*Xt,s.normals[r.normal_length+4]=e[o+4]*Xt,s.normals[r.normal_length+5]=e[o+5]*Xt,s.normals[r.normal_length+6]=e[a+3]*Xt,s.normals[r.normal_length+7]=e[a+4]*Xt,s.normals[r.normal_length+8]=e[a+5]*Xt],r.normal_length),r.normal_length+=9),s.indices[r.index_count]=r.vertex_count,s.indices[r.index_count+1]=r.vertex_count+1,s.indices[r.index_count+2]=r.vertex_count+2,r.index_count+=3,s.positions[r.vertex_length]=e[n+0],s.positions[r.vertex_length+1]=e[n+1],s.positions[r.vertex_length+2]=e[n+2],s.positions[r.vertex_length+3]=e[o+0],s.positions[r.vertex_length+4]=e[o+1],s.positions[r.vertex_length+5]=e[o+2],s.positions[r.vertex_length+6]=e[a+0],s.positions[r.vertex_length+7]=e[a+1],s.positions[r.vertex_length+8]=e[a+2],r.vertex_count+=3,r.vertex_length+=9},Re=(()=>{const t=new a;return(e,i,s,r,n,o,a)=>{const h=e.length,b=a.vertex_length;if(r===Kt.BRep)for(let t=0;t<h;t++){const s=3*e[t];n.positions[a.vertex_length]=i[s],n.positions[a.vertex_length+1]=i[s+1],n.positions[a.vertex_length+2]=i[s+2],a.vertex_count+=1,a.vertex_length+=3}else if(r===Kt.BRepWithUV)for(let t=0;t<h;t++){const s=5*e[t];n.positions[a.vertex_length]=i[s],n.positions[a.vertex_length+1]=i[s+1],n.positions[a.vertex_length+2]=i[s+2],a.vertex_count+=1,a.vertex_length+=3,n.uvs[a.uv_length]=i[s+3],n.uvs[a.uv_length+1]=i[s+4],a.uv_length+=2}else if(r===Kt.BRepWithNormals)for(let t=0;t<h;t++){const s=6*e[t];n.positions[a.vertex_length]=i[s],n.positions[a.vertex_length+1]=i[s+1],n.positions[a.vertex_length+2]=i[s+2],a.vertex_count+=1,a.vertex_length+=3,n.normals[a.normal_length]=i[s+3]*Xt,n.normals[a.normal_length+1]=i[s+4]*Xt,n.normals[a.normal_length+2]=i[s+5]*Xt,a.normal_length+=3}let c;if(Ge(n.positions,t,(a.vertex_length-b)/3,b),o&&o.has(s)){const t=o.get(s);c=t.indices.map((t=>t+h)),n.positions.set(t.vertices,a.vertex_length),a.vertex_length+=t.vertices.length,a.vertex_count+=t.vertices.length/3,r===Kt.BRepWithNormals?(n.normals.set(t.normals,a.normal_length),a.normal_length+=t.vertices.length):r===Kt.BRepWithUV&&(n.uvs.set(t.uvs,a.uv_length),a.uv_length+=t.vertices.length/3*2)}const l=He(n.positions,t,a.vertex_length-b,b),d=ee(l,c,2);for(let t=0,e=d.length;t<e;t++)d[t]=d[t]+b/3;n.indices.set(d,a.index_count),a.index_count+=d.length}})(),Ge=(t,e,i,s=0)=>{e.set(0,0,0);let r=0;for(let n=0,o=i;n<o;n++)r=(n+1)%i,e.x+=(t[s+3*n+1]-t[s+3*r+1])*(t[s+3*n+2]+t[s+3*r+2]),e.y+=(t[s+3*n+2]-t[s+3*r+2])*(t[s+3*n]+t[s+3*r]),e.z+=(t[s+3*n]-t[s+3*r])*(t[s+3*n+1]+t[s+3*r+1]);e.normalize()},De=(t,e,i,s)=>{t.set(0,0,0);for(let r=0,n=i.length;r<n;r++){const o=(r+1)%n,a=i[r]*s,h=i[o]*s;t.x+=(e[a+1]-e[h+1])*(e[a+2]+e[h+2]),t.y+=(e[a+2]-e[h+2])*(e[a]+e[h]),t.z+=(e[a]-e[h])*(e[a+1]+e[h+1])}t.normalize()},He=(()=>{const t=new a,e=new a,i=new a,s=new a,r=new a,n=new a,o=new ArrayBuffer(174762);return(a,h,b,c=0)=>{const l=new Float32Array(o,0,2*b/3);r.set(a[c],a[c+1],a[c+2]),n.set(a[c+3],a[c+4],a[c+5]),t.subVectors(r,n),e.crossVectors(h,t),t.normalize(),e.normalize();for(let n=0,o=b/3;n<o;n++)i.set(a[c+3*n],a[c+3*n+1],a[c+3*n+2]),s.set(a[c+3*n],a[c+3*n+1],a[c+3*n+2]),l[2*n]=i.sub(r).dot(t),l[2*n+1]=s.sub(r).dot(e);return l}})();var Ne=e.Technology.TrimBim.Fbs;class Ue extends Qt{constructor(){super(...arguments),this.geometryType=Kt.TriangleMesh,this.snapGeometryType=0,this.triangleMeshes=this.geometry.triangleMeshes.bind(this.geometry),this.getVertex=(()=>{const t=new Ne.Vec3f;let e;return(i,s,r,n)=>{const o=i.indices(r);e||(e=qe(s)),i.vertices(o,e),i.positions(e.positionIndex(),t),n.set(t.x(),t.y(),t.z())}})(),this.pickFace=(()=>{const t=new a,e=new a,i=new a,s=new S,r=new a;return(n,o)=>{const h=ke(n,this.geometryType,this.geometry),b=h.indicesLength(),c=[];for(let n=0;n<b;n+=3)this.getVertex(h,this.geometryType,n,t),this.getVertex(h,this.geometryType,n+1,e),this.getVertex(h,this.geometryType,n+2,i),o.intersectTriangle(t,e,i,!1,r)&&(s.set(t,e,i),c.push({point:r.clone(),normal:s.getNormal(new a)}));return c}})(),this.pickLine=(()=>{const t=new a,e=new a,i=new a,s=new a,r=new p;return(n,o,a)=>{const h=ke(n,this.geometryType,this.geometry),b=h.indicesLength(),c=[],l=(t,e,i)=>{a.containsPoint(s)&&c.push({point:s.clone(),normal:i.clone(),snapLineStart:t.clone(),snapLineEnd:e.clone()})};for(let n=0;n<b;n+=3)this.getVertex(h,this.geometryType,n,t),this.getVertex(h,this.geometryType,n+1,e),this.getVertex(h,this.geometryType,n+2,i),r.setFromCoplanarPoints(t,e,i),o.distanceSqToSegment(t,e,void 0,s),l(t,e,r.normal),o.distanceSqToSegment(t,i,void 0,s),l(t,i,r.normal),o.distanceSqToSegment(e,i,void 0,s),l(e,i,r.normal);return c}})(),this.pickPoint=(()=>{const t=new Ne.Vec3f,e=new a;return(i,s,r)=>{const n=qe(this.geometryType),o=ke(i,this.geometryType,this.geometry),a=[];for(let i=0;i<o.verticesLength();i++)o.vertices(i,n),o.positions(n.positionIndex(),t),e.set(t.x(),t.y(),t.z()),r.containsPoint(e)&&a.push({point:e.clone()});return a}})()}getGeometries(t,e=!0){const i=this.getCachedGeometryData(t);if(!i.positions&&e){const e=this.triangleMeshes(t);this.build(e,i),this.calculateMemSizeAndCache(t,i)}return i}createGeometryPrototypes(){this.initGeometryCache(this.geometry.triangleMeshesLength());const t=new Ne.TriangleMesh;for(let e=0,i=this.geometry.triangleMeshesLength();e<i;e++)this.geometry.triangleMeshes(e,t),this.setGeometryPrototype(e,this.createGeometryPrototype(t))}createGeometryPrototype(t){const e=t.indicesLength(),i=t.verticesLength();return t instanceof Ne.TriangleMesh||t instanceof Ne.TriangleMesh8?{objectType:0,indicesLength:e,positionsLength:3*i,normalsLength:3*i}:t instanceof Ne.TexturedTriangleMesh||t instanceof Ne.TexturedTriangleMesh8?{objectType:0,indicesLength:e,positionsLength:3*i,normalsLength:3*i,uvsLength:2*i}:void 0}build(t,e){const i=new Ne.Vec3f,s=new Ne.Vec3f,r=qe(this.geometryType),n=t.verticesLength(),o=t.indicesArray(),a=new Float32Array(3*t.verticesLength()),h=new Int16Array(3*t.verticesLength());for(let e=0;e<n;e++)t.vertices(e,r),t.positions(r.positionIndex(),i),t.normals(r.normalIndex(),s),a[3*e]=i.x(),a[3*e+1]=i.y(),a[3*e+2]=i.z(),h[3*e]=s.x()*Xt,h[3*e+1]=s.y()*Xt,h[3*e+2]=s.z()*Xt;e.indices=o,e.positions=a,e.normals=h,e.uvs=new Float32Array(0)}buildTexured(t,e,i){const s=new Ne.Vec3f,r=new Ne.Vec3f,n=new Ne.UV,o=qe(e),a=t.verticesLength(),h=t.indicesArray(),b=new Float32Array(3*t.verticesLength()),c=new Int16Array(3*t.verticesLength()),l=new Float32Array(2*t.verticesLength());for(let e=0;e<a;e++)t.vertices(e,o),t.positions(o.positionIndex(),s),t.normals(o.normalIndex(),r),t.uvs(o.positionIndex(),n),b[3*e]=s.x(),b[3*e+1]=s.y(),b[3*e+2]=s.z(),c[3*e]=r.x()*Xt,c[3*e+1]=r.y()*Xt,c[3*e+2]=r.z()*Xt,l[2*e]=n.u(),l[2*e+1]=n.v();i.indices=h,i.positions=b,i.normals=c,i.uvs=l}pick(t,e,i){return this.pickFace(t,e)}}function qe(t){if(t===Kt.TriangleMesh8||t===Kt.TexturedTriangleMesh8)return new Ne.IndexedVertex8;if(t===Kt.TriangleMesh||t===Kt.TexturedTriangleMesh)return new Ne.IndexedVertex;throw new Error("Unkown index type for mesh")}function ke(t,e,i){if(e===Kt.TriangleMesh8)return i.triangleMeshes8(t);if(e===Kt.TriangleMesh)return i.triangleMeshes(t);if(e===Kt.TexturedTriangleMesh8)return i.texturedTriangleMeshes8(t);if(e===Kt.TexturedTriangleMesh)return i.texturedTriangleMeshes(t);throw new Error(`Unknown Mesh type: ${e}`)}class We extends Ue{constructor(t,e){super(t,e),this.geometryType=Kt.TriangleMesh8,this.triangleMeshes=e.triangleMeshes8.bind(e),this.createGeometryPrototypes()}createGeometryPrototypes(){this.initGeometryCache(this.geometry.triangleMeshes8Length());const t=new Ne.TriangleMesh8;for(let e=0,i=this.geometry.triangleMeshes8Length();e<i;e++)this.geometry.triangleMeshes8(e,t),this.setGeometryPrototype(e,this.createGeometryPrototype(t))}}class je extends Ue{constructor(t,e){super(t,e),this.geometryType=Kt.TexturedTriangleMesh,this.producedType=0,this.triangleMeshes=e.texturedTriangleMeshes.bind(e),this.createGeometryPrototypes()}createGeometryPrototypes(){this.initGeometryCache(this.geometry.texturedTriangleMeshesLength());const t=new Ne.TexturedTriangleMesh;for(let e=0,i=this.geometry.texturedTriangleMeshesLength();e<i;e++)this.geometry.texturedTriangleMeshes(e,t),this.setGeometryPrototype(e,this.createGeometryPrototype(t))}getGeometries(t,e=!0){const i=this.getCachedGeometryData(t);if(!i.positions&&e){const e=this.triangleMeshes(t);this.buildTexured(e,this.geometryType,i),this.calculateMemSizeAndCache(t,i)}return i}}class Ze extends Ue{constructor(t,e){super(t,e),this.geometryType=Kt.TexturedTriangleMesh8,this.producedType=0,this.triangleMeshes=e.texturedTriangleMeshes8.bind(e),this.createGeometryPrototypes()}createGeometryPrototypes(){this.initGeometryCache(this.geometry.texturedTriangleMeshes8Length());const t=new Ne.TexturedTriangleMesh8;for(let e=0,i=this.geometry.texturedTriangleMeshes8Length();e<i;e++)this.geometry.texturedTriangleMeshes8(e,t),this.setGeometryPrototype(e,this.createGeometryPrototype(t))}getGeometries(t,e=!0){const i=this.getCachedGeometryData(t);if(!i.positions&&e){const e=this.triangleMeshes(t);this.buildTexured(e,this.geometryType,i),this.calculateMemSizeAndCache(t,i)}return i}}var Xe=e.Technology.TrimBim.Fbs;function Qe(t,e,i){const s=Math.round(t.angle()*t.radius()*e);return Math.min(Math.max(s,i),30)}function Ye(t){return Qe(t,5,4)}function $e(t){return Qe(t,10,8)}const Ke=(()=>{const t=new a,e=new a,i=new Xe.Vec3f,s=new Xe.Line3f;return(r,n)=>{const o=r.lineSegmentsLength();for(let a=0;a<o;a++)r.lineSegments(a,s),s.start(i),t.set(i.x(),i.y(),i.z()),s.end(i),e.set(i.x(),i.y(),i.z()),n(t,e)}})(),Je=(()=>{const t=new a,e=new a,i=[],s=new a,r=new a,n=new Xe.Arc3f;return(o,h,b)=>{const c=o.arcsLength();for(let l=0;l<c;l++){o.arcs(l,n);const c=b(n);s.set(n.center().x(),n.center().y(),n.center().z()),r.set(n.axis().x(),n.axis().y(),n.axis().z()),t.set(n.refDirection().x(),n.refDirection().y(),n.refDirection().z()),i.length=c-2;for(let e=0;e<i.length;e++)i[e]=new a,i[e].copy(t),i[e].applyAxisAngle(r,n.angle()*(e+1)/(c-1)),i[e].multiplyScalar(n.radius()),i[e].add(s);e.copy(t),e.applyAxisAngle(r,n.angle()),e.multiplyScalar(n.radius()),e.add(s),t.multiplyScalar(n.radius()),t.add(s),h(t,i,e)}}})(),ti=(()=>{const t=new a,e=new a,i=new Xe.Polyline3f;return(s,r)=>{const n=s.polyLinesLength();for(let o=0;o<n;o++){s.polyLines(o,i);for(let s=0,n=i.pointsLength()-1;s<n;s++)t.set(i.points(s).x(),i.points(s).y(),i.points(s).z()),e.set(i.points(s+1).x(),i.points(s+1).y(),i.points(s+1).z()),r(t,e)}}})();function ei(t,e,i){Ke(t,((t,s)=>{ni(t,s,e,i)}))}function ii(t,e,i,s){Je(t,((t,i,r)=>{ni(t,i[0],e,s),i.forEach(((t,r)=>{r>0&&ni(i[r-1],t,e,s)})),ni(i[i.length-1],r,e,s)}),i)}function si(t,e,i){ti(t,((t,s)=>{ni(t,s,e,i)}))}const ri=(()=>{const t=new a,e=new a;return(i,s)=>{if(i){const r=i.length/3;for(let n=1;n<r;n++)e.set(i[3*n],i[3*n+1],i[3*n+2]),t.set(i[3*(n-1)],i[3*(n-1)+1],i[3*(n-1)+2]),s(t,e)}}})(),ni=(()=>{const t=new a,e=new a;return(i,s,r,n)=>{const o=r.distanceSqToSegment(i,s,t,e);n(t,e,i,s,o)}})(),oi=(()=>{const t=new a,e=new a,i=new a,s=new tt,r=new tt,n=new J,o=new a,h=new a,b=new a,c=[],l=(()=>{const t=new a(0,0,1),e=new a(1,0,0);return(i,s)=>{Math.abs(i.dot(t))>.9?s.crossVectors(i,e).normalize():s.crossVectors(i,t).normalize()}})(),d=(t,e,i)=>{o.copy(n.direction).normalize().multiplyScalar(t).add(n.origin),o.z>=0&&o.z<=e/i&&(h.set(o.x,o.y,0).applyMatrix4(r).normalize(),o.applyMatrix4(s),c.push({point:o.clone(),normal:h.clone()}))};return(o,a,h,u)=>{const p=a.distanceTo(o);t.copy(a).sub(o).normalize(),l(t,i),e.crossVectors(t,i),s.identity().makeBasis(i,e,t),s.setPosition(o),s.scale(b.set(u,u,u)),r.copy(s).invert(),n.copy(h).applyMatrix4(r);const _=n.direction.x*n.direction.x+n.direction.y*n.direction.y,g=2*n.origin.x*n.direction.x+2*n.origin.y*n.direction.y,f=n.origin.x*n.origin.x+n.origin.y*n.origin.y-1;if(4*_*f>g*g)return[];const m=(-g+Math.sqrt(g*g-4*_*f))/(2*_),y=(-g-Math.sqrt(g*g-4*_*f))/(2*_);return c.length=0,r.transpose(),d(m,p,u),d(y,p,u),c}})();var ai=e.Technology.TrimBim.Fbs;class hi{static buildSegments(t,e,i){const s=new ai.Line3f;for(let r=0,n=t.lineSegmentsLength();r<n;r++)t.lineSegments(r,s),i=hi.buildLine(s,e,i);return i}static buildLine(t,e,i){const s=t.start(),r=t.end();return e.positions[i++]=s.x(),e.positions[i++]=s.y(),e.positions[i++]=s.z(),e.positions[i++]=r.x(),e.positions[i++]=r.y(),e.positions[i++]=r.z(),i}static getTotalArcSectionsCount(t){let i=0;const s=new e.Technology.TrimBim.Fbs.Arc3f;for(let e=0;e<t.arcsLength();e++)t.arcs(e,s),i+=$e(s);return i}static buildArcs(t,i,s){const r=new e.Technology.TrimBim.Fbs.Arc3f;let n=[];for(let e=0,o=t.arcsLength();e<o;e++){t.arcs(e,r);const o=$e(r);n=bi(r,o),i.positions[s++]=n[0].x,i.positions[s++]=n[0].y,i.positions[s++]=n[0].z;for(let t=1;t<o-1;t++)i.positions[s++]=n[t].x,i.positions[s++]=n[t].y,i.positions[s++]=n[t].z,i.positions[s++]=n[t].x,i.positions[s++]=n[t].y,i.positions[s++]=n[t].z;i.positions[s++]=n[o-1].x,i.positions[s++]=n[o-1].y,i.positions[s++]=n[o-1].z}return s}}function bi(t,e){const i=new a,s=new a,r=new a,n=new a,o=[],h=[];i.set(t.center().x(),t.center().y(),t.center().z()),s.set(t.axis().x(),t.axis().y(),t.axis().z()),r.set(t.refDirection().x(),t.refDirection().y(),t.refDirection().z());for(let n=0;n<e-2;n++)o[n]=new a,o[n].copy(r),o[n].applyAxisAngle(s,t.angle()*(n+1)/(e-1)),o[n].multiplyScalar(t.radius()),o[n].add(i);return n.copy(r),n.applyAxisAngle(s,t.angle()),n.multiplyScalar(t.radius()),n.add(i),r.multiplyScalar(t.radius()),r.add(i),h.push(r),h.push(...o),h.push(n),h}class ci extends Qt{constructor(){super(...arguments),this.pickLine=(()=>{const t=[];return(e,i,s,r=!1)=>{t.length=0;return this.pickLineWithCallback(e,i,((e,i,n,o,a)=>{s.containsPoint(i)&&t.push({point:r?e.clone():i.clone(),distanceSqToRay:a,snapLineStart:n.clone(),snapLineEnd:o.clone()})})),t}})()}}var li=e.Technology.TrimBim.Fbs;class di extends ci{constructor(){super(...arguments),this.geometryType=Kt.GraphicsContainer,this.snapGeometryType=1,this.pickLineWithCallback=(()=>{const t=new li.GraphicsContainer;return(e,i,s)=>{this.geometry.graphicsContainers(e,t),ei(t,i,s),ii(t,i,$e,s)}})(),this.pickPoint=(()=>{const t=[],e=new li.GraphicsContainer;return(i,s,r)=>(t.length=0,this.geometry.graphicsContainers(i,e),Ke(e,((e,i)=>{r.containsPoint(e)&&t.push({point:e.clone()}),r.containsPoint(i)&&t.push({point:i.clone()})})),Je(e,((e,i,s)=>{r.containsPoint(e)&&t.push({point:e.clone()}),r.containsPoint(s)&&t.push({point:s.clone()})}),Ye),t)})()}getGeometries(t,e=!0){const i=this.getCachedGeometryData(t);if(!i.positions&&e){const e=this.geometry.graphicsContainers(t);this.build(e,i),this.calculateMemSizeAndCache(t,i)}return i}createGeometryPrototypes(){this.initGeometryCache(this.geometry.graphicsContainersLength());const t=new li.GraphicsContainer;for(let e=0,i=this.geometry.graphicsContainersLength();e<i;e++)this.geometry.graphicsContainers(e,t),this.setGeometryPrototype(e,this.createGeometryPrototype(t))}createGeometryPrototype(t){const e=t.lineSegmentsLength(),i=t.arcsLength();return{objectType:1,positionsLength:6*e+6*(hi.getTotalArcSectionsCount(t)-2*i)+6*i}}build(t,e){e.positions=new Float32Array(e.positionsLength);const i=hi.buildSegments(t,e,0);hi.buildArcs(t,e,i)}pick(t,e,i){return this.pickLine(t,e,i,!0)}pickFace(t,e){}}var ui=e.Technology.TrimBim.Fbs,pi=e.Technology.TrimBim.Fbs.Directrix;class _i extends Qt{constructor(){super(...arguments),this.geometryType=Kt.SweptDiskSolid,this.snapGeometryType=0,this.sds=new ui.SweptDiskSolidContainer,this.directrix=new pi,this.arc=new ui.Arc3f,this.polyline=new ui.Polyline3f,this.calculateSegmentSize=(()=>{const t={verticesLength:0,indicesLength:0};return(e,i,s)=>{const r=e.types(i),n=e.indexes(i);let o=0,a=0,h=0,b=0;switch(r){case ui.SegmentType.LineSegment:o=2*s,a=6*s,h=2;break;case ui.SegmentType.PolyLine:{const t=e.polyLines(n,this.polyline).pointsLength()-1;o=2*t*s,a=6*t*s,h=2*t}break;case ui.SegmentType.Arc:{const t=Ye(e.arcs(n,this.arc));o=s*t,a=6*s*(t-1),h=2,b=2}}const c=h*(s-2)*3,l=b*s*6;return t.verticesLength=o,t.indicesLength=a+c+l,t}})(),this.arcCrossSections=[],this.lineStart=new a,this.lineEnd=new a,this.lineQuaternion=new o,this.tmp=new a,this.pick=(()=>{const t=[],e=new ui.SweptDiskSolidContainer,i=new ui.Directrix;return(s,r)=>{t.length=0,this.geometry.sweptDiskSolids(s,e);for(let s=0,n=e.directricesLength();s<n;s++){e.directrices(s,i);const n=e.radius(s);Ke(i,((e,i)=>{t.push(...oi(e,i,r,n))})),Je(i,((e,i,s)=>{t.push(...oi(e,i[0],r,n)),i.forEach(((e,s)=>{s>0&&t.push(...oi(i[s-1],e,r,n))})),t.push(...oi(i[i.length-1],s,r,n))}),Ye),ti(i,((e,i)=>{t.push(...oi(e,i,r,n))}))}return t}})(),this.pickLine=(()=>{const t=[],e=new ui.SweptDiskSolidContainer,i=new ui.Directrix;return(s,r,n)=>{t.length=0,this.geometry.sweptDiskSolids(s,e);const o=(e,i,s,r)=>{n.containsPoint(i)&&t.push({point:i.clone(),snapLineStart:s.clone(),snapLineEnd:r.clone()})};for(let t=0,s=e.directricesLength();t<s;t++)e.directrices(t,i),ei(i,r,o),ii(i,r,Ye,o),si(i,r,o);return t}})(),this.pickPoint=(()=>{const t=[],e=new ui.SweptDiskSolidContainer,i=new ui.Directrix;return(s,r,n)=>{t.length=0,this.geometry.sweptDiskSolids(s,e);for(let s=0,r=e.directricesLength();s<r;s++)e.directrices(s,i),Ke(i,((e,i)=>{t.push({point:e.clone()}),t.push({point:i.clone()})})),Je(i,((e,i,s)=>{t.push({point:e.clone()}),t.push({point:s.clone()})}),Ye),ti(i,((e,i)=>{t.push({point:e.clone()}),t.push({point:i.clone()})}));return t.filter((t=>n.containsPoint(t.point)))}})()}getCrossSectionsPointCount(t,e=200){const i=Math.round(t*e);return Math.min(Math.max(i,5),30)}getGeometries(t,e=!0){const i=this.getCachedGeometryDatas(t);return e&&i.length&&!i[0].positions&&(this.build(this.geometry.sweptDiskSolids(t,this.sds),i),this.calculateMemSizeAndCache(t,i)),i}createGeometryPrototypes(){this.initGeometryCache(this.geometry.sweptDiskSolidsLength());for(let t=0,e=this.geometry.sweptDiskSolidsLength();t<e;t++)this.geometry.sweptDiskSolids(t,this.sds),this.setGeometryPrototype(t,this.createGeometryPrototype(this.sds))}createDirectrixPrototypes(t,e,i){const s=t.radius(e),r=t.directrices(e,this.directrix),n=this.getCrossSectionsPointCount(s);let o=i[i.length-1];for(let t=0;t<r.indexesLength();t++){const e=this.calculateSegmentSize(r,t,n),s=!o;!s&&mi(o.positionsLength/3,e.verticesLength,n)||(o={objectType:0,indicesLength:0,positionsLength:0,normalsLength:0},i.push(o),s||0===t||(o.positionsLength+=3*n,o.normalsLength+=3*n,o.indicesLength+=3*(n-2))),o.positionsLength+=3*e.verticesLength,o.normalsLength+=3*e.verticesLength,o.indicesLength+=e.indicesLength}}createGeometryPrototype(t){const e=[];for(let i=0,s=t.directricesLength();i<s;i++)this.createDirectrixPrototypes(t,i,e);return e}build(t,e){let i,s=0,r=0;const n={};for(let o=0,a=t.directricesLength();o<a;o++){const a=t.radius(o),h=t.directrices(o,this.directrix),b=this.getCrossSectionsPointCount(a);for(let t=0;t<h.indexesLength();t++){const o=this.calculateSegmentSize(h,t,b),c=!i;if(0===t&&(n.isStartSegment=!0),t===h.indexesLength()-1&&(n.isEndSegment=!0),c||!mi(r,o.verticesLength,b)){i=e[s++],i.positions=new Float32Array(i.positionsLength),i.normals=new Int16Array(i.normalsLength),i.indices=new Uint16Array(i.indicesLength);const n=this.positionPointer;if(this.positionPointer=0,this.indexPointer=0,r=0,!c&&0!==t){const t=e[s-2];this.copyLastCrossSection(t,i,n,b),r+=b}}this.buildDirectrixSegment(h,t,i,a,b,n),r+=o.verticesLength}}}copyLastCrossSection(t,e,i,s){for(let r=3*-s;r<0;++r)e.positions[this.positionPointer]=t.positions[i+r],e.normals[this.positionPointer]=t.normals[i+r],this.positionPointer++}buildDirectrixSegment(t,e,i,s,r,n){const o=t.types(e),a=t.indexes(e);switch(o){case ui.SegmentType.LineSegment:this.buildLineSegment(t.lineSegments(a),s,i,r,n);break;case ui.SegmentType.PolyLine:this.buildPolyLine(t.polyLines(a),s,i,r,n);break;case ui.SegmentType.Arc:this.buildArc(t.arcs(a),s,i,r,n)}n.isStartSegment=!1,n.isEndSegment=!1}buildPolyLine(t,e,i,s,r){for(let n=1,o=t.pointsLength();n<o;n++)this.lineStart.set(t.points(n-1).x(),t.points(n-1).y(),t.points(n-1).z()),this.lineEnd.set(t.points(n).x(),t.points(n).y(),t.points(n).z()),this.tmp.copy(this.lineEnd).sub(this.lineStart).normalize(),this.lineQuaternion.setFromUnitVectors(Zt.up,this.tmp),this.buildCrossSection(this.lineStart,e,this.lineQuaternion,i,s),1===n?this.connectFirstCrossSection(i,s,r,this.lineStart,ui.SegmentType.PolyLine):this.buildCrossSectionIndices(i,s),this.buildCrossSection(this.lineEnd,e,this.lineQuaternion,i,s),n!==o-1||r.isEndSegment?this.buildCrossSectionIndices(i,s,!0):(r.position=this.lineEnd,r.type=ui.SegmentType.PolyLine),this.connectCrossSections(i,s)}connectFirstCrossSection(t,e,i,s,r){i.isStartSegment?this.buildCrossSectionIndices(t,e):fi(i.type,r)&&gi(i.position,s)?this.connectCrossSections(t,e):(this.buildCrossSectionIndices(t,e,!0,!0),this.buildCrossSectionIndices(t,e))}buildStartCrossSection(t,e,i,s,r){this.tmp.copy(e).sub(t).normalize(),this.lineQuaternion.setFromUnitVectors(Zt.up,this.tmp),this.buildCrossSection(t,i,this.lineQuaternion,s,r)}buildMidCrossSection(t,e,i,s,r,n){this.tmp.copy(i).sub(t).normalize(),this.lineQuaternion.setFromUnitVectors(Zt.up,this.tmp),this.buildCrossSection(e,s,this.lineQuaternion,r,n),this.connectCrossSections(r,n)}buildEndCrossSection(t,e,i,s,r){this.tmp.copy(e).sub(t).normalize(),this.lineQuaternion.setFromUnitVectors(Zt.up,this.tmp),this.buildCrossSection(e,i,this.lineQuaternion,s,r)}buildArc(t,e,i,s,r){const n=Ye(t);this.arcCrossSections=bi(t,n),this.buildStartCrossSection(this.arcCrossSections[0],this.arcCrossSections[1],e,i,s),this.connectFirstCrossSection(i,s,r,this.arcCrossSections[0],ui.SegmentType.Arc);for(let t=0;t<n-2;t++)this.buildMidCrossSection(this.arcCrossSections[t],this.arcCrossSections[t+1],this.arcCrossSections[t+2],e,i,s);this.buildEndCrossSection(this.arcCrossSections[n-2],this.arcCrossSections[n-1],e,i,s),r.isEndSegment?this.buildCrossSectionIndices(i,s,!0):(r.position=this.arcCrossSections[n-1],r.type=ui.SegmentType.Arc),this.connectCrossSections(i,s)}buildLineSegment(t,e,i,s,r){const n=t.start(),o=t.end();this.lineStart.set(n.x(),n.y(),n.z()),this.lineEnd.set(o.x(),o.y(),o.z()),this.tmp.copy(this.lineEnd).sub(this.lineStart).normalize(),this.lineQuaternion.setFromUnitVectors(Zt.up,this.tmp),this.buildCrossSection(this.lineStart,e,this.lineQuaternion,i,s),this.connectFirstCrossSection(i,s,r,this.lineStart,ui.SegmentType.LineSegment),this.buildCrossSection(this.lineEnd,e,this.lineQuaternion,i,s),r.isEndSegment?this.buildCrossSectionIndices(i,s,!0):(r.position=this.lineEnd,r.type=ui.SegmentType.LineSegment),this.connectCrossSections(i,s)}buildCrossSection(t,e,i,s,r){this.updateCrossSectionsPoints(r);for(let n=0;n<r;n++)this.tmp.copy(this.crossSectionPoints[n]).multiplyScalar(e).applyQuaternion(i).add(t),s.positions[this.positionPointer]=this.tmp.x,s.positions[this.positionPointer+1]=this.tmp.y,s.positions[this.positionPointer+2]=this.tmp.z,this.tmp.copy(this.crossSectionPoints[n]).applyQuaternion(i),s.normals[this.positionPointer]=this.tmp.x*Xt,s.normals[this.positionPointer+1]=this.tmp.y*Xt,s.normals[this.positionPointer+2]=this.tmp.z*Xt,this.positionPointer+=3}updateCrossSectionsPoints(t){if(!this.crossSectionPoints||this.crossSectionPoints.length!==t){this.crossSectionPoints=[];for(let e=0;e<t;e++){const i=2*Math.PI*e/t;this.crossSectionPoints.push(new a(Math.sin(i),Math.cos(i),0))}}}buildCrossSectionIndices(t,e,i=!1,s=!1){for(let r=0;r<e-2;r++)t.indices[this.indexPointer++]=this.positionPointer/3-e*(s?2:1),t.indices[this.indexPointer++]=this.positionPointer/3+r+(i?2:1)-e*(s?2:1),t.indices[this.indexPointer++]=this.positionPointer/3+r+(i?1:2)-e*(s?2:1)}connectCrossSections(t,e){const i=this.positionPointer/3-e,s=i-e;for(let r=0;r<e;r++){const n=(r+1)%e;t.indices[this.indexPointer++]=i+r,t.indices[this.indexPointer++]=i+n,t.indices[this.indexPointer++]=s+r,t.indices[this.indexPointer++]=s+r,t.indices[this.indexPointer++]=i+n,t.indices[this.indexPointer++]=s+n}}pickFace(t,e){}}const gi=(t,e)=>t.distanceToSquared(e)<1e-8,fi=(t,e)=>t===ui.SegmentType.Arc||e===ui.SegmentType.Arc,mi=(t,e,i)=>t+e+i<=Wt;var yi=e.Technology.TrimBim.Fbs;class vi extends ci{constructor(t,e,i){super(t,e),this.textureManager=i,this.geometryType=Kt.GridLineContainer,this.snapGeometryType=1,this.intersections=[],this.surfaceNormals=new Array,this.fontStyle={size:16,font:"sans-serif"},this.labelOffset={x:0,y:-1.2},this.buildIntersections=(()=>{const t=[],e=[],i=[],s=1e-4,r=new a,n=new a,o=new a,h=new a,b=new J,c=new a,l=new a,d=new a;return(a,u,p)=>{t.length=0,e.length=0,i.length=0;for(let _=0;_<u;++_){r.set(a[6*_],a[6*_+1],a[6*_+2]),n.set(a[6*_+3],a[6*_+4],a[6*_+5]),o.copy(n).sub(r),h.copy(o).normalize(),b.set(r,h);for(let a=0;a<t.length;++a){b.distanceSqToSegment(t[a],e[a],null,c)<s&&(l.copy(c).sub(r),d.copy(c).sub(n),o.dot(l)>=-1e-4&&o.dot(d)<=s&&(i.push(c.clone()),0===p.lengthSq()&&p.crossVectors(h,c.sub(t[a]))))}t.push(r.clone()),e.push(n.clone())}return i.slice()}})(),this.pickLineWithCallback=(()=>{const t=new yi.GridLineContainer,e=new a,i=new a;return(s,r,n)=>{this.geometry.gridLineContainers(s,t);const o=this.getGeometries(s,!0),a=(Array.isArray(o)?o[0]:o).positions;for(let s=0,o=t.gridLineSegmentsLength();s<o;++s)e.set(a[6*s],a[6*s+1],a[6*s+2]),i.set(a[6*s+3],a[6*s+4],a[6*s+5]),ni(e,i,r,n)}})(),this.pickLine=(()=>{const t=new yi.GridLineContainer,e=new a,i=new a,s=[];return(r,n,o,a=!1)=>{s.length=0,this.geometry.gridLineContainers(r,t);const h=this.getGeometries(r,!0),b=(Array.isArray(h)?h[0]:h).positions;for(let r=0,h=t.gridLineSegmentsLength();r<h;++r)e.set(b[6*r],b[6*r+1],b[6*r+2]),i.set(b[6*r+3],b[6*r+4],b[6*r+5]),ni(e,i,n,((t,r)=>{o.containsPoint(r)&&s.push({point:a?t.clone():r.clone(),snapLineStart:e.clone(),snapLineEnd:i.clone()})}));return s}})()}getGeometries(t,e=!0){const i=this.getCachedGeometryDatas(t),s=i?i[0]:void 0,r=i?i[1]:void 0;if(s&&!s.positions&&e){const e=this.geometry.gridLineContainers(t);this.buildGridLines(e,s),r&&this.buildGridLabels(e,r,this.textureDescs[t]),this.surfaceNormals[t]=new a,this.intersections[t]=this.buildIntersections(s.positions,e.gridLineSegmentsLength(),this.surfaceNormals[t]),this.calculateMemSizeAndCache(t,i)}return i}async createGeometryPrototypes(){this.initGeometryCache(this.geometry.gridLineContainersLength()),this.textureDescs=new Array(this.geometry.gridLineContainersLength());const t=new yi.GridLineContainer,e=new yi.GridLineSegment;for(let i=0,s=this.geometry.gridLineContainersLength();i<s;i++){this.geometry.gridLineContainers(i,t);const s=[this.createGeometryPrototype(t,1),this.createGeometryPrototype(t,2)];if(t.gridLineSegmentsLength()>0){const r=new Array(t.gridLineSegmentsLength()),n=new Array(t.gridLineSegmentsLength()).fill(this.fontStyle);for(let i=0;i<t.gridLineSegmentsLength();++i)t.gridLineSegments(i,e),r[i]=e.axisTag();this.textureDescs[i]=await this.textureManager.sendTexts(r,n),s[1].textureId=this.textureDescs[i][0].textureId}this.setGeometryPrototype(i,s)}}build(t,e,i){}buildGridLines(t,e){e.positions=new Float32Array(e.positionsLength),e.normals=new Int16Array(e.normalsLength);let i=0;const s=new yi.GridLineSegment,r=new yi.Line3d;for(let n=0,o=t.gridLineSegmentsLength();n<o;n++)t.gridLineSegments(n,s),s.lineSegment(r),i=hi.buildLine(r,e,i)}buildGridLabels(t,e,i){e.positions=new Float32Array(e.positionsLength),e.pointUvs=new Float32Array(e.pointUvsLength),e.pointSizes=new Float32Array(e.pointSizesLength);const s=new yi.GridLineSegment,r=new yi.Line3d,n=new yi.Vec3d,o=new yi.Vec3d;for(let a=0,h=t.gridLineSegmentsLength();a<h;a++){t.gridLineSegments(a,s),s.lineSegment(r),s.lineSegment().start(n),s.lineSegment().end(o);const h=i[a],b=this.labelOffset.x*h.width/2,c=this.labelOffset.y*h.height/2;e.positions[6*a+0]=n.x(),e.positions[6*a+1]=n.y(),e.positions[6*a+2]=n.z(),e.positions[6*a+3]=o.x(),e.positions[6*a+4]=o.y(),e.positions[6*a+5]=o.z(),e.pointUvs.set(h.pointUvs,8*a),e.pointUvs.set(h.pointUvs,8*a+4),e.pointSizes[8*a+0]=e.pointSizes[8*a+4]=-h.width/2+b,e.pointSizes[8*a+1]=e.pointSizes[8*a+5]=-h.height/2+c,e.pointSizes[8*a+2]=e.pointSizes[8*a+6]=h.width/2+b,e.pointSizes[8*a+3]=e.pointSizes[8*a+7]=h.height/2+c}}createGeometryPrototype(t,e){const i=t.gridLineSegmentsLength();return 2===e?{objectType:2,positionsLength:2*i*3,pointUvsLength:2*i*4,pointSizesLength:2*i*4}:{objectType:1,positionsLength:2*i*3}}pick(t,e,i){return this.pickLine(t,e,i,!0)}pickFace(t,e,i){if(0===this.surfaceNormals[t].lengthSq())return;const s=this.pickLine(t,e,i);for(const e of s)e.normal=this.surfaceNormals[t];return s}pickPoint(t,e,i){return this.intersections[t]||this.getGeometries(t,!0),this.intersections[t].filter((t=>i.containsPoint(t))).map((t=>({point:t.clone()})))}}var xi=e.Technology.TrimBim.Fbs;class Ti extends Qt{createGeometryPrototype(t,e){return{objectType:e,positionsLength:3,pointUvsLength:4,pointSizesLength:4}}pick(t,e,i){return this.pickPoint(t,e,i)}pickFace(t,e){}pickLine(t,e,i){}pickPoint(t,e,i){return i.containsPoint(Zt.zero)?[{point:Zt.zero.clone()}]:void 0}}class wi extends Ti{constructor(){super(...arguments),this.geometryType=Kt.TexturedBillboard,this.snapGeometryType=2,this.texturedBillboard=new xi.TexturedBillboard}createGeometryPrototypes(){this.initGeometryCache(this.geometry.texturedBillboardsLength());for(let t=0,e=this.geometry.texturedBillboardsLength();t<e;t++){this.geometry.texturedBillboards(t,this.texturedBillboard);const e=this.texturedBillboard.IsInWorldUnits()?3:2;this.setGeometryPrototype(t,this.createGeometryPrototype(this.texturedBillboard,e))}}build(t,e){e.positions=new Float32Array(e.positionsLength),e.pointUvs=new Float32Array(e.pointUvsLength),e.pointSizes=new Float32Array(e.pointSizesLength),e.pointUvs[0]=t.leftUpUV().x(),e.pointUvs[1]=t.rightDownUV().y(),e.pointUvs[2]=t.rightDownUV().x(),e.pointUvs[3]=t.leftUpUV().y(),e.pointSizes[0]=t.leftUpXY().x(),e.pointSizes[1]=t.leftUpXY().y(),e.pointSizes[2]=t.rightDownXY().x(),e.pointSizes[3]=t.rightDownXY().y()}getGeometries(t,e=!0){const i=this.getCachedGeometryData(t);return!i.positions&&e&&(this.geometry.texturedBillboards(t,this.texturedBillboard),this.build(this.texturedBillboard,i),this.calculateMemSizeAndCache(t,i)),i}}class Fi extends Ti{constructor(t,e,i){super(t,e),this.textureManager=i,this.geometryType=Kt.BillboardText,this.snapGeometryType=2,this.billboardText=new xi.BillboardText,this.textStyle=new xi.TextStyle}async createGeometryPrototypes(){this.initGeometryCache(this.geometry.billboardTextsLength());const t=new Array(this.geometry.billboardTextsLength()),e=new Array(this.geometry.billboardTextsLength());for(let i=0,s=this.geometry.billboardTextsLength();i<s;i++){this.geometry.billboardTexts(i,this.billboardText),this.geometry.textStyles(this.billboardText.textStyleId(),this.textStyle);const s=!!(1&this.textStyle.options());t[i]=this.billboardText.text(),e[i]={font:this.textStyle.font(),size:s?Math.max(this.textStyle.size(),32):this.textStyle.size(),underlined:!!(2&this.textStyle.options())}}this.textureDescs=await this.textureManager.sendTexts(t,e);for(let t=0,e=this.geometry.billboardTextsLength();t<e;t++){this.geometry.billboardTexts(t,this.billboardText),this.geometry.textStyles(this.billboardText.textStyleId(),this.textStyle);const e=!!(1&this.textStyle.options()),i=e?3:2,s=this.createGeometryPrototype(this.billboardText,i),r=this.textureDescs[t];if(e){const t=this.textStyle.size()/32;r.width*=t,r.height*=t}s.textureId=r.textureId,this.setGeometryPrototype(t,s)}}build(t,e){return e.positions=new Float32Array(e.positionsLength),e.pointUvs=new Float32Array(e.pointUvsLength),e.pointSizes=new Float32Array(e.pointSizesLength),e}buildText(t,e,i,s){this.build(t,s);const r=this.textureDescs[i],n=1<=this.textStyle.alignment()&&this.textStyle.alignment()<=9?this.textStyle.alignment():xi.AlignmentType.LeftTop,o=~~((n-1)%3)-1,a=~~((n-1)/3)-1-2*this.textStyle.horizontalAlign(),h=o-2*this.textStyle.verticalAlign();s.pointUvs.set(r.pointUvs),s.pointSizes[0]=-.5*(r.width+r.width*a),s.pointSizes[1]=-.5*(r.height+r.height*h),s.pointSizes[2]=.5*(r.width-r.width*a),s.pointSizes[3]=.5*(r.height-r.height*h)}getGeometries(t,e=!0){const i=this.getCachedGeometryData(t);return!i.positions&&e&&(this.geometry.billboardTexts(t,this.billboardText),this.geometry.textStyles(this.billboardText.textStyleId(),this.textStyle),this.buildText(this.billboardText,this.textStyle,t,i),this.calculateMemSizeAndCache(t,i)),i}}class Si{constructor(t,e){this.modelId=t,this.messenger=e,this.actions=[],this.intervalId=setInterval((()=>this.update()),50)}send(t){this.actions.push(t),this.actions.length>20&&this.update()}update(){if(0===this.actions.length)return;const t={type:1,modelId:this.modelId,actions:this.actions};this.actions=[],this.messenger.request(t,Si.getTransferables(t))}static getTransferables(t){const e=[];for(const i of t.actions)if(0===i.actionType){const t=i;t.positions&&e.push(t.positions.buffer),t.indices&&e.push(t.indices.buffer),t.normals&&e.push(t.normals.buffer),t.uvs&&e.push(t.uvs.buffer),t.pointUvs&&e.push(t.pointUvs.buffer),t.pointSizes&&e.push(t.pointSizes.buffer),t.ids&&e.push(t.ids.buffer)}return e}removePendingUpdateFinishedAction(){this.actions=this.actions.filter((t=>3!==t.actionType))}dispose(){clearInterval(this.intervalId)}}var Ii=e.Technology.TrimBim.Fbs;class Bi{static setTransform(t,e,i){const s=e.entities(t);Bi.matrix4ToPlacement(i,s.globalPlacement())}}function Mi(t){return Number.isNaN(t)||!Number.isFinite(t)?0:t}function Vi(t,e){t.bb.writeFloat32(t.bb_pos,e)}function Li(t,e){t.bb.writeFloat32(t.bb_pos+4,e)}function Pi(t,e){t.bb.writeFloat32(t.bb_pos+8,e)}Bi.getTransform=(()=>{const t=new Ii.Entity,e=new Ii.Placement3,i=new tt,s=new tt;return(r,n,o,a)=>{n.entities(r.entityId(),t),Bi.placementToMatrix4(o.localPlacements(r.localPlacementId(),e),i),Bi.placementToMatrix4(t.globalPlacement(e),s),a.multiplyMatrices(s,i)}})(),Bi.getBoundingBox=(()=>{const t=new Ii.AABB3f;return(e,i)=>{e.boundingBox(t),Bi.aabbToBox(t,i)}})(),Bi.aabbToBox=(()=>{const t=new Ii.Vec3f;return(e,i)=>{e.min(t),i.min.set(Mi(t.x()),Mi(t.y()),Mi(t.z())),e.max(t),i.max.set(Mi(t.x()),Mi(t.y()),Mi(t.z()))}})(),Bi.placementToMatrix4=(()=>{const t=new a,e=new a,i=new a,s=new a,r=new Ii.Vec3d,n=new Ii.Vec3f;return(o,a)=>(o.origin(r),t.set(Mi(r.x()),Mi(r.y()),Mi(r.z())),o.xAxis(n),e.set(Mi(n.x()),Mi(n.y()),Mi(n.z())),o.yAxis(n),i.set(Mi(n.x()),Mi(n.y()),Mi(n.z())),s.crossVectors(e,i),a.set(e.x,i.x,s.x,t.x,e.y,i.y,s.y,t.y,e.z,i.z,s.z,t.z,0,0,0,1),a)})(),Bi.matrix4ToPlacement=(()=>{const t=new Ii.Vec3d,e=new Ii.Vec3f;return(i,s)=>{const r=s.origin(t);var n,o;n=r,o=i.elements[12],n.bb.writeFloat64(n.bb_pos,o),function(t,e){t.bb.writeFloat64(t.bb_pos+8,e)}(r,i.elements[13]),function(t,e){t.bb.writeFloat64(t.bb_pos+16,e)}(r,i.elements[14]);const a=s.xAxis(e);Vi(a,i.elements[0]),Li(a,i.elements[1]),Pi(a,i.elements[2]);const h=s.yAxis(e);Vi(h,i.elements[4]),Li(h,i.elements[5]),Pi(h,i.elements[6])}})();class zi{constructor(t){this.length=t,this.pickPriorityMask=48,this.state=new Uint8Array(t),this.customMaterialIds=new Uint8Array(t)}isVisible(t){return this.is(t,1)}isSelected(t){return this.is(t,2)}isHovered(t){return this.is(t,3)}is(t,e){const i=1<<e;return!!(this.state[t]&i)}set(t,e,i){const s=1<<e;this.state[t]=i?this.state[t]|s:this.state[t]&~s}getPickPriority(t){return(this.state[t]&this.pickPriorityMask)>>4}resetVisibility(){for(let t=0,e=this.state.length;t<e;t++)this.setVisible(t,!0)}setPickPriority(t,e){const i=e<<4,s=this.state[t];this.state[t]=s&~this.pickPriorityMask|i}resetPickPriority(){for(let t=0,e=this.state.length;t<e;t++)this.setPickPriority(t,0)}setVisible(t,e){this.set(t,1,e)}setSelected(t,e){this.set(t,2,e)}setHovered(t,e){this.set(t,3,e)}clearSelection(){for(let t=0,e=this.state.length;t<e;t++)this.setSelected(t,!1)}resetHovered(){for(let t=0,e=this.state.length;t<e;t++)this.setHovered(t,!1)}resetMaterialIds(){this.customMaterialIds.fill(0)}setCustomMaterialId(t,e){this.customMaterialIds[t]=e}getCustomMaterialId(t){return this.customMaterialIds[t]}}var Ai=e.Technology.TrimBim.Fbs;class Ci extends ci{constructor(){super(...arguments),this.geometryType=Kt.AlignmentCurve,this.snapGeometryType=1}createGeometryPrototypes(){this.initGeometryCache(this.geometry.alignmentCurvesLength());for(let t=0,e=this.geometry.alignmentCurvesLength();t<e;t++){const e=this.geometry.alignmentCurves(t);this.setGeometryPrototype(t,this.createGeometryPrototype(e))}}getGeometries(t,e=!0){const i=this.getCachedGeometryData(t);if(i&&!i.positions&&e){const e=this.geometry.alignmentCurves(t);this.build(e,i),this.calculateMemSizeAndCache(t,i)}return i}createGeometryPrototype(t){return{objectType:1,positionsLength:6*Ci.computeTesselationCount(t,.1)}}build(t,e){e.positions=new Float64Array(e.positionsLength),e.normals=new Int16Array(e.normalsLength);Ci.buildSegments(t,.1,e)}pick(t,e,i){return this.pickLine(t,e,i,!0)}pickFace(t,e){}pickLineWithCallback(t,e,i){!function(t,e,i){ri(t,((t,s)=>{ni(t,s,e,i)}))}(this.getGeometries(t).positions,e,i)}pickPoint(t,e,i){}static computeTesselationCount(t,e){let i=0;const s=Ci.buildSpans(t,e);if(!s)return 0;const r=t.horizontalCurve();let n=r.startAlongDistance();for(let t=0,e=r.segmentTypesLength();t<e;t++){n+=Ci.horizontalCurveGetSegmentAt(r,t).segmentLength()}const o=t.verticalCurve();for(const t of s)if(t.hasHorizontalCurve&&t.hasVerticalCurve){const e=r.segmentTypes(t.horizontalCurveIndex),s=o.segmentTypes(t.verticalCurveIndex),n=Ci.getTessellationCountHorizontal(e),a=Ci.getTessellationCountVertical(s);i+=Math.max(n,a)}return i}static horizontalCurveGetSegmentAt(t,e){let i=0;const s=t.segmentTypes(e);for(let r=0;r<e;r++)t.segmentTypes(r)===s&&(i+=1);switch(s){case Ai.HorizontalSegmentType.LineSegment:return t.lineSegments(i);case Ai.HorizontalSegmentType.CircularArcSegment:return t.circularArcSegments(i);case Ai.HorizontalSegmentType.ClothoidalArcSegment:return t.clothoidalArcSegments(i);case Ai.HorizontalSegmentType.TransientCurveSegment:return t.transitionArcSegments(i)}}static verticalCurveGetSegmentAt(t,e){let i=0;const s=t.segmentTypes(e);for(let r=0;r<e;r++)t.segmentTypes(r)===s&&(i+=1);switch(s){case Ai.VerticalSegmentType.LineSegment:return t.lineSegments(i);case Ai.VerticalSegmentType.CircularArcSegment:return t.circularArcSegments(i);case Ai.VerticalSegmentType.ParabolicArcSegment:return t.parabolicArcSegments(i)}}static segmentClothoidSpaceLocation(t,e){if(t.startRadius()===t.endRadius()){const t=new ht;return t.setX(e),t}let i;if(i=0===t.startRadius()?Math.abs(t.endRadius()*t.segmentLength()):0===t.endRadius()?Math.abs(t.startRadius()*t.segmentLength()):Math.abs(t.segmentLength()*t.startRadius()*t.endRadius()/(t.startRadius()-t.endRadius())),0===i)return new ht;const s=0!==t.startRadius()?Math.abs(i/t.startRadius()):0,r=0!==t.endRadius()?Math.abs(i/t.endRadius()):0,n=Math.sign(r-s)*s,o=n+e,a=Math.sign(n+o)*Math.sign(t.startRadius()+t.endRadius()),h=a*n*n/i/2,b=a*o*o/i/2,c=n*Ci.cloCos(h),l=n*Ci.cloSin(h),d=o*Ci.cloCos(b),u=o*Ci.cloSin(b),p=Math.sin(h),_=Math.cos(h);return new ht(+_*(d-c)+p*(u-l),-p*(d-c)+_*(u-l))}static cloCos(t){const e=t*t;return 1-e*(.1-e*(1/216-e*(1/9360-e*(1/685440-e*(1/76204800-e*(1/1197504e4-e/2528170444800))))))}static cloSin(t){const e=t*t;return t*(1/3-e*(1/42-e*(1/1320-e*(1/75600-e*(1/6894720-e*(1/918086400-e*(1/168129561600-e/40537905408e3)))))))}static segmentGetElevationAt(t,e,i){const s=i-e.startDistAlong();switch(i=s<0?0:s>e.horizontalLength()?e.horizontalLength():s,t){case Ai.VerticalSegmentType.LineSegment:return e.startHeight()+e.startGradient()*i;case Ai.VerticalSegmentType.CircularArcSegment:{const t=e,s=e.startHeight(),r=e.startGradient(),n=t.radius(),o=i,a=Math.sqrt(1+r*r),h=n/a;if(t.isConvex()){let t=o-n*(r/a);return t>n&&(t=n),s+Math.sqrt(n*n-t*t)-h}{let t=o+n*(r/a);return t>n&&(t=n),s-Math.sqrt(n*n-t*t)+h}}case Ai.VerticalSegmentType.ParabolicArcSegment:{const t=e,s=t.isConvex()?-t.parabolaConstant():t.parabolaConstant(),r=e.startHeight(),n=e.startGradient();return i*(i/s+n+n)/2+r}}}static getTessellationCountHorizontal(t,e=1){switch(t){case Ai.HorizontalSegmentType.LineSegment:return 1;case Ai.HorizontalSegmentType.CircularArcSegment:case Ai.HorizontalSegmentType.TransientCurveSegment:return 24*e}return 1}static getTessellationCountVertical(t,e=1){switch(t){case Ai.VerticalSegmentType.LineSegment:return 1;case Ai.VerticalSegmentType.CircularArcSegment:case Ai.VerticalSegmentType.ParabolicArcSegment:return 24*e}return 1}static buildSpans(t,e){const i=Ci.buildVerticalBreaks(t.verticalCurve(),e);if(null===i)return null;const s=[];{const e=t.horizontalCurve();let s=e.startAlongDistance();for(let t=0,r=e.segmentTypesLength();t<r;t++){i.push(new Ei(s,!1,!1,t));s+=Ci.horizontalCurveGetSegmentAt(e,t).segmentLength()}i.push(new Ei(s,!1,!1,-1)),i.sort(((t,e)=>t.Distance<e.Distance?-1:t.Distance>e.Distance?1:0))}{let t=-1,r=-1,n=!1,o=Number.MIN_VALUE;for(let a=0,h=i.length;a<h;a++){const h=i[a];n&&(-1===r&&-1===t||h.Distance-o>e&&s.push(new Oi(-1!==r,-1!==t,r,t,o,h.Distance-o))),h.IsVertical?t=h.CurveIndex:r=h.CurveIndex,n=!0,o=h.Distance}}return s}static buildVerticalBreaks(t,e){if(0===t.segmentTypesLength())return null;const i=[];let s=Ci.verticalCurveGetSegmentAt(t,0).startDistAlong();for(let r=0,n=t.segmentTypesLength();r<n;r++){const n=Ci.verticalCurveGetSegmentAt(t,r),o=s-n.startDistAlong();if(o>e){const t=n.horizontalLength()-o;t>e&&(i.push(new Ei(s,!0,!0,r)),s+=t)}else o<-e?(i.push(new Ei(s,!0,!1,-1)),i.push(new Ei(n.startDistAlong(),!0,!0,r)),s=n.startDistAlong()+n.horizontalLength()):(i.push(new Ei(n.startDistAlong(),!0,!0,r)),s=n.startDistAlong()+n.horizontalLength())}return i.push(new Ei(s,!0,!1,-1)),i}}Ci.buildSegments=(()=>{const t=new ht,e=new ht,i=new a,s=new a;return(r,n,o)=>{let a=0;const h=Ci.buildSpans(r,n);if(null===h)return;const b=r.horizontalCurve();let c=b.startAlongDistance();const l=[];for(let t=0,e=b.segmentTypesLength();t<e;t++){l.push(c);c+=Ci.horizontalCurveGetSegmentAt(b,t).segmentLength()}const d=r.verticalCurve();for(const r of h)if(r.hasHorizontalCurve&&r.hasVerticalCurve){const n=b.segmentTypes(r.horizontalCurveIndex),h=Ci.horizontalCurveGetSegmentAt(b,r.horizontalCurveIndex),c=d.segmentTypes(r.verticalCurveIndex),u=Ci.verticalCurveGetSegmentAt(d,r.verticalCurveIndex),p=Ci.getTessellationCountHorizontal(n),_=Ci.getTessellationCountVertical(c),g=Math.max(p,_),f=l[r.horizontalCurveIndex];Ci.horizontalSegmentGetPointAt(n,h,r.startDistance-f,t),s.set(t.x,t.y,Ci.segmentGetElevationAt(c,u,r.startDistance)),r.startDistance;for(let t=1;t<=g;t++){const b=r.startDistance+t/g*r.horizontalLength;Ci.horizontalSegmentGetPointAt(n,h,b-f,e),i.set(e.x,e.y,Ci.segmentGetElevationAt(c,u,b)),o.positions[a]=s.x,o.positions[a+1]=s.y,o.positions[a+2]=s.z,o.positions[a+3]=i.x,o.positions[a+4]=i.y,o.positions[a+5]=i.z,a+=6,s.copy(i)}}}})(),Ci.horizontalSegmentGetPointAt=(()=>{const t=new ht,e=new ht,i=new ht;return(s,r,n,o)=>{switch(s){case Ai.HorizontalSegmentType.LineSegment:n<0?n=0:n>r.segmentLength()&&(n=r.segmentLength()),o.setX(r.startPoint().x()+n*Math.cos(r.startDirection())),o.setY(r.startPoint().y()+n*Math.sin(r.startDirection()));break;case Ai.HorizontalSegmentType.CircularArcSegment:{const s=r.radius(),a=r.isCCW(),h=n/s,b=r.startDirection()+(a?-Math.PI:Math.PI)/2+(a?h:-h),c=r.startDirection()+(a?Math.PI:-Math.PI)/2;t.set(Math.cos(c)*s,Math.sin(c)*s),e.set(r.startPoint().x(),r.startPoint().y()),e.add(t),o.addVectors(e,i.set(Math.cos(b)*s,Math.sin(b)*s));break}case Ai.HorizontalSegmentType.ClothoidalArcSegment:break;case Ai.HorizontalSegmentType.TransientCurveSegment:switch(r.type()){case Ai.HorizontalTransitionCurveType.ClothoidCurve:if(r.isStartRadiusCCW()===r.isEndRadiusCCW())return Ci.segmentClothoidGetPointAt(r,n,o);break;case Ai.HorizontalTransitionCurveType.BiquadraticParabola:case Ai.HorizontalTransitionCurveType.BlossCurve:case Ai.HorizontalTransitionCurveType.CosineCurve:case Ai.HorizontalTransitionCurveType.SineCurve:console.error("horizontal segment of type "+r.type()+" not yet implemented")}}return new ht}})(),Ci.segmentClothoidGetPointAt=(()=>{const t=new ht;return(e,i,s)=>{const r=Ci.segmentClothoidSpaceLocation(e,i),n=r.x,o=r.y,a=Math.cos(e.startDirection()),h=Math.sin(e.startDirection());s.set(e.startPoint().x(),e.startPoint().y()),e.isStartRadiusCCW()?s.add(t.set(a*n-h*o,h*n+a*o)):s.add(t.set(a*n+h*o,h*n-a*o))}})();class Ei{constructor(t,e,i,s){this.Distance=t,this.IsVertical=e,this.HasCurve=i,this.CurveIndex=s}}class Oi{constructor(t,e,i,s,r,n){this.hasHorizontalCurve=t,this.hasVerticalCurve=e,this.horizontalCurveIndex=i,this.verticalCurveIndex=s,this.startDistance=r,this.horizontalLength=n}}class Ri{static transformFrustum(t,e,i=new W){for(let s=0;s<i.planes.length;s++)i.planes[s].copy(t.planes[s]).applyMatrix4(e);return i}static planesIntersectBox(t,e){return Ri.planesIntersectBoxInternal(t,e,!1)}static planesContainBox(t,e){return Ri.planesIntersectBoxInternal(t,e,!0)}static insideNonIntersectingPlanes(t,e){let i=!0;for(const s of e)i=i&&s.distanceToPoint(t)>0;return i}}Ri.planesIntersectBoxInternal=(()=>{const t=new a;return(e,i,s)=>{for(let r=0,n=e.length;r<n;r++){const n=e[r].normal;if(t.set(n.x>=0!==s?i.max.x:i.min.x,n.y>=0!==s?i.max.y:i.min.y,n.z>=0!==s?i.max.z:i.min.z),e[r].distanceToPoint(t)<0)return!1}return!0}})();var Gi=e.Technology.TrimBim.Fbs;class Di{constructor(t,e,i,s,r,n,o,h){this.modelId=t,this.model=i,this.boundingBoxManager=s,this.entityState=r,this.layerManager=n,this.textureManager=o,this.materialIdMap=h,this.geometryBuilders=new Map,this.previousCameraDirection=new a,this.previousCameraPosition=new a,this.instancesProcessedForCurrentCamera=0,this.instanceIndex=0,this.updateFinished=!1,this.instance=new Gi.GeometryInstance,this.definition=new Gi.GeometryDefinition,this.geometryStateFull=[{start:0,count:1/0}],this.checksum=new kt,this.getApproxPixelSize=(()=>{let t,e;return(i,s)=>{this.camera.fieldOfView!==e&&(t=function(t,e){return Math.tan(t*Math.PI*.002777777777777778)*e}(this.camera.fieldOfView,1),e=this.camera.fieldOfView);return i/(t*s)*this.camera.resolution}})(),this.getEmptyInstanceGeometry=(()=>{const t=new tt,e=new I,i={};return(s,r,n)=>(Bi.getTransform(r,this.entities,this.geometry,t),Bi.getBoundingBox(n,e),i.instanceId=s,i.materialId=this.materialIdMap[r.surfaceMaterialId()],i.transform=t,i.boundingBox=e,delete i.geometries,i)})(),this.messenger=new Si(t,e),this.geometry=i.geometry(),this.entities=i.entities(),this.instancesLength=this.geometry.instancesLength(),this.instanceState=new zi(this.instancesLength),this.instanceIdsSortedBySize=new Int32Array(this.instancesLength),this.registerGeometryBuilders(),this.sortInstancesBySize()}registerGeometryBuilders(){this.registerGeometryBuilder(new ze(this.modelId,this.geometry)),this.registerGeometryBuilder(new Ce(this.modelId,this.geometry)),this.registerGeometryBuilder(new Ae(this.modelId,this.geometry)),this.registerGeometryBuilder(new Ue(this.modelId,this.geometry)),this.registerGeometryBuilder(new We(this.modelId,this.geometry)),this.registerGeometryBuilder(new je(this.modelId,this.geometry)),this.registerGeometryBuilder(new Ze(this.modelId,this.geometry)),this.registerGeometryBuilder(new di(this.modelId,this.geometry)),this.registerGeometryBuilder(new _i(this.modelId,this.geometry)),this.registerGeometryBuilder(new vi(this.modelId,this.geometry,this.textureManager)),this.registerGeometryBuilder(new wi(this.modelId,this.geometry)),this.registerGeometryBuilder(new Fi(this.modelId,this.geometry,this.textureManager)),this.registerGeometryBuilder(new Ci(this.modelId,this.geometry))}async createGeometryPrototypes(){for(const t of this.geometryBuilders.values())await t.createGeometryPrototypes()}registerGeometryBuilder(t){this.geometryBuilders.set(t.geometryType,t)}sortInstancesBySize(){for(let t=0;t<this.instancesLength;t++)this.instanceIdsSortedBySize[t]=t;this.instanceIdsSortedBySize.sort(((t,e)=>this.boundingBoxManager.getSize(e)-this.boundingBoxManager.getSize(t)))}updateLoop(t){if(this.instancesProcessedForCurrentCamera<this.instancesLength&&this.camera)for(let e=0;e<this.instancesLength&&(performance.now()-t<10||e<50);e++)this.updateInstanceGeometry(this.instanceIdsSortedBySize[this.instanceIndex]),this.instanceIndex++,this.instanceIndex>=this.instancesLength&&(this.instanceIndex=0),this.instancesProcessedForCurrentCamera++;this.instancesProcessedForCurrentCamera>=this.instancesLength&&!this.updateFinished&&(this.messenger.send({actionType:3,modelId:this.modelId}),this.updateFinished=!0)}updateInstanceState(t,e,i=!1){const s=this.getEntityId(t),r=this.entityState.isVisibleByHierarchy(s),n=this.instanceState.isVisible(t),o=this.entityState.isSelectedByHierarchy(s),a=this.instanceState.isSelected(t),h=this.entityState.isHoveredByHierarchy(s),b=this.instanceState.isHovered(t),c=this.entityState.getCustomMaterialIdByHierarchy(s),l=this.instanceState.getCustomMaterialId(t);(r!==n||o!==a||h!==b||c!==l||i)&&this.setInstanceState(t,r,o,h,c,e)}isVisible(t){return this.isVisibleByCamera(t)&&this.isVisibleByState(t)}isVisibleByCamera(t){const e=this.boundingBoxManager.getTransformedBoundingBox(t);return this.isVisibleByClipPlanes(e)&&this.isVisibleByCameraDistance(t,e)}isVisibleByClipPlanes(t){return Ri.planesIntersectBox(this.visibilityPlanes,t)}isVisibleByCameraDistance(t,e){const i=this.boundingBoxManager.getSize(t);if(0===i)return!0;const s=e.distanceToPoint(this.camera.position),r=this.getApproxPixelSize(i,s);return i>2?r>5:r>20}isVisibleByState(t){return this.geometry.instances(t,this.instance),this.entityState.isVisibleByHierarchy(this.instance.entityId())&&this.layerManager.isVisible(this.instance.layerId())}setCamera(t){this.camera=t,void 0!==t.trimbimSettings.geometryCacheSize&&(Qt.maxCacheSize=t.trimbimSettings.geometryCacheSize),this.forceUpdate(),this.restartInstanceIndex(),this.camera.clipPlanes?(this.visibilityPlanes=[...this.camera.frustum.planes],this.visibilityPlanes.push(...this.camera.clipPlanes)):this.visibilityPlanes=this.camera.frustum.planes}restartInstanceIndex(){const t=this.camera.frustum.planes[4].normal;t.angleTo(this.previousCameraDirection)>10*n.DEG2RAD&&(this.instanceIndex=0,this.previousCameraDirection.copy(t)),this.camera.position.distanceToSquared(this.previousCameraPosition)>400&&(this.instanceIndex=0,this.previousCameraPosition.copy(this.camera.position))}forceUpdate(){this.updateFinished=!1,this.instancesProcessedForCurrentCamera=0,this.messenger.removePendingUpdateFinishedAction()}forceStateUpdate(t){if(t&&this.camera)for(const e of t){const t=this.boundingBoxManager.getEntityInstanceIds(e);if(t)for(const e of t)this.updateInstanceGeometry(e)}this.forceUpdate()}setEntityTransform(t,e){for(let e=0;e<this.instancesLength&&(this.geometry.instances(e,this.instance),this.instance.entityId()!==t);e++);const i=this.geometry.localPlacements(this.instance.localPlacementId()),s=Bi.placementToMatrix4(i,new tt);e.multiply(s.invert()),Bi.setTransform(t,this.entities,e);for(let e=0;e<this.instancesLength;e++)this.instance.entityId()===t&&this.boundingBoxManager.calculateTransformedBoundingBox(e)}getGeometryId(t,e,i){return this.checksum.clear().add(t).add(e).add(i).get()}updateInstanceGeometry(t){this.isVisible(t)?this.instanceState.isVisible(t)?this.updateInstanceState(t,0):this.showInstanceGeometry(t,0):this.instanceState.isVisible(t)&&this.hideInstanceGeometry(t,0)}showInstanceGeometry(t,e){const i=this.getInstanceGeometry(t,e);if(i.geometries){const s=this.getEntityId(t),r=this.entityState.isVisibleByHierarchy(s),n=this.entityState.isSelectedByHierarchy(s),o=this.entityState.isHoveredByHierarchy(s),a=this.entityState.getCustomMaterialIdByHierarchy(s),h=this.createBatchState(t,r,n,o,a);jt(i.geometries,((r,n)=>{this.addGeometry(this.getGeometryId(t,n,e),r,void 0,i.materialId,i.transform,i.boundingBox,h,s,!0)}))}}getInstanceGeometry(t,e){this.geometry.instances(t,this.instance),this.geometry.definitions(this.instance.definitionId(),this.definition);const i=this.getEmptyInstanceGeometry(t,this.instance,this.definition),s=this.geometryBuilders.get(this.definition.type());return s&&(i.geometries=s.getGeometries(this.definition.index(),!0)),i}setInstanceState(t,e,i,s,r,n){const o=this.createBatchState(t,e,i,s,r),a=this.geometry.instances(t,this.instance).definitionId();this.geometry.definitions(a,this.definition);jt(this.geometryBuilders.get(this.definition.type()).getGeometries(this.definition.index(),!1),((e,i)=>{this.sendGeometryState(this.getGeometryId(t,i,n),e.objectType,this.materialIdMap[this.instance.surfaceMaterialId()],e.textureId,o)}))}createBatchState(t,e,i,s,r){return this.instanceState.setVisible(t,e),this.instanceState.setSelected(t,i),this.instanceState.setHovered(t,s),this.instanceState.setCustomMaterialId(t,r),{visible:e&&0===r?this.geometryStateFull:void 0,selected:i?this.geometryStateFull:void 0,hovered:s?this.geometryStateFull:void 0,customMaterialIds:0!==r?new Map([[r,this.geometryStateFull]]):void 0}}getEntityId(t){return this.geometry.instances(t,this.instance).entityId()}sendGeometryState(t,e,i,s,r){this.messenger.send({actionType:2,modelId:this.modelId,batchId:t,objectType:e,materialId:i,textureId:s,state:r})}addGeometry(t,e,i,s,r,n,o,a,h=!1){const b=h&&e.positions?new Float32Array(e.positions):e.positions,c=h&&e.normals?new Int16Array(e.normals):e.normals,l=h&&e.indices?e.indices.slice():e.indices,d=h&&e.uvs?new Float32Array(e.uvs):e.uvs,u=h&&e.pointUvs?new Float32Array(e.pointUvs):e.pointUvs,p=h&&e.pointSizes?new Float32Array(e.pointSizes):e.pointSizes,_=h&&i?new Float32Array(i):i;this.messenger.send({actionType:0,modelId:this.modelId,objectType:e.objectType,batchId:t,userData:{id:t,entityId:a},state:o,indices:l,positions:b,normals:c,uvs:d,pointUvs:u,pointSizes:p,ids:_,materialId:s,textureId:e.textureId,transform:r.clone(),boundingBox:n.clone()})}hideInstanceGeometry(t,e){this.instanceState.setVisible(t,!1);const i=this.geometry.instances(t,this.instance).definitionId();this.geometry.definitions(i,this.definition);jt(this.geometryBuilders.get(this.definition.type()).getGeometries(this.definition.index(),!1),((i,s)=>{this.removeGeometry(this.getGeometryId(t,s,e))}))}removeGeometry(t){this.messenger.send({actionType:1,modelId:this.modelId,batchId:t,userData:{id:t}})}getIsMesh(t){return this.geometryBuilders.has(t)&&0===this.geometryBuilders.get(t).snapGeometryType}pick(t,e,i,s){const r=t.type(),n=t.index(),o=this.geometryBuilders.get(r);if(void 0===o)return[];const a=2===e?o.pickPoint(n,i,s):1===e?o.pickLine(n,i,s):0===e?o.pickFace(n,i,s):o.pick(n,i,s);if(a)for(const t of a)t.snapGeometryType=o.snapGeometryType;return a}pickOnLine(t,e){let i;this.geometry.instances(t,this.instance),this.geometry.definitions(this.instance.definitionId(),this.definition);const s=this.geometryBuilders.get(this.definition.type());if(!(s instanceof ci))throw new Error("Unable to pick on line of non line geometry");{let t=1/0;s.pickLineWithCallback(this.definition.index(),e,((e,s,r,n,o)=>{i||(i={point:void 0}),o<t&&(t=o,i.point=s.clone(),i.snapLineStart=r.clone(),i.snapLineEnd=n.clone())}))}return i}getEntityIdsWithGeometry(){const t=new Set;for(let e=0;e<this.instancesLength;e++)this.geometry.instances(e,this.instance),t.add(this.instance.entityId());return Array.from(t)}dispose(){this.messenger.dispose();for(const t of this.geometryBuilders.values())t.dispose()}}var Hi=e.Technology.TrimBim.Fbs;class Ni{constructor(t){this.modelBoundingBox=new I,this.box=new I,this.instance=new Hi.GeometryInstance,this.definition=new Hi.GeometryDefinition,this.vector3=new a,this.transform=new tt,this.geometry=t.geometry(),this.entities=t.entities(),this.instanceTransformedBoxes=new Float64Array(6*this.geometry.instancesLength()),this.instanceSizes=new Float32Array(this.geometry.instancesLength()),this.instanceWidths=new Float32Array(this.geometry.instancesLength()),this.calculateBoxes(),this.analyzeInstances()}analyzeInstances(){this.entityToInstance=new Array(this.entities.entitiesLength());const t=this.geometry.instancesLength(),e=new Hi.GeometryInstance,i=new Hi.GeometryDefinition;for(let s=0;s<t;s++){this.geometry.instances(s,e),this.geometry.definitions(e.definitionId(),i);const t=e.entityId();let r=this.entityToInstance[t];r||(r=[],this.entityToInstance[t]=r),r.push(s)}}calculateBoxes(){for(let t=0;t<this.geometry.instancesLength();t++){this.geometry.instances(t,this.instance),this.geometry.definitions(this.instance.definitionId(),this.definition),Bi.getBoundingBox(this.definition,this.box);const e=this.box.getSize(this.vector3);this.instanceSizes[t]=e.length(),e.x>e.y&&e.set(e.y,e.x,e.z),e.y>e.z&&e.set(e.x,e.z,e.y),e.x>e.y&&e.set(e.y,e.x,e.z),this.instanceWidths[t]=e.y,this.calculateTransformedBoundingBox(t)}}getEntityInstanceIds(t){return this.entityToInstance[t]}calculateTransformedBoundingBox(t){this.geometry.instances(t,this.instance),this.geometry.definitions(this.instance.definitionId(),this.definition),Bi.getTransform(this.instance,this.entities,this.geometry,this.transform),Bi.getBoundingBox(this.definition,this.box),this.box.applyMatrix4(this.transform),this.modelBoundingBox.union(this.box),this.setTransformedBoundingBox(t,this.box)}setTransformedBoundingBox(t,e){e.min.toArray(this.instanceTransformedBoxes,6*t),e.max.toArray(this.instanceTransformedBoxes,6*t+3)}getTransformedBoundingBox(t){return this.box.min.fromArray(this.instanceTransformedBoxes,6*t),this.box.max.fromArray(this.instanceTransformedBoxes,6*t+3),this.box}getSize(t){return this.instanceSizes[t]}getWidth(t){return this.instanceWidths[t]}QueryRay(t,e){const i=e&&e.length>0?t=>Ri.planesIntersectBox(e,t):()=>!0;return this.Query((e=>t.intersectsBox(e)),i)}QueryFrustum(t,e,i=!1){const s=[...t.planes];e&&s.push(...e);const r=i?t=>Ri.planesContainBox(s,t):t=>Ri.planesIntersectBox(s,t);return this.Query(r,(()=>!0))}Query(t,e){const i=[];for(let s=0;s<this.length;s++){const r=this.getTransformedBoundingBox(s);t(r)&&e(r)&&i.push(s)}return i}get length(){return this.instanceTransformedBoxes.length/6}}var Ui=e.Technology.TrimBim.Fbs;class qi{constructor(t,e,i,s,r){this.boundingBoxManager=e,this.geometryManager=i,this.entityState=s,this.layerManager=r,this.instance=new Ui.GeometryInstance,this.definition=new Ui.GeometryDefinition,this.backClipPlanePosition=new a,this.backClipPlane=new p,this.pickOnLine=(()=>{const t=new Ui.GeometryInstance,e=new J,i=new tt,s=new tt;return(r,n)=>{let o,a=1/0;for(const h of this.boundingBoxManager.getEntityInstanceIds(r)){this._geometry.instances(h,t),Bi.getTransform(t,this.entities,this._geometry,i),s.copy(i).invert(),e.copy(n).applyMatrix4(s);const b=this.geometryManager.pickOnLine(h,e);if(!b)continue;const c=e.distanceSqToPoint(b.point);c<a&&(a=c,o=b,o.instanceId=h,o.entityId=r,o.point.applyMatrix4(i),o.snapLineStart.applyMatrix4(i),o.snapLineEnd.applyMatrix4(i))}return o}})(),this.pickGeometry=(()=>{const t=new J,e=new W,i=new tt,s=new tt;return(r,n,o,a,h,b,c)=>{Bi.getTransform(o,this.entities,this._geometry,i),s.copy(i).invert(),t.copy(a).applyMatrix4(s),Ri.transformFrustum(h,s,e);let l=this.geometryManager.pick(n,b,t,e);if(l&&c&&c.length>0){const t=this.transformClipPlanes(c,s);l=l.filter((e=>Ri.insideNonIntersectingPlanes(e.point,t)))}const d=[];return l&&l.forEach((t=>{const e=t;e.point.applyMatrix4(i),e.normal&&e.normal.transformDirection(i),e.instanceId=r,e.entityId=o.entityId(),e.pickPriority=this.entityState.getPickPriorityByHierarchy(e.entityId),e.cameraDistanceSq=a.origin.distanceToSquared(e.point),e.snapType=b,e.snapLineStart&&e.snapLineStart.applyMatrix4(i),e.snapLineEnd&&e.snapLineEnd.applyMatrix4(i),d.push(e)})),d}})(),this._geometry=t.geometry(),this.entities=t.entities()}filterPickableInstances(t,e=!1){return t.filter((t=>(this._geometry.instances(t,this.instance),this.entityState.isVisibleByHierarchy(this.instance.entityId())&&(e||2!==this.entityState.getPickPriorityByHierarchy(this.instance.entityId()))&&this.layerManager.isVisible(this.instance.layerId()))))}areaPick(t,e,i){return this.filterPickableInstances(this.boundingBoxManager.QueryFrustum(t,e,i)).map((t=>(this._geometry.instances(t,this.instance),this.instance.entityId())))}pick(t,e,i,s=!1){let r=this.pickBoundingBoxes(e,i,s);if(0===r.length)return;const n=this.pickBoundingBoxes(t,i,s);r.length>500&&(r=n.length>0?n:this.orderBoundingBoxesByRayOrigin(t,r,500));const o=[];for(const s of r){this._geometry.instances(s,this.instance),this._geometry.definitions(this.instance.definitionId(),this.definition);this.geometryManager.getIsMesh(this.definition.type())&&!n.includes(s)||o.push(...this.pickGeometry(s,this.definition,this.instance,t,e,void 0,i))}if(s&&0===o.length)for(const e of r){const i=this.pickBoundingBox(e,t);i&&o.push(i)}if(0===o.length)return;const a=o.filter((t=>1===this.entityState.getPickPriorityByHierarchy(t.entityId)));return a.length>0?this.findClosestHit(a):this.findClosestHit(o)}pickSnapped(t,e,i,s){const r=[],n=[];s&&n.push(...s);const o=this.pick(t,e,s);if(!o)return this.pickSnappedEdges(t,e,i,s);this._geometry.instances(o.instanceId,this.instance),this._geometry.definitions(this.instance.definitionId(),this.definition),o&&o.normal&&this.definition.type()!==Ui.GeometryType.SweptDiskSolid&&(this.backClipPlanePosition=o.point.clone().sub(o.normal.clone().multiplyScalar(.001)),this.backClipPlane.setFromNormalAndCoplanarPoint(o.normal,this.backClipPlanePosition),n.push(this.backClipPlane));for(const s of i)r.push(...this.pickGeometry(o.instanceId,this.definition,this.instance,t,e,s,n));const a=this.pickSnappedEdges(t,e,i,n);return a?r.concat(a):r}pickSnappedEdges(t,e,i,s){const r=[];if(i.includes(1)||i.includes(2)){let n=this.pickBoundingBoxes(e,s);n.length>200&&(n=this.orderBoundingBoxesByRayOrigin(t,n,200));for(const o of n){this._geometry.instances(o,this.instance),this._geometry.definitions(this.instance.definitionId(),this.definition);for(const n of i)0!==n&&r.push(...this.pickGeometry(o,this.definition,this.instance,t,e,n,s))}}if(0!==r.length){for(const e of r)e.distanceSqToRay=t.distanceSqToPoint(e.point);return r}}pickBoundingBoxes(t,e,i=!1){const s=t instanceof J?this.boundingBoxManager.QueryRay(t,e):this.boundingBoxManager.QueryFrustum(t,e);return this.filterPickableInstances(s,i)}orderBoundingBoxesByRayOrigin(t,e,i){const s=[];for(const i of e){const e=this.boundingBoxManager.getTransformedBoundingBox(i);s.push(e.distanceToPoint(t.origin))}const r=this.orderIdsByAssociatedValues(e,s);return i&&r.length>i&&r.splice(i),r}orderIdsByAssociatedValues(t,e){return[...t.keys()].sort(((t,i)=>e[t]-e[i])).map((e=>t[e]))}findClosestHit(t){return t.reduce(((t,e)=>t.distanceSqToRay&&e.distanceSqToRay?t.distanceSqToRay/t.cameraDistanceSq<e.distanceSqToRay/e.cameraDistanceSq?t:e:t.cameraDistanceSq<e.cameraDistanceSq?t:e))}pickBoundingBox(t,e){const i=this.boundingBoxManager.getTransformedBoundingBox(t);this._geometry.instances(t,this.instance);const s=this.instance.entityId(),r=new a,n=function(t,e,i){if(t.intersectBox(e,i))return 0;let s=1/0;const r=(e,r,n,o,a,h)=>{ki.set(e,r,n),Wi.set(o,a,h);const b=t.distanceSqToSegment(ki,Wi,ji);b<s&&(s=b,i.copy(ji))},n=e.max,o=e.min;return r(n.x,n.y,n.z,o.x,n.y,n.z),r(o.x,n.y,n.z,o.x,o.y,n.z),r(o.x,o.y,n.z,n.x,o.y,n.z),r(n.x,o.y,n.z,n.x,n.y,n.z),r(n.x,n.y,o.z,o.x,n.y,o.z),r(o.x,n.y,o.z,o.x,o.y,o.z),r(o.x,o.y,o.z,n.x,o.y,o.z),r(n.x,o.y,o.z,n.x,n.y,o.z),r(n.x,n.y,n.z,n.x,n.y,o.z),r(o.x,n.y,n.z,o.x,n.y,o.z),r(o.x,o.y,n.z,o.x,o.y,o.z),r(n.x,o.y,n.z,n.x,o.y,o.z),s}(e,i,r);if(0!==n&&!r.equals(e.origin))return{point:r,instanceId:t,entityId:s,snapGeometryType:0,pickPriority:this.entityState.getPickPriorityByHierarchy(s),distanceSqToRay:n,cameraDistanceSq:e.origin.distanceToSquared(r)}}transformClipPlanes(t,e){return t?t.map((t=>(new p).copy(t).applyMatrix4(e))):[]}}const ki=new a,Wi=new a,ji=new a;class Zi extends zi{constructor(t,e){super(t.entities().entitiesLength()),this.state.fill(2),this.hierarchyManager=e}getPickPriorityByHierarchy(t){return this.getValueByHierarchy(t,(t=>this.getPickPriority(t)),(t=>this.getPickPriorityByHierarchy(t)))}isSelectedByHierarchy(t){return!!this.getValueByHierarchy(t,(t=>this.isSelected(t)),(t=>this.isSelectedByHierarchy(t)))}isVisibleByHierarchy(t){return!this.getValueByHierarchy(t,(t=>!this.isVisible(t)),(t=>!this.isVisibleByHierarchy(t)))}isHoveredByHierarchy(t){return!!this.getValueByHierarchy(t,(t=>this.isHovered(t)),(t=>this.isHoveredByHierarchy(t)))}getCustomMaterialIdByHierarchy(t){let e=this.getCustomMaterialId(t);if(e)return e;const i=this.hierarchyManager.getDirectParents(t);if(void 0===i)return e;if("number"==typeof i)return this.getCustomMaterialIdByHierarchy(i);for(const t of i)if(e=this.getCustomMaterialIdByHierarchy(t),e)return e}getValueByHierarchy(t,e,i){let s=e(t);const r=this.hierarchyManager.getDirectParents(t);if(void 0===r)return s;if("number"==typeof r)return Math.max(s,i(r));for(const t of r)s=Math.max(s,i(t));return s}}var Xi,Qi=e.Technology.TrimBim.Fbs;class Yi{constructor(t){this.node=new Qi.HierarchyNode,this.entities=t.entities(),this.createCache()}createCache(){this.childToParents=new Array(this.entities.entitiesLength()),this.childToParentsTypes=new Array(this.entities.entitiesLength()),this.parentToChildren=new Array(this.entities.entitiesLength());for(let t=0,e=this.entities.hierarchiesLength();t<e;t++){this.entities.hierarchies(t,this.node);const e=this.childToParents[this.node.childElementId()],i=this.childToParentsTypes[this.node.childElementId()];void 0===e&&void 0===i?(this.childToParents[this.node.childElementId()]=this.node.parentElementId(),this.childToParentsTypes[this.node.childElementId()]=this.node.type()):"number"==typeof e&&"number"==typeof i?(this.childToParents[this.node.childElementId()]=[e,this.node.parentElementId()],this.childToParentsTypes[this.node.childElementId()]=[i,this.node.type()]):(e.push(this.node.parentElementId()),i.push(this.node.type()));const s=this.parentToChildren[this.node.parentElementId()];s?s.push(this.node.childElementId()):this.parentToChildren[this.node.parentElementId()]=[this.node.childElementId()]}}getDirectParents(t){return this.childToParents[t]}getDirectChildren(t){return this.parentToChildren[t]}getRoots(t){const e=new Set,i=new Set;for(let s=0,r=this.entities.hierarchiesLength();s<r;s++)this.entities.hierarchies(s,this.node),void 0!==t&&this.node.type()!==t||(e.add(this.node.parentElementId()),i.add(this.node.childElementId()));return Array.from(e).filter((t=>!i.has(t)))}getParents(t,e,i){const s=[];let r=new Set(t),n=new Set,o=!0;for(;o;){o=!1;for(const t of r){const i=this.childToParents[t];if(i){const r=this.childToParentsTypes[t];jt(i,((t,i)=>{const a=Array.isArray(r)?r[i]:r;void 0!==e&&a!==e||(s.push(t),n.add(t),o=!0)}))}}const t=r;if(r=n,n=t,n.clear(),!i)break}return s}getChildren(t,e){const i=new Set,s=t=>{const r=this.parentToChildren[t];r&&r.forEach((t=>{i.has(t)||(i.add(t),e&&s(t))}))};for(const e of t)s(e);return Array.from(i)}}class $i{constructor(t=new Float64Array(6),e=0){this.aabb=t,this.offset=e}get MinX(){return this.aabb[this.offset]}get MaxX(){return this.aabb[this.offset+1]}get MinY(){return this.aabb[this.offset+2]}get MaxY(){return this.aabb[this.offset+3]}get MinZ(){return this.aabb[this.offset+4]}get MaxZ(){return this.aabb[this.offset+5]}copy(t){this.aabb[this.offset]=t.MinX,this.aabb[this.offset+1]=t.MaxX,this.aabb[this.offset+2]=t.MinY,this.aabb[this.offset+3]=t.MaxY,this.aabb[this.offset+4]=t.MinZ,this.aabb[this.offset+5]=t.MaxZ}CreateMergedWith(t,e){this.aabb[this.offset]=Math.min(t.MinX,e.MinX),this.aabb[this.offset+1]=Math.max(t.MaxX,e.MaxX),this.aabb[this.offset+2]=Math.min(t.MinY,e.MinY),this.aabb[this.offset+3]=Math.max(t.MaxY,e.MaxY),this.aabb[this.offset+4]=Math.min(t.MinZ,e.MinZ),this.aabb[this.offset+5]=Math.max(t.MaxZ,e.MaxZ)}}class Ki{constructor(t,e){this.quantizedAabb=new $i(t,e)}IsDataNode(){return this.widthOrValue>=0}GetQuantizedAabb(){return this.quantizedAabb}GetBranchNodeWidth(){return-this.widthOrValue}GetDataNodeValue(){return this.widthOrValue}SetAsBranch(t,e){this.widthOrValue=-t,this.quantizedAabb.copy(e)}SetBranch(t){this.widthOrValue=-t}SetAsDataValue(t,e){this.widthOrValue=t,this.quantizedAabb.copy(e)}SetDataValue(t){this.widthOrValue=t}TestQuantizedBoxOverlap(t){return!(this.quantizedAabb.MinX>t.MaxX||this.quantizedAabb.MaxX<t.MinX||this.quantizedAabb.MinY>t.MaxY||this.quantizedAabb.MaxY<t.MinY||this.quantizedAabb.MinZ>t.MaxZ||this.quantizedAabb.MaxZ<t.MinZ)}}class Ji{constructor(t){this.boundingBoxManager=t,this.InPlaceSplitX=(()=>{const t=new a;return(e,i,s,r)=>{let n=i;for(let o=i;o<s;o++){this.boundingBoxManager.getTransformedBoundingBox(e[o]).getCenter(t).x>r&&(this.Swapnumberes(e,o,n),n++)}return n}})(),this.InPlaceSplitY=(()=>{const t=new a;return(e,i,s,r)=>{let n=i;for(let o=i;o<s;o++){this.boundingBoxManager.getTransformedBoundingBox(e[o]).getCenter(t).y>r&&(this.Swapnumberes(e,o,n),n++)}return n}})(),this.InPlaceSplitZ=(()=>{const t=new a;return(e,i,s,r)=>{let n=i;for(let o=i;o<s;o++){this.boundingBoxManager.getTransformedBoundingBox(e[o]).getCenter(t).z>r&&(this.Swapnumberes(e,o,n),n++)}return n}})(),this.CalculateMeanOfCenterPoints=(()=>{const t=new a;return(e,i,s,r)=>{let n=this.boundingBoxManager.getTransformedBoundingBox(e[i]);n.getCenter(r);for(let o=i+1;o<s;o++)n=this.boundingBoxManager.getTransformedBoundingBox(e[o]),r.add(n.getCenter(t));const o=s-i;return r.divideScalar(o)}})(),this.Quantize=(()=>{const t=new a,e=new a;return(i,s)=>{t.subVectors(i.min,this.boundingBoxManager.modelBoundingBox.min),e.subVectors(i.max,this.boundingBoxManager.modelBoundingBox.min),s.aabb[s.offset]=t.x,s.aabb[s.offset+1]=e.x,s.aabb[s.offset+2]=t.y,s.aabb[s.offset+3]=e.y,s.aabb[s.offset+4]=t.z,s.aabb[s.offset+5]=e.z}})(),this.BuildSubTree=(()=>(t,e,i,s,r,n)=>{if(r-s==1){const t=this.boundingBoxManager.getTransformedBoundingBox(i[s]);return this.Quantize(t,n),this.CreateDataNode(e,n,i[s]),1}if(r-s==2){const t=this.quantizedAabbTreeNodes[e+1].GetQuantizedAabb();let r=this.boundingBoxManager.getTransformedBoundingBox(i[s]);this.Quantize(r,t),this.setAsDataNode(e+1,i[s]);const o=this.quantizedAabbTreeNodes[e+2].GetQuantizedAabb();return r=this.boundingBoxManager.getTransformedBoundingBox(i[s+1]),this.Quantize(r,o),this.setAsDataNode(e+2,i[s+1]),n.CreateMergedWith(t,o),this.CreateBranchNode(e,n,3),3}const o=this.SplitByOneAxis(i,s,r),a=this.BuildSubTree(t+1,e+1,i,s,o,this.leftBoundingBoxes[t]),h=this.BuildSubTree(t+1,e+a+1,i,o,r,this.rightBoundingBoxes[t]);n.CreateMergedWith(this.leftBoundingBoxes[t],this.rightBoundingBoxes[t]);const b=a+h+1;return this.CreateBranchNode(e,n,b),b})(),this.SplitByOneAxis=(()=>{const t=new a,e=new a,i=new a;return(s,r,n)=>{this.CalculateMeanOfCenterPoints(s,r,n,i),t.set(0,0,0);for(let o=r;o<n;o++){this.boundingBoxManager.getTransformedBoundingBox(s[o]).getCenter(e).sub(i);const r=e.multiply(e);t.add(r)}let o;o=t.x>t.y?t.x>t.z?this.InPlaceSplitX(s,r,n,i.x):this.InPlaceSplitZ(s,r,n,i.z):t.y>t.z?this.InPlaceSplitY(s,r,n,i.y):this.InPlaceSplitZ(s,r,n,i.z);const a=(n-r)/3;return(o<=r+a||o>=n-1-a)&&(o=(r+n)/2),Math.round(o)}})();const e=new Uint32Array(t.length);for(let t=0;t<e.length;t++)e[t]=t;const i=2*e.length-1;this.quantizedAabbTreeNodes=[];const s=new Float64Array(6*i);for(let t=0;t<i;t++)this.quantizedAabbTreeNodes.push(new Ki(s,6*t));const r=new $i;this.leftBoundingBoxes=[],this.rightBoundingBoxes=[];for(let t=0;t<32;t++)this.leftBoundingBoxes.push(new $i),this.rightBoundingBoxes.push(new $i);this.BuildSubTree(0,0,e,0,e.length,r)}DataNodeCount(){return(this.quantizedAabbTreeNodes.length+1)/2}BoxQuery(t){const e=[],i=new $i;this.Quantize(t,i);let s=0;for(;s<this.quantizedAabbTreeNodes.length;){const t=this.TestQuantizedBoxOverlap(s,i),r=this.IsDataNode(s);r&&t?(e.push(this.GetNodeDataValue(s)),s++):r||t?s++:s+=this.GetBranchNodeWidth(s)}return e}QueryRay(t,e){const i=e&&e.length>0?t=>Ri.planesIntersectBox(e,t):()=>!0;return this.Query((e=>t.intersectsBox(e)),(()=>!1),i)}QueryFrustum(t,e,i){const s=[...t.planes];e&&s.push(...e);return this.Query((t=>Ri.planesIntersectBox(s,t)),(t=>Ri.planesContainBox(s,t)),(()=>!0),i)}Query(t,e,i,s=!1){const r=[];let n=0;const o=this.quantizedAabbTreeNodes.length;for(;n<o;){const o=this.GetAabb(n),a=this.IsDataNode(n),h=e(o),b=h||t(o);if(a&&b&&i(o)&&(s?h&&r.push(this.GetNodeDataValue(n)):r.push(this.GetNodeDataValue(n))),b||a){if(n++,h&&!a){const t=n+this.GetBranchNodeWidth(n);for(;n<t;n++)this.IsDataNode(n)&&i(o)&&(s?h&&r.push(this.GetNodeDataValue(n)):r.push(this.GetNodeDataValue(n)))}}else n+=this.GetBranchNodeWidth(n)}return r}Swapnumberes(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}TestQuantizedBoxOverlap(t,e){return this.quantizedAabbTreeNodes[t].TestQuantizedBoxOverlap(e)}IsDataNode(t){return this.quantizedAabbTreeNodes[t].IsDataNode()}GetAabb(t){const e=this.quantizedAabbTreeNodes[t].GetQuantizedAabb();return this.Unquantize(e)}CreateDataNode(t,e,i){this.quantizedAabbTreeNodes[t].SetAsDataValue(i,e)}setAsDataNode(t,e){this.quantizedAabbTreeNodes[t].SetDataValue(e)}CreateBranchNode(t,e,i){this.quantizedAabbTreeNodes[t].SetAsBranch(i,e)}GetNodeDataValue(t){return this.quantizedAabbTreeNodes[t].GetDataNodeValue()}GetBranchNodeWidth(t){return this.quantizedAabbTreeNodes[t].GetBranchNodeWidth()}Unquantize(t){const e=this.boundingBoxManager.modelBoundingBox,i=new a(t.MinX+e.min.x,t.MinY+e.min.y,t.MinZ+e.min.z),s=new a(t.MaxX+e.min.x,t.MaxY+e.min.y,t.MaxZ+e.min.z);return new I(i,s)}}class ts extends Ni{constructor(t){super(t),this.searchTree=new Ji(this)}calculateTransformedBoundingBox(t){if(this.searchTree)throw new Error("Unable to recalculate bounding box when tree has already been built");super.calculateTransformedBoundingBox(t)}QueryRay(t,e){return this.searchTree.QueryRay(t,e)}QueryFrustum(t,e,i=!1){return this.searchTree.QueryFrustum(t,e,i)}}class es{constructor(t,e){this.startRange={start:0,count:t,prev:null,next:null,value:e}}getRange(t){let e=this.startRange;for(;;){if(null===e||e.start<=t&&t<e.start+e.count)return e;e=e.next}}createRangeNode(t,e,i){if(es.rangeNodeCache.length){const s=es.rangeNodeCache.pop();return s.start=t,s.count=e,s.value=i,s}return{start:t,count:e,prev:null,next:null,value:i}}disposeRangeNode(t){t&&(t.next=null,t.prev=null,es.rangeNodeCache.push(t))}set(t,e){const i=this.getRange(t);if(i.value===e)return;const s=this.createRangeNode(i.start,t-i.start,i.value),r=this.createRangeNode(t,1,e),n=this.createRangeNode(t+1,i.count-s.count-1,i.value);if(i.prev?(i.prev.next=s,s.prev=i.prev):this.startRange=s,i.next&&(i.next.prev=n,n.next=i.next),this.disposeRangeNode(i),s.next=r,r.prev=s,r.next=n,n.prev=r,s.count||(s.prev?s.prev.next=r:this.startRange=r,r.prev=s.prev,this.disposeRangeNode(s)),n.count||(n.next&&(n.next.prev=r),r.next=n.next,this.disposeRangeNode(n)),r.prev&&r.prev.value===r.value){r.count=r.prev.count+r.count,r.start=r.prev.start;const t=r.prev.prev;this.disposeRangeNode(r.prev),r.prev=t,r.prev?r.prev.next=r:this.startRange=r}if(r.next&&r.next.value===r.value){r.count=r.next.count+r.count;const t=r.next.next;this.disposeRangeNode(r.next),r.next=t,r.next&&(r.next.prev=r)}}collect(t){const e=[];let i=this.startRange;for(;null!==i;)t&&!t(i.value)||e.push(i),i=i.next;return e}all(t){return null===this.startRange.next&&this.startRange.value===t}}function is(t,e){const i=t.start+t.count===e.length,s=e[t.start];return{start:s,count:i?1/0:e[t.start+t.count]-s}}function ss(t,e,i){return t.collect(i).map((t=>is(t,e)))}es.rangeNodeCache=[],function(t){t[t.Full=0]="Full",t[t.Line=1]="Line",t[t.Hidden=2]="Hidden"}(Xi||(Xi={}));class rs extends Di{constructor(t,e,i,s,r,n,o,h){super(t,e,i,s,r,n,o,h),this.buildLineLOD=(()=>{const t=new a,e=new a,i=new a,s=new a,r={objectType:1,positionsLength:6,positions:new Float32Array(6)};return n=>(t.copy(n.min),e.copy(n.max),i.addVectors(t,e).multiplyScalar(.5),n.getSize(s),s.x>=s.y&&s.x>=s.z?(t.set(t.x,i.y,i.z),e.set(e.x,i.y,i.z)):s.y>=s.z?(t.set(i.x,t.y,i.z),e.set(i.x,e.y,i.z)):(t.set(i.x,i.y,t.z),e.set(i.x,i.y,e.z)),t.toArray(r.positions,0),e.toArray(r.positions,3),r)})(),this.instanceIdToLODCapability=new Uint8Array(this.instancesLength),this.instanceIdToLODLevel=new Uint8Array(this.instancesLength);for(let t=0;t<this.instancesLength;t++)this.geometry.instances(t,this.instance),this.geometry.definitions(this.instance.definitionId(),this.definition),this.instanceIdToLODCapability[t]=+this.getIsMesh(this.definition.type()),this.instanceIdToLODLevel[t]=Xi.Hidden}getInstanceGeometry(t,e){if(e===Xi.Full)return super.getInstanceGeometry(t,Xi.Full);if(e===Xi.Line){this.geometry.instances(t,this.instance),this.geometry.definitions(this.instance.definitionId(),this.definition);const e=this.getEmptyInstanceGeometry(t,this.instance,this.definition);return e.geometries=this.buildLineLOD(e.boundingBox),e}}updateInstanceGeometry(t){const e=this.getLodLevel(t),i=this.instanceIdToLODLevel[t];if(e===i)return void(e!==Xi.Hidden&&this.updateInstanceState(t,e));i!==Xi.Hidden&&this.hideInstanceGeometry(t,i);const s=e!==Xi.Hidden;s&&this.showInstanceGeometry(t,e),this.instanceState.setVisible(t,s),this.instanceIdToLODLevel[t]=e}updateInstanceState(t,e){const i=this.instanceIdToLODLevel[t];super.updateInstanceState(t,e,e!==i)}getLodLevel(t){const e=this.boundingBoxManager.getTransformedBoundingBox(t);if(!this.isVisibleByClipPlanes(e))return Xi.Hidden;const i=this.getLodLevelByCameraDistance(t,e);return i!==Xi.Hidden&&this.isVisibleByState(t)?i:Xi.Hidden}getLodLevelByCameraDistance(t,e){const i=this.camera.trimbimSettings.lodSetting,s=this.boundingBoxManager.getSize(t);if(0===s)return Xi.Full;const r=e.distanceToPoint(this.camera.position),n=this.getApproxPixelSize(s,r);if(this.camera.vr)return s<2&&n<40||s>=2&&n<2?Xi.Hidden:Xi.Full;if(s<2&&n<5*i)return Xi.Hidden;if(s<2&&n<15*i&&!this.instanceIdToLODCapability[t])return Xi.Hidden;if(s>=2&&n<2*i)return Xi.Hidden;if(!this.instanceIdToLODCapability[t])return Xi.Full;if(s<2&&n<40*i)return Xi.Line;if(s>=2&&n<5*i)return Xi.Line;const o=this.boundingBoxManager.getWidth(t);return this.getApproxPixelSize(o,r)<Math.max(4*i,4)?Xi.Line:Xi.Full}}let ns=0;class os extends rs{constructor(t,e,i,s,r,n,o,h){super(t,e,i,s,r,n,o,h),this.batches=new Map,this.updatedBatches=new Set,this.batchHashToBucketSize=new Map,this.vec3=new a,this.matrix=new tt,this.getBatchHash=(()=>{const t=new a;return(e,i,s,r)=>{const n=this.boundingBoxManager.getTransformedBoundingBox(e);n.getCenter(t);const o=r===Xi.Full?this.gridSize:10*this.gridSize,a=os.getSizeCategory(n);return this.checksum.clear().add(s.objectType).add(i).add(t.x-t.x%o).add(t.y-t.y%o).add(t.z-t.z%o).add(a).add(r).add(s.textureId),this.checksum.get()}})(),this.assignInstanceToLODBatch=(()=>{const t={objectType:1,positionsLength:6};return(e,i)=>{const s=this.getBatchHash(e,i,t,Xi.Line);let r=this.batches.get(s);return r||(r=this.createBatch(t.objectType,i,Xi.Line),this.batches.set(s,r)),os.addToBatch(r,t,e,0),s}})(),this.gridSize=this.calculateGridSize(),this.instanceIdToBatchIds=new Array(this.instancesLength),this.instanceIdToLODBatchId=new Array(this.instancesLength)}async createGeometryPrototypes(){await super.createGeometryPrototypes(),await this.createBatches()}async updateLoop(t){await super.updateLoop(t),this.sendUpdatedBatchStates()}showInstanceGeometry(t,e){this.updateInstanceState(t,e)}hideInstanceGeometry(t,e){const i=this.getBatchIds(t,e);void 0!==i&&jt(i,(e=>this.hideFromBatch(e,t)))}getBatchIds(t,e){return e===Xi.Full?this.instanceIdToBatchIds[t]:this.instanceIdToLODBatchId[t]}setInstanceState(t,e,i,s,r,n){this.instanceState.setVisible(t,!0),this.instanceState.setHovered(t,s),this.instanceState.setSelected(t,i),this.instanceState.setCustomMaterialId(t,r);const o=s,a=r,h=0===r,b=i,c=this.getBatchIds(t,n);void 0!==c&&jt(c,(e=>{this.updateBatch(e,t,a,h,o,b)}))}updateBatch(t,e,i,s,r,n){const o=this.batches.get(t),a=o.instanceIdToIndex.get(e);o.visibilityRanges.set(a,s),o.hoverRanges.set(a,r),o.selectionRanges.set(a,n),o.materialRanges.set(a,i),o.inMainThread?this.updatedBatches.add(t):(this.buildBatch(o),this.addBatch(t,o),o.inMainThread=!0,os.freeBatch(o))}hideFromBatch(t,e){const i=this.batches.get(t),s=i.instanceIdToIndex.get(e);i.visibilityRanges.set(s,!1),i.hoverRanges.set(s,!1),i.selectionRanges.set(s,!1),i.materialRanges.set(s,0),i.visibilityRanges.all(!1)&&i.materialRanges.all(0)&&ns>this.camera.trimbimSettings.gpuMemoryUsage?(this.removeGeometry(t),i.inMainThread=!1,ns-=i.memSize):this.updatedBatches.add(t)}calculateGridSize(){const t=this.geometry.instancesLength(),e=t<1e3?2:t<1e4?4:t<1e5?8:16,i=this.boundingBoxManager.modelBoundingBox.getSize(this.vec3);return Math.ceil(Math.max(1,i.x,i.y,i.z)/e)}sendUpdatedBatchStates(){for(const t of this.updatedBatches){const e=this.batches.get(t),i=os.getState(e);this.sendGeometryState(t,e.objectType,e.materialId,e.textureId,i)}this.updatedBatches.clear()}generateBatchId(t,e,i){i.positionsLength/3>Wt&&console.warn(`Geometry of instance ${t} does not fit in 16-bit index (position size ${i.positionsLength}), and will be truncated.`);const s=this.getBatchHash(t,e,i,Xi.Full),r=this.batchHashToBucketSize.get(s)||1;let n=s+r-1;const o=this.batches.get(n);return(o?o.positionsLength:0)+i.positionsLength>Wt&&(n++,this.batchHashToBucketSize.set(s,r+1)),n}createBatch(t,e,i){return{lodLevel:i,objectType:t,materialId:e,indicesLength:0,positionsLength:0,normalsLength:0,uvsLength:0,pointUvsLength:0,pointSizesLength:0,inMainThread:!1,boundingBox:new I,instancesLength:0,instanceIdToIndex:new Map,geometryIndices:[],indexOffsets:[],vertexOffsets:[]}}static addToBatch(t,e,i,s){t.instanceIdToIndex.set(i,t.instancesLength),t.instancesLength++,t.geometryIndices.push(s),t.indexOffsets.push(t.indicesLength||0),t.vertexOffsets.push((t.positionsLength||0)/3),e.indicesLength&&(t.indicesLength+=e.indicesLength),e.positionsLength&&(t.positionsLength+=e.positionsLength),e.normalsLength&&(t.normalsLength+=e.normalsLength),e.uvsLength&&(t.uvsLength+=e.uvsLength),e.pointUvsLength&&(t.pointUvsLength+=e.pointUvsLength),e.pointSizesLength&&(t.pointSizesLength+=e.pointSizesLength),void 0!==e.materialId&&(t.materialId=e.materialId),void 0!==e.textureId&&(t.textureId=e.textureId)}assignInstanceToBatches(t,e,i){let s;return jt(i,((i,r)=>{const n=this.generateBatchId(t,e,i);void 0===s?s=n:"number"==typeof s?s!==n&&(s=[s,n]):s.includes(n)||s.push(n);let o=this.batches.get(n);o||(o=this.createBatch(i.objectType,e,Xi.Full),this.batches.set(n,o)),os.addToBatch(o,i,t,r)})),s}createBatches(){for(let t=0;t<this.instancesLength;++t){this.geometry.instances(t,this.instance),this.geometry.definitions(this.instance.definitionId(),this.definition);const e=this.materialIdMap[this.instance.surfaceMaterialId()],i=this.geometryBuilders.get(this.definition.type());if(!i)continue;const s=i.getGeometries(this.definition.index(),!1);this.instanceIdToBatchIds[t]=this.assignInstanceToBatches(t,e,s),0===i.snapGeometryType&&(this.instanceIdToLODBatchId[t]=this.assignInstanceToLODBatch(t,e))}for(const t of this.batches.values())t.visibilityRanges=new es(t.instancesLength,!1),t.hoverRanges=new es(t.instancesLength,!1),t.selectionRanges=new es(t.instancesLength,!1),t.materialRanges=new es(t.instancesLength,0)}buildBatch(t){t.positions||os.allocateBatch(t);const e=!t.position;for(const[i,s]of t.instanceIdToIndex){const r=this.getInstanceGeometry(i,t.lodLevel);r&&r.geometries&&(this.loadInstanceIntoBatch(t,r,t.geometryIndices[s]),e&&this.expandBoundingBox(t,i))}}loadInstanceIntoBatch(t,e,i){const s=t.instanceIdToIndex.get(e.instanceId),r=Array.isArray(e.geometries)?e.geometries[i]:e.geometries;t.position||(t.position=(new a).fromArray(r.positions).applyMatrix4(e.transform));const n=this.vec3.copy(t.position).negate();if(this.matrix.identity().setPosition(n).multiply(e.transform),this.transformPositions(this.matrix,r.positions,t.positions,3*t.vertexOffsets[s],r.positions.length),t.normals&&this.transformNormals(this.matrix,r.normals,t.normals,3*t.vertexOffsets[s],r.normals.length),t.indices){const e=t.indexOffsets[s],i=t.vertexOffsets[s];for(let s=0;s<r.indicesLength;s++)t.indices[s+e]=r.indices[s]+i}t.uvs&&t.uvs.set(r.uvs,2*t.vertexOffsets[s]),t.pointUvs&&t.pointUvs.set(r.pointUvs,4*t.vertexOffsets[s]),t.pointSizes&&t.pointSizes.set(r.pointSizes,4*t.vertexOffsets[s]),0===r.objectType&&t.ids.fill(this.getEntityId(e.instanceId),t.vertexOffsets[s],t.vertexOffsets[s]+r.positionsLength/3)}expandBoundingBox(t,e){const i=this.boundingBoxManager.getTransformedBoundingBox(e),s=this.vec3.copy(t.position).negate();i.translate(s),t.boundingBox.union(i)}transformPositions(t,e,i,s=0,r){for(let n=0;n<r;n+=3)this.vec3.fromArray(e,n),this.vec3.applyMatrix4(t),this.vec3.toArray(i,s+n)}transformNormals(t,e,i,s=0,r){for(let n=0;n<r;n+=3)this.vec3.fromArray(e,n),this.vec3.transformDirection(t),this.vec3.multiplyScalar(Xt),this.vec3.toArray(i,s+n)}addBatch(t,e){const i=os.getState(e);this.matrix.identity().setPosition(e.position),this.addGeometry(t,e,e.ids,e.materialId,this.matrix,e.boundingBox,i),ns+=e.memSize}static getSizeCategory(t){const e=t.min.distanceToSquared(t.max);return e<.25?0:e<4?1:2}static allocateBatch(t){t.positions=new Float32Array(t.positionsLength),t.memSize=t.positions.byteLength,t.indicesLength>0&&(t.indices=new Uint16Array(t.indicesLength),t.memSize+=t.indices.byteLength),t.normalsLength>0&&(t.normals=new Int16Array(t.normalsLength),t.memSize+=t.normals.byteLength),t.uvsLength>0&&(t.uvs=new Float32Array(t.uvsLength),t.memSize+=t.uvs.byteLength),t.pointUvsLength>0&&(t.pointUvs=new Float32Array(t.pointUvsLength),t.memSize+=t.pointUvs.byteLength),t.pointSizesLength>0&&(t.pointSizes=new Float32Array(t.pointSizesLength),t.memSize+=t.pointSizes.byteLength),0===t.objectType&&(t.ids=new Float32Array(t.positionsLength/3),t.memSize+=t.ids.byteLength)}static freeBatch(t){delete t.indices,delete t.positions,delete t.normals,delete t.uvs,delete t.pointUvs,delete t.pointSizes,delete t.ids}}os.getState=t=>{const e=t.indicesLength?t.indexOffsets:t.vertexOffsets;return{visible:t.visibilityRanges.all(!1)?void 0:ss(t.visibilityRanges,e,(t=>t)),hovered:t.hoverRanges.all(!1)?void 0:ss(t.hoverRanges,e,(t=>t)),selected:t.selectionRanges.all(!1)?void 0:ss(t.selectionRanges,e,(t=>t)),customMaterialIds:t.materialRanges.all(0)?void 0:function(t,e,i){const s=t.collect(i),r=new Map;for(const t of s){let i=r.get(t.value);i||(i=[],r.set(t.value,i)),i.push(is(t,e))}return r}(t.materialRanges,e,(t=>0!==t))}};const as=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","_","$"];class hs{constructor({data:t,ifcGuid:e,msGuid:i}){this.type="UUID",t?this.data=t:e?this.setIfcGuid(e):i?this.setMsGuid(i):this.data=new Uint8Array(16)}fromJSON({type:t,data:e}){if("UUID"!==t)throw TypeError("Incorrect type, type needs to be UUID");this.data=new Uint8Array(JSON.parse("["+e+"]"))}equals(t){for(let e=0;e<16;e++)if(this.data[e]!==t.data[e])return!1;return!0}toString(){return this.msGuid}get msGuid(){const t=this.data.byteOffset,e=new DataView(this.data.buffer,t,16);return`${e.getUint32(0,!0).toString(16).padStart(8,"0")}-${e.getUint16(4,!0).toString(16).padStart(4,"0")}-${e.getUint16(6,!0).toString(16).padStart(4,"0")}-${e.getUint8(8).toString(16).padStart(2,"0")}${e.getUint8(9).toString(16).padStart(2,"0")}-${e.getUint8(10).toString(16).padStart(2,"0")}${e.getUint8(11).toString(16).padStart(2,"0")}${e.getUint8(12).toString(16).padStart(2,"0")}${e.getUint8(13).toString(16).padStart(2,"0")}${e.getUint8(14).toString(16).padStart(2,"0")}${e.getUint8(15).toString(16).padStart(2,"0")}`}setMsGuid(t){this.data=this.data||new Uint8Array(16);const e=this.data.byteOffset,i=new DataView(this.data.buffer,e,16),s=(e,i)=>parseInt(t.slice(e,e+i),16);i.setUint32(0,s(0,8),!0),i.setUint16(4,s(9,4),!0),i.setUint16(6,s(14,4),!0),i.setUint8(8,s(19,2)),i.setUint8(9,s(21,2)),i.setUint8(10,s(24,2)),i.setUint8(11,s(26,2)),i.setUint8(12,s(28,2)),i.setUint8(13,s(30,2)),i.setUint8(14,s(32,2)),i.setUint8(15,s(34,2))}get ifcGuid(){const t=new Uint8Array(24),e=this.data;t[0]=e[15],t[1]=e[14],t[2]=e[13],t[3]=0,t[4]=e[12],t[5]=e[11],t[6]=e[10],t[7]=0,t[8]=e[9],t[9]=e[8],t[10]=e[6],t[11]=0,t[12]=e[7],t[13]=e[4],t[14]=e[5],t[15]=0,t[16]=e[0],t[17]=e[1],t[18]=e[2],t[19]=0,t[20]=e[3],t[21]=0,t[22]=0,t[23]=0;const i=new Uint32Array(t.buffer);return this.toBase64(i[5],8)+this.toBase64(i[4],24)+this.toBase64(i[3],24)+this.toBase64(i[2],24)+this.toBase64(i[1],24)+this.toBase64(i[0],24)}setIfcGuid(t){this.data=new Uint8Array(16);const e=this.fromBase64(t[0],6)+this.fromBase64(t[1],0),i=this.fromBase64(t[2],18)+this.fromBase64(t[3],12)+this.fromBase64(t[4],6)+this.fromBase64(t[5],0),s=this.fromBase64(t[6],18)+this.fromBase64(t[7],12)+this.fromBase64(t[8],6)+this.fromBase64(t[9],0),r=this.fromBase64(t[10],18)+this.fromBase64(t[11],12)+this.fromBase64(t[12],6)+this.fromBase64(t[13],0),n=this.fromBase64(t[14],18)+this.fromBase64(t[15],12)+this.fromBase64(t[16],6)+this.fromBase64(t[17],0),o=this.fromBase64(t[18],18)+this.fromBase64(t[19],12)+this.fromBase64(t[20],6)+this.fromBase64(t[21],0),a=this.getBytes(o),h=this.getBytes(n),b=this.getBytes(r),c=this.getBytes(s),l=this.getBytes(i),d=this.getBytes(e);this.data[15]=a[0],this.data[14]=a[1],this.data[13]=a[2],this.data[12]=h[0],this.data[11]=h[1],this.data[10]=h[2],this.data[9]=b[0],this.data[8]=b[1],this.data[6]=b[2],this.data[7]=c[0],this.data[4]=c[1],this.data[5]=c[2],this.data[0]=l[0],this.data[1]=l[1],this.data[2]=l[2],this.data[3]=d[0]}setFromBufferData(t,e){this.data=new Uint8Array(t,e,16)}toBase64(t,e){let i="";if(e>0){i+=as[63&t],i=this.toBase64(t>>6,e-6)+i}return i}fromBase64(t,e){let i=0;for(;i<64&&as[i]!=t;)i++;return i<<e}getBytes(t){const e=new ArrayBuffer(8);return new Int32Array(e)[0]=t,new Uint8Array(e)}}var bs=e.Technology.TrimBim.Fbs;class cs{constructor(t,e,i){this.boundingBoxManager=e,this.hierarchyManager=i,this.getIdentifier=(()=>{const t=new bs.Guid;return(e,i)=>{switch(e){case Jt.Guid:const s=this.modelEntities.guidIdentifiers(i.identifierIndex(),t);return ls(s);case Jt.String:return this.modelEntities.stringIdentifiers(i.identifierIndex());case Jt.SpatialHash:return[this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).x(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).y(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).z(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d0(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d1(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d2(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d3(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d4(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d5(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d6(),this.modelEntities.spatialHashIdentifiers(i.identifierIndex()).d7()];case Jt.DwgHandle:return[this.modelEntities.dwgHandleIdentifiers(i.identifierIndex()).high,this.modelEntities.dwgHandleIdentifiers(i.identifierIndex()).low];case Jt.None:return;default:return void console.warn("Unknown identifier",e)}}})(),this.modelEntities=t.entities(),this.properties=t.properties(),this.geometry=t.geometry()}findByClass(t){const e=new bs.Entity,i=[];for(let s=0,r=this.modelEntities.entitiesLength();s<r;s++)this.modelEntities.entities(s,e),this.modelEntities.entityClasses(e.classIndex())===t&&i.push(s);return i}findByProperty(t,e){const i=[];t:for(let s=0,r=this.modelEntities.entitiesLength();s<r;s++){const r=this.getPropertySetIdsFromEntity(s);for(const n of r){const r=this.getPropertySet(n);for(const n of r.properties){const o=`${r.name}.${n.name}`,a=void 0===t||"string"==typeof t&&t===o||t instanceof RegExp&&o.match(t),h=void 0===e||e instanceof RegExp&&"string"==typeof n.value&&n.value.match(e)||e===n.value;if(a&&h){i.push(s);continue t}}}}return i}getProperties(t){const e=this.getPropertySetIdsFromEntity(t),i=[];for(const t of e)i.push(this.getPropertySet(t));return i}aggregateProperties(t,e){for(const i of t){const t=this.getProperties(i);for(const i of e)this.aggregate(i,t)}}getProperty(t,e,i){const s=t.find((t=>t.name===e));return s?s.properties.find((t=>t.name===i)):void 0}aggregate(t,e){if(1===t.operator){if(null===t.value)return;const i=this.getProperty(e,t.propertySetName,t.propertyName);i?void 0===t.value?(t.value=i.value,t.type=i.type):t.value!==i.value&&(t.value=null):(t.value=null,t.type=void 0)}else if(0===t.operator){const i=this.getProperty(e,t.propertySetName,t.propertyName);i&&(void 0===t.value&&(t.value=0,t.type=i.type),t.value+="string"==typeof i.value?Number.parseFloat(i.value):i.value)}}findByGeometryType(t){const e=new bs.GeometryInstance,i=new bs.GeometryDefinition,s=[];t:for(let r=0,n=this.modelEntities.entitiesLength();r<n;r++){const n=this.boundingBoxManager.getEntityInstanceIds(r);if(n)for(const o of n)if(this.geometry.instances(o,e),this.geometry.definitions(e.definitionId(),i),i.type()===t){s.push(r);continue t}}return s}findEntitiesByLayer(t){const e=new bs.GeometryInstance,i=[];t:for(let s=0,r=this.modelEntities.entitiesLength();s<r;s++){const r=this.boundingBoxManager.getEntityInstanceIds(s);if(r)for(const n of r)if(this.geometry.instances(n,e),e.layerId()===t){i.push(s);continue t}}return i}getAABBFromIds(t,e){const i=t=>{const s=this.boundingBoxManager.getEntityInstanceIds(t);s&&s.forEach((t=>{e.union(this.boundingBoxManager.getTransformedBoundingBox(t))}));const r=this.hierarchyManager.getDirectChildren(t);if(r)for(const t of r)i(t)};t.forEach(i)}getParents(t,e){const i=new bs.HierarchyNode;let s=new Map;t.forEach(((t,e)=>s.set(t,e)));let r=new Map;const n=new Set;for(;s.size>0;){for(let t=0,o=this.modelEntities.hierarchiesLength();t<o;t++){if(this.modelEntities.hierarchies(t,i),i.type()!==e)continue;const o=s.get(i.childElementId());if(void 0!==o){const t=i.parentElementId();n.delete(o),n.add(t),r.set(t,o)}}s.clear();const t=r;r=s,s=t}return Array.from(n)}getEntity(t){if(t<0||t>this.modelEntities.entitiesLength())return;const e=new te,i=this.modelEntities.entities(t),s=i.type();return e.id=t,e.identifierType=s,e.identifier=this.getIdentifier(e.identifierType,i),e.class=this.modelEntities.entityClasses(i.classIndex()),e}getProductId(t){return this.loadProductIndex()[t]}loadProductIndex(){if(void 0===this.productIndex){const t=this.modelEntities.entitiesLength();this.productIndex=new Array(t);const e=new bs.ProductBinding;for(let t=0,i=this.properties.productBindingsLength();t<i;t++)this.properties.productBindings(t,e),this.productIndex[e.entityId()]=e.productId()}return this.productIndex}getProduct(t){if(void 0===t)return;const e=this.properties.products(t);return{name:this.properties.names(e.name()),description:this.properties.descriptions(e.description()),objectType:this.properties.objectTypes(e.objectType())}}getPropertySetIdsFromEntity(t){return this.loadPropertyIndex()[t]}loadPropertyIndex(){if(void 0===this.propertyIndex){const t=this.modelEntities.entitiesLength(),e=new Map,i=new bs.PropertySet;for(let t=0,s=this.properties.propertySetBindingsLength();t<s;t++){this.properties.propertySetBindings(t,i);for(let s=0,r=i.entitiesLength();s<r;s++){const r=i.entities(s);e.has(r)?e.get(r).add(t):e.set(r,new Set([t]))}}this.propertyIndex=new Array(t);for(let i=0;i<t;i++)e.has(i)?this.propertyIndex[i]=e.get(i):this.propertyIndex[i]=new Set}return this.propertyIndex}getPropertySet(t){if(void 0===t)throw new RangeError("Must provide propSetId");const e=this.properties.propertySetBindings(t),i=this.properties.definitions(e.definition()),s=this.getSinglePropertyDefinitions(i,e);return{name:this.properties.propertySetNames(i.name()),properties:s}}getSinglePropertyDefinitions(t,e){const i=new Array(t.propertiesLength());for(let s=0,r=t.propertiesLength();s<r;s++){const r=t.properties(s),n=this.properties.propertyNames(r.name()),o=this.getValue(r.type(),e.values(s)),a=r.type();i[s]={name:n,value:o,type:a}}return i}getValue(t,e){switch(t){case $t.LengthMeasure:return this.properties.lengthMeasures(e);case $t.AreaMeasure:return this.properties.areaMeasures(e);case $t.VolumeMeasure:return this.properties.volumeMeasures(e);case $t.MassMeasure:return this.properties.massMeasures(e);case $t.AngleMeasure:return this.properties.angleMeasures(e);case $t.StringValue:return this.properties.stringValues(e);case $t.IntValue:return e;case $t.DoubleValue:return this.properties.doubleValues(e);case $t.DateTime:return this.properties.dateTimeValues(e);case $t.Logical:case $t.Boolean:return e}}getPropertySetNames(){const t=new Array(this.properties.propertySetNamesLength());for(let e=0;e<t.length;e++)t[e]=this.properties.propertySetNames(e);return t}getPropertyDefinitions(t){if(void 0===t)throw new Error("Must provide propSetName");const e=this.getDefinitionIdsFromNames(t);if(0===e.size)throw new Error(`No property set name found matching ${t} `);const i=new Map;for(const t of e.keys()){const e=this.properties.definitions(t);for(let t=0,s=e.propertiesLength();t<s;t++){const s=this.properties.propertyNames(e.properties(t).name());i.has(s)||i.set(s,{name:s,type:e.properties(t).type()})}}return Array.from(i.values())}getDefinitionIdsFromNames(t,e){const i=this.getSetNameId(t),s=e?this.getPropertyNameIds(e):void 0,r=this.properties.definitionsLength(),n=new Map;for(let t=0;t<r;t++){const e=this.properties.definitions(t);if(i===e.name())if(void 0!==s){const i=e.propertiesLength();for(let r=0;r<i;r++){const i=e.properties(r);s.has(i.name())&&n.set(t,r)}}else n.set(t,void 0)}return n}getSetNameId(t){const e=this.properties.propertySetNamesLength();for(let i=0;i<e;i++)if(this.properties.propertySetNames(i)===t)return i}getPropertyNameIds(t){const e=this.properties.propertyNamesLength(),i=new Set;for(let s=0;s<e;s++)t===this.properties.propertyNames(s)&&i.add(s);return i}getPropertyValues(t){if(void 0===t)throw new Error("Must provide propertyName");const e=this.getPropertyNameIds(t);if(void 0===e)throw new Error(`PropertyName ${t} does not exist`);const i=new Set,s=this.properties.propertySetBindingsLength();for(let t=0;t<s;t++){const s=this.properties.propertySetBindings(t),r=this.properties.definitions(s.definition()),n=r.propertiesLength();for(let t=0;t<n;t++){const n=r.properties(t).name();if(e.has(n)){const e=r.properties(t).type();i.add(this.getValue(e,s.values(t)))}}}return[...i]}getEntityIdsFromGuids(t){const e=new Map,i=new hs({});let s=0;for(const r of t)22===r.length?e.set(r,s):36===r.length?(i.setMsGuid(r),e.set(i.ifcGuid,s)):console.warn("Only IFC GUID and MS GUID is currently supported"),s++;const r=new bs.Guid,n=new bs.Entity,o=new Array(t.length);let a=0;for(let s=0,h=this.modelEntities.entitiesLength();s<h;s++)if(this.modelEntities.entities(s,n),n.type()===bs.IdentifierType.Guid){this.modelEntities.guidIdentifiers(n.identifierIndex(),r),i.setFromBufferData(r.bb.bytes().buffer,r.bb_pos);const h=i.ifcGuid;if(e.has(h)&&(o[e.get(h)]=s,a++,a===t.length))return o}return o.length!==t.length&&console.warn("Not all ids could be converted"),o}getAllEntityIds(){const t=this.modelEntities.entitiesLength(),e=new Set;for(let i=0;i<t;i++)e.add(i);return e}getEntitiesFromIds(t){if(t){const e=Array(t.length);for(let i=0,s=t.length;i<s;i++)e[i]=this.getEntity(t[i]);return e}{const t=this.modelEntities.entitiesLength(),e=Array(t);for(let i=0;i<t;i++)e[i]=this.getEntity(i);return e}}}const ls=t=>new hs({data:t.bb.bytes().slice(t.bb_pos,t.bb_pos+16)});class ds{constructor(t,i){this.modelId=t,this.messenger=i,this.texture=new e.Technology.TrimBim.Fbs.Texture}async sendModelTextures(t){const e=t.geometry();this.transparency=new Array(e.texturesLength());for(let t=0;t<e.texturesLength();t++){const i=e.textures(t,this.texture),s=new Int8Array(i.bytesLength());s.set(i.bytesArray());const r=await this.messenger.request({type:2,modelId:this.modelId,textureId:t,image:s,imageFormat:i.type()},[s.buffer]);this.transparency[t]=r.transparent}}isTransparent(t){return this.transparency[t]}async sendTexts(t,e){return(await this.messenger.request({type:3,modelId:this.modelId,texts:t,styles:e})).textureDesc}}var us=e.Technology.TrimBim.Fbs;class ps{constructor(t,e,s,r){this.modelId=t,this.messenger=s,this.editing=r;const n=new i.ByteBuffer(new Uint8Array(e));this.model=us.Model.getRootAsModel(n),this.layerManager=new yt(this.model),this.boundingBoxManager=r?new Ni(this.model):new ts(this.model),this.textureManager=new ds(t,s),this.materialManager=new ft(t,this.textureManager,((t,e)=>s.request(t,e))),this.hierarchyManager=new Yi(this.model),this.entityState=new Zi(this.model,this.hierarchyManager)}async createCaches(){await this.textureManager.sendModelTextures(this.model);const t=this.materialManager.sendModelMaterials(this.model);this.geometryManager=this.editing?new Di(this.modelId,this.messenger,this.model,this.boundingBoxManager,this.entityState,this.layerManager,this.textureManager,t):new os(this.modelId,this.messenger,this.model,this.boundingBoxManager,this.entityState,this.layerManager,this.textureManager,t),this.pickManager=new qi(this.model,this.boundingBoxManager,this.geometryManager,this.entityState,this.layerManager),this.queryManager=new cs(this.model,this.boundingBoxManager,this.hierarchyManager),await this.geometryManager.createGeometryPrototypes()}updateLoop(t){return this.geometryManager.updateLoop(t),this.geometryManager.updateFinished}pick(t,e,i){if(this.camera)return this.pickManager.pick(t,e,this.camera.clipPlanes,i)}pickSnapped(t,e,i){if(this.camera)return this.pickManager.pickSnapped(t,e,i,this.camera.clipPlanes)}pickOnLine(t,e){return this.pickManager.pickOnLine(t,e)}getHierarchyRoots(t){return this.hierarchyManager.getRoots(t)}getEntityIdsWithGeometry(){return this.geometryManager.getEntityIdsWithGeometry()}getHierarchyParents(t,e,i){return this.hierarchyManager.getParents(t,e,i)}getHierarchyChildren(t,e){return this.hierarchyManager.getChildren(t,e)}areaPick(t,e){if(this.camera)return this.pickManager.areaPick(t,this.camera.clipPlanes,e)}setSelection(t){this.entityState.clearSelection(),this.forEachEntity(t,(t=>this.entityState.setSelected(t,!0))),this.geometryManager.forceStateUpdate(t)}forEachEntity(t,e){if(t)for(let i=0;i<t.length;i++)e(t[i],i);else for(let t=0;t<this.entityState.length;t++)e(t,t)}setHovered(t){this.entityState.resetHovered(),this.forEachEntity(t,(t=>this.entityState.setHovered(t,!0))),this.geometryManager.forceStateUpdate(t)}setCustomMaterial(t,e){const i=[];this.forEachEntity(t,(t=>{const s=this.entityState.getCustomMaterialId(t);if(s){const t=this.materialManager.getMaterial(s),r=Object.assign({},e);void 0===r.color&&void 0!==t.color&&(r.color=t.color),void 0===r.opacity&&void 0!==t.opacity&&(r.opacity=t.opacity),void 0===r.transparent&&void 0!==t.transparent&&(r.transparent=t.transparent),void 0===r.side&&void 0!==t.side&&(r.side=t.side),void 0===r.textureId&&void 0!==t.textureId&&(r.textureId=t.textureId),i.push(r)}else i.push(e)}));const s=this.materialManager.sendMaterials(i);this.forEachEntity(t,((t,e)=>{this.entityState.setCustomMaterialId(t,s[e])})),this.geometryManager.forceStateUpdate(t)}getCustomMaterials(t){const e=[];return this.forEachEntity(t,(t=>{const i=this.entityState.getCustomMaterialId(t);e.push(i?this.materialManager.getMaterial(i):void 0)})),e}getCustomMaterialEntityIds(){const t=[];for(let e=0;e<this.entityState.length;e++)this.entityState.getCustomMaterialId(e)&&t.push(e);return t}setVisibility(t,e){this.forEachEntity(t,(t=>this.entityState.setVisible(t,e))),this.geometryManager.forceStateUpdate(t)}setPickPriority(t,e){this.forEachEntity(t,(t=>this.entityState.setPickPriority(t,e)))}getEntitiesLength(){return this.model.entities().entitiesLength()}getEntities(t){return this.queryManager.getEntitiesFromIds(t)}getProducts(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=this.getEntityProduct(t[i]);return e}getLayers(){return this.layerManager.getLayers()}findLayersByEntities(t){return t=t.concat(this.hierarchyManager.getChildren(t,!0)),this.layerManager.findLayersByEntities(t)}getLayerVisibility(t){return this.layerManager.getLayerVisibility(t)}setLayerVisibility(t,e){this.layerManager.setLayerVisibility(t,e),this.geometryManager.forceUpdate()}getEntityParentId(t,e){if(void 0===e)return t;const i=this.queryManager.getParents([t],e)[0];return void 0!==i?i:t}getEntity(t){return this.queryManager.getEntity(t)}getEntityProduct(t){return this.queryManager.getProduct(this.queryManager.getProductId(t))}getProperties(t){return this.queryManager.getProperties(t)}aggregateProperties(t,e){return this.queryManager.aggregateProperties(t,e)}findEntitiesByClass(t){return this.queryManager.findByClass(t)}findEntitiesByProperty(t,e){return this.queryManager.findByProperty(t,e)}findEntitiesByGeometryType(t){return this.queryManager.findByGeometryType(t)}findEntitiesByLayer(t){return this.queryManager.findEntitiesByLayer(this.layerManager.getLayerIndex(t))}setCamera(t){this.camera=t,this.geometryManager.setCamera(t)}getBoundingBox(){return this.boundingBoxManager.modelBoundingBox}getEntitiesBoundingBox(t){const e=new I;return this.queryManager.getAABBFromIds(t,e),e}resetCustomMaterials(t){if(t)for(const e of t)this.entityState.setCustomMaterialId(e,0);else this.entityState.resetMaterialIds();this.geometryManager.forceUpdate()}clearSelection(){this.entityState.clearSelection(),this.geometryManager.forceUpdate()}resetVisibility(){this.entityState.resetVisibility(),this.geometryManager.forceUpdate()}resetPickPriority(){this.entityState.resetPickPriority()}getPropertySetNames(){return this.queryManager.getPropertySetNames()}getPropertyDefinitions(t){return this.queryManager.getPropertyDefinitions(t)}getPropertyValues(t){return this.queryManager.getPropertyValues(t)}guidsToEntityIds(t){return this.queryManager.getEntityIdsFromGuids(t)}getVisibleEntityIds(t,e){const i=e?e=>this.entityState.isVisibleByHierarchy(e)===t:e=>this.entityState.isVisible(e)===t;return this.getEntityIdsByState(i)}getEntityIdsByPickPriority(t,e){const i=e?e=>this.entityState.getPickPriorityByHierarchy(e)===t:e=>this.entityState.getPickPriority(e)===t;return this.getEntityIdsByState(i)}getEntityIdsByState(t){const e=[];for(let i=0,s=this.model.entities().entitiesLength();i<s;i++)t(i)&&e.push(i);return e}setEntityTransform(t,e){this.geometryManager.setEntityTransform(t,e)}getBuffer(){return this.model.bb.bytes().buffer}dispose(){this.geometryManager.dispose()}}class _s extends class{constructor(t){this.onRequest=t,this.nextMessageId=0,this.callbacks=new Map,this.processMessage=t=>{t.data.isResponse?this.processResponse(t.data):this.processRequest(t.data)}}setupPort(t){t.onmessage=this.processMessage}request(t,e){return t.messageId=this.nextMessageId++,new Promise((async(i,s)=>{this.callbacks.set(t.messageId,(t=>{t.error?s(t.error):i(t)}));(await this.getPort(t)).postMessage(t,e)}))}processResponse(t){const e=this.callbacks.get(t.messageId);this.callbacks.delete(t.messageId),e(t)}async processRequest(t){try{await this.onRequest(t)}catch(e){console.error(e),t.error=e.toString()}t.isResponse=!0,(await this.getPort(t)).postMessage(t)}}{constructor(t,e){super(e),this.messagePort=t,this.setupPort(t)}async getPort(t){return this.messagePort}}function gs(t,e){for(let e=0;e<t.args.length;e++)t.args[e]&&t.args[e].elements&&(t.args[e]=xs(t.args[e])),t.args[e]&&t.args[e].origin&&t.args[e].direction&&(t.args[e]=vs(t.args[e]));const i=e.get(t.modelId);t.result=i[t.methodName].apply(i,t.args),t.args=void 0}function fs(t){return(new a).copy(t)}function ms(t){return t?t.map((t=>new p(fs(t.normal),t.constant))):t}function ys(t){if(!t)return;const e=ms(t.planes);return new W(e[0],e[1],e[2],e[3],e[4],e[5])}function vs(t){return new J(fs(t.origin),fs(t.direction))}function xs(t){return(new tt).copy(t)}const Ts=new class extends class{constructor(){this.it=this}setPort(t){this.messenger=new _s(t,(async t=>{const e=this.it[t.type];e?await e(t):console.warn("Handler not found for worker message type "+t.type)}))}}{constructor(){super(),this.models=new Map,this.it[5]=async t=>{const e=new ps(t.modelId,t.buffer,this.messenger,t.editing);await e.createCaches(),this.models.set(t.modelId,e),t.buffer=void 0,t.boundingBox=e.getBoundingBox()},this.it[6]=t=>{this.models.get(t.modelId).dispose(),this.models.delete(t.modelId)},this.it[9]=t=>{if(t.snapTypes)t.hits=this.models.get(t.modelId).pickSnapped(vs(t.ray),ys(t.frustum),t.snapTypes);else if(t.ray){const e=this.models.get(t.modelId).pick(vs(t.ray),ys(t.frustum),t.navigation);e&&(t.hits=[e])}else t.childrenEntityIds=this.models.get(t.modelId).areaPick(ys(t.frustum),t.frustumPickContainedOnly)},this.it[7]=t=>{t.camera.frustum=ys(t.camera.frustum),t.camera.position=fs(t.camera.position),t.camera.clipPlanes=ms(t.camera.clipPlanes);const e=this.models.get(t.modelId);e&&e.setCamera(t.camera)},this.it[8]=t=>{t.boundingBoxes=[];const e=this.models.get(t.modelId);if(t.entityIdGroups)for(const i of t.entityIdGroups){const s=e.getEntitiesBoundingBox(i);t.boundingBoxes.push(s)}else{const i=[0];for(let s=0,r=e.getEntitiesLength();s<r;s++){i[0]=s;const r=e.getEntitiesBoundingBox(i);t.boundingBoxes.push(r)}}t.entityIdGroups=void 0},this.it[10]=t=>{t.names=this.models.get(t.modelId).getPropertySetNames()},this.it[11]=t=>{t.properties=this.models.get(t.modelId).getPropertyDefinitions(t.setName)},this.it[12]=t=>{t.properties=this.models.get(t.modelId).getPropertyValues(t.propertyName)},this.it[13]=t=>{t.entityIds=this.models.get(t.modelId).guidsToEntityIds(t.guids)},this.it[14]=t=>{this.models.get(t.modelId).aggregateProperties(t.entityIds,t.aggregations),t.entityIds=void 0},this.it[0]=t=>{gs(t,this.models)},this.startUpdateLoop()}startUpdateLoop(){const t=()=>{let e=!0;const i=performance.now();for(const t of this.models.values())if(e=e&&t.updateLoop(i),performance.now()-i>15)break;setTimeout(t,e?100:0)};t()}};return self.onmessage=t=>Ts.setPort(t.data),t.processCallMessage=gs,t.restoreFrustum=ys,t.restoreMatrix4=xs,t.restorePlanes=ms,t.restoreRay=vs,t.restoreVector=fs,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=TrimbimWorker.js.map
